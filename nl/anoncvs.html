<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD AnonCVS</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="description" content="Hoe men OpenBSD updates via Internet verkrijgt met behulp van Anonymous CVS">
<meta name="keywords" content="openbsd,anoncvs,updates">
<meta name="distribution" content="global">
<meta name="copyright" content="Dit document copyright 1996-2002 door OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Anonymous CVS</font></h2>

<hr>

<h3>Inhoud</h3>

<ul>
<li><a href="#anoncvs">Wat is Anonymous CVS?</a>
<li><a href="#CVS">Wat is CVS?</a>
<li><a href="#starting">Beginnen met Anonymous CVS</a>
<li><a href="#using">CVS gebruiken om je Source Tree Op te halen en te
Updaten</a>
<li><a href="#CVSROOT">Beschikbare Anonymous CVS-Servers</a>
<li><a href="#CRYPTO">Crypto broncode ophalen via cvs(1)</a>
<li><a href="#EXAMPLE">Voorbeelden van cvs(1)</a>
<li><a href="#WHICH">rsh(1) of ssh(1)?</a>
<li><a href="#SUP">De CVS repository mirroren via sup(1)</a>
<li><a href="#MIRROR">Een anoncvs mirror opzetten</a>
</ul>

<hr>

<h3><a name="anoncvs"><font color="#0000e0">Wat is Anonymous CVS?</font></a></h3>

<p>
Anonymous CVS is een methode om je lokale kopie van de OpenBSD source tree up to
date te houden met de wijzigingen die in de huidige OpenBSD broncode gemaakt
worden.
Naast het volgen van de bleeding edge ontwikkelingen is het ook mogelijk om de
errata-patches van een versie te volgen.
</p>

<p>
Het grote voordeel van Anonymous CVS over andere technieken om broncode te
updaten is dat het werkt met een centrale broncode repository of mirror.  Dit
betekent dat je de volledige set van CVS-commando's tot je beschikking hebt om
je wijzigingen samen te voegen en te updaten met andere wijzigingen in de
broncode en om diffs uit te voeren, histories te wijzigen en andere queries
tegen de centrale repository. 
</p> 

<p>
Het OpenBSD-project heeft op dit moment vijf broncode-repositories:
</p>

<ul>
  <li><b>src</b> - Bevat alle broncode voor het OpenBSD Besturingssysteem.</li>
  <li><b>ports</b> - Bevat de <a href="ports.html">OpenBSD Ports</a>.</li>
  <li><b>www</b> - Bevat alle OpenBSD webpagina's. (Inclusief deze).</li>
  <li><b>X11</b> - Bevat OpenBSD's adaptie van het
      <a href="http://www.XFree86.org/">XFree86-3</a> software-project.</li>
  <li><b>XF4</b> - Bevat OpenBSD's adaptie van het
      <a href="http://www.XFree86.org/">XFree86-4</a> software-project.</li>
</ul>

<p>
Samenvattend is de ware kracht van Anonymous CVS dat het een "tolerant"
broncodecontrolesysteem is - het <strong>respecteert</strong> wijzigingen die je
hebt gemaakt aan je lokale broncode en doet
<strong>zoveel mogelijk zijn best</strong> om je gehele source tree te updaten,
in plaats van je achter te laten met een lijst van geheimzinnige problemen die
opgelost moeten worden voordat je verder kan.
</p>

<h3><a name="CVS"><font color="#0000e0">Wat is CVS?</font></a></h3>

<p>
<a href="why-cvs.html">
CVS is het broncodecontrolesysteem dat gebruikt wordt om de OpenBSD source tree te onderhouden.</a>
Het implementeert een centrale repository voor alle officieel uitgebrachte
broncode en wijzigingen, een stelt ontwikkelaars in staat om lokale kopieen van
de broncode te onderhouden met hun wijzigingen.  Ontwikkelaars met
"<b>schrijfrechten</b>" kunnen direct wijzigingen aanbrengen aan de OpenBSD
source tree, terwijl "Anonymous CVS" gebruikers "<b>leesrechten</b>" hebben en
hun lokale kopieen van de broncode up to date kunnen houden en queries kunnen
uitvoeren tegen de centrale repository.
</p>

<p>
De grote kracht van CVS is dat het de mogelijkheid heeft om wijzigingen in de
centrale repository en wijzigingen die je in je lokale kopie aanbrengt
intelligent samen te voegen.  Dit betekent dat wanneer je een wijziging
aanbrengt in een module en een update uitvoert jouw wijzigingen niet
"weggevaagd" worden, CVS doet daarentegen zijn best om de wijzigingen die
aangebracht zijn in de centrale code samen te voegen met de wijzigingen die je
in je lokale kopie hebt gemaakt.
</p>

<p>
Wanneer de wijzigingen niet volledig samengevoegd kunnen worden heeft CVS een
"soft fallback", welke je aangetekende wijzigingen aan je lokale kopie geeft,
een ongewijzigde kopie van jouw versie behoudt en vervolgt met het updaten van
andere broncode-modules die je aangevraagd hebt.
</p>

<h3><a name="starting"><font color="#0000e0">Beginnen met Anonymous CVS</font></a></h3>

<p>
De nieuwste versie van CVS is beschikbaar op
<a href="http://www.cvshome.org/">Cyclic</a>.
Versies ouder dan 1.6 worden niet aangeraden en zouden niet kunnen werken.
Als je OpenBSD al geinstalleerd hebt is CVS inbegrepen.
</p>

<p>
Mensen die een OpenBSD CD bezitten hebben wellicht de <i>CVS/</i>-directories
erop gezien. 
Daar is een reden voor, de CD heeft een checkout van de OpenBSD
<b>src</b>-module welke geupdate kan worden.  Door gebruik te maken van deze
tree is de aanvankelijke CVS update veel sneller dan een verse checkout van de
volledige OpenBSD source tree.  Er zijn twee manieren om de CD te gebruiken:
</p>

<ul>
<li>Om de CVS tree te kopieren van de CD naar <i>/usr/src</i> (aannemend dat de
CD gemount is op /mnt):
<pre>
	# <b>cd /mnt; pax -rw CVS Makefile [a-z]* /usr/src</b>
</pre>
<li>Gebruik een union mount (zie <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_union&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">mount_union(8)</a>)
met de CD in een schrijfbare directory. (Dit kan gebruikt worden wanneer men
alleen de tree compileert.)
<pre>
	# <b>mount -t union -o -b /mnt /usr/src</b>
</pre>
</ul>

<p>
Voor mensen die geen CD bij de hand hebben kan men <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">
cvs(1)</a> een "<b>checkout</b>" laten uitvoeren op de broncode repository. Dit
wordt besproken in de <a href="#using">volgende sectie</a>.
</p>

<p>
Hierna is <i>/usr/src</i> een mooi checkout-gebied waar alle
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">
cvs(1)</a>-commando's zullen werken.
</p>

<h3><a name="using"><font color="#0000e0">CVS gebruiken om je source tree Op te halen en te Updaten</font></a></h3>

<p>
CVS is ontworpen om een eenvoudige manier te zijn om je broncode op te halen en
te updaten, daarom komt er niet veel bij kijken om dat uit te voeren.  Je moet
eerst bepalen of je de <i>current</i> of de patch branch wilt volgen.
De current branch bevat alle laatste wijzigingen, terwijl de patch branch een
formele uitgave bevat plus de patches van <a href="../errata.html">errata</a>.
Zie voor een definitie van <i>current</i> de
<a href="../faq/upgrade-minifaq.html#1.1">Upgrade Mini-FAQ</a>.

<p>Wanneer je eenmaal hebt besloten welke tree je wilt volgen moet je kiezen
welke Anonymous CVS-server je gaat gebruiken.  Een lijst van deze servers
bevindt zich <a href="#CVSROOT">hieronder</a>.  Merk op echter dat er drie
manieren zijn om deze servers te benaderen.
</p>

<dl>
<dt><b>ssh</b><dd>Secure Shell kan gebruikt worden om de anonymous CVS-servers
te benaderen. Dit is de <em>aanbevolen</em> manier om het te doen, omdat het
versleuteld is. Sinds 2.6 heeft OpenBSD OpenSSH ingebrepen in zijn
standaarddistributie.
<dt><b>rsh</b><dd>Remote Shell kan gebruikt worden op sommige servers voor
gebruikers die geen toegang hebben tot
<a href="http://www.openssh.com/nl/">ssh</a>.
<dt><b>pserver</b><dd>pserver is hoofdzakelijk nuttig voor gebruikers die achter
een firewall zitten die de andere twee verbindingen blokkeert.
</dl>

<p>
<b>N.B.:</b> Voor gebruikers die rsh willen gebruiken, je moet eerst de
<var>CVS_RSH</var> variabele op rsh zetten.

<ul>
<li>Voor Korn/Bourne shells:
<pre>
	$ <b>export CVS_RSH=/usr/bin/rsh</b>
</pre>
<li>Voor csh/tcsh:
<pre>
	% <b>setenv CVS_RSH /usr/bin/rsh</b>
</pre>
</ul>

<p>
Wanneer je eenmaal hebt besloten welke <a href="#CVSROOT">Anonymous CVS
Server</a> je wilt gebruiken en welke methode je gaat gebruiken kan je beginnen
cvs te gebruiken. Voor jullie die CD's hebben kan je beginnen met de CVS
checkout die op de CD staat met de <a href="#starting">hierboven</a> genoemde
methode om de broncode op je systeem te krijgen.
Als je geen CD bij de hand hebt gebruik dan de methode hieronder om een checkout
van de broncode te maken.
Deze methode plaatst de OpenBSD source tree in <i>/usr/src</i>.
</p>

<pre>
	# <b>cd /usr; cvs checkout -P src</b>
</pre>

<p>
Bovenstaande zal een checkout uitvoeren van de <i>current</i> source tree .
Velen van jullie zullen enkel de broncode van de patch branch willen.  Om een
checkout uit te voeren van de patch branch moet je een tag specificeren bij je
commando. Bijvoorbeeld:
</p>

<pre>
	# <b>cd /usr; cvs checkout -P -rOPENBSD_3_4 src</b>
</pre>
<p>
Of OPENBSD_3_1 voor 3.1, etc.

<p> De OPENBSD_3_4 tag bevat de broncode van de uitgave plus de
errata reeds toegepast.

<h3><a name="CVSROOT"><font color="#0000e0">Beschikbare Anonymous CVS-Servers
</font></a></h3>

<p>
Er zijn twee niveau's toegang tot de source tree: 

<dl>
<dt><strong>Lezen-schrijven toegang voor ontwikkelaars::</strong>
<dd>Ontwikkelaars die wijzigingen moeten toepassen moeten een account hebben op
de OpenBSD-machines.  Het krijgen van deze toegang is een normaal gevolg van
werken aan de broncode met andere OpenBSD-ontwikkelaars.
Als iemand goed werk verricht en laat zien dat deze kan samenwerken met het team
zal deze een account krijgen.
</dl>

<dl>
<dt><strong>Alleen-lezen toegang voor iedereen:</strong>
<dd>Iedereen kan de alleen-lezen CVS repositories benaderen. Deze kopieen van de
lezen-schrijven CVS repository worden vaak gemirrored. Zet om er een te
gebruiken je <var>CVSROOT</var> omgevingsvariabele op een van de volgende
waardes:
<p>
<em>Lees alstublieft de opmerking over <a href="#WHICH">ssh vs. rsh</a> hieronder!</em>
<p>
<ul>
<li><strong>CVSROOT=anoncvs@anoncvs1.usa.openbsd.org:/cvs</strong><br>
Host ook bekend als <strong>anoncvs@anoncvs4.usa.openbsd.org</strong>.<br>
gesitueerd in Redwood City, Californi&euml;, westelijk USA.<br>
onderhouden door <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
protocollen: rsh, ssh, ssh poort 2022, pserver.<br>
elke 4 uur geupdate.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.usa.openbsd.org:/cvs</strong><br>
Host ook bekend als <strong>anoncvs3.usa.openbsd.org</strong>.<br>
gesitueerd op de University of Colorado, Boulder, westelijk USA.<br>
onderhouden door <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
protocollen: rsh, ssh, ssh poort 2022, pserver.<br>
elke 3 uur geupdate.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs6.usa.openbsd.org:/cvs</strong><br>
Host ook bekend als <strong>openbsd.citi.umich.edu</strong>.<br>
gesitueerd op de University of Michigan, centraal USA.<br>
onderhouden door <a href="mailto:rees@umich.edu">Jim Rees</a>.<br>
protocollen: ssh, ssh poort 2022.<br>
elke 12 uur geupdate.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs1.ca.openbsd.org:/cvs</strong><br>
Host ook bekend als <strong>anoncvs.ca.openbsd.org</strong>, 
<strong>openbsd.sunsite.ualberta.ca</strong><br>
gesitueerd in Edmonton, Alberta, Canada.<br>
onderhouden door <A HREF="mailto:beck@ualberta.ca">Bob Beck</A>.<br>
protocollen: ssh, rsh, ssh poort 2022, pserver<br>
elke 2 uur geupdate.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.no.openbsd.org:/cvs</strong><br>
Host ook bekend als <strong>cvs.inet.no</strong>.<br>
gesitueerd in Noorwegen.<br>
onderhouden door <a href="mailto:cvsadmin@inet.no">Michael Shuldman</a>.<br>
protocollen: rsh, ssh, ssh poort 2022.<br>
elke 4 uur geupdate.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.be.openbsd.org:/cvs</strong><br>
Host ook bekend als <strong>badlands.rug.ac.be</strong>.<br>
gesitueerd in Belgi&euml;.<br>
onderhouden door <a href="mailto:wvdputte@reptile.rug.ac.be">Wim Vandeputte</a>.<br>
protocollen: ssh, ssh poort 2022.<br>
elke 3 uur geupdate.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.nl.openbsd.org:/cvs</strong><br>
Host ook bekend als <strong>anoncvs.calyx.nl</strong>.<br>
gesitueerd in Amsterdam, Nederland.<br>
onderhouden door <a href="mailto:nick@calyx.net">Nick Merrill</a> en
<a href="mailto:alex@calyx.nl">Alexander Grendel</a>.<br>
protocollen: ssh.<br>
elke 3 uur geupdate.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.jp.openbsd.org:/cvs</strong><br>
Host ook bekend als <strong>kankoromochi.econ.nagasaki-u.ac.jp</strong>.<br>
gesitueerd op Nagasaki Univ. Faculty of Economics, JAPAN.<br>
onderhouden door <a href="mailto:sigh@net.nagasaki-u.ac.jp">SUZUKI Hitoshi</a>.<br>
protocollen: ssh, pserver.<br>
elke 3 uur geupdate.<br>
<p>
<li><strong>CVSROOT :pserver:anoncvs@cvs.bsdfr.org:/cvs</strong><br>
gesitueerd in Frankrijk<br>
onderhouden door: <a href="mailto:jch@oleane.net">Jean-Claude Christophe</a>.<br>
protocollen: pserver<br>
elke 24u geupdate <br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.de.openbsd.org:/cvs</strong><br>
Host ook bekend als <strong>grappa.unix-ag.uni-kl.de</strong>.<br>
gesitueerd op de University of Kaiserslautern, Duitsland<br>
onderhouden door <A HREF="mailto:naddy@openbsd.org">Christian Weisgerber</A>.<br>
protocollen: ssh, ssh poort 2022, pserver<br>
elke 6 uur geupdate van anoncvs.usa.openbsd.org.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.pl.openbsd.org:/cvs</strong><br>
Host ook bekend als <strong>anoncvs1.pl.openbsd.org</strong>, 
<strong>incredible.bmtmc.gda.pl</strong><br>
Gesitueerd bij BMT Maritime Consultants, Gdansk, Polen<br>
onderhouden door <A HREF="mailto:detergent@incredible.bmtmc.gda.pl">
Adam Naguszewski</A>.<br>
protocollen: ssh, pserver<br>
elke 3 uur geupdate.<br>
<p>
<li><strong>CVSROOT=anoncvs@rt.fm:/cvs</strong><br>
Gesitueerd in Lake in the Hills, Illinois, USA<br>
onderhouden door <A HREF="mailto:jcs@rt.fm">
Joshua Stein</A>.<br>
protocollen: ssh<br>
elke 3 uur geupdate.<br>
<p>
<li><strong>CVSROOT=anoncvs@cvs.openbsd.cz:/cvs</strong><br>
Gesitueerd in Praag, Tjechische Republiek<br>
onderhouden door <A HREF="mailto:vlada@openbsd.cz">Vladimir Kotal</A>.<br>
protocollen: ssh, pserver.<br>
elke 4 uur geupdate.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.openbsd.org.ua:/cvs</strong><br>
Gesitueerd in Kiev, Ukra&iuml;ne<br>
onderhouden door <A HREF="mailto:hunter@dg.net.ua">Sergey Smitienko</A>.<br>
protocollen: ssh<br>
elke 6 uur geupdate.<br>
<p>
<li><strong>CVSROOT=openbsd@openbsd.bug.it:/cvs</strong><br>
Gesitueerd in Modena, Itali&euml;<br>
onderhouden door <A HREF="mailto:jwk@bug.it">Giacomo Cariello</A>.<br>
protocollen: ssh, wachtwoord "openbsd"<br>
elke 6 uur geupdate.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.openbsd.lt:/cvs</strong><br>
Host ook bekend als <strong>anoncvs.studentas.lt</strong><br>
Gesitueerd op LITNET NOC, Academical and Research Network, Kaunas, Litouwen.<br>
onderhouden door <a href="mailto:helpas@aic.lt">Donatas Budvytis</a>.<br>
protocollen: ssh, wachtwoord "anoncvs"<br>
elke 3 uur geupdate vanaf anoncvs.usa.openbsd.org.<br>
<p>
<li><strong>CVSROOT=anoncvs@openbsd.informatik.uni-erlangen.de:/cvs</strong><br>
Gesitueerd op de University of Erlangen-Nuremberg, Duitsland<br>
onderhouden door <a href="mailto:Alexander.Gernler@informatik.stud.uni-erlangen.de">Alexander von Gernler</a>.<br> 
protocollen: ssh, ssh poort 2022, pserver<br>
elke 2 uur geupdate vanaf cvsup.uk.openbsd.org.<br>
<p>
<li><strong>CVSROOT=anoncvs@mirror.osn.de:/cvs</strong><br>
Gesitueerd in N&uuml;rnberg, Duitland<br>
onderhouden door <a href="mailto:aw@osn.de">Armin Wolfermann</a>.<br>
protocollen: ssh<br>
elke 4 uur geupdate.<br>
<p>
<li><strong>CVSROOT=anoncvs@openbsd.chem.uw.edu.pl:/cvs</strong><br>
Gesitueerd in Warschau, Polen<br>
onderhouden door <a href="mailto:admin@chem.uw.edu.pl">Piotr Klein</a>.<br>
protocollen: ssh<br>
elke 3 uur geupdate.<br>
</ul>


<p>
<em>N.b.:</em> Als je server niet op de lijst voorkomt of met onjuiste of
onvolledige informatie neem alstublieft contact op met
<a href="mailto:beck@openbsd.org"><tt>beck@openbsd.org</tt></a>
</p>

<p>
Je kan
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&amp;sektion=8&amp;format=html">traceroute(8)</a>
gebruiken om uit te zoeken welke server het dichtsbij is.
Problemen met een server moeten gemeld worden aan de <b>onderhouder</b> van de
server in kwestie.
</dl>

<h3><a name="CRYPTO"><font color="#0000e0">Crypto broncode ophalen via
cvs(1)</font></a></h3>

<p>
<strong>BELANGIJKE OPMERKING:</strong>
Er zijn enkele kwesties rondom cryptografische software waar iedereen bewust van
moet zijn:
<ul>
<li>De OpenBSD broncode komt uit Canada.
Zoals
	<a href="http://www.efc.ca/pages/doc/crypto-export.html">
	onderzocht door een Canadees individu</a>
en zoals
	<a href="http://axion.physics.ubc.ca/ECL.html">
	beschreven in de Export Control List van Canada</a>
is het legaal om crypto-software te exporteren van Canada naar de wereld.
<p>
<li>Echter wanneer je je buiten de USA of Canada bevindt moet je de
cryptografische onderdelen van de OpenBSD broncode niet halen van een
anoncvs-server gesitueerd in de USA. De bestanden in kwestie zijn...
<ul>
<li>src/kerberosIV/*
<li>src/kerberosV/*
<li>src/lib/libdes/*
<li>src/lib/libc/crypt/crypt.c
<li>src/lib/libc/crypt/morecrypt.c
<li>src/sys/crypto
<li>src/sys/netinet
<li>src/usr.sbin/afs/src/rxkad/*
<li>XF4/xc-mit/lib/Xdmcp/Wraphelp.c
<li>XF4/xc-old/lib/Xdmcp/Wraphelp.c
<li>XF4/xc/lib/Xdmcp/Wraphelp.c
</ul>
Vanwege de USA ITAR munitielist,
mag crypto-software alleen geexporteerd worden van de USA naar Canada.
<p>
<li>Het OpenBSD-project is op zoek naar meer anoncvs-servers --
leer verder om uit te vinden hoe je kan helpen.
</ul>

<h3><a name="EXAMPLE"><font color="#0000e0">Voorbeelden van cvs(1)</font></a></h3>

<P>
N.B.: Als je een branch wilt updaten (zoals de patch branch)
naar <i>current</i>, geef je de <code>-A</code> flag meegeven aan cvs, maar
anders is deze flag van weinig betekenis.  Sommige oudere versies van de
OpenBSD-documentatie hebben deze flag aanbevolen in veel voorbeelden. We raden
deze flag niet langer aan tenzij absoluut noodzakelijk.

<p>
Een voorbeeld van het gebruik van een anoncvs-server zou zijn:
<pre>
% <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cd /tmp</strong>
% <strong>cvs get src/sys/arch/sparc</strong>
    [kopieert de bestanden van de repository naar je machine]
% <strong>cvs log src/sys/arch/sparc/sparc/locore.s</strong>
    [toont het commit-log voor het aangegeven bestand]
% <strong>cvs diff -bc -r1.1 -r1.5 src/sys/arch/sparc/sparc/locore.s</strong>
    [toons de wijzigingen tussen de revisies 1.1 en 1.5]
</pre>

<p>
<a name="pserver">Om een cvs ``pserver'' te gebruiken (een directe
TCP-verbinding in plaats van ssh of rsh gebruiken) moet je een maal inloggen:
</a>

<pre>
% <strong>setenv CVSROOT :pserver:anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cvs login</strong>
(Logging in to anoncvs@anoncvs1.ca.openbsd.org)
CVS password: <strong>anoncvs</strong>
    [Dit schrijft een regel naar ~/.cvspass (bestandsnaam overschreven door CVS_PASSFILE.]
    [Een voorbeeldregel voor mijn ~/.cvspass na het intoetsen van 'blah' voor het        ]
    [bovenstaande wachtwoord is:                                                         ]
    [:pserver:anoncvs@anoncvs5.usa.openbsd.org:/cvs Au'yc                                ]
    [Na EEN maal ingelogt te hebben werkt elk commando voor CVSROOT.                     ]
% <strong>cvs get ksrc-i386 ksrc-common</strong>
    [Haalt ENKEL dat op wat nodig is om een i386 kernel te herbouwen.                    ]
</pre>

<p>
Hier is hoe iemand die regelmatig anoncvs gebruikt zijn source tree
zou updaten:
<ul><li>Begin eerst met het verkrijgen van een tree:

<p> (Wanneer je <i>current</i> volgt):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -P src</strong>
</pre>

<p> (Wanneer je de patch branch voor 3.4 volgt):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -rOPENBSD_3_4 -P src</strong>
</pre>
</li>

<li> Om deze tree hierna ooit te updaten:
<p> (Wanneer je <i>current</i> volgt):
<pre>
	# <strong>cd /usr/src</strong>
	# <strong>cvs -q up -Pd</strong>
</pre>

<p> (Wanneer je de patch branch voor 3.4 volgt):
<pre>
	# <strong>cd /usr/src</strong>
	# <strong>cvs -q up -rOPENBSD_3_4 -Pd</strong>
</pre>

Elke keer dat je dit uitvoert zal het je /usr/src tree synchroniseren. Het zal
geen lokale wijzigingen vernietigen, maar zal proberen de wijzigingen samen te
voegen. Als je obj directories gebruikt (niet obj symbolische links) kan je "-I
obj" toevoegen aan het cvs commando, waardoor cvs geen waarschuwing geeft over
alle obj directories die het gaat tegenkomen die zich niet in de repository
bevinden.

<p>
<li> N.B.:
Als je een source tree update die je aanvankelijk van
een andere server hebt gehaald of van een CD <strong>moet</strong>
je de <em>-d $CVSROOT</em> optie aan cvs toevoegen.
<pre>
	# <strong>cd /usr/src</strong>
	# <strong>cvs -d $CVSROOT -q up -Pd</strong>
</pre>
</li>
</ul>

<p>
Om <a href="ports.html">ports</a> te <a name="ports">gebruiken</a>, is het
gelijk aan src:
<ul><li>
<p> (Wanneer je <i>current</i> volgt):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -P ports</strong>
</pre>
<p> (Wanneer je de patch branch voor 3.4 volgt):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -rOPENBSD_3_4 -P ports</strong>
</pre>
<li> Om deze tree hierna ooit te updaten:
<p> (Wanneer je <i>current</i> volgt):
<pre>
	# <strong>cd /usr</strong>
	# <strong>cvs -q up -Pd ports</strong>
</pre>
<p> (Wanneer je de patch branch voor 3.2 volgt):
<pre>
	# <strong>cd /usr</strong>
	# <strong>cvs -q up -rOPENBSD_3_2 ports</strong>
</pre>
</li>
</ul>

In bovenstaand voorbeeld is <i>-q</i> optioneel, alleen bedoeld om de uitvoer
van cvs te minimaliseren.  Voor degenen die graag schermen vol uitvoer zien kan
het weggelaten worden.

<p>
of om een diff te maken van een lokaal gepatchde module (hier <i>cd.c</i>) om
met een bugreport mee te sturen:
<pre>
	# <strong>cd /usr</strong>
	# <strong>cvs diff -u src/sys/scsi/cd.c &gt; /tmp/patch</strong>
</pre>

<p>
De <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">
cvs(1) manpagina</a>
(inbegrepen bij de CVS-broncode) heeft veel meer
informatie over hoe CVS gebruikt kan worden.

<h4>X11 Source tree</h4>

<p>
Anoncvs mirrors hebben ook de OpenBSD X11 (XFree86) source tree. Je kan
bovenstaand recept toepassen om je XFree86 source tree van de derde CD te
updaten.
Je kan de XFree86 3 source tree kopieren of updaten met de X11 cvs-module,
alhoewel de huidige module die XFree86 4 bevat XF4 is.
Er zijn twee manieren om de XF4 broncode op te halen in <i>/usr/XF4</i>:

<ul>
<li>kopieer de tree van de CD (aannemend dat de derde CD gemount is op /mnt):
<pre>
        # <strong>cd /mnt; cp -Rp XF4 /usr</strong>
</pre>
<li>gebruik een union mount met de CD in een schrijfbare directory.
<pre>
        # <strong>mount -t union -o -b /mnt/XF4 /usr/XF4</strong>
</pre>
</ul>

Hierna zal <i>/usr/XF4</i> klaar zijn om door cvs gebruikt te worden. Je kan
het bijvoorbeeld updaten naar -current (aannemend dat je de <var>CVSROOT</var>
omgevingsvariabele al ingesteld hebt):

<pre>
        # <strong>cd /usr/XF4</strong>
        # <strong>cvs -q update -Pd</strong>
</pre>

<p>
<strong>Waarschuwing:</strong>
Wanneer je cvs gebruikt moet je er goed op letten dat je huidige directory de
root van de tree die je aangeeft is of een aparte plek zoals /tmp.
Sommige commando's zoals "get" kunnen een willekeurige sub-tree aanmaken in de
huidige directory en een volgende update zal deze sub-tree recursief uitbreiden.

<p>
De anoncvs-dienst geeft beginnende ontwikkelaars een kans om CVS te leren en
grondig geintroduceerd te worden aan het ontwikkelproces voordat ze
"commit"-rechten krijgen -- als een gevolg van het tonen van nuttige
vaardigheden en resultaten van hoge kwaliteit zullen ze natuurlijk later
ontwikkelaarstoegang krijgen.  Ook kunnen mensen die patches aangeven hun
"diff"'s tegen de CVS tree genereren wat de integratie makkelijker maakt.


<h3><a name="WHICH"><font color="#0000e0">rsh(1) of ssh(1)?</font></a></h3>

<p>
Standaard gebruik de CVS-client ssh ("secure shell":
<a href="http://www.openssh.com/nl/">OpenSSH</a>) om met de CVS-server te
praten.

<p>
Veel CVS-sites ondersteunen niet langer rsh voor veiligheidsredenen.  Lokale
problemen zoals firewalls of imperfecte protocolemulators zoals slirp kunnen ook
het gebruik van rsh belemmeren.  Wanneer rsh echter gewenst is moet de
<var>CVS_RSH</var> omgevingsvariabele wijzen naar rsh
(gebruikelijk <strong>/usr/bin/rsh</strong>).

<p>
Als het lokaal beleid belemmert om uitgaande verbindingen te maken naar ssh's
standaardpoort van 22 kan daarvoor in de plaats poort 2022 gebruikt worden. 
Merk op dat echter niet alle anoncvs-servers ssh-verbindingen op deze poort
accepteren.  Verder accepteren de meeste anoncvs-servers niet langer het
<strong>none</strong> cipher daar het in recente versies van ssh uitgeschakeld
is voor veiligheidsredenen.  Wees ook niet verleid om compressie aan te zetten:
CVS gebruikt al compressie.

<p>
Men kan het volgende in het
<strong>$HOME/.ssh/config</strong> configuratiebestand plaatsen om de
bovengenoemde valkuilen en restricties te voorkomen:
<pre>
	Host anoncvs.ca.openbsd.org
	    Compression no
	    Port 2022
</pre>

<p>
CVS is een beetje lawaaierig bij het opstarten; om het wat in te tomen kan je
het volgende doen:

<pre>
	<strong>% setenv CVS_CLIENT_PORT -1</strong>
</pre>

<p>
<h3><a name="SUP"><font color="#0000e0">De CVS-repository mirroren via sup(1)</font></a></h3>

<p>
Gebruikers die de OpenBSD CVS tree zelf willen mirroren kunnen dat nu doen via
<em>anoncvs.usa.openbsd.org</em> of <em>anoncvs1.usa.openbsd.org</em>
(dit zijn verschillende machines).  Merk op dat dit de cvs tree is,
<b>niet</b> een checkout van een source tree.  Het is alleen nuttig als je snel
cvs-handelingen wilt uitvoeren (diff, annotate, etc) of als je meerdere source
trees hebt en je wilt de data maar een keer overdragen (je kan dan een checkout
doen van een tree van je lokale cvs-mirror).
<p>
Een voorbeeld van supfile kan zijn:
<pre>
	cvs host=anoncvs.usa.openbsd.org hostbase=/ base=/home delete
</pre>
<p>
welke de cvs tree mirrort naar /home/cvs en de sup databestanden in /home/sup
komen.  De volledige OpenBSD cvs tree is op dit moment 2.2GB
groot.

<h3><a name="MIRROR"><font color="#0000e0">Een anoncvs mirror opzetten</font></a></h3>

<p>
Als je een nieuwe anoncvs mirror site wilt zijn, neem dan alsjeblieft contact op
met de anoncvs-<a href="mailto:sup@openbsd.org">onderhouder</a>.
Anoncvs mirrors vereisen ongeveer 2.2GB schijfruimte en gebruiken tot 32MB
swap per anoncvs-gebruiker (aannemend dat de gebruiker een grote operatie
uitvoert; alhoewel kleinere operaties minder bronnen gebruikt heeft anoncvs nog
steeds meer impact dan ftp of sup).  Zulke anoncvs-machines zouden een zeer
goede netwerkverbinding moeten hebben voor het gebied dat ze zullen dienen. Een
<a href="../anoncvs.shar">document</a>
die de opzet van anoncvs-servers beschrijft is beschikbaar.

<h3><font color="#0000e0">Laatste opmerkingen</font></h3>
Na het upgraden van je source tree zou je de opmerkingen bovenaan
<KBD>/usr/src/Makefile</KBD> moeten lezen voordat je een build probeert.  Ook
zou je indien mogelijk een nieuwe kernel moeten bouwen <strong>voordat</strong> 
je een <KBD>make build</KBD> doet.  In sommige gevallen kan het noodzakelijk
zijn om het <KBD>config</KBD> programma te herbouwen en te installeren voordat
je de kernel kan bouwen.  Als <KBD>config GENERIC</KBD> faalt is dit
waarschijnlijk het geval.
<p>
Het is belangrijk om op te merken dat het upgraden van een release naar de
current tree door de broncode te herbouwen vrij lastig kan zijn door
afhankelijkheden die vaak niet voor de hand liggen.  Daarom wordt aanbevolen dat
je eerst de laatste snapshot installeert voordat je een tree bouwt uit broncode.

<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif" border="0" 
alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>
Originally [OpenBSD: anoncvs.html,v 1.197 ]
<br>
$Translation: anoncvs.html,v 1.14 2004/01/12 23:31:22 rogier Exp $
<br>
$OpenBSD: anoncvs.html,v 1.13 2004/01/19 13:25:44 jufi Exp $
</small>

</body>
</html>
