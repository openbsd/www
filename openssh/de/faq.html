<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenSSH Portable Release for Linux/Solaris/etc</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="the OpenSSH project portable version upgrading issues page">
<meta name="keywords" content="openbsd,portable version,upgrading">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1999-2001 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">

<img alt="[OpenSSH]" height=30 width=141 SRC="../images/smalltitle.gif">
<p>
<h2><font color=#e00000>Portabibilit&auml;t von OpenSSH - Upgrading Hinweis</font><hr></h2>

<P>
	OpenSSH is fast komplett kompatibel mit dem kommerziellenl SSH 1.2.x.
	Es gibt aber trotzdem ein paar Ausnahmen, die du im Kopf behalten musst, wenn du ein Upgrade machst oder SSH zu einem System hinzuf&uuml;gen willst, das nicht standardm&auml;ssig mit SSH ausgeliefert wird.
	
</P>

<OL>
<li><strong>Warum initiiert ssh/scp Verbindungen von den unteren Ports. Meine Firewall
       blockiert sie.
       </strong><p>

       Der OpenSSH Client benutzt die unteren Ports f&uuml;r rhosts und rhosts-rsa Authentifikation,
       weil der Server dem Usernamen vertrauen muss, der vom Client geliefert wird.
       <p>
        Um SSH davon abzuhalten, f&uuml;ge einfach
       <pre>UsePrivilegedPort no</pre> in deine <i>ssh_config</I> oder 
       <i>~/.ssh/config</i> Dateien ein, entferne das setuid Bit vom ssh 
       Programm oder f&uuml;ge <pre>-o "UsePrivilegedPort no"</pre> in deine
       ssh ode scp Kommandzeile ein.
       <p>

<li><strong>Warum ist der ssh Client setuid root?
       </strong><p>

       Der ssh client muss einen niedrigen port f&uuml;r die  rhosts und rhosts-rsa Authentifikation
       benutzen. Du kannst das setuid Bit vom ssh Programm entfernen, wenn du diese Authentifikation 
       nicht benutzen willst.
       <p>

<li><strong>Enth&auml;lt OpenSSH das SFTP Subsystem ?
       </strong><p>
        In OpenSSH 2.3.0 hat Markus Friedl Unterst&uuml;tzung f&uuml;r einen SFTP
        Server hinzugef&uuml;gt, der das SFTP Protokoll implementiert, das von mehreren kommerziellen
        SSH Clients benutzt wird. Mehr Informationen gibt in der
       <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd">sshd</a>
       manpage unter der <b>Subsystem</b> Option.
	<p>

<li><strong>Warum hat SSH 2.3 Probleme in der Zusammenarbeit mit OpenSSH 2.1.1?
       </strong><p>
       SSH 2.3 und fr&uuml;here Versionen haben einen Fehler in der HMAC Implementation.
       Ihr Code hat nicht den kompletten Datenblock aus der Auswahl bereitgestellt, sondern
       stattdessen immer 128 Bits. Bei l&auml;ngeren Auswahlen f&uuml;hrte das dazu, dass
       SSH 2.3 nicht mit OpenSSH zusammenarbeitet.		
       <p>
       OpenSSH 2.2.0 kennt diesen Fehler von SSH 2.3. Zuk&uuml;nftige Versionen von SSH werden
       diesen Fehler nicht mehr haben. 
       <p>
<li><strong>OpenSSH unterst&uuml;tzt keine patentierten Transportalgorithmen.
       </strong><p>
			Im SSH1 Modus k&ouml;nnen nur 3DES und Blowfish ausgew&auml;hlt werden.
			Im SSH2 Modus k&ouml;nnen zur Zeit nur 3DES, Blowfish, CAST128 oder Arcfour 
			ausgew&auml;hlt werden. Der patentierte und veraltete IDEA Algoritmus wird nicht
			unterst&uuml;tzt.
			<p>
			Dieser Unterschied
			kann sich darin manifestieren ,dass sich das ssh Kommando weigert, 
			Config-Files aus einer vorhergehenden Installation des kommerziellen 
			ssh zu lesen.
		</p>
		</p>
			<b><i>L&ouml;sung:</i></b>
			Editiere <I>/etc/ssh/ssh_config</I> und w&auml;hle eine andere 
			<B>Cipher</B> Option ("3des" oder "blowfish").
			<p>
	</LI>
	<li><strong>Alte Versionen des kommerziellen SSH verschl&uuml;sseln Host keys mit IDEA
		</strong><p>
			Die alten Versionen von SSH benutzen einen patientierten Algorithmus um ihren
	       		<i>/etc/ssh/ssh_host_key</i>.  Dieses Problem wird sich darin manifestieren,
			dass der 
	       		<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd">sshd</a>
	        	nicht mehr in der Lage ist, seinen eigenen 'host-key' zu lesen.
			        <p>
			<b><i>L&ouml;sung:</i></b>
			 Du wirst die <U>kommerzielle</U> Version von 
			ssh-keygen f&uuml;r den privaten key des Host's anwenden m&uuml;ssen:
		</P>
		<P>
	       <pre>
	       # ssh-keygen -u -f /etc/ssh/ssh_host_key
	       </pre>
	        Das wird den Key zu 3DES "upgraden".
		<p>
	</LI>

	<LI>
	<strong>Inkompatible &Auml;nderungen am <I>sshd_config</I> Format.
		</strong>
		<P>
			OpenSSH erweitert das <I>sshd_config</I> Dateiformat in einer ganzen Reihe von 
			Dingen. Momentan gibt es genau eine &Auml;nderung, die inkompatibel mit der 
			alten Form ist.
		</P>
		<P>
			Kommerzielles SSH kontrollierte Logging mit Hilfe der <B>QuietMode</B> und
			<B>FascistLogging</B> Direktiven. OpenSSH f&uuml;hrt ein
			allgemeines Set von Loggingoptionen ein, n&auml;mlich <B>SyslogFacility</B> und 
			<B>LogLevel</B>. Siehe sshd Manual Page.
		</P>
	</LI>
	<LI><strong>Warnhinweise wegen Schl&uuml;ssell&auml;ngen
		</strong>
		<P>
			Das ssh-keygen Programm des kommerziellen SSH beinhaltet einen Bug, der dazu f&uuml;hrt, 
			dass ab und zu ein RSA Schl&uuml;ssel generiert wird, bei dem das
			Most Significant Bit (MSB) nicht gesetzt ist.
			Solche Schl&uuml;ssel werden als solche mit voller L&auml;nge ausgegeben, sind tats&auml;chlich
			aber die H&auml;lfte der Zeit nur halb so lang wie angegeben.
		</P>
		<P>
			OpenSSH wird Warnhinweise ausgeben, wenn es solche Schl&uuml;ssel bemerkt.
			Um diese Hinweise loszuwerden editiere deine known_hosts Datei und ersetze
			die unkorrekte Schl&uuml;ssell&auml;nge (f&uuml;r gew&ouml;hlich"1024") mit der korrekten Schl&uuml;ssell&auml;nge
			(f&uuml;r gew&ouml;hnlich "1023"). Wie auch immer, wie vorher bereits gesagt sind diese Schl&uuml;ssel
			weniger sicher, so dass es am besten ist, einfach neue zu erzeugen.
		</P>
	</LI>
	<LI>
		<strong>Portables OpenSSH: Unechte PAM Authentifikationsmeldungen in den logfiles
		</strong>
		<P>
			OpenSSH generiert unechte Authentifikationsfehlschl&auml;ge bei jedem login, 
			etwa so:

			<PRE>"authentication failure; (uid=0) -> root for sshd service"</PRE>

			Diese werden generiert, da OpenSSH zuerst pr&uuml;ft, ob ein User Authentifikation
			zum Login ben&ouml;tigt (z.B. leeres Passwort).
			Ungl&uuml;cklicherweise logt PAM alle Authenfikationsvorkommnisse, inklusive dieses.
		</P>
		<P>
			Wenn dich das zu sehr st&ouml;rt, setze <B>PermitEmptyPasswords</B> in 
			<I>sshd_config</I> auf "no". Das wird zwar die Warnmeldung abschalten, verhindert
			aber auch das Einloggen ohne gesetztes Passwort. Das ist &uuml;brigens die Standardeinstellung
			wenn du mit dem mitgelieferten <I>sshd_config</I> File arbeitest.
		</P>
	</LI>
	<LI>
		<strong>Portables OpenSSH:Leere Passw&ouml;rter sind bei der PAM Authentifikation nicht erlaubt.
		</strong>
		<P>
			Um leere Passw&ouml;rter bei einer Version von OpenSSH zu gestatten, die mit PAM
			erzeugt wurde, musst du das Flag <B>nullok</B> am Ende des Password Checking 
			Moduls in der <I>/etc/pam.d/sshd</I> Datei setzen. Zum Beispiel:

			<PRE>auth required/lib/security/pam_unix.so shadow nodelay nullok</PRE>

			Das muss zus&auml;tzlich zum Setzen von <B>PermitEmptyPasswords</B> 
			"yes" in der <I>sshd_config</I> Datei geschehen.
		</P>
		<P>
			Es gibt ein Problem mit dem Benutzen von leeren Passw&ouml;rtern mit PAM
			Authentifikation: PAM erlaubt <U>jegliches</U> Passwort beim Authentifizieren
			eines Accounts mit leerem Passwort. Das setzt den Check ausser Kraft, den sshd
			benutzt, um festzustellen ob ein Account kein Passwort gesetzt hat und gibt den Zugang
			zum Account frei, unabh&auml;ngig davon, wie die Policy in
			<B>PermitEmptyPasswords</B> ist. Aus diesem Grund wird empfohlen
			die <B>nullok</B> Direktive nicht in deine PAM Konfigurationsdatei 
			aufzunehmen, es sei denn du willst unbedingt leere Passw&ouml;rter erlauben.
		</P>
	</LI>
	<LI>
	<strong>X11 und/oder agent forwarding funktioniert nicht
		</strong>
		<P>
			&Uuml;berpr&uuml;fe deine <I>ssh_config</I> und <I>sshd_config</I>. Die Standard-
			Konfigurationsdatei schaltet die Authentifikation f&uuml;r agent und X11 forwarding ab.
		</P>

		<P>
		Mandrake Linux 7.2 ver&auml;ndert auch die XAUTHORITY Umgebungsvariable in /etc/skel/.bashrc und daher jedes Heimatverzeichnis der Bash-Ben&uuml;tzer. Dies verhindert X11 forwarding, es sei denn, die folgende Zeile ist auskommentiert: "export XAUTHORITY=$HOME/.Xauthority"
		</P>

	</LI>
		<li><strong><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh">ssh</a>
		    braucht eine lange Zeit, um mit Linux/glibc 2.1 zu connecten</strong><p>
		    
			Die mit Redhat 6.1 ausgeliferte glibc2.1 scheint eine lange Zeit zu ben&ouml;tigen
			um "IPv6 oder IPv4" Addressen von Domainnamen aufzul&ouml;sen. Das kann umgangen werden,
			indem man die <B>--with-ipv4-default</B> Konfigurations-Option benutzt. 
			Die weist OpenSSH an, nur IPv4 Adressaufl&ouml;sung zu benutzen. (IPv6
			lookups k&ouml;nnen trotzdem mit Hilfe der -6 Option gemacht werden).
		</P>
	</LI>
	<LI><strong>
		Logins vom kommerziellen ssh erzeugt diesen Fehler:
		<PRE>Selected cipher type idea not supported by server</PRE>
			</strong>
			Dieser Fehler wird erzeugt, wenn ein kommerzielles ssh, das mit der
			Option 'idea' Chiffre konfiguriert wurde, versucht einen OpenSSH Server
			zu kontaktieren. Um das geradezubiegen, w&auml;hle eine andere Chiffre in den
			<I>ssh_config</I> oder <I>~/.ssh/config</I> Dateien (3des f&uuml;r Sicherheit oder
			blowfish f&uuml;r Geschwindigkeit).
		</P>
	</LI>
	<LI><strong>
		Portables OpenSSH: "Can't locate module net-pf-10" Meldungen im log unter Linux</strong>
		<P>
			Der Linux kernel pr&uuml;ft (via modprobe) ob die Protokollfamilie 10 
			(IPv6) da ist. Lade entweder das entsprechende Kernelmodul, trag den entsprechenden 				
			Alias in <I>/etc/modules.conf</I> ein oder schalte IPv6 in 
			<I>/etc/modules.conf</I> ab.
		</P>
		<P>
			Aus einem bl&ouml;dsinnigen Grund kann <I>/etc/modules.conf</I> auch als
			<I>/etc/conf.modules</I> benannt sein.
		</P>
	</LI>
	<LI>
	<strong>Portables OpenSSH: Password Authentifikation klappt nicht auf Slackware 7.0</strong>
		<P>
			Linke OpenSSH mit libcrypt:

			<PRE>LIBS=-lcrypt ./configure [options]</PRE>
		</P>
	</LI>
	<LI>
		<strong>Portables OpenSSH: configure oder sshd beschweren sich &uuml;ber fehlenden RSA Support</strong>
		<P>
			Stelle sicher, dass deine OpenSSL libraries mit eingebauter RSA
			Unterst&uuml;tzung entweder intern oder mit Hilfe von RSAref erzeugt wurden.
		</P>
	</LI>
	<LI>
		<li><strong>Portable OpenSSH: "scp: command not found" Fehler</strong><p>
		<P>
			scp muss im Standard-Pfad (PATH) sowohl im Server als auch im Client sein.
			M&ouml;glicherweise musst du auch die <B>--with-default-path</B> Option setzen, um 
			einen gew&uuml;nschten Pfad auf dem Server anzugeben, in dem gesucht werden soll. Diese Option ersetzt den
			Standardpfad, so dass du alle momentan enthaltenen Verzeichnisse angeben musst, und ausserdem
			muss scp installiert sein.
			Zum Beispiel:
			<PRE>./configure --with-default-path=/bin:/usr/bin:/usr/local/bin:/path/to/scp</PRE>
		<p>
			<li><strong>Portable OpenSSH: Unable to read passphrase</strong><p>

		   	Einige Betriebssysteme setzen /dev/tty mit falschen Modi, was das Lesen von Passw&ouml;rtern 
			verhindert, und folgenden Fehlercode erzeugt:

			<pre>You have no controlling tty.  Cannot read passphrase.</pre>

			Die L&ouml;sung dazu ist, die Rechte von /dev/tty auf
			Modus 0666 zu setzen und den Fehler als Bug an den Betriebssystemhersteller oder Distributor zu schicken.

<li><strong>Portables OpenSSH: 'configure' fehlt oder make versagt</strong><p>

       Wenn es in der tar.gz-Datei, die du runtergeladne hast, keine 'configure' 
       Datei gibt, oder 
       <em>make</em> mit der Fehlermeldung "missing separator" versagt, hast du 
       wahrschienlich die OpenBSD Distribution von OpenSSH heruntergeladen und
       versuchst sie auf einer anderen Plattform zu kompilieren. Bitte lies die 
       Information auf der Seite der <a href="portable.html">portablen</a> Version.

<p>

<li><strong>Als Amerikaner bin ich ziemlich verwirrt bez&uuml;glich dieser Patentsache.
       </strong><p>

       OpenSSH bietet Unterst&uuml;tzung f&uuml;r sowohl das SSH1 als auch das SSH2 Protokoll.
       <p>
       Das SSH1 Protokoll benutzt den RSA Algorithmus, welcher bis zum 
       21. September diesen Jahres innerhalb der USA einem Patent unterlag. Ausserhalb der USA
       war nichts davon jemals relevant.
       <p>
       Das SSH2 Protokoll benutzt DH und DSA, zwei andere Algorithmen, die keinen &auml;rgerlichen
       Patenten unterliegen.  Wenn du die Benutzugn des SSH1 Protokolls vermeiden kannst,
       und nur das SSH2 Protokoll benutzt, brauchst du dir um nichts Gedanken zu machen.
       Du wirst dann aber trotzdem SSH2-kompatible Clients und Server f&uuml;r deine anderen
       Maschinen finden m&uuml;ssen.  F&uuml;r einige User kann das ein kleines Problem werden, da uns
       zur Zeit keine freien SSH2 Windows Clients bekannt sind.
       <p>
       Da das RSA Patent abgelaufen ist, gibt es keinerlei Beschr&auml;nkungen mehr bei der Benutzung
       von Software mit dem RSA Algorithmus, inklusive OpenBSD.
        <p>

</ol>
		</P>
	</LI>
</UL>
<p>
<hr>
<a href=index.html><img height=24 width=24 src=../back.gif border=0 alt=OpenSSH></a>
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq.html,v 1.21 ]
<br>
$Translation: faq.html,v 1.19 2000/12/26 19:18:18 jufi Exp $
<br>
</small>
<small>$OpenBSD: faq.html,v 1.19 2001/02/01 15:53:59 todd Exp $</small>
</body>
</html>
