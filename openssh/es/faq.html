<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>Preguntas Frecuentes de OpenSSH</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenSSH project portable version upgrading issues page">
<meta name="keywords" content="openbsd,portable version,upgrading">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1999-2001 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<img alt="[OpenSSH]" height="30" width="141" src="../images/smalltitle.gif">
<p>
<h2><font color="#e00000">Preguntas Frecuentes de OpenSSH</font><hr></h2>

<p>
OpenSSH es casi totalmente compatible con la versi&oacute;n comercial
SSH 1.2.x.  Sin embargo, hay unas cuantas excepciones que tendr&aacute;
que recordar cuando actualice la versi&oacute;n comercial con OpenSSH,
o cuando vaya a a&ntilde;adir OpenSSH a un sistema en el que no venga
ya incluido por definici&oacute;n.

<ol>
   <li><strong>&iquest;Por qu&eacute; se conecta ssh/scp desde puertos
       con baja numeraci&oacute;n?  Mi cortafuegos bloquea estos
       puertos.</strong>
       <p>
       El cliente de OpenSSH usa puertos de baja numeraci&oacute;n para
       la autenticaci&oacute;n de rhosts y rhosts-rsa, debido a que el
       servidor necesita confiar en el nombre de usuario que d&eacute;
       el cliente.
       <p>
       Para prevenir que ssh use puertos de baja numeraci&oacute;n,
       a&ntilde;anda <pre>UsePrivilegedPort no</pre> a sus ficheros
       <em>ssh_config</em> o <em>~/.ssh/config</em>, elimine el modo
       setuid del ejecutable de ssh o a&ntilde;ada
       <pre>-o &quot;UsePrivilegedPort no&quot;</pre> a su l&iacute;nea
       de &oacute;rdenes de ssh o scp.

<p>
   <li><strong>&iquest;Por qu&eacute; el cliente de ssh tiene el modo
       setuid?</strong>
       <p>
       El cliente ssh necesita estar ligado a un puerto de baja
       numeraci&oacute;n para la autenticaci&oacute;n de rhosts y
       rhosts-rsa.  Puede eliminar sin problemas el modo setuid del
       ejecutable de ssh si no va a usar estos m&eacute;todos de
       autenticaci&oacute;n.

<p>
   <li><strong>&iquest;Est&aacute; implementado SFTP en
       OpenSSH?</strong>
       <p>
       Markus Friedl a&ntilde;adi&oacute; a OpenSSH 2.3.0 el soporte
       para un servidor SFTP que implementa el protocolo SFTP utilizado
       por varios clientes comerciales de SSH.  Para m&aacute;s
       informaci&oacute;n vea la opci&oacute;n
       <strong>Subsystem</strong> en la p&aacute;gina de manual de
       <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd">sshd</a>.

<p>
   <li><strong>&iquest;Por qu&eacute; SSH 2.3 tiene problemas de
       interoperabilidad con OpenSSH 2.1.1?</strong>
       <p> Las versiones 2.3 y anteriores de SSH contienen un error de
       dise&ntilde;o en su implementaci&oacute;n de HMAC.  Su
       c&oacute;digo no prove&iacute;a todos los datos del bloque desde
       el resumen (<em>&quot;digest&quot;</em>), y en lugar de eso
       prove&iacute;a siempre 128 bits.  A causa de esto, SSH 2.3 no
       pod&iacute;a interoperar con OpenSSH con res&uacute;menes
       mayores.
       <p> OpenSSH 2.2.0 detecta el error de SSH 2.3.  Las versiones
       venideras de SSH tendr&aacute;n este error solucionado.

<p>
   <li><strong>OpenSSH no tiene soporte para ning&uacute;n tipo de
       algoritmos de transporte patentado.</strong>
       <p>
       En modo SSH1, s&oacute;lo se pueden seleccionar
       <code>3DES</code> y <code>Blowfish</code>.  En modo SSH2,
       s&oacute;lo se pueden seleccionar actualmente <code>3DES</code>,
       <code>Blowfish</code>, <code>CAST128</code> &oacute;
       <code>Arcfour</code>.  No hay soporte para el algoritmo
       patentado <code>IDEA</code>.  Esta diferencia se puede
       manifestar cuando invoque la orden
       <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh">ssh</a>
       y &eacute;sta se niegue a leer los ficheros de
       configuraci&oacute;n dejados por una instalaci&oacute;n previa
       de la versi&oacute;n comercial de SSH.
       <p>
       <strong><em>Soluci&oacute;n:</em></strong>
       Edite <em>/etc/ssh/ssh_config</em> y seleccione un opci&oacute;n
       <strong>Cipher</strong> (esto es, un &laquo;algoritmo de
       cifrado&raquo;) diferente (<code>3des</code> o
       <code>blowfish</code>).

<p>
   <li><strong>Las versiones antiguas comerciales de SSH cifran las
       claves del anfitri&oacute;n con IDEA.</strong>
       <p>
       Las versiones antiguas de SSH usaban un algoritmo patentado para
       cifrar <em>/etc/ssh/ssh_host_key</em>.  Este problema se pone de
       manifiesto cuando
       <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd">sshd</a>
       no puede leer la clave anfitriona (&quot;host key&quot;).
       <p>
       <strong><em>Soluci&oacute;n:</em></strong>
       Necesita ejecutar la versi&oacute;n <u>comercial</u> de
       <kbd>ssh-keygen</kbd> sobre la clave privada del
       anfitri&oacute;n:
       <p>
       <pre>
       # ssh-keygen -u -f /etc/ssh/ssh_host_key
       </pre>

       De este modo &laquo;actualizar&aacute;&raquo; la clave a
       <code>3DES</code>.

<p>
   <li><strong>Cambios incompatibles en el formato de 
       <em>/etc/sshd_config</em>.</strong>
       <p>
       OpenSSH extiende el formato del fichero <em>sshd_config</em> de
       varias formas.  En la actualidad hay un cambio incompatible con
       la versi&oacute;n comercial de SSH.
       <p>
       La versi&oacute;n comercial de SSH controlaba el ingreso en el
       sistema (<em>&quot;login&quot;</em>) usando las directivas
       <strong>QuietMode</strong> y <strong>FascistLogging</strong>.
       OpenSSH introduce un juego de opciones de ingreso m&aacute;s
       general, <strong>SyslogFacility</strong> y
       <strong>LogLevel</strong>.  Vea la p&aacute;gina de manual de
       <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd">sshd</a>
       para una informaci&oacute;n m&aacute;s detallada.

<p>
   <li><strong>Mensajes de aviso sobre la longitud de las
       claves.</strong>
       <p>
       El programa <kbd>ssh-keygen</kbd> de la versi&oacute;n comercial
       de SSH conten&iacute;a un error por el que generaba
       ocasionalmente claves <code>RSA</code> que ten&iacute;an su
       &laquo;Bit M&aacute;s Significativo&raquo; (MSB, <em>&quot;Most
       Significant Bit&quot;</em>) desactivado.  Este tipo de claves se
       anunciaban como de tama&ntilde;o completo, pero en realidad son
       la mitad del tiempo, la mitad del tama&ntilde;o que publican.
       <p>
       OpenSSH mostrar&aacute; mensajes de aviso cuando se encuentre
       con claves de este tipo.  Para evitar este mensaje, edite sus
       ficheros <em>known_hosts</em> y substituya el tama&ntilde;o de
       clave incorrecto (generalmente &quot;1024&quot;) por el
       tama&ntilde;o correcto (generalmente &quot;1023&quot;).  Sin
       embargo, como se ha dicho anteriormente, estas claves son menos
       seguras, por lo que es mejor generar unas nuevas.

<p>
   <li><strong>OpenSSH Portable: Mensajes de autenticaci&oacute;n de
       PAM falsos en los ficheros &quot;logfile&quot;.</strong>
       <p>
       La versi&oacute;n portable de OpenSSH generar&aacute; fallos de
       autenticaci&oacute;n falsos en cada ingreso, parecidos a:
       
       <pre>&quot;authentication failure; (uid=0) -&gt; root for sshd service&quot;</pre>

       Estos mensajes son debidos a que OpenSSH intenta primero
       determinar si un usuario necesita autenticaci&oacute;n para el
       ingreso (v.g. una contrase&ntilde;a vac&iacute;a).
       Desafortunadamente, a PAM le gusta guardar toda la
       informaci&oacute;n sobre sucesos de autenticaci&oacute;n,
       incluido &eacute;ste.
       <p>
       Si le molesta demasiado, configure
       <strong>PermitEmptyPasswords</strong> a &quot;no&quot; en
       <em>sshd_config</em>.  De este modo silenciar&aacute; el mensaje
       de error a cambio de desactivar los ingresos a las cuentas sin
       una contrase&ntilde;a activada.  Si usa el fichero
       <em>sshd_config</em> modelo, &eacute;sta ser&aacute; la
       configuraci&oacute;n por definici&oacute;n.

<p>
   <li><strong>OpenSSH portable: No acepta contrase&ntilde;as
       vac&iacute;as con autenticaci&oacute;n PAM.</strong>
       <p>
       Para aceptar las contrase&ntilde;as vac&iacute;as con una
       versi&oacute;n de OpenSSH compilada con PAM, debe a&ntilde;adir
       el indicador <strong>nullock</strong> al final del m&oacute;dulo
       de comprobaci&oacute;n de la contrase&ntilde;a en el fichero
       <em>/etc/pam.d/sshd</em>.  Por ejemplo:

       <pre>auth required/lib/security/pam_unix.so shadow nodelay nullok</pre>

       Adem&aacute;s debe configurar
       <strong>PermitEmptyPasswords</strong> a &quot;yes&quot; en el
       fichero <em>sshd_config</em>.
       <p>
       Existe un problema al usar contrase&ntilde;as vac&iacute;as con
       autenticaci&oacute;n PAM: PAM aceptar&aacute; <u>cualquier</u>
       contrase&ntilde;a al autenticar una cuenta con una
       contrase&ntilde;a vac&iacute;a.  De este modo se carga la
       comprobaci&oacute;n que usa <kbd>sshd</kbd> para determinar si
       una cuenta tiene o no configurada la contrase&ntilde;a y permite
       el acceso de los usuarios a la cuenta sin tener en cuenta la
       pol&iacute;tica especificada por
       <strong>PermitEmptyPasswords</strong>.  Por este motivo, se
       recomienda que no a&ntilde;ada la directiva
       <strong>nullok</strong> a su fichero de configuraci&oacute;n de
       PAM, a menos que desee permitir el acceso con contrase&ntilde;as
       vac&iacute;as de forma espec&iacute;fica.

<p>
   <li>X11 y/o el agente de reenv&iacute;o no funcionan.
       <p>
       Verifique sus ficheros <em>ssh_config</em> y
       <em>sshd_config</em>.  Los ficheros de configuraci&oacute;n
       predefinidos desactivan el agente de autenticaci&oacute;n y el
       reenv&iacute;o en X11.
       <p>
       Mandrake Linux 7.2 tambi&eacute;n modifica la variable de
       entorno XAUTHORITY en <em>/etc/skel/.bashrc</em>, y en
       consecuencia cualquier directorio de usuario de bash.  Esto
       rompe el reenv&iacute;o en X11 a menos que se desactive la
       l&iacute;nea:  &quot;export XAUTHORITY=$HOME/.Xauthority&quot;.

<p>
   <li><strong>
       <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh">ssh</a>
       tarda mucho en conectar con Linux/glibc 2.1.</strong>
       <p>
       La biblioteca glibc que viene con Redhat 6.1 parece que tarda
       mucho tiempo en resolver direcciones &quot;IPv6 &oacute;
       IPv4&quot; de los nombres de dominio.  Esto se puede solventar
       con la opci&oacute;n de configuraci&oacute;n
       <strong>--with-ipv4-default</strong> (los &quot;lookups&quot; de
       IPv6 se pueden hacer especificando la opci&oacute;n -6).

<p>
   <li><strong>Los ingresos a trav&eacute;s de ssh comercial genera el
       error:
       <pre>Selected cipher type idea not supported by server</pre>
       </strong>
       <p>
       Este error se genera cuando la versi&oacute;n comercial de ssh,
       configurada para usar el algoritmo de cifrado 'idea', intenta
       conectar a un servidor de OpenSSH.  Para solucionar esto,
       seleccione un algoritmo de cifrado diferente en
       <em>ssh_config</em> o en <em>~/.ssh/config</em>
       (<code>3des</code> para seguridad o <code>blowfish</code> para
       velocidad).

<p>
   <li><strong>OpenSSH portable: Mensajes de tipo &quot;Can't locate
       module net-pf-10&quot; en Linux.</strong>
       <p>
       El n&uacute;cleo de Linux busca (a trav&eacute;s de 'modeprobe')
       la familia de protocolos 10 (IPv6).  Cargue el m&oacute;dulo del
       n&uacute;cleo apropiado, o bien introduzca el alias correcto en
       <em>/etc/modules.conf</em>, o bien desactive IPv6 en
       <em>/etc/modules.conf</em>.
       <p>
       Por alguna raz&oacute;n est&uacute;pida, el fichero
       <em>/etc/modules.conf</em> tambi&eacute;n se puede llamar
       <em>/etc/conf.modules</em>.

<p>
   <li><strong>OpenSSH portable: La autenticaci&oacute;n de la
       contrase&ntilde;a en Slackware 7.0 no funciona.</strong>
       <p>
       Enlace OpenSSH con libcrypt:

       <pre>LIBS=-lcrypt ./configure [opciones]</pre>

<p>
   <li><strong>OpenSSH portable: La configuraci&oacute;n o sshd se
       quejan de la falta de soporte de RSA.</strong>
       <p>
       Aseg&uacute;rese de que sus bibliotecas OpenSSL hayan sido
       compiladas para incluir soporte para <code>RSA</code>, bien de
       forma interna o a trav&eacute;s de RSAref.

<p>
   <li><strong>OpenSSH portable: errores de tipo &quot;scp: command 
       not found&quot;</strong>
       <p>
       <kbd>scp</kbd> se debe encontrar en el camino (PATH)
       predefinido, tanto en el cliente como en el servidor.  Es
       posible que necesite usar la opci&oacute;n
       <kbd>--with-default-path</kbd> para especificar que busque un
       camino personalizado en el servidor.  Esta opci&oacute;n
       substituye al camino predefinido, por lo que tambi&eacute;n debe
       especificar todos los directorios actuales en su camino,
       as&iacute; como la ubicaci&oacute;n de <kbd>scp</kbd>.  Por
       ejemplo:

       <pre>./configure --with-default-path=/bin:/usr/bin:/usr/local/bin:/path/to/scp</pre>

<p>
   <li><strong>OpenSSH portable: No puede leer la
       contras&ntilde;a</strong>
       <p>
       Algunos sistemas operativos configuran <em>/dev/tty</em> con
       modos incorrectos, haciendo que la lectura de las
       contrase&ntilde;as falle mostrando el siguiente error:

       <pre>You have no controlling tty.  Cannot read passphrase.</pre>

       La soluci&oacute;n a esto es reconfigurar los permisos en
       <em>/dev/tty</em> al modo 0666 e informar sobre el error al
       distribuidor de su sistema operativo.

<p>
   <li><strong>OpenSSH portable: falta 'configure' o falla 'make'</strong>
       <p>
       Si no existe el fichero 'configure' en el archivo tar.gz, lo
       puede bajar, y si <em>make</em> falla dando un mensaje de error
       &quot;missing separator&quot;, es probable que se haya bajado la
       distribuci&oacute;n de OpenSSH para OpenBSD y que est&eacute;
       intentando compilarlo en otra plataforma.  Por favor, mire la
       informaci&oacute;n en la versi&oacute;n
       <a href="portable.html">portable</a>.

<p>
<li><strong>Como estadounidense, estoy muy confundido por los problemas
    con las patentes.</strong><p>
    <p>
    OpenSSH tiene soporte para los protocolos SSH1 y SSH2.
    <p>
    El protocolo SSH1 usa el algoritmo RSA, que estuvo sujeto a una
    patente en EE.UU., hasta el 21 de septiembre de 2.000.  Fuera de
    los EE.UU., esos problemas no eran aplicables.
    <p>
    El protocolo SSH2 usa DH y DSA, otros dos algoritmos, que no se
    encuentran bajo ninguna patente.  Si evita el uso del protocolo
    SSH1 y s&oacute;lo usa el protocolo SSH2, no tiene porqu&eacute;
    preocuparse.  Sin embargo tendr&aacute; que encontrar clientes y
    servidores compatibles con SSH2 para sus otras m&aacute;quinas.
    Para algunos usuarios esto puede representar un peque&ntilde;o
    problema, ya que en este preciso instante no conocemos
    ning&uacute;n cliente de SSH libre para Windows.
    <p>
    Pero como la patente sobre RSA ya ha caducado, no existen
    restricciones sobre el uso del software que utilice el algoritmo
    RSA, incluido OpenBSD.

</ol>
<p>

<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif" border="0" alt="OpenSSH"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq.html,v 1.21 2000/12/26 09:48:51 jufi Exp ]<br>
$Translation: faq.html,v 1.11 2000/12/26 12:32:39 horacio Exp $<br>
$OpenBSD: faq.html,v 1.13 2001/02/01 15:54:01 todd Exp $
</small>

</body>
</html>
