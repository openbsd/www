<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Preguntas Frecuentes de OpenSSH</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Language" content="es">
<meta name="resource-type" content="documento">
<meta name="description"   content="Preguntas Frecuentes de OpenSSH">
<meta name="keywords"      content="openssh,faq,preguntas frecuentes">
<meta name="distribution"  content="global">
<meta name="copyright"     content="Este documento es copyright 1999-2002 de OpenBSD">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">
<!-- máx. 72 caracteres por línea -->

<img alt="[OpenSSH]" height="30" width="141" src="../images/smalltitle.gif">
<p>

<h1>Preguntas Frecuentes de OpenSSH</h1>

<strong>Fecha: 03/04/2002</strong>

<hr>

<blockquote>
<h3><a href="#1.0">1.0 - &iquest;Qu&eacute; es OpenSSH y
d&oacute;nde lo puedo obtener?</a></h3>
<ul>
   <li><a href="#1.1">1.1 - &iquest;Qu&eacute; es OpenSSH?</a>
   <li><a href="#1.2">1.2 - &iquest;Por qu&eacute; se debe utilizar?</a>
   <li><a href="#1.3">1.3 - &iquest;Para qu&eacute; sistemas operativos
   existe soporte?</a>
   <li><a href="#1.4">1.4 - &iquest;Qu&eacute; ocurre con los derechos
   de autor, de usuario, y con las patentes?</a>
   <li><a href="#1.5">1.5 - &iquest;D&oacute;nde puedo pedir ayuda?</a>
</ul>
<h3><a href="#2.0">2.0 - Preguntas Comunes</a></h3>
<ul>
   <li><a href="#2.1">2.1 - &iquest;Por qu&eacute; ssh/scp realizan
   conexiones desde puertos de numeraci&oacute;n baja?<br>
   Mi cortafuegos bloquea esos puertos.</a>
   <li><a href="#2.2">2.2 - &iquest;Por qu&eacute; el programa cliente
   de ssh se instala como <em>setuid root</em>?</a>
   <li><a href="#2.3">2.3 - &iquest;Por qu&eacute; hay problemas de
   interoperabilidad entre SSH 2.3 y OpenSSH 2.1.1?</a>
   <li><a href="#2.4">2.4 - &iquest;Por qu&eacute; OpenSSH muestra el
   mensaje:  Dispatch protocol error: type 20</a>
   <li><a href="#2.5">2.5 - Las versiones antiguas comerciales de SSH
   cifran las claves anfitrionas (<em>host keys</em>) con IDEA.</a>
   <li><a href="#2.6">2.6 - &iquest;Qu&eacute; son esos mensajes de
   aviso sobre el tama&ntilde;o de la clave?</a>
   <li><a href="#2.7">2.7 - X11 y/o el agente de reenv&iacute;o no
   funcionan.</a>
   <li><a href="#2.8">2.8 - Despu&eacute;s de actualizar OpenSSH he
   perdido el soporte para SSH2.</a>
   <li><a href="#2.9">2.9 - sftp/scp falla al conectar, pero ssh
   funciona bien.</a>
</ul>
<h3><a href="#3.0">3.0 - Preguntas sobre la versi&oacute;n
&laquo;portable&raquo; de OpenSSH</a></h3>
<ul>
   <li><a href="#3.1">3.1 - Mensajes falsos de autenticaci&oacute;n con
   PAM en los ficheros de registro.</a>
   <li><a href="#3.2">3.2 - La autenticaci&oacute;n mediante PAM no
   permite contrase&ntilde;as vac&iacute;as.</a>
   <li><a href="#3.3">3.3 - ssh(1) tarda mucho en conectar con
   Linux/glibc 2.1</a>
   <li><a href="#3.4">3.4 - Mensajes en los registros (<em>log</em>) de
   Linux: ´Can´t locate module net-pf-10´.<br>
   (no encuentra el m&oacute;dulo net-pf-10)</a>
   <li><a href="#3.5">3.5 - La autenticaci&oacute;n de la
   contrase&ntilde;a no funciona en Slackware 7.0.</a>
   <li><a href="#3.6">3.6 - ´configure´ o sshd(8) se quejan de que falta
   el soporte para RSA.</a>
   <li><a href="#3.7">3.7 - Errores &quot;scp: command not
   found&quot;.<br>
   (no encuentra la orden <tt>scp</tt>)</a>
   <li><a href="#3.8">3.8 - No puede leer la contrase&ntilde;a<br>
   (´Cannot read passphrase´).</a>
   <li><a href="#3.9">3.9 - Falta <em>configure</em> o hay fallos
   durante <tt>make</tt>.</a>
   <li><a href="#3.10">3.10 - Al terminar, ssh se queda colgado</a>
   <li><a href="#3.11">3.11 - &iquest;Por qu&eacute; ssh se queda
   colgado al terminar?</a>
   <li><a href="#3.12">3.12 - Despu&eacute;s de actualizar a OpenSSH
   3.1, el reenv&iacute;o de X11 ya no funciona.</a>
</ul>
</blockquote>

<hr>

<h2><u><a name="1.0">1.0 - &iquest;Qu&eacute; es OpenSSH y d&oacute;nde
lo puedo obtener?</a></u></h2>

<h2><a name="1.1">1.1 - &iquest;Qu&eacute; es OpenSSH?</a></h2>

<p>
OpenSSH es un versi&oacute;n <strong>LIBRE</strong> del grupo de
herramientas de conexi&oacute;n para redes de SSH, en el cual
est&aacute; depositando su confianza como herramienta de Internet un
grupo de usuarios cada vez mayor.  Muchos ususarios de telnet, rlogin,
ftp, y otros programas parecidos, no son conscientes de que sus
contrase&ntilde;as est&aacute;n siendo transmitidas en claro (sin
cifrar) a trav&eacute;s de Internet, pero as&iacute; es.  OpenSSH cifra
todo el tr&aacute;fico, inclu&iacute;das las contrase&ntilde;as, con el
fin de eliminar de un modo efectivo las posibles &laquo;escuchas&raquo;,
los secuestros de conexiones y otros ataques a nivel de red.

<p>
OpenSSH incluye el programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">
ssh(1)</a>,
que sustituye a rlogin y telnet, y el programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scp&amp;sektion=1">
scp(1)</a>,
que sustituye a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rcp&amp;sektion=1">
rcp(1)</a> y a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">
ftp(1)</a>.
Recientemente, tambi&eacute;n han sido a&ntilde;adidos a OpenSSH los
programas
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&amp;sektion=1">
sftp(1)</a> y
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp-server&amp;sektion=8">sftp-server(8)</a>,
que implementan una soluci&oacute;n m&aacute;s sencilla para la
transferencia de archivos, substituyendo a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&amp;sektion=1">
ftp(1)</a> y a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8">
ftpd(8)</a> respectivamente.
&Eacute;stos se basan en el borrador
<a href="../txt/draft-ietf-secsh-filexfer-02.txt">secsh-filexfer</a> de
la IETF.

<p>
<strong>OpenSSH se compone de varios programas.</strong>

<ul>
   <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8">sshd(8)</a>
   - Programa servidor que funciona sobre una m&aacute;quina servidora.
     Este programa escucha las conexiones de las m&aacute;quinas
     clientes, y en cuanto recibe una conexi&oacute;n, lleva a cabo la
     autenticaci&oacute;n y empieza el servicio para el cliente.
   <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">ssh(1)</a>
   - &Eacute;ste es el programa cliente que se usa para ingresar en otra
     m&aacute;quina o para ejecutar &oacute;rdenes en la otra
     m&aacute;quina.  Este programa tambi&eacute;n se conoce como
     <em>slogin</em>.
   <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scp&amp;sektion=1">scp(1)</a>
   - Copia ficheros desde una m&aacute;quina hasta otra en modo seguro.
   <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>
   - Se utiliza para generar las claves p&uacute;blicas (RSA o DSA)
     autenticaci&oacute;n (tanto las claves del anfitri&oacute;n como
     las claves de autenticaci&oacute;n para usuarios).
   <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-agent&amp;sektion=1">ssh-agent(1)</a>
   - Agente de autenticaci&oacute;n.  Se puede usar para conservar la
     autenticaci&oacute;n inicial con RSA durante procesos u
     &oacute;rdenes consecutivas.
   <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-add&amp;sektion=1">ssh-add(1)</a>
   - Se usa para registrar nuevas claves con el agente.
   <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp-server&amp;sektion=8">sftp-server(8)</a>
   - Subsistema servidor de SFTP.
   <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sftp&amp;sektion=1">sftp(1)</a>
   - Programa de transferencia segura de archivos.
   <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keyscan&amp;sektion=1">ssh-keyscan(1)</a>
   - Utilidad para la obtenci&oacute;n de claves p&uacute;blicas.
   <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keysign&amp;sektion=8">ssh-keysign(8)</a>
   - Programa de ayuda de ssh para la autenticaci&oacute;n basada en
     anfitri&oacute;n.
</ul>

<h2><a name= "1.2">1.2 - &iquest;Por qu&eacute; se debe
utilizar?</a></h2>

<p>
OpenSSH es un conjunto de herramientas que le ayudan a asegurar sus
conexiones de red.  Aqu&iacute; tiene una lista de funcionalidades:

<ul>
   <li>Autenticaci&oacute;n fuerte.  Cierra varios agujeros de seguridad
   (v.g. falsificaciones de IP, enrutamiento y DNS).
   <li>Privacidad mejorada.  Todas las comunicaciones se cifran de forma
   autom&aacute;tica y transparente.
   <li>Sesiones de X11 seguras.  El programa configura
   autom&aacute;ticamente DISPLAY en la m&aacute;quina servidora y
   reenv&iacute;a cualquier conexi&oacute;n a trav&eacute;s de X11 por
   un canal seguro.
   <li>Los puertos TCP/IP arbitrarios se pueden redireccionar a
   trav&eacute;s de un canal cifrado en ambas direcciones (v.g.  para
   transacciones de dinero electr&oacute;nicas).
   <li>No es necesario un proceso de aprendizaje adicional por parte de
   los usuarios.
   <li>Nunca conf&iacute;a en la red.  M&iacute;nimo nivel de confianza
   en el sitio remoto de la conexi&oacute;n.  M&iacute;nimo nivel de
   confianza en servidores de nombres de dominio.  La
   autenticaci&oacute;n pura por RSA nunca conf&iacute;a en nada que no
   sea la clave privada.
   <li>El cliente autentica con RSA la identidad de la m&aacute;quina
   servidora al principio de cada conexi&oacute;n para prevenir ataques
   mediante intermediarios a trav&eacute;s de troyanos (a trav&eacute;s
   de falsificaci&oacute;n del enrutamiento o de DNS), y el servidor
   autentica con RSA autentica la identidad de la m&aacute;quina cliente
   antes de aceptar la autenticaci&oacute;n de <em>.rhosts</em> o
   <em>/etc/hosts.equiv</em> (para prevenir falsificaciones de DNS,
   enrutamiento o IP).
   <li>La distribuci&oacute;n de la clave de autenticaci&oacute;n del
   anfitri&oacute;n puede estar centralizada por la
   administraci&oacute;n de forma autom&aacute;tica cuando se realice la
   primera conexi&oacute;n.
   <li>Cualquier usuario puede crear una cantidad cualquiera de claves
   de autenticaci&oacute;n para su propio particular.
   <li>El programa servidor dispone de un servidor de claves RSA propio
   que se regenera cada hora de forma autom&aacute;tica.
   <li>Se puede usar un agente de autenticaci&oacute;n que funcione en
   el port&aacute;til o la estaci&oacute;n de trabajo local de un
   usuario para que contenga las claves RSA de autenticaci&oacute;n del
   usuario.
   <li>El programa puede ser instalado y usado incluso sin privilegios
   de superusuario (<em>root</em>), aunque en este caso con
   restricciones en sus funcionalidades.
   <li>El cliente se puede personalizar en ficheros de
   configuraci&oacute;n para todo el sistema o para usuarios concretos.
   <li>Compresi&oacute;n opcional de todos los datos con gzip
   (inclu&iacute;dos los datos en el reenv&iacute;o de X11 y puertos
   TCP/IP), lo que puede resultar en un incremento significante de la
   velocidad en el caso de conexiones lentas.
   <li>Sustituto completo para rlogin, rsh y rcp.
</ul>

<p>
En la actualidad, casi todas las comunicaciones llevadas a cabo por
computadoras (ordenadores) en red, se llevan a cabo sin cifrar.  Como
consecuencia, cualquier persona que tenga acceso a cualquier
m&aacute;quina que est&eacute; conectada a dicha red puede escuchar, y
por tanto espiar, cualquier comunicaci&oacute;n.  Y esto es lo que hacen
los llamados <em>&quot;hackers&quot;</em>, los administradores curiosos,
los jefes de empresas, los criminales, los esp&iacute;as industriales, y
los gobiernos.  Algunas redes tienen escapes de radiaci&oacute;n
electromagn&eacute;tica suficiente como para que los datos se puedan
capturar incluso a distancia.

<p>
Cuando ingresa en un sistema (<em>&quot;log in&quot;</em>), su
contrase&ntilde;a se transmite por la red en un formato de texto claro.
Gracias a esto cualquiera que se encuentre &laquo;a la escucha&raquo;
puede usar su cuenta en el sistema para hacer cualquier cosa que desee.
Existe constancia de muchos incidentes en todo el mundo en los que
<em>&quot;crackers&quot;</em> (conocidos con el t&eacute;rmino
incorrecto de <em>&quot;hackers&quot;</em>, o <em>hackers
maliciosos</em>) han iniciado programas en estaciones de trabajo sin el
conocimiento de sus propietarios, simplemente para escuchar por la red y
recolectar contrase&ntilde;as.  En Internet existen muchos programas
disponibles para hacer esto, y un programador competente puede programar
uno de ellos en pocas horas.

<p>
Las empresas tienen secretos comerciales, aplicaciones de patentes en
preparaci&oacute;n, informaci&oacute;n sobre precios, informaci&oacute;n
sobre subcontratas, datos de clientes, datos sobre personal,
informaci&oacute;n contable y financiera, y un largo etc&eacute;tera.
Hoy en d&iacute;a cualquiera que pueda acceder a la red (cualquier
m&aacute;quina dentro de la red) puede escuchar cualquier cosa que se
transmita por ella, sin que las restricciones normales de acceso
constituyan ning&uacute;n impedimento.

<p>
Muchas compa&ntilde;&iacute;as desconocen el hecho de que la
informaci&oacute;n se puede recuperar f&aacute;cilmente desde la misma
red.  Conf&iacute;an en que sus datos se encuentran a salvo ya que
presuponen que nadie sabe que existe informaci&oacute;n confidencial en
la red, o simplemente porque hay muchos otros datos que est&aacute;n
siendo transferidos por esa misma red.  &Eacute;sta no es un
pol&iacute;tica segura.

<h2><a name= "1.3">1.3 - &iquest;Para qu&eacute; sistemas operativos
existe soporte?</a></h2>

<p>
Aunque el desarrollo de OpenSSH se lleva a cabo en
<a href="http://www.openbsd.org/es/">OpenBSD</a>, existe una amplia
variedad de portes de estas aplicaciones para otros sistemas operativos.
El desarrollo de la versi&oacute;n &laquo;portable&raquo; de OpenSSH
est&aacute; encabezado por <a href="mailto:djm@openbsd.org">Damien
Miller</a>.  Si quiere echar un r&aacute;pido vistazo a la
versi&oacute;n portable de OpenSSH, mire en
<a href="./portable.html">http://www.openssh.com/es/portable.html</a>.
Lo que sigue a continuaci&oacute;n es un breve listado de los sistemas
operativos para los que existe soporte:

<ul>
   <li>OpenBSD
   <li>NetBSD
   <li>FreeBSD
   <li>AIX 
   <li>HP-UX 
   <li>IRIX 
   <li>Linux 
   <li>NeXT 
   <li>SCO 
   <li>SNI/Reliant Unix 
   <li>Solaris 
   <li>Digital Unix/Tru64/OSF 
   <li>Mac OS X 
</ul>

<p>
Tambi&eacute;n puede ver una lista de productos que incluyen OpenSSH en
su distribuci&oacute;n en
<a href="./users.html">www.openssh.com/es/users.html</a>.


<h2><a name="1.4">1.4 - &iquest;Qu&eacute; ocurre con los derechos de
autor, de usuario, y con las patentes?</a></h2>

<p>
Los desarrolladores de OpenSSH se han esforzado en mantener OpenSSH
libre de cualquier injerencia en patentes o derechos de autor.  Para
ello han debido eliminar algunas opciones de OpenSSH.  Para ser
m&aacute;s concretos, se ha eliminado el soporte de algoritmos
patentados.

<p>
OpenSSH no contiene soporte para ning&uacute;n algoritmo de transporte
patentado.  En modo SSH1 s&oacute;lo est&aacute;n disponibles las
opciones de 3DES y Blowfish.  En modo SSH2 s&oacute;lo se pueden
seleccionar las opciones de 3DES, Blowfish, CAST128, Arcfour y AES.  No
hay soporte para el algoritmo patentado IDEA.

<p>
OpenSSH tiene soporte para sendos protocolos SSH1 y SSH2.

<p>
Desde que caducara la patente sobre RSA, no existen restricciones en la
utilizaci&oacute;n de programas que usen el algoritmo RSA,
inclu&iacute;do el sistema operativo OpenBSD.

<h2><a name="1.5">1.5 - &iquest;D&oacute;nde puedo pedir ayuda?</a></h2>

<p>
Existen muchos sitios en los que puede obtener ayuda.  Adem&aacute;s del
sitio principal de OpenSSH en Internet,
<a href="http://www.openssh.com/es/">http://www.openssh.com</a>, existen
muchas listas de distribuci&oacute;n por correo electr&oacute;nico.
Pero antes de probar cualquiera de las listas, por favor busque entre
los mensajes archivados de estas listas para comprobar si su pregunta ya
has sido contestada en alguna ocasi&oacute;n anterior.  La lista de
lista de correo de OpenSSH dispone de un archivo y de una herramienta de
b&uacute;squeda que puede encontrar en
<a href="http://marc.theaimsgroup.com/?l=openssh-unix-dev&amp;r=1&amp;w=2">theaimsgroup.com</a>.

<p>
Para m&aacute;s informaci&oacute;n sobre la subscripci&oacute;n a listas
de correo relacionadas con OpenSSH, consulte
<a href="./list.html">www.openssh.com/es/list.html</a>.

<h2><u><a name="2.0">2.0 - Preguntas Comunes</a></u></h2>

<h2<a name="2.1">2.1 - &iquest;Por qu&eacute; ssh/scp realizan
conexiones desde puertos de numeraci&oacute;n baja?
Mi cortafuegos bloquea esos puertos.</a></h2>

<p>
El cliente de OpenSSH usa puertos de baja numeraci&oacute;n para
autenticaci&oacute;n de rhosts y rhosts-rsa debido a que el servidor
necesita confiar en el nombre de usuario provisto por el cliente.  Para
evitar esto, puede a&ntilde;adir el ejemplo que sigue a su fichero
<em>ssh_config</em> o <em>~/.ssh/config</em>.

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
<b>UsePrivilegedPort no</b>
                </td>
        </tr>
</table>
</blockquote>

<p>
O puede especificar esta opci&oacute;n en la l&iacute;nea de
&oacute;rdenes, usando la opci&oacute;n <strong>-o</strong> con la orden
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;sektion=1">
ssh(1)</a>.

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
$ <b>ssh -o "UsePrivilegedPort no" host.com</b>
                </td>
        </tr>
</table>
</blockquote>

<h2><a name="2.2">2.2 - &iquest;Por qu&eacute; el programa cliente de
ssh se instala como <em>setuid root</em>?</a></h2>

<p>
En relaci&oacute;n con la pregunta anterior (<a href="#2.1">2.1</a>),
OpenSSH necesita la autoridad del superusuario, <em>root</em>, para
enlazar con puertos de numeraci&oacute;n baja para poder facilitar la
<em>autenticaci&oacute;n de rhosts</em>.  Tambi&eacute;n se requiere un
puerto con privilegios para la <em>autenticaci&oacute;n de
rhosts-rsa</em> con versiones de SSH m&aacute;s antiguas.
<p>
Adem&aacute;s, tanto para la <em>autenticaci&oacute;n rhosts-rsa</em>
(en la versi&oacute;n 1 del protocolo) como para la
<em>autenticaci&oacute;n basada en host</em> (en la versi&oacute;n 2 del
protocolo), el programa cliente de ssh necesita poder acceder a la
<em>clave privada del host</em> para autenticar la m&aacute;quina
cliente ante el servidor.  Por tanto, tambi&eacute;n es necesario el
<em>bit setuid root</em> para estos m&eacute;todos de
autenticaci&oacute;n.
<p>
Si no quiere usar estos m&eacute;todos de autenticaci&oacute;n puede
eliminar el <em>bit setuid</em> del ejecutable de ssh sin peligro.

<h2><a name="2.3">2.3 - &iquest;Por qu&eacute; hay problemas de
interoperabilidad entre SSH 2.3 y OpenSSH 2.1.1?</a></h2>

<p>
SSH 2.3 y las versiones anteriores conten&iacute;an un error de
dise&ntilde;o en su implementaci&oacute;n de HMAC.  Su c&oacute;digo no
pasaba todo el bloque de datos de la salida del resumen, y en su lugar
siempre ofrec&iacute;a 128 bits.  Esto hac&iacute;a que SSH 2.3 no
pudiera interoperar con OpenSSH cuando los res&uacute;menes eran
m&aacute;s grandes.

<p>
OpenSSH 2.2.0 detecta este error de dise&ntilde;o en SSH 2.3.  En el
futuro, las pr&oacute;ximas versiones de SSH tendr&aacute;n este error
solucionado.  Tambi&eacute;n puede a&ntilde;adir lo siguiente al fichero
de configuraci&oacute;n <em>sshd2_config</em> de ssh 2.3:

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
<b>Mac hmac-md5</b>
               </td>
        </tr>
</table>
</blockquote>


<h2><a name= "2.4">2.4 - &iquest;Por qu&eacute; OpenSSH muestra el
mensaje:  Dispatch protocol error: type 20</a></h2>

<p>
Se han detectado problemas de interoperabilidad debidos a que las
versiones antiguas de OpenSSH no dispon&iacute;an de soporte para
rehacer las claves de sesi&oacute;n.  Sin embargo, la versi&oacute;n
comercial 2.3 de SSH intenta negociar esta funcionalidad, y es probable
que en este caso experimente congelaciones o que vea el mensaje de error
&quot;<strong>Dispatch protocol error: type 20 </strong>&quot;.  Para
solucionar este problema, actualice OpenSSH a una versi&oacute;n
reciente o desactive <em>&quot;rekeying&quot;</em> a&ntilde;adiendo lo
siguiente a los ficheros <em>ssh2_config</em> o <em>sshd2_config</em> de
la versi&oacute;n comercial 2.3 de SSH.

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
<b>RekeyIntervalSeconds 0</b>
                </td>
        </tr>
</table>
</blockquote>


<h2><a name="2.5">2.5 - Las versiones antiguas comerciales de SSH cifran
las claves anfitrionas con IDEA.</a></h2>

<p>
Las versiones antiguas de SSH usaban un algortimo patentado para cifrar
sus ficheros <em>/etc/ssh/ssh_host_key</em>.  Este problema se
manifiesta cuando
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8">
sshd(8)</a> no puede leer su clave anfitriona.  Para evitarlo, use la
orden que se cita a continuaci&oacute;n y as&iacute; convertir su
<em>ssh_host_key</em> para que use 3DES.  <strong>NOTA:</strong> Para
esto use el programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>
del producto comercial SSH, *NO* el de OpenSSH:

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
# <b>ssh-keygen -u -f /etc/ssh/ssh_host_key</b>
                </td>
        </tr>
</table>
</blockquote>

<h2><a name="2.6">2.6 - &iquest;Qu&eacute; son esos mensajes de aviso
sobre el tama&ntilde;o de la clave?</a></h2>

<p>
El programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>
de la versi&oacute;n comercial de SSH conten&iacute;a un error que, en
ocasiones, generaba claves p&uacute;blicas de autenticaci&oacute;n (RSA
o DSA) con su MSB (<em>Most Significant Bit</em>) desactivado.  Dichas
claves aseguraban ser de tama&ntilde;o completo, pero en realidad, la
mitad de las veces, su tama&ntilde;o era m&aacute;s peque&ntilde;o de lo
que aseguraban.

<p>
Siempre que OpenSSH encuentre una de estas claves, mostrar&aacute; un
mensaje de aviso.  Si no desea ver este mensaje, edite sus ficheros
<em>known_hosts</em> y substituya el tama&ntilde;o incorrecto de la
clave (que suele ser ´1024´) con el tama&ntilde;o correcto (que suele
ser ´1023´).

<h2><a name="2.7">2.7 - X11 y/o el agente de reenv&iacute;o no
funcionan.</a></h2>

<p>
Compruebe sus ficheros <em>ssh_config</em> y <em>sshd_config</em>.  Los
ficheros con la configuraci&oacute;n predefinida desactivan el agente de
autenticaci&oacute;n y el reenv&iacute;o en X11.  Para activarlos,
a&ntilde;ada esta l&iacute;nea a <em>sshd_confif</em>:

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
<b>X11Forwarding yes</b>
                </td>
        </tr>
</table>
</blockquote>

<p>
y a&ntilde;ada las siguientes l&iacute;neas a <em>ssh_config</em>:

<blockquote>
<table border="0" width="800">
	<tr>
		<td nowrap bgcolor="#eeeeee">
<b>ForwardAgent yes</b><br>
<b>ForwardX11 yes</b>
		</td>
	</tr>
</table>
</blockquote>

<p>
<strong>NOTA:</strong> Para los usuarios de Linux Mandrake 7.2.
Mandrake modifica la variable de entorno <em>XAUTHORITY</em> en
<em>/etc/skel/.bashrc</em>, y por consiguiente la cualquier directorio
de usuario de bash.  Esta variable la configura OpenSSH, y para cada que
funcione cada una de las opciones anteriores debe comentar la
l&iacute;nea:

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
<b># export XAUTHORITY=$HOME/.Xauthority</b>
                </td>
        </tr>
</table>
</blockquote>

<h2><a name= "2.8">2.8 - Despu&eacute;s de actualizar OpenSSH he perdido
el soporte para SSH2.</a></h2>

<p>
Es posible que se produzcan cambios en <em>sshd_config</em> o
<em>ssh_config</em> entre versiones.  Siempre que cambie de
versi&oacute;n de OpenSSH debe comprobar si se ha producido alguno de
estos cambios.  A partir de la versi&oacute;n 2.3.0 en adelante, debe
a&ntilde;adir lo siguiente a <em>sshd_config</em>:

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
<strong>HostKey /etc/ssh_host_dsa_key</strong><br>
<strong>HostKey /etc/ssh_host_rsa_key</strong>
                </td>
        </tr>
</table>
</blockquote>


<h2><a name="2.9">2.9 - sftp/scp falla al conectar, per ssh funciona
bien.</a></h2>

<p>
Es probable que sftp y/o scp fallen en el momento de la conexi&oacute;n
si tenemos un fichero de inicio de la <em>shell</em> (<em>.profile,
.bashrc, .cshrc,</em>, etc... ) que produzca una salida para sesiones no
interactivas.  Esta salida confunde al cliente de sftp/scp.  Puede
verificar si su <em>shell</em> est&aacute; haciendo esto del modo
siguiente:

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
<strong>ssh yourhost /usr/bin/true</strong>
                </td>
        </tr>
</table>
</blockquote>

<p>
Si la orden anterior produce cualquier tipo de salida, deber&aacute;
modificar el fichero de inicio de su int&eacute;rprete de &oacute;rdenes
(<em>shell</em>).


<h2><u><a name="3.0">3.0 - Preguntas sobre la versi&oacute;n
&laquo;portable&raquo; de OpenSSH</a></u></h2>

<h2><a name="3.1">3.1 - Mensajes falsos de autenticaci&oacute;n con PAM
en los ficheros de registro.</a></h2>

<p>
La versi&oacute;n portable de OpenSSH generar&aacute; falsos fallos en
la autenticaci&oacute;n en cada ingreso, como el siguiente:

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
&quot;<b>authentication failure; (uid=0) -&gt; root for sshd service</b>&quot;
                </td>
        </tr>
</table>
</blockquote>

<p>
Estos mensajes se generan debido a que OpenSSH intenta antes que nada
determinar si un usuario necesita autenticaci&oacute;n para el ingreso
(v.g. contrase&ntilde;a vac&iacute;a).  Desafortunadamente PAM registra
todos los intentos de autenticaci&oacute;n, incluido &eacute;ste.

<p>
Si le molesta demasiado configure <strong>PermitEmptyPasswords
no</strong> en el fichero <em>sshd_config</em>.  Esto acallar&aacute; el
mensaje de error, pero a cambio desactivar&aacute; la posibilidad de
ingreso en cuentas que no tengan una contrase&ntilde;a activada.  Si Vd
usa el fichero de configuraci&oacute;n del programa, esta opci&oacute;n
viene predeterminada.

<h2><a name="3.2">3.2 - La autenticaci&oacute;n mediante PAM no permite
contrase&ntilde;as vac&iacute;as.</a></h2>

<p>
Para activar las contrase&ntilde;as vac&iacute;as en una versi&oacute;n
de OpenSSH compilada con PAM debe a&ntilde;adir el indicador
<em>nullok</em> al final del m&oacute;dulo de verificaci&oacute;n de la
contrase&ntilde;a en el fichero <em>/etc/pam.d/sshd</em>.  Por ejemplo:

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
auth required/lib/security/pam_unix.so shadow nodelay nullok
                </td>
        </tr>
</table>
</blockquote>

<p>
Adem&aacute;s de esto debe configurar
<strong>PermitEmptyPasswords yes</strong> en el fichero
<em>sshd_config</em>.

<p>
Existe un peque&ntilde;o problema cuando se usan contrase&ntilde;as
vac&iacute;as con PAM:  PAM permite el uso de cualquier
contrase&ntilde;a cuando se autentica una cuenta con una
contrase&ntilde;a vac&iacute;a.  Esto desarticula el proceso de
comprobaci&oacute;n que usa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&amp;sektion=8">
sshd(8)</a>
para determinar si una cuenta tiene o no la contrase&ntilde;a activada y
permitir el acceso a los usuarios de la cuenta sin importarle la
pol&iacute;tica especificada por <strong>PermitEmptyPasswords</strong>.
Por este motivo se recomienda que no se a&ntilde;ada la directiva
<strong>nullok</strong> al fichero de configuraci&oacute;n de PAM a
menos que realmente desee permitir el uso de contrase&ntilde;as
vac&iacute;as.

<h2><a name="3.3">3.3 - ssh(1) tarda mucho en conectar con Linux/glibc
2.1</a></h2>

<p>
La biblioteca <em>glibc</em> que se incluye en Redhat 6.1 parece tardar
mucho en resolver direcciones IPv6 &oacute; IPv4 desde nombres de
dominios.  Esto se puede &laquo;trucar&raquo; con la opci&oacute;n de
configuraci&oacute;n <em>--with-ipv4-default</em>.  Esta opci&oacute;n
indica a OpenSSH que use s&oacute;lo la resoluci&oacute;n de direcciones
IPv4 (la resoluci&oacute;n de direcciones IPv6 se puede llevar a cabo
especificando la opci&oacute;n <em>-6</em> en este caso).

<h2><a name="3.4">3.4 - Mensajes en los registros (<em>log</em>) de
Linux: ´Can´t locate module net-pf-10´.</a></h2>

<p>
El n&uacute;cleo Linux busca (por medio de modprobe) el protocolo
´family 10´ (IPv6).  Para evitarlo puede cargar el m&oacute;dulo del
n&uacute;cleo adecuado e introducir el alias correcto en
<em>/etc/modules.conf</em>, o bien desactivar IPv6 en
<em>/etc/modules.conf</em>.

<p>
Por alguna est&uacute;pida raz&oacute;n, <em>/etc/modules.conf</em>
tambi&eacute;n se puede llamar <em>/etc/conf.modules</em>.

<h2><a name="3.5">3.5 - La autenticaci&oacute;n de la contrase&ntilde;a
no funciona en Slackware 7.0.</a></h2>

<p>
En Slackware 7.0 debe enlazar OpenSSH con libcrypt.

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
LIBS=-lcrypt ./configure [options]
                </td>
        </tr>
</table>
</blockquote>

<h2><a name="3.6">3.6 - ´configure´ o sshd(8) se quejan de que falta el
soporte para RSA.</a></h2>

<p>
Aseg&uacute;rese de que las bibliotecas de OpenSSL se han compilado con
el soporte para RSA o DSA incluido, bien de modo interno o a
trav&eacute;s de RSAref.

<h2><a name="3.7">3.7 - Errores &quot;scp: command not
found&quot;.</a></h2>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scp&amp;sektion=1">
scp(1)</a> se debe encontrar especificado en el <em>PATH</em>
predeterminado, tanto en el cliente como en el servidor.  Es probable
que deba usar la opci&oacute;n <em>--with-default-path</em> para
especificar un camino (<em>&quot;path&quot;</em>) personalizado de
b&uacute;squeda en el servidor.  Con esta opci&oacute;n se substituye el
camino predeterminado, por lo que deber&aacute; especificar todos los
directorios actuales en su camino, as&iacute; como el directorio en
donde haya instalado scp.  Por ejemplo:

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
$ <b>./configure --with-default-path=/bin:/usr/bin:/usr/local/bin:/camino/hasta/scp</b>
                </td>
        </tr>
</table>
</blockquote>

<h2><a name= "3.8">3.8 - No puede leer la contrase&ntilde;a
(<em>´Cannot read passphrase´</em>).</a></h2>

<p>
Algunos sistemas operativos configuran <em>/dev/tty</em> con modos
incorrectos, haciendo que la lectura de contrase&ntilde;as falle con el
siguiente error:

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
You have no controlling tty.  Cannot read passphrase.
                </td>
        </tr>
</table>
</blockquote>

<p>
La soluci&oacute;n est&aacute; en reconfigurar los permisos en
<em>/dev/tty</em> con el modo 0666 e informar sobre el error al
distribuidor de su sistema operativo.

<h2><a name="3.9">3.9 - Falta <em>configure</em> o hay fallos durante
<tt>make</tt>.</a></h2>

<p>
Si no existe el fichero <em>configure</em> dentro del archivo
<em>tar.gz</em> que se haya bajado, o si <tt>make</tt> falla dando
errores del tipo <em>´missing separators´</em>, es probable que haya
bajado la distribuci&oacute;n de OpenSSH para OpenBSD y que est&eacute;
intentando compilarla en otra plataforma.  Por favor, mire la
informaci&oacute;n que encontrar&aacute; en la p&aacute;gina de la
<a href="./portable.html">versi&oacute;n portable</a>.

<h2><a name="3.10">3.10 - Al terminar, ssh se queda colgado</a></h2>

<p>
OpenSSH puede colgarse al salir del programa.  Esto puede ocurrir cuando
hay un proceso activo en segundo plano.  Se conoce que sucede en Linux y
HP-UX.  El problema se puede verficar del siguiente modo:

<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
$ <b>sleep 20 & exit</b>
                </td>
        </tr>
</table>
</blockquote>

En su lugar, intente lo siguiente:
<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
$ <b>sleep 20 &lt; /dev/null &gt; /dev/null 2&gt;&amp;1 &amp;</b>
                </td>
        </tr>
</table>
</blockquote>

<p>
Los usuarios de <code>bash</code> pueden evitarlo a&ntilde;adiendo la
l&iacute;nea <strong>&quot;shopt -s huponexit&quot;</strong> en el
fichero <em>/etc/bashrc</em> o <em>&#126;/.bashrc</em>.  Si esto no
funcionara o si utiliza otro int&eacute;rprete de &oacute;rdenes,
consulte la p&aacute;gina de manual de &eacute;ste y busque una
opci&oacute;n para permitir que el int&eacute;rprete env&iacute;e una
se&ntilde;al <code>HUP</code> a los procesos activos cuando acaben.

<h2><a name="3.11">3.11 - &iquest;Por qu&eacute; ssh se queda colgado al
terminar?</a></h2>

<p>
Cuando se ejecuta
<blockquote>
<table border="0" width="800">
        <tr>
                <td nowrap bgcolor="#eeeeee">
$ <strong>ssh host command</strong>
                </td>
        </tr>
</table>
</blockquote>
ssh <strong>necesita</strong> quedarse colgado, porque necesita esperar:
<ul>
<li>hasta que est&eacute; seguro de que <code>command</code> ya no
necesita más entradas.
<li>hasta que est&eacute; seguro de que <code>command</code> ya no
produce m&aacute;s salidas.
<li>hasta que <code>command</code> abandone, ya que sshd precisa de
<code>command</code> para pasar el estado de salida a ssh.
</ul>

<p>
<h2><a name="3.12">3.12 - Despu&eacute;s de actualizar a OpenSSH 3.1, el
reenv&iacute;o de X11 ya no funciona.</a></h2>

<p>
A partir de la versi&oacute;n 3.1 de OpenSSH, el servidor de
reenv&iacute;o de X11, ssh, est&aacute; predeterminado para estar a la
escucha en el anfitri&oacute;n local;  mire la opci&oacute;n
<strong>X11UseLocalhost</strong> de sshd para invertirlo al
comportamiento anterior si sus clientes de X11 m&aacute;s viejos no
funcionan con la configuraci&oacute;n predeterminada.

<p>
Por lo general, los clientes de X11 que usan X11 R6 deber&iacute;an
funcionar con la configuraci&oacute;n predeterminada.  Algunos
distribuidores, incluido HP, incluyen las bibliotecas de R6 y R6 con los
clientes de X11, por lo que algunos clientes funcionar&aacute;n y otros
no.  Esto es lo que ocurre con HP-UX 11.X.

<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif" border="0" alt="OpenSSH"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq.html,v 1.55 ]<br>
$Translation: faq.html,v 1.36 2003/10/07 15:13:53 horacio Exp $<br>
$OpenBSD: faq.html,v 1.38 2003/10/07 20:01:28 horacio Exp $
</small>

</body>
</html>
