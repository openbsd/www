<!doctype html>
<html lang=en id=plus>
<meta charset=utf-8>
<title>OpenBSD 3.1 Changelog</title>
<meta name="description" content="OpenBSD 3.1 changes">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/plus31.html">
<style>
a[href="stable.html"] {
	color: var(--green);
}

strong {
	color: var(--red);
}

h3 {
	color: var(--blue);
}

p strong {
	font-weight: normal;
}
</style>

<h2 id=OpenBSD>
<a href="index.html">
<i>Open</i><b>BSD</b></a>
3.1 Changelog
</h2>
<hr>

<p>
This is a partial list of the major machine independent changes
(i.e., these are the changes people ask about most often).  Machine
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href="plat.html">platforms</a>.

<p>
Note: <strong>Problems for which patches exist are marked in red</strong>.

<p>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<a href="plus37.html">3.7</a>,
<br>
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>,
<a href="plus52.html">5.2</a>,
<a href="plus53.html">5.3</a>,
<a href="plus54.html">5.4</a>,
<br>
<a href="plus55.html">5.5</a>,
<a href="plus56.html">5.6</a>,
<a href="plus57.html">5.7</a>,
<a href="plus58.html">5.8</a>,
<a href="plus59.html">5.9</a>,
<a href="plus60.html">6.0</a>,
<a href="plus61.html">6.1</a>,
<a href="plus62.html">6.2</a>,
<a href="plus63.html">6.3</a>,
<a href="plus64.html">6.4</a>,
<a href="plus65.html">6.5</a>,
<a href="plus66.html">6.6</a>,
<a href="plus67.html">6.7</a>,
<a href="plus68.html">6.8</a>,
<a href="plus69.html">6.9</a>,
<a href="plus70.html">7.0</a>,
<a href="plus71.html">7.1</a>,
<br>
<a href="plus72.html">7.2</a>,
<a href="plus73.html">7.3</a>,
<a href="plus74.html">7.4</a>,
<a href="plus75.html">7.5</a>,
<a href="plus76.html">7.6</a>,
<a href="plus77.html">7.7</a>,
<a href="plus.html">current</a>.
<br>

<p>
<h3>Changes made between OpenBSD 3.0 and 3.1</h3>
<p>

<ul>
<li>Fix xim problems with zh_CN locale in <a href="https://man.openbsd.org/xf86.4">xf86(4)</a>.
<li>Enable Apache <a href="https://man.openbsd.org/httpd.8">httpd(8)</a> modules on ELF-based architectures.
<li>Disallow <a href="https://man.openbsd.org/ftpd.8">ftpd(8)</a> logins to accounts lacking passwords.
<li>Log control signals on the IDE bus in <a href="https://man.openbsd.org/wdc.4">wdc(4)</a>, obtainable through <a href="https://man.openbsd.org/atactl.8">atactl(8)</a>.
<li>Move xautolock(l) into the <a href="https://man.openbsd.org/ports.7">ports(7)</a> system.
<li>Import <a href="https://man.openbsd.org/pmdb.1">pmdb(1)</a>.
<li>Improve ALTIVEC support in OpenBSD/macppc and powerpc.
<li>Begin to split authorization in <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>.
<li>Protect against overflows and null dereferences in OpenBSD/i386 CPU probing.
<li>Morph <a href="https://man.openbsd.org/ptrace.2">ptrace(2)</a> into one of the kernel <a href="https://man.openbsd.org/config.8">config(8)</a> <a href="https://man.openbsd.org/options.4">options(4)</a>.
<li>Repair some of the problems in the new <a href="https://man.openbsd.org/ahc.4">ahc(4)</a> driver.
<li>Prefer the MAC address found in the local-mac-address property of <a href="https://man.openbsd.org/sparc/hme.4">hme(4)</a>, falling back on myetheraddr().
<li>Rewrite the powerpc pmap handling.
<li>Realize that suffixes given to <a href="https://man.openbsd.org/gzip.1">gzip(1)</a> may be longer than 3 characters and account for this in buffer sanity checks.
<li>Permit user and group names to start with a numeral in <a href="https://man.openbsd.org/identd.8">identd(8)</a>.
<li>Enable <a href="https://man.openbsd.org/altq.9">altq(9)</a> support in more drivers.
<li>Update to <a href="http://www.gzip.org/zlib/">zlib</a> 1.1.4, fixing a security hole.
<li>Support reverse lookups when displaying states in <a href="https://man.openbsd.org/pfctl.8">pfctl(8)</a>.
<li>Add the PT_IO API for reading and writing traced processes memory with <a href="https://man.openbsd.org/ptrace.2">ptrace(2)</a>.
<li>Don't <a href="https://man.openbsd.org/listen.2">listen(2)</a> on a port <a href="https://man.openbsd.org/nc.1">nc(1)</a> really doesn't have.
<li>Ensure <a href="https://man.openbsd.org/tcp.4">tcp(4)</a> code doesn't operate on freed memory.
<li>Schedule <a href="https://man.openbsd.org/tcp.4">tcp(4)</a> timers with <a href="https://man.openbsd.org/timeout.9">timeout(9)</a> instead of tcp_slowtimo.
<li>Phase in use of red-black <a href="https://man.openbsd.org/tree.3">tree(3)</a> algorithms for <a href="https://man.openbsd.org/uvm.9">uvm(9)</a>.
<li>Implement a shutdown hook for <a href="https://man.openbsd.org/raid.4">raid(4)</a> devices, allowing safe use of swap.
<li>Export <a href="https://man.openbsd.org/sha1.3">sha1(3)</a> and <a href="https://man.openbsd.org/md5.3">md5(3)</a> interfaces through <a href="https://man.openbsd.org/crypto.4">crypto(4)</a>.
<li>General <a href="https://man.openbsd.org/crypto.4">crypto(4)</a> and <a href="https://man.openbsd.org/openssl.1">openssl(1)</a> related work.
<li>Recognize a preserve flag in <a href="https://man.openbsd.org/mtree.8">mtree(8)</a> to disable attribute modification.
<li>Repair an off by one error in <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>.
<li>Differentiate a closing connection from a bad greeting during read of the protocol version string in <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>.
<li>Many improvements and cleanups to the trap handling in the installation system.
<li>Implement machine specific commands to the bootblocks on OpenBSD/hppa.
<li>Provide a toggle for immediate ack behaviour on <a href="https://man.openbsd.org/tcp.4">tcp(4)</a> TH_PUSH segments.
<li>Use <a href="https://man.openbsd.org/timeout.9">timeout(9)</a> instead of tcp_fasttimo for delayed acks in the <a href="https://man.openbsd.org/tcp.4">tcp(4)</a> subsystem.
<li>Vanquish a race condition in <a href="https://man.openbsd.org/pciide.4">pciide(4)</a> interrupt sharing.
<li>Avoid rejecting valid leases in <a href="https://man.openbsd.org/dhclient.8">dhclient(8)</a>.
<li>Add SOCKS4 support to <a href="https://man.openbsd.org/nc.1">nc(1)</a>.
<li>Import the 4.4BSD <a href="https://man.openbsd.org/deroff.1">deroff(1)</a> and <a href="https://man.openbsd.org/spell.1">spell(1)</a> programs.
<li>Enhance the handling of quirky <a href="https://man.openbsd.org/scsi.4">scsi(4)</a> devices.
<li>Improve debugability of unloaded <a href="https://man.openbsd.org/pf.4">pf(4)</a> rules by printing meaningful rule numbers.
<li>Safen SPLAY_MIN and SPLAY_MAX on an empty <a href="https://man.openbsd.org/tree.3">tree(3)</a>.
<li>Support an optional <a href="https://man.openbsd.org/pool.9">pool(9)</a> memory hard limit in <a href="https://man.openbsd.org/pf.4">pf(4)</a>.
<li>Guard against pool_sethardlimit() decreasing the limit below the current size of the <a href="https://man.openbsd.org/pool.9">pool(9)</a>.
<li>Disable Nagle in <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> port forwarding.
<li>Implement the splay and red-black <a href="https://man.openbsd.org/tree.3">tree(3)</a> algorithms.
<li>nwkey and powersave support in <a href="https://man.openbsd.org/ifconfig.8">ifconfig(8)</a>.
<li>Deal with groups in <a href="https://man.openbsd.org/adduser.8">adduser(8)</a> more thoroughly.
<li>Optimize OpenBSD/vax sources with -O2.
<li>Support an aperture driver on OpenBSD/macppc.
<li>Add a <a href="https://man.openbsd.org/sysctl.3">sysctl(3)</a> interface kern.usercrypto that allows userland programs to utilize hardware <a href="https://man.openbsd.org/crypto.4">crypto(4)</a> devices.
<li>Send kind regards to the <a href="https://man.openbsd.org/pool.9">pool(9)</a> option POOL_EXPOSE, as it's no longer with us.
<li>Add <a href="https://man.openbsd.org/extattr.9">extattr(9)</a> (Extended Attribute) support.
<li>Include a siginfo_t structure with <a href="https://man.openbsd.org/ktrace.2">ktrace(2)</a> containing the fault address among other useful information.
<li>Clean up and debug the iommu driver.
<li>Remove flawed assumptions about memory layout in the stack sharing code in FORK_VMNOSTACK.
<li>Account for process signal masks when dealing with signals in <a href="https://man.openbsd.org/pthreads.3">pthreads(3)</a>.
<li>Reorder the network components initialization in <a href="https://man.openbsd.org/netstart.8">netstart(8)</a>.
<li>Fix some signal races in <a href="https://man.openbsd.org/rbootd.8">rbootd(8)</a>.
<li>Improve <a href="https://man.openbsd.org/mg.1">mg(1)</a> in many ways, including lots of buffer cleanups and undo support.
<li>Enable <a href="https://man.openbsd.org/sparc64/beeper.4">beeper(4)</a> on OpenBSD/sparc64 when <a href="https://man.openbsd.org/sparc64/pckbd.4">pckbd(4)</a> is enabled.
<li>Silence the <a href="https://man.openbsd.org/raid.4">raid(4)</a> subsystem a bit.
<li>Include support for generic 802.11 <a href="https://man.openbsd.org/ioctl.2">ioctl(2)</a> calls in the <a href="https://man.openbsd.org/wi.4">wi(4)</a> driver.
<li>Repair a <a href="https://man.openbsd.org/fcntl.2">fcntl(2)</a> F_GETOWN issue on LP64 BE architectures.
<li>Install &quot;right&quot; zoneinfo <a href="https://man.openbsd.org/timezone.3">timezone(3)</a> files in addition to the &quot;posix&quot; ones.
<li>Remove xebec code.
<li>Enable <a href="https://man.openbsd.org/echo.1">echo(1)</a> in <a href="https://man.openbsd.org/adduser.8">adduser(8)</a> <a href="https://man.openbsd.org/signal.3">signal(3)</a> handlers.
<li>Don't require -n in conjunction with -x in <a href="https://man.openbsd.org/xargs.1">xargs(1)</a>.
<li>Use <a href="https://man.openbsd.org/mktemp.1">mktemp(1)</a> in <a href="https://man.openbsd.org/security.8">security(8)</a>.
<li>Switch <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> cipher operations to use the <a href="https://man.openbsd.org/openssl.1">openssl(1)</a> EVP API.
<li>Allocate some in-kernel memory from a kmem_map-backed pool to avoid deadlocks and MAX_KMAPENT panics.
<li>Avoid a possible panic on <a href="https://man.openbsd.org/reboot.8">reboot(8)</a> with <a href="https://man.openbsd.org/mfs.8">mfs(8)</a> file systems.
<li>New <a href="https://man.openbsd.org/trm.4">trm(4)</a> driver.
<li>Remove a permissions loosening <a href="https://man.openbsd.org/chmod.2">chmod(2)</a> in pkg_install.
<li><a href="https://man.openbsd.org/open.2">open(2)</a> the console with O_NONBLOCK in <a href="https://man.openbsd.org/syslog.3">syslog(3)</a> to avoid blocking on a locked console.
<li>Provide <a href="https://man.openbsd.org/config.8">config(8)</a> accessible hooks for modifying the NMBCLUSTERS, BUFCACHEPERCENT, and NKMEMPAGES <a href="https://man.openbsd.org/options.4">options(4)</a>.
<li>Calculate <a href="https://man.openbsd.org/ip.4">ip(4)</a> checksums and copy back modified headers before logging a packet in <a href="https://man.openbsd.org/pf.4">pf(4)</a> to ensure the integrity of logging.
<li>Enable <a href="https://man.openbsd.org/vnode.9">vnode(9)</a> caching in the <a href="https://man.openbsd.org/mount_kernfs.8">kernfs(8)</a> code.
<li>Support for <a href="https://man.openbsd.org/nc.1">nc(1)</a> connecting to and listening on an AF_UNIX <a href="https://man.openbsd.org/socket.2">socket(2)</a>.
<li>Treat the pound symbol (#) as an escaped character during vi/emacs filename completion in <a href="https://man.openbsd.org/ksh.1">ksh(1)</a>.
<li>New port of the <a href="https://man.openbsd.org/ahc.4">ahc(4)</a> driver.
<li>Remove the <a href="https://man.openbsd.org/getpw.3">getpw(3)</a>, <a href="https://man.openbsd.org/vlimit.3">vlimit(3)</a>, and <a href="https://man.openbsd.org/vtimes.3">vtimes(3)</a> functions.
<li>Simplify PID selection algorithm.
<li>Immunize <a href="https://man.openbsd.org/nanosleep.2">nanosleep(2)</a> against system time changes.
<li>Minimize time spent doing time management in <a href="https://man.openbsd.org/pf.4">pf(4)</a>.
<li>New <a href="https://man.openbsd.org/tvtohz.9">tvtohz(9)</a> function.
<li>Add skip steps for rule action and direction in <a href="https://man.openbsd.org/pf.4">pf(4)</a>, considerably hastening rule set evaluation.
<li><a href="https://man.openbsd.org/altq.9">altq(9)</a> fixes and improvements through a sync with KAME.
<li>Implement multiple overlapping read/write requests in <a href="https://man.openbsd.org/sftp.1">sftp(1)</a> file transfers.
<li>Update to apache <a href="https://man.openbsd.org/httpd.8">httpd(8)</a> 1.3.23 with mod_ssl 2.8.6.
<li>Relocate <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> configuration files to /etc/ssh.
<li>Remove dangerous agressiveness in NFS optimizations with symbolic links.
<li>Improve the <a href="https://man.openbsd.org/sis.4">sis(4)</a> driver a bit.
<li>Update to heimdal-0.4e.
<li>Fix a possible FIN retransmission mishap.
<li>Account for temporary references to a struct file to avoid races in shared <a href="https://man.openbsd.org/fd.4">fd(4)</a> situations.
<li>Allow specification of the copy buffer length in <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> via -B.
<li>Some <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> channels cleanup.
<li>A potpourri of multi-faceted hppa improvements.
<li>Double check the byte ordering in <a href="https://man.openbsd.org/mpool.3">mpool(3)</a>.
<li>Introduce many new and fruitful regression tests.
<li>Add a driver to get a performance counters on sparc64.
<li>Make <a href="https://man.openbsd.org/ddb.4">ddb(4)</a> understand &quot;boot reboot&quot; and &quot;boot poweroff&quot;.
<li>Include a <a href="https://man.openbsd.org/bha.4">bha(4)</a> driver.
<li>Improve support for header byte swapping in <a href="https://man.openbsd.org/tcpdump.8">tcpdump(8)</a>.
<li>Use &quot;aes&quot; in place of &quot;rijndael&quot; in <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>.
<li>Mark execing processes with a flag to indicate to <a href="https://man.openbsd.org/ptrace.2">ptrace(2)</a> and similar not to fiddle.
<li>Handle DMA errors and big-endian systems in the <a href="https://man.openbsd.org/ubsec.4">ubsec(4)</a> driver.
<li>Upgrade to XFree86 <a href="http://www.xfree86.org/4.2.0/RELNOTES.html">4.2.0</a>
<li>Plug memory leaks in zlib, <a href="https://man.openbsd.org/ftpd.8">ftpd(8)</a>, and the <a href="https://man.openbsd.org/setusercontext.3">login_getcap(3)</a> family.
<li>Support <a href="https://man.openbsd.org/disklabel.8">disklabel(8)</a> style size/offset values (ala &quot;300k&quot;, &quot;500M&quot;, &quot;2G&quot;) in <a href="https://man.openbsd.org/i386/fdisk.8">fdisk(8)</a>.
<li>Enable the serial console driver and keyboards found on some sparc64 systems.
<li>Use more <a href="https://man.openbsd.org/pool.9">pool(9)</a> based allocations throughout the system.
<li>Update to sendmail-8.12.2.
<li>Add <a href="https://man.openbsd.org/sparc64/magma.4">magma(4)</a> and <a href="https://man.openbsd.org/sparc64/spif.4">spif(4)</a> support to sparc64.
<li>Don't let <a href="https://man.openbsd.org/wdc.4">wdc(4)</a> try UDMA modes if the controller doesn't support them.
<li>Pay attention to direction with the fastroute and route-to options in <a href="https://man.openbsd.org/pf.4">pf(4)</a>.
<li>Implement net.inet.icmp.rediraccept and net.inet.icmp.redirtimeout via <a href="https://man.openbsd.org/sysctl.8">sysctl(8)</a>, configuring an <a href="https://man.openbsd.org/icmp.4">icmp(4)</a> redirect ignore and timeout.
<li>Use and support the UNIMPLEMENTED message in the <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> protocol.
<li>Prevent file descriptor close mistakes in <a href="https://man.openbsd.org/faithd.8">faithd(8)</a>, <a href="https://man.openbsd.org/route6d.8">route6d(8)</a>, <a href="https://man.openbsd.org/rtadvd.8">rtadvd(8)</a>, and <a href="https://man.openbsd.org/rtsold.8">rtsold(8)</a>.
<li>Remove requirement for reserved ports in the NFS server by using the vfs.nfs.norsvport <a href="https://man.openbsd.org/sysctl.8">sysctl(8)</a>.
<li>Handle playback interrupts nicely in the cs4321 driver.
<li>Correctly differentiate between reading and writing operations on a number of devices, including <a href="https://man.openbsd.org/radio.4">radio(4)</a>
<li>Allow port 0 to be used in <a href="https://man.openbsd.org/pf.4">pf(4)</a> rules.
<li>Improve <a href="https://man.openbsd.org/tty.4">tty(4)</a> resizing support in <a href="https://man.openbsd.org/mg.1">mg(1)</a>.
<li>In <a href="https://man.openbsd.org/mixerctl.1">mixerctl(1)</a>, only open the mixer with RDWR when really needed.
<li>Enforce sane port ranges in the <a href="https://man.openbsd.org/pfctl.8">pfctl(8)</a> rule parsing logic.
<li>Obey POSIX and don't update the modification time of the file if a <a href="https://man.openbsd.org/write.2">write(2)</a> is done with a length of zero bytes.
<li>Allow <a href="https://man.openbsd.org/pf.4">pf(4)</a> rules to be identified by arbitrary labels.
<li>Support the HiFn 7811 in the <a href="https://man.openbsd.org/hifn.4">hifn(4)</a> driver.
<li>Add ELF support to <a href="https://man.openbsd.org/modload.8">modload(8)</a>, among other improvements.
<li>Support flags for <a href="https://man.openbsd.org/savecore.8">savecore(8)</a> in <a href="https://man.openbsd.org/rc.8">rc(8)</a>.
<li>Recognize a &quot;no&quot; keyword in the nat/rdr/binat syntax of <a href="https://man.openbsd.org/nat.conf.5">nat.conf(5)</a> to avoid translation.
<li>Allow a <a href="https://man.openbsd.org/cvs.1">cvs(1)</a> tagname to be expanded during checkout, export, and
update to be specified on the command line.
<li>Repair behaviour of <a href="https://man.openbsd.org/ip.4">ip(4)</a> over <a href="https://man.openbsd.org/ip6.4">ip6(4)</a> tunneling when using <a href="https://man.openbsd.org/gif.4">gif(4)</a>.
<li>Clean up the <a href="https://man.openbsd.org/lkm.4">lkm(4)</a> subsystem.
<li>Consistently use SIG_DFL instead of SIG_IGN to disable a SIGCHLD <a href="https://man.openbsd.org/signal.3">signal(3)</a> handler.
<li>Do not allow root to <a href="https://man.openbsd.org/login.1">login(1)</a> via an insecure tty even if the auth method does not use plaintext passwords.
<li>Don't let root change its password via <a href="https://man.openbsd.org/login_chpass.8">login_chpass(8)</a> and
<a href="https://man.openbsd.org/login_lchpass.8">login_lchpass(8)</a>.
<li>Add usbtablet(4), input support in XF4 for <a href="https://man.openbsd.org/usb.3">usb(3)</a> devices.
<li>Avoid hanging x11 channels in <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> with rejected cookies.
<li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a> protocol 2 HostKey default becomes /etc/ssh_host_rsa_key and /etc/ssh_host_dsa_key.
<li>Enable <a href="https://man.openbsd.org/usb.3">usb(3)</a> devices for sparc64.
<li>Add a new <a href="https://man.openbsd.org/m4.1">m4(1)</a> based <a href="https://man.openbsd.org/i386/makedev.8">makedev(8)</a> generation system.
<li>Have <a href="https://man.openbsd.org/i386/fdisk.8">fdisk(8)</a> remove references to the NT serial number when writing to the MBR.
<li>Handle truncation to the middle of a file hole in FFS.
<li>Update <a href="https://man.openbsd.org/sudo.8">sudo(8)</a> to 1.6.4.
<li>Add more commands to <a href="https://man.openbsd.org/ddb.4">ddb(4)</a>.
<li>Fix PT_{READ,WRITE}_{I,D} on sparc64.
<li>Migrate regression tests to a new, unified framework.
<li>Ensure correct alignment in some <a href="https://man.openbsd.org/bridge.4">bridge(4)</a> code.
<li>Many <a href="https://man.openbsd.org/pthreads.3">pthreads(3)</a> fixes: only poll file descriptors when needed
 use scheduling ticks for better timing, and avoid a polling related overflow.
<li>Only require write permission in <a href="https://man.openbsd.org/pf.4">pf(4)</a> and <a href="https://man.openbsd.org/pfctl.8">pfctl(8)</a> when modifying.
<li>Various <a href="https://man.openbsd.org/od.1">od(1)</a> and <a href="https://man.openbsd.org/hexdump.1">hexdump(1)</a> fixes and POSIXification.
<li>Rename libusb to <a href="https://man.openbsd.org/usbhid.3">libusbhid(3)</a>.
<li>Enable RAIDFrame auto-configuration.
<li>Ignore the RSH environment variable in <a href="https://man.openbsd.org/rdist.1">rdist(1)</a> if it is empty.
<li>Correctly retain <a href="https://man.openbsd.org/yp.8">yp(8)</a> bindings in <a href="https://man.openbsd.org/ypbind.8">ypbind(8)</a> when using more than two domains.
<li>Plug a memory leak in the EPRT command of <a href="https://man.openbsd.org/ftpd.8">ftpd(8)</a>.
<li>Repair hex mode output in <a href="https://man.openbsd.org/skey.1">skey(1)</a>.
<li>Default to using the non-blocking behaviour on new <a href="https://man.openbsd.org/accept.2">accept(2)</a> sockets.
<li>Repair <a href="https://man.openbsd.org/tty.1">tty(1)</a> related panics caused by the session pointer code.
<li>Have <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> and family exit on <a href="https://man.openbsd.org/openssl.1">openssl(1)</a> allocation failures.
<li>Only require the -t option when using <a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a> to generate keys.
<li>Don't examine the <a href="https://man.openbsd.org/tcp.4">tcp(4)</a> header of non-tcp packets in PPP.
<li>Strengthen permissions on ppp.conf.sample.
<li>Use constant bitmasks as opposed to bitfields in the mmu segment and page table structure for mvme88k.
<li>Correctly print the payload string of <a href="https://man.openbsd.org/tcp.4">tcp(4)</a> RST segments when <a href="https://man.openbsd.org/tcpdump.8">tcpdump(8)</a> is verbose.
<li>Implement a scalable <a href="https://man.openbsd.org/timeout.9">timeout(9)</a> mechanism with constant-time add and delete.
<li>Let mvme68k systems lacking a configured pcc device compile.
<li>Don't default to generate rsa1 keys in <a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a>, and try all standard key files when invoked without arguments.
<li>Have <a href="https://man.openbsd.org/crontab.1">crontab(1)</a> send SIGUSR1 to <a href="https://man.openbsd.org/cron.8">cron(8)</a> when a crontab file has changed, making changes take effect sooner.
<li>Send failing packet sequence number when <a href="https://man.openbsd.org/sshd.8">sshd(8)</a> is responding with an SSH_MSG_UNIMPLEMENTED.
<li>Ensure that user and system times increase monotonically.
<li>Add powerhook support to <a href="https://man.openbsd.org/yds.4">yds(4)</a> to handle <a href="https://man.openbsd.org/i386/apm.8">apm(8)</a> resumes correctly.
<li>Repair memory leak in <a href="https://man.openbsd.org/pcap.3">pcap(3)</a> associated with compiled <a href="https://man.openbsd.org/bpf.4">bpf(4)</a> programs.
<li>Support span ports so that one can snoop a bridge from another interface/machine/network.
<li>Disestablish the <a href="https://man.openbsd.org/xl.4">xl(4)</a> powerhook on detach.
<li>Add a -u flag to <a href="https://man.openbsd.org/i386/fdisk.8">fdisk(8)</a> which updates the MBR code but leaves the partition table intact.
<li>Big <a href="https://man.openbsd.org/isp.4">isp(4)</a> overhaul.
<li>Improve signal handling in <a href="https://man.openbsd.org/cron.8">cron(8)</a> so that processes run by <a href="https://man.openbsd.org/cron.8">cron(8)</a> can't zombify until <a href="https://man.openbsd.org/cron.8">cron(8)</a> wakes up.
<li>Add a <a href="https://man.openbsd.org/pf.4">pf(4)</a> DIOCADDSTATE <a href="https://man.openbsd.org/ioctl.2">ioctl(2)</a> that adds state entries.
<li>Support primitive stateful <a href="https://man.openbsd.org/pf.4">pf(4)</a> filtering for other non-TCP/UDP/ICMP protocols.
<li>Fix <a href="https://man.openbsd.org/icmp6.4">icmp6(4)</a> MIB counter.
<li>Better signal handling in <a href="https://man.openbsd.org/login_skey.8">login_skey(8)</a> to avoid a possible race condition.
<li>Update signal handlers in <a href="https://man.openbsd.org/passwd.1">passwd(1)</a> to complement new catching <a href="https://man.openbsd.org/getpass.3">getpass(3)</a> call.
<li>Allow <a href="https://man.openbsd.org/vnd.4">vnd(4)</a> to create things larger than 2G.
<li>Perform a sanity check on the inner IP header of IP-in-IP encapsulated packets.
<li>Support -o for <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>, like <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>.
<li>Catch -- don't block -- SIGINT and SIGTSTP in <a href="https://man.openbsd.org/readpassphrase.3">readpassphrase(3)</a> and <a href="https://man.openbsd.org/getpass.3">getpass(3)</a>.
<li>Enable rootdev auto-configuration by device drivers during boot and add support for raid devices.
<li>Parse hex numbers in <a href="https://man.openbsd.org/pf.4">pf(4)</a> correctly.
<li>Curtail the use of <a href="https://man.openbsd.org/regex.3">regex(3)</a> in <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>.
<li>Make NKMEMPAGES dynamic based on memory size, deprecating NKMEMCLUSTERS in favour of NKMEMPAGES, NKMEMPAGES_MIN, and NKMEMPAGES_MAX.
<li>Forbid the coupling of different address families in <a href="https://man.openbsd.org/pf.4">pf(4)</a> nat, binat, and rdr rules.
<li>Release the right descriptors when <a href="https://man.openbsd.org/pipe.2">pipe(2)</a> fails.
<li>Use <a href="https://man.openbsd.org/pidfile.3">pidfile(3)</a> throughout the tree instead of hand-rolled imitations.
<li>Don't let <a href="https://man.openbsd.org/sshd.8">sshd(8)</a> pass user-defined variables to <a href="https://man.openbsd.org/login.1">login(1)</a>.
<li>Nuke smartkey(1).
<li>Remove pipe based interface to <a href="https://man.openbsd.org/photurisd.8">photurisd(8)</a>, leaving only PF_KEY.
<li>Issue a &quot;failed&quot; message instead of a 2nd challenge if <a href="https://man.openbsd.org/sshd.8">sshd(8)</a> sees the same key in authorized_keys twice.
<li>Let the <a href="https://man.openbsd.org/sshd.8">sshd(8)</a> fake X11 server listen on localhost by default.
<li>Use <a href="https://man.openbsd.org/ip6.4">ip6(4)</a> in <a href="https://man.openbsd.org/sendmail.1">sendmail(1)</a> when possible.
<li>Fix an alignment bug on alpha by using <a href="https://man.openbsd.org/getifaddrs.3">getifaddrs(3)</a> instead of various <a href="https://man.openbsd.org/ioctl.2">ioctl(2)</a> calls in <a href="https://man.openbsd.org/named.8">named(8)</a>.
<li>Conform to historic behaviour in <a href="https://man.openbsd.org/fmt.1">fmt(1)</a>; don't format lines that start with a dot.
<li>Avoid a &quot;thundering herd&quot; problem in <a href="https://man.openbsd.org/accept.2">accept(2)</a>, and fix an infinite loop on 64-bit systems.
<li>Use <a href="https://man.openbsd.org/pool.9">pool(9)</a> for socket allocations.
<li>Correctly signal an error condition in <a href="https://man.openbsd.org/newsyslog.8">newsyslog(8)</a> so we don't send a signal to PID 0.
<li>Repair an error in uipc_socket that could make a transient error permanent.
<li>Perform a pf_route() before logging in case the logging created a bogus rule, avoiding a panic.
<li>Have socket connection queues use a tailq <a href="https://man.openbsd.org/queue.3">queue(3)</a>.
<li>Add fastroute option to <a href="https://man.openbsd.org/pf.4">pf(4)</a>.
<li>Support pasting characters with codes above 127 using the mouse via <a href="https://man.openbsd.org/wscons.4">wscons(4)</a>.
<li>Handle PID files terminated with newlines correctly in <a href="https://man.openbsd.org/newsyslog.8">newsyslog(8)</a>.
<li>Among other improvements, don't leak memory in <a href="https://man.openbsd.org/ppp.8">ppp(8)</a>.
<li>During installation, preserve blank space in responses.
<li>Centralize the mount list, unifying locking, and add vfs_isbusy to help verify that a mount point is locked.
<li>Strengthen the mbuf traversal code in <a href="https://man.openbsd.org/pf.4">pf(4)</a>, avoiding potential crashes on <a href="https://man.openbsd.org/ip6.4">ip6(4)</a> packets with options.
<li>Make dummies for aclocal and the auto* family in <a href="https://man.openbsd.org/cvs.1">cvs(1)</a>, hopefully mitigating upgrade hassles.
<li>Don't allow the <a href="https://man.openbsd.org/pf.4">pf(4)</a> CHANGEBINAT <a href="https://man.openbsd.org/ioctl.2">ioctl(2)</a> when securelevel &gt; 1.
<li>Include stub dl* function definitions in libc on ELF, making libdl unneeded.
<li>Enhance network handling during installations.
<li>Block signals in <a href="https://man.openbsd.org/find.1">find(1)</a> when running fts_read().
<li>Move NFS creds out of the standard buf structure and into the nfs node, and use <a href="https://man.openbsd.org/pool.9">pool(9)</a> for NFS node allocation.
<li>Fix the password length check in <a href="https://man.openbsd.org/user.8">user(8)</a>.
<li>Use lockmgr in procfs (<a href="https://man.openbsd.org/mount_procfs.8">(mount_procfs(8)</a>) instead of a home-made version.
<li>Correctly mark items on the syncer worklist with VBIOONSYNCLIST, ensuring items not on the list don't have this mark.
<li>Convert to using the vn_marktext() function instead of VTEXT to mark a vnode as executing a text image.
<li>Enable the NI_WITHSCOPEID <a href="https://man.openbsd.org/getnameinfo.3">getnameinfo(3)</a> flag by default.
<li>sendmail(8) should listen on port 587 for <a href="https://man.openbsd.org/ip.6">ip(6)</a>, like <a href="https://man.openbsd.org/ip4.6">ip4(6)</a>.
<li>Add sanity to the <a href="https://man.openbsd.org/apmd.8">apmd(8)</a> battery alert when the battery is charging.
<li>Let <a href="https://man.openbsd.org/chdir.2">chdir(2)</a> errors in <a href="https://man.openbsd.org/rwhod.8">rwhod(8)</a> be seen.
<li><strong>SECURITY FIX: update <a href="https://man.openbsd.org/ssh.1">ssh</a> to OpenSSH-3.0.1.</strong><br>
    <a href="errata30.html#sshd">A source code patch is available</a>.<br>
    <a href="stable.html">[Applied to stable]</a>
<li>Repair ipx frame-type handling in <a href="https://man.openbsd.org/ifconfig.8">ifconfig(8)</a>.
<li><strong>SECURITY FIX: don't let <a href="https://man.openbsd.org/pf.4">pf</a> wander off the end of ipv6 icmp packets.</strong><br>
    <a href="errata30.html#pf">A source code patch is available</a>.<br>
    <a href="stable.html">[Applied to stable]</a>
<li>Fix a recursive mutex problem in <a href="https://man.openbsd.org/pthreads.3">pthreads(3)</a>.
<li><strong>RELIABILITY FIX: quiet bogus interrupt messages on sparc64 <a href="https://man.openbsd.org/pciide.4">pciide</a> cdroms.</strong><br>
    <a href="errata30.html#sparc64cd">A source code patch is available</a>.<br>
    <a href="stable.html">[Applied to stable]</a>
<li>Support the &quot;S&quot; command in interactive mode in <a href="https://man.openbsd.org/top.1">top(1)</a> to toggle display of system processes.
<li>Prepare for UBC by adding a daemon that processes async I/O and repairing some other things.
<li>Don't <a href="https://man.openbsd.org/memset.3">memset(3)</a> too much memory in <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> or <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>.
<li>Be much more sure that software cannot be used in <a href="https://man.openbsd.org/crypto.9">crypto(9)</a> stuff.
<li>Fix behaviour of <a href="https://man.openbsd.org/system.3">system(3)</a> in <a href="https://man.openbsd.org/phtreads.3">phtreads(3)</a> so it doesn't hang forever.
<li>Use <a href="https://man.openbsd.org/select.2">select(2)</a> instead of unsafe SIGIO method for handling <a href="https://man.openbsd.org/wscons.4">wscons(4)</a> events in X11.
<li>Increase buffer sizes in <a href="https://man.openbsd.org/tcpd.8">tcpd(8)</a> and <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> so they can hold a full hostname.
<li>Add <a href="https://man.openbsd.org/uscanner.4">uscanner(4)</a> device node to i386 and macppc.
<li><strong>SECURITY FIX: be more careful with file permissions in vi.recover</strong><br>
    <a href="errata30.html#vi.recover">A source code patch is available</a>.<br>
    <a href="stable.html">[Applied to stable]</a>
<li><strong>RELIABILITY FIX: provide illegal instruction trap handling for Altivec instructions on macppc.</strong><br>
    <a href="errata30.html#altivec">A source code patch is available</a>.<br>
    <a href="stable.html">[Applied to stable]</a>
<li>Take advantage of the bus_dmamap_sync API.
<li><strong>RELIABILITY FIX: finally address the PCI abort problem on <a href="https://man.openbsd.org/hifn.4">hifn7751</a>.</strong><br>
    <a href="errata30.html#hifn">A source code patch is available</a>.<br>
    <a href="stable.html">[Applied to stable]</a>
<li>Move accounting disk space watcher into a kernel thread, fixing accounting on NFS.
<li>Fix many signal handlers throughout the tree.
<li>Avoid overruning mbuf length in <a href="https://man.openbsd.org/ip6.4">ip6(4)</a> handling.
<li>Big <a href="https://man.openbsd.org/rusers.1">rusers(1)</a> update, including protocol version 3 support, avoidance of duplicate issues on multihomed machines, and timeout tweaking.
<li>Support <a href="https://man.openbsd.org/mmap.2">mmap(2)</a> past 4GB offsets.
<li>Repair creation of the <a href="https://man.openbsd.org/hosts.5">hosts(5)</a> file during installation.
<li>Size <a href="https://man.openbsd.org/mprotect.2">mprotect(2)</a> allocations from <a href="https://man.openbsd.org/malloc.3">malloc(3)</a> to 0 bytes, resulting in a fault on access.
<li>Handle autorepeat delays better in <a href="https://man.openbsd.org/wskbd.4">wskbd(4)</a>.
<li>Send the User-Agent header when using <a href="https://man.openbsd.org/ftp.1">ftp(1)</a> to WWW servers and proxies.
<li>Overhaul some <a href="https://man.openbsd.org/fd.4">fd(4)</a> handling within the kernel.
<li>Ensure <a href="https://man.openbsd.org/isakmpd.8">isakmpd(8)</a> dies promptly on reciept of the SIGTERM <a href="https://man.openbsd.org/signal.3">signal(3)</a>.
<li>Fix a problem with <a href="https://man.openbsd.org/bsd_auth.3">bsd_auth(3)</a> and passwords containing colons.
<li>Make -h and -L in <a href="https://man.openbsd.org/pax.4">pax(4)</a> and <a href="https://man.openbsd.org/tar.1">tar(1)</a> follow symlinks on extraction of directories.
<li>Support <a href="https://man.openbsd.org/ddb.4">ddb(4)</a> entry with usb keyboards using <a href="https://man.openbsd.org/uskbd.4">uskbd(4)</a>.
<li>Enhance handling of console keyboard attaches and deattaches.
<li>Allow the SCSI <a href="https://man.openbsd.org/cd.4">cd(4)</a> driver to eject empty drives.
<li>Repair backgrounding (~&amp;) in <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> for v1 and add support for v2.
<li>Spiff up the <a href="https://man.openbsd.org/isp.4">isp(4)</a> driver; protect against deranged fabric name servers and correctly handle the ISP_QUEUES_FULL status.
<li>Cleanup <a href="https://man.openbsd.org/wx.4">wx(4)</a>, getting rid of a bogus pullup on small mbufs and setting a txint delay.
<li>Polish <a href="https://man.openbsd.org/wsconsctl.8">wsconsctl(8)</a>: better usage output, print nice output when changing display.* settings, and prefer <a href="https://man.openbsd.org/warn.3">warn(3)</a> over <a href="https://man.openbsd.org/err.3">err(3)</a>.
<li>Handle standard file handles better in <a href="https://man.openbsd.org/cron.8">cron(8)</a>, and change an unsafe <a href="https://man.openbsd.org/vfork.2">vfork(2)</a> call to <a href="https://man.openbsd.org/fork.2">fork(2)</a>.
<li>Import xc-mit to build XhpBSD for hp300.
<li>Don't let <a href="https://man.openbsd.org/tcpdump.8">tcpdump(8)</a> segfault on some radius traffic.
<li>Fix some bugs in <a href="https://man.openbsd.org/ppp.8">ppp(8)</a>, including a PASV bug, a set reconnect bug, and allowing for looser MRU handling.
<li>Use a more specific error message when <a href="https://man.openbsd.org/pfctl.8">pfctl(8)</a> is given a bad interface name.
<li>Correct printing of RDR rules in <a href="https://man.openbsd.org/pfctl.8">pfctl(8)</a> when using ! with destination rules.
<li>Reset state counter when clearing states in <a href="https://man.openbsd.org/pf.4">pf(4)</a>.
<li>Ignore SIGPIPE early in <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>, allowing operation to continue even if the agent dies.
<li>Implement <a href="https://man.openbsd.org/syslog_r.3">syslog_r(3)</a>.
<li>Support the Creative Labs SB Live! sound card with <a href="https://man.openbsd.org/emu.4">emu(4)</a>.
<li>Repair __PSEUDO_NOERROR on hppa.
</ul>
