<!doctype html>
<html lang=en id=errata>
<meta charset=utf-8>

<title>OpenBSD 2.1 Errata</title>
<meta name="description" content="the OpenBSD CD errata page">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/errata21.html">

<!--
			IMPORTANT REMINDER
	IF YOU ADD A NEW ERRATUM, MAIL THE PATCH TO TECH AND ANNOUNCE
-->


<h2 id=OpenBSD>
<a href="index.html">
<i>Open</i><b>BSD</b></a>
2.1 Errata
</h2>
<hr>

For errata on a certain release, click below:<br>
<a href="errata20.html">2.0</a>,
<a href="errata22.html">2.2</a>,
<a href="errata23.html">2.3</a>,
<a href="errata24.html">2.4</a>,
<a href="errata25.html">2.5</a>,
<a href="errata26.html">2.6</a>,
<a href="errata27.html">2.7</a>,
<a href="errata28.html">2.8</a>,
<a href="errata29.html">2.9</a>,
<a href="errata30.html">3.0</a>,
<a href="errata31.html">3.1</a>,
<a href="errata32.html">3.2</a>,
<a href="errata33.html">3.3</a>,
<a href="errata34.html">3.4</a>,
<a href="errata35.html">3.5</a>,
<a href="errata36.html">3.6</a>,
<br>
<a href="errata37.html">3.7</a>,
<a href="errata38.html">3.8</a>,
<a href="errata39.html">3.9</a>,
<a href="errata40.html">4.0</a>,
<a href="errata41.html">4.1</a>,
<a href="errata42.html">4.2</a>,
<a href="errata43.html">4.3</a>,
<a href="errata44.html">4.4</a>,
<a href="errata45.html">4.5</a>,
<a href="errata46.html">4.6</a>,
<a href="errata47.html">4.7</a>,
<a href="errata48.html">4.8</a>,
<a href="errata49.html">4.9</a>,
<a href="errata50.html">5.0</a>,
<a href="errata51.html">5.1</a>,
<a href="errata52.html">5.2</a>,
<br>
<a href="errata53.html">5.3</a>,
<a href="errata54.html">5.4</a>,
<a href="errata55.html">5.5</a>,
<a href="errata56.html">5.6</a>,
<a href="errata57.html">5.7</a>,
<a href="errata58.html">5.8</a>,
<a href="errata59.html">5.9</a>,
<a href="errata60.html">6.0</a>,
<a href="errata61.html">6.1</a>,
<a href="errata62.html">6.2</a>,
<a href="errata63.html">6.3</a>,
<a href="errata64.html">6.4</a>,
<a href="errata65.html">6.5</a>,
<a href="errata66.html">6.6</a>,
<a href="errata67.html">6.7</a>,
<a href="errata68.html">6.8</a>,
<br>
<a href="errata69.html">6.9</a>,
<a href="errata70.html">7.0</a>,
<a href="errata71.html">7.1</a>,
<a href="errata72.html">7.2</a>,
<a href="errata73.html">7.3</a>,
<a href="errata74.html">7.4</a>,
<a href="errata75.html">7.5</a>,
<a href="errata76.html">7.6</a>,
<a href="errata77.html">7.7</a>,
<a href="errata78.html">7.8</a>.
<hr>

<p>
Patches for the OpenBSD base system are distributed as unified diffs.
Each patch contains usage instructions.
All the following patches are also available in one
<a href="https://ftp.openbsd.org/pub/OpenBSD/patches/2.1.tar.gz">tar.gz file</a>
for convenience.

<p>
Patches for supported releases are also incorporated into the
<a href="stable.html">-stable branch</a>.

<hr>

<ul>

<li id="cdrelease1">
<strong>001: CD RELEASE WORKAROUND</strong>
&nbsp; <i>All architectures</i><br>
One of the install scripts has a flaw that makes the CD-ROM mount fail
when using the CD-ROM as the install source media.
To workaround this use the following sequence of commands before
starting the install script. This must be done each time the install
kernel is booted if the install script is to be run and the CD-ROM
is the media to install from. Do the following at the shell prompt:
<pre><b>#</b> ed install.sub
/{_filesystem/s//{_fstype/
wq
<b>#</b>
</pre>
	For architectures where the install scripts start automatically
	(like amiga), you need to abort it at the (I)nstall or (U)pdate
	prompt by pressing Ctrl-C before doing the above command.  After
	that you can restart the install by:
<pre><b>#</b> install
</pre>
<p>

<li id="cdrelease2">
<strong>002: CD RELEASE WORKAROUND</strong>
&nbsp; <i>alpha only</i><br>
CD2 does not boot on the alpha, as had been planned. Instead, you
must use the floppy install method.  This is not significantly
harder..
<p>

<li id="bootblock">
<strong>003: BOOT BLOCK BUG</strong>
&nbsp; <i>i386 only</i><br>
Some rarer PC BIOSs do not like the hardrive bootblocks when used
as a MBR.  The symptom is that the BIOS says "READ ERROR" when booting,
but everything suggests it should work fine. In those cases, it is
sufficient to install OS-BS or some other primary bootloader as the main
MBR, then install OpenBSD in a partition all by itself starting at a
non-zero offset.  For instance, start OpenBSD at next track boundary or so.
<p>

<li id="checksums">
<strong>004: WRONG CHECKSUMS</strong>
&nbsp; <i>i386 only</i><br>
The i386/X11/SUMS.md5 file contains 4 incorrect MD5 checksums.
These have been corrected on the ftp mirrors. The correct lines are:<br>
MD5 (X33doc.tgz) = 6aa0be7987f9a3cf32a63b5ea9a83b39<br>
MD5 (X33html.tgz) = 6ba39d41aef7c75c35a0533275c6f8c0<br>
MD5 (X33ps.tgz) = ea49fc1b12c17fc16ece7d0e4ad4ee06<br>
MD5 (RELNOTES) = 689fda20596a4eb82f86ded51efb01f4<br>
<p>
A lot of people with IDE disk drives fail to read the
INSTALL.i386 document, and hence end up with geometry translation
problems.  Read the document, please.
<p>

<li id="tseng">
<strong>005: RELEASE BUG</strong>
&nbsp; <i>amiga only</i><br>
The amiga install has a flaw wrt Tseng based graphic cards: when entering
multiuser mode the console won't get a login prompt.  This is due to
a problem in the shipped /dev/MAKEDEV script.  To fix, enter single
user mode and do:
<pre><b>#</b> cd /dev
<b>#</b> sh MAKEDEV ttye6
</pre>
<p>

<li id="sparcx">
<strong>006: RELEASE BUG</strong>
&nbsp; <i>sparc only</i><br>
The sparc X11R6.3 xdm-config files reference /usr/X11R6.3/... This is
 to X11R6.3's default config file contents.  To fix, su and
type:
<pre><b>#</b> cd /usr
<b>#</b> ln -s X11R6 X11R6.3
</pre>
<p>

<li id="sparcfd">
<strong>007: RELEASE BUG</strong>
&nbsp; <i>sparc only</i><br>
The sparc "single floppy install disk" has a problem when you specify
"dumb" in response to the terminal type query.  As a work-around
first specify an invalid terminal such as "bogus" and when prompted
again for a terminal type, enter "dumb" and it will work correctly.
<p>

<li id="sparctftp">
<strong>008: RELEASE BUG</strong>
&nbsp; <i>sparc only</i><br>
When netbooting an older sparc system such as a Sun4 or Sun4c, the boot
may hang up at the end of the tftp transfer of the bootstrap due
to the tftp transfer working in 512-byte blocks.  If this occurs
create a "padded" version of the bootstrap (boot or zboot) as follows:
<pre><b>#</b> cd /tftpboot
<b>#</b> dd if=boot of=newboot obs=512 conv=osync
<b>#</b> mv newboot boot
</pre>
<p>

<li id="sparcboot">
<strong>009: RELEASE BUG</strong>
&nbsp; <i>sparc only</i><br>
The sparc install script has two flaws that make the kernel copy
and the bootblock install fail. The kernel copy only fails
then installing from CD-ROM. To workaround this use the
following sequence of commands before starting the install
script. This must be done each time the install kernel is
booted if the install script is to be run and the CD-ROM is
the media to install from. Do the following at the shell
prompt:
<p>
If you install from CD-ROM do the following:
<pre><b>#</b> ed install.md
/\/bsd/s//\/mnt2\/2.1\/sparc\/bsd/
wq
<b>#</b>
</pre>
        ... or if you plan to use the bsd.scsi3 kernel you should use instead:
<pre><b>#</b> ed install.md
/\/bsd/s//\/mnt2\/2.1\/sparc\/bsd.scsi3/
wq
<b>#</b>
</pre>
<p>
The following one you'll have to do always (not only then
installing from CD-ROM)
<pre><b>#</b> ed /usr/mdec/binstall
/getopt/,/getopt/+4d
wq
<b>#</b>
</pre>
<p>

<li id="mkfont">
<strong>010: RELEASE BUG</strong>
&nbsp; <i>pmax only</i><br>
When using the X11R6 binaries from the 2.1 release you will get
errors like:
<pre><b>#</b> mkfontdir
mkfontdir: undefined symbol: 'astpending' 12
Segmentation fault (core dumped)
</pre>
this is due to a little problem affecting the compatibility between
the OpenBSD/arc port (on which the X11R6 clients were build) and
OpenBSD/pmax. You can work around this problem by using the arc
version of the shared libc instead of the pmax one. Once you have the
OpenBSD/arc 2.1 libc.so.16.1, do the following:
<pre><b>#</b> cd /usr/lib
<b>#</b> mv libc.so.16.1 original_libc.so.16.1
<b>#</b> cp /where_you_have_downloaded_it_to/libc.so.16.1 .
<b>#</b> chown root.bin libc.so.16.1
<b>#</b> chmod 444 libc.so.16.1
</pre>
Please be careful while doing this - because the libc is a very
sensitive part of the system. You can remove the original_libc.so.16.1
after the next reboot if everything is working fine.
<p>

<li id="fstab">
<strong>011: RELEASE BUG</strong>
&nbsp; <i>mac68k only</i><br>
The installer generates incorrect /etc/fstab files causing messages such
as "file system read-only" on bootup.  To correct, boot to single-user
mode (by clicking that checkbox in the Booter's Booting:Options dialog)
and do the following:
<pre>
<b>#</b> mount /dev/sd0a /
<b>#</b> ed /etc/fstab
1,$s/ ufs / ffs /
1,$s/ ro / rw /
w
q
</pre>
Alternately, simply invoke vi or another editor and change the root filesystem
to be of type ffs rather than ufs and be rw (read-write) rather than ro
(read-only).  In either case, you'll need to reboot the system afterwards.
Make this correction as soon as possible after installing the system.
The installer should not have specified the filesystem as the old
"ufs" type; the "ffs" type is more correct.
<p>

<li id="mac68kzip">
<strong>012: RELEASE BUG</strong>
&nbsp; <i>mac68k only</i><br>
The installer forgets to install the kernel onto the filesystem.
This is because the installer expects all packages including the kernel to
be tar'ed and gzip'ed.  The kernel was not shipped that way.  Therefore, you
must make this correction <em>before attempting to boot the system</em>.
To correct, use the Installer mini-shell and do the following:
<pre>
> cpin :[internal-macos-path]:bsd-generic bsd
</pre>
This should place the kernel as /bsd on the filesystem. You should
replace the above string with the colon-delimited path from your desktop to
wherever you have placed the kernel.  If possible, it is easiest to drag the
kernel into the same folder as the Installer, so you can simply issue a
command without leading colon(s) like:
<pre>
> cpin bsd-generic bsd
</pre>
<p>

<li>
<strong>SECURITY VULNERABILITY</STRONG> in 4.4BSD procfs<br>
<a href="advisories/procfs.txt">OpenBSD advisory</a> (June 24, 1997)
<p>

<li>
<strong>SECURITY VULNERABILITY</STRONG> in 4.4BSD rfork<br>
<a href="advisories/rfork.txt">OpenBSD advisory</a> (August 2, 1997)
<p>

<li>
<strong>SECURITY VULNERABILITY</STRONG> in vacation<br>
<a href="advisories/sni_18_vacation.txt">Secure Networks advisory 18</a>
(September 1, 1997)
<p>

<li>
<strong>SECURITY VULNERABILITY</STRONG> in I/O Signal Handling<br>
<a href="advisories/signals.txt">OpenBSD advisory</a> (September 15, 1997)
<p>

<li>
<strong>SECURITY VULNERABILITY</STRONG> in lpd<br>
<a href="advisories/sni_19_lpd.txt">Secure Networks advisory 19</a>
(October 2, 1997)
<p>

<li>
<strong>SECURITY VULNERABILITY</STRONG> in tgetent<br>
<a href="advisories/sni_20_tgetent.txt">Secure Networks advisory 20</a>
(October 21, 1997)
</ul>

<hr>
