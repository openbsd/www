<!DOCTYPE HTML PUBLIC  "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>OpenBSD/vax SIMH</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-13">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/vax SIMH page">
<meta name="keywords" content="openbsd,vax,simh">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 2004-2009 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">
<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>

<h2><font color="#e00000">OpenBSD/vax SIMH</font></h2>

<hr>

Labai nesunku ádiegti OpenBSD/vax á
<a href="http://simh.trailing-edge.com">SIMH</a>
VAX simuliatoriø. Viskas ko jums reikia yra pakankamai greitas procesorius,
pakankama disko vieta 1.5GB atvaizdui ir vax <i>floppy53.fs</i> failas.

Tarkime jûs naudosite SIMH OpenBSD sistemoje. Instaliuokite
<i>emulators/simh</i> paketà ið <a href="../faq/ports/index.html">portø</a>. Suraskite
tinkamà vietà savo OpenBSD/vax SIMH aplinkai ir ten sukurkite failà
<i>openbsd.simh</i> su ðiais duomenimis:

<blockquote>
<pre>
<strong>
set cpu 128m
at nvr openbsd.nvram

deposit rq qtime 1000000

set rq0 ra92
at rq0 openbsd.ra0.disk

set rq1 cdrom
at rq1 /dev/rcd0c

set rq2 cdrom
at rq2 floppy53.fs

at xq0 tap:tun0

boot cpu
exit
</strong>
</pre>
</blockquote>

Tai SIMH sukonfigûruoja simuliuoti VAX su iðtisais 128 MB atminties, RA92 1.5GB
disku, kompaktiniø plokðteliø sekcija, kuri talpina CD1 ið jûsø kompaktiniø
plokðteliø rinkinio, kità kompaktiniø plokðteliø sekcijà ið kurios uþkraunama
ir DELQA Qbus Ethernet kontrolerá prijungtà prie tun0 interfeiso.
Jums gali reikëti pakeisti <strong>/dev/rcd0c</strong> á raw árenginio vardà
atitinkantá jûsø tikrà kompaktiniø plokðteliø skaitytuvà.

<p>

Pagal nutylëjimà, paspaudus ^E bus nutraukta emuliacija; jeigu jûs esate
pripratæ prie emacs valdymo komandø, norëdami galite tai pakeisti
(pvz. pridedant <strong>set console wru=1e</strong> klaviðà nustatys á ^6,
ascii kodas 0x1e).
Jeigu pageidaujate didesnio disko, pakeiskite <strong>set rq0 ra92</strong>
á pvz. <strong>set rq0 rauser=15000</strong> (kur 15000 yra dydis MB).
Daugiau informacijos galite rasti SIMH dokumentacijoje.

<p>

Prieð paleidþiant SIMH jums reikës sukonfigûruoti tinklà.
Toliau pateikta bridge paremta konfigûracija daþniausiai duoda
geriausius rezultatus:

<p>

Sukurkite tun0 tinklo interfeisà ir já nustatykite á layer 2 reþimà:

<blockquote>
<pre>
# <strong>ifconfig tun0 create</strong>
# <strong>ifconfig tun0 link0</strong>
</pre>
</blockquote>

Nukreipkite já á jûsø ethernet interfeisà ir ájunkite tiltiná rëþimà:

<blockquote>
<pre>
# <strong>ifconfig bridge0 create</strong>
# <strong>ifconfig bridge0 fwddelay 4</strong>
# <strong>ifconfig bridge0 add em0 add tun0</strong>
# <strong>ifconfig bridge0 up</strong>
</pre>
</blockquote>

Nustatydami reikiamas /dev/tun0 teises galite iðvengti SIMH leisti
kaip root.

<p>

Taip pat jeigu negalite naudoti bridge(4) (pavyzdþiui su tam tikromis
bevielio tinklo tvarkyklëmis), kad prisijungti prie tinklo galite naudoti
BPF. Tokiu atveju galite praleisti virðuje paminëtas <tt>ifconfig</tt> eilutes
ir pakeisti "<tt>at xq0 tap:tun0</tt>" eilutæ kaip parodyta þemiau pakeisdami
iwn0 á savo tikrà tinklo interfeisà:

<blockquote><pre>
<strong>at xq0 iwn0</strong>
</pre></blockquote>

<p>

Nukopijuokite <i>vax/floppy53.fs</i> á savo OpenBSD/vax SIMH aplinkà.

Dabar paleiskite SIMH. Krovimo uþklausoje turëtumëte paraðyti <strong>boot
dua2:</strong>. Po to SIMH turëtø uþkrauti normalià OpenBSD instaliacijos
programà:

<blockquote>
<pre>
# <strong>simh-vax openbsd.simh</strong>

VAX simulator V3.9-0
NVR: buffering file in memory
Eth: opened OS device tun0
Loading boot code from /usr/local/lib/simh/vax/ka655x.bin


KA655-B V5.3, VMB 2.7
Performing normal system tests.
40..39..38..37..36..35..34..33..32..31..30..29..28..27..26..25..
24..23..22..21..20..19..18..17..16..15..14..13..12..11..10..09..
08..07..06..05..04..03..
Tests completed.
&gt;&gt;&gt;<strong>boot dua2:</strong>
(BOOT/R5:0 DUA2



  2..
-DUA2
  1..0..


&gt;&gt; OpenBSD/vax boot [1.16] &lt;&lt;
&gt;&gt; Press enter to autoboot now, or any other key to abort: 0
&gt; boot bsd
</pre>
</blockquote>

Kai baigsite instaliacijà perkraukite SIMH, o po to raðykite:

<blockquote>
<pre>
&gt;&gt;&gt;<strong>boot dua0:</strong>
</pre>
</blockquote>

kad uþkrautumëte ið naujai sukurto disko atvaizdo. Jums reikës ðiek tiek
kantrybës pirmojo krovimo metu, kadangi SSH host raktø generavimas gali
uþtrukti. Taèiau galø gale uþkrovimas bus baigtas ir jums bus pristatyta
draugiðka prisijungimo uþklausa:

<blockquote>
<pre>
OpenBSD/vax (noname.my.domain) (console)

login: 
</pre>
</blockquote>

Kai baigëte instaliuoti papildomus paketus tikriausiai norësite paðalinti
eilutes apie savo tikrà kompaktiniø plokðteliø árenginá ir <i>floppy53.fs</i>
ið <i>openbsd.simh</i> failo.

<p>

Sëkmës!

<hr>
<a href="vax.html">
<img height="24" width="24" src="../back.gif" border="0" alt="OpenBSD/vax">
</a> 
<br>
<small><a href="mailto:www@openbsd.org">www@openbsd.org</a></small>
<br>

<small>
<!--
Originally [OpenBSD: vax-simh.html,v 1.28 ]<br>
$Translation: vax-simh.html,v 1.18 2013/05/02 08:19:04 henris Exp $<br>
-->
$OpenBSD: vax-simh.html,v 1.16 2013/05/03 05:53:48 ajacoutot Exp $
</small>

</body>
</html>
