<!DOCTYPE HTML PUBLIC  "-//IETF//DTD HTML Strict//EN">
<html>
<head>
<title>OpenBSD/mvme68k</title>
<link rev=made href=mailto:www@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/mvme68k page">
<meta name="keywords" content="openbsd,mvme68k">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">
<img alt="[OpenBSD]" height=30 width=141 SRC="images/smalltitle.gif">
<p>
<h2><font color=#e00000>OpenBSD/mvme68k</font></h2>

<hr>
<h3><strong>History and Status:</strong></h3>

<p>
This port was primarily done by Theo de Raadt in 1995 as a contract to
Willowglen Singapore.  An earlier port to the MVME147 by Chuck Cranor
based on Paul Mackerras' old DA30 code (and using hardware donated by
Jonathan Levine at Theo's request) provided a solid development
platform.  Bizzarely, Dale Rahn of Motorola also independently wrote a
port to the MVME147.  For most kernel parts, both their ports were
analysed but more code was written new by Theo, or based on the hp300
code.  Dale helped significantly during the porting to the 68040
models and wrote most of the code specific to the MVME167 model.
Steve Murphee continued work and made the MVME177 work, as well as
adding support for some VME devices.

<p>
The people working the most on OpenBSD/mvme68k currently consists of
Steve Murphee, Theo de Raadt, and Dale Rahn. Of course, others are
very welcome!

<p>
The same kernel currently runs on the following pieces of hardware:

<ul>
<li><strong>MVME147: </strong>68030<br>
This works stably.
<ul>
<li>Everything supported except the parallel port.
<li>I have a driver for the parallel port, but it is not integrated yet.
</ul>
<p>

<li><strong>MVME162: </strong>68040<br>
This works stably.
<ul>
<li>Everything important working.. with these additional notes:
<li>SCSI working (4.5MB/sec off a 4.2G Quantum Grand Prix).<br>
<li>VME bus support untested
<li>parity and ecc not supported
<li>flash driver not working
<li>IP module driver untested
</ul>
<p>

<li><strong>MVME165: </strong>68040<br>
What little we know about it makes us think it is doable.
<p>

<li><strong>MVME166: </strong>68040<br>
This might already work. Anyone want to test it?
<p>

<li><strong>MVME167C: </strong>68040<br>
This works stably.
<ul>
<li>Works as well as the MVME162 port above, plus these notes:
<li>parallel port not supported.
</ul>
<p>

<li><strong>MVME177-001: </strong>68060<br>
This works stably.
<ul>
<li>Works as well as the MVME167 port.
</ul>
<p>
</ul>

Additional VME devices that are supported:<p>
<ul>
<li><strong>MVME376</strong>: VME Lance ethernet
<li><strong>MVME328</strong>: SCSI controller
</ul> 
<p>


For all these architectures, both diskless booting using sun-style
bootparams/nfs and regular full disk booting are supported.

<p>
Note: This port has COMPAT_SUNOS support, so it can run SunOS sun3
binaries. As such, I think that the MVME177 is probably the fastest
machine capable of running SunOS sun3 binaries....

<hr>
<p>
<a href=ftp.html>Snapshots are made available from time to time.</a>

<hr>
<h3><strong>What does it look like?  This is a MVME162.  Following it is
the boot log from a MVME177.</strong></h3>

<img src=images/mvme162.gif><p>

<pre>
Copyright Motorola Inc. 1988 - ...., All Rights Reserved

MVME177 Debugger/Diagnostics Release Version ...
COLD Start

Local Memory Found =02000000 (&33554432)

MPU Clock Speed =50Mhz

162-Bug&gt;bo
Booting from: VME177, Controller 0, Drive 0
Loading: Operating System

Volume: NBSD

IPL loaded at: $003F0000
&gt;&gt; OpenBSD BOOT [$Revision: 1.39 $]
using ctrl 0 dev 0
Booting /OpenBSD @ 0x10000
8c000+8000+caf8 [8f40+9162]  start 0x10020
[ preserving 73898 bytes of OpenBSD symbol table ]
Copyright (c) 1982, 1986, 1989, 1991, 1993
        The Regents of the University of California.  All rights reserved.

OpenBSD 2.6-current (GENERIC) #10: Mon Jan 24 14:04:57 PST 2000
    deraadt@m167.openbsd.org:/sys/arch/mvme68k/compile/GENERIC
Motorola 177-001: 50MHz MC68060 CPU+MMU+FPU, 8k on-chip physical I/D caches, unknown FPU
real mem = 33554432
avail mem = 27975680
using 409 buffers containing 1675264 bytes of memory
mainbus0 (root)
pcctwo0 at mainbus0 addr 0xfff00000: rev 0
clock0 at pcctwo0 ipl 5
cl0 at pcctwo0 offset 0x45000 ipl 3 console
vme0 at pcctwo0 offset 0x40000: system controller
vme0: using BUG parameters
vme0: 1phys 0x02000000-0xefff0000 to VME 0x02000000-0xefff0000
vme0: 2phys 0x00000000-0x00000000 to VME 0x00000000-0x00000000
vme0: 3phys 0x00400000-0x00ff0000 to VME 0x00400000-0x00ff0000
vme0: 4phys 0x00000000-0x00000000 to VME 0x00000000-0x00000000
vme0: vme to cpu irq level 1:1
vmes0 at vme0
vmel0 at vme0
ie0 at pcctwo0 offset 0x46000 ipl 1: address 08:00:3e:23:5c:a2
siop0 at pcctwo0 offset 0x47000 ipl 2: version 2 target 7
scsibus0 at siop0: 8 targets
siop0: target 0 now synchronous, period=100ns, offset=8
sd0 at scsibus0 targ 0 lun 0: &lt;QUANTUM, FIREBALL1080S, 1Q04&gt; SCSI2 0/direct fixed
sd0: 1042MB, 3835 cyl, 4 head, 139 sec, 512 bytes/sec, 2134305 sec total
memc0 at pcctwo0 offset 0x43000: MCECC rev 0
nvram0 at pcctwo0 offset 0xc0000: MK48T08 len 8192
flash0 at mainbus0 addr 0xffa00000: unknown manu 0x00 ident 00
sram0 at mainbus0 addr 0xffe00000: len 131072
boot device: sd0
root on sd0a
ie0: supplying EUI64: 08:00:3e:ff:fe:23:5c:a2
rootdev=0x400 rrootdev=0x800 rawdev=0x802
Automatic boot in progress: starting file system checks.
/dev/rsd0a: file system is clean; not checking
/dev/rsd0g: file system is clean; not checking
/dev/rsd0e: file system is clean; not checking
setting tty flags
starting network
add host m177: gateway localhost
starting rpc daemons: portmap ypbind nfsiod amd.
starting system logger, time daemon.
checking for core dump...
savecore: no core dump
checking quotas: done.
building databases...
clearing /tmp
standard daemons: update cron.
starting network daemons: routed printer inetd.
starting local daemons:.
runtime link editor directory cache
Thu Jan 14 03:58:38 MDT 2000
Sep 14 03:58:38 m177 init: kernel security level changed from 0 to 1

OpenBSD/mvme68k (m177) (ttya)

login: 
</pre>

<hr>
<a href=plat.html><img height=24 width=24 src=back.gif border=0 alt=OpenBSD></a> 
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>$OpenBSD: mvme68k.html,v 1.39 2002/01/29 22:08:36 horacio Exp $</small>

</body>
</html>
