<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>9 - Migrer vers OpenBSD</title>
<link rev="made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2005 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../fr/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[Index de La FAQ]</a>
<a href= "faq8.html">[Section 8 - Questions Générales]</a>
<a href= "faq10.html">[Section 10 - Gestion du Système]</a>
</font>

<h1><font color="#e00000">9 - Astuces et conseils pour les utilisateurs
de Linux (et d'autres OS libres Unix-like)</font></h1>
<!-- UNCOMMENT ONLY WHEN THE FILE IS OUT OF SYNC

<hr>
<p>
<b><font color="#e00000">Remarque Importante :</font></b> Le contenu de
   ce fichier est obsolète. Consultez la version anglaise
   <a href="../faq9.html">ici</a> pour des informations à jour.

<p>
Si vous souhaitez contribuez à l'effort de traduction,
prière de consulter
<a href="../../fr/translation.html">la page de traduction</a>.

-->
<hr>

<p>
<h3>Table Des Matières</h3>
<ul>
<li><a href="#Introduction">9.1 - Astuces et conseils pour les
    utilisateurs d'autres systèmes d'exploitation Unix-like</a>
<li><a href="#DualBoot">9.2 - Double démarrage de Linux et d'OpenBSD</a>
<li><a href="#passwd">9.3 - Convertir votre fichier de mots de passe de
    Linux (ou de tout autre système de type "Sixth Edition") au format
    BSD</a>
<li><a href="#Interact">9.4 - Exécution des binaires Linux sous OpenBSD
    </a>
<li><a href="#Ext2FS">9.5 - Accèder à vos fichiers Linux depuis
    OpenBSD</a>
</ul>
Les utilisateurs Linux pourront trouver des informations supplémentaires
a l'adresse suivante :
<a href="http://sites.inka.de/mips/unix/bsdlinux.html">http://sites.inka.de/mips/unix/bsdlinux.html</a>.
<hr>
<br>


<p>
<a name= "Linux"></a>
<a name="Introduction"></a>
<h2>9.1 - Astuces et conseils pour les utilisateurs d'autres systèmes
    d'exploitation Unix-like</h2>

<p>
Bien qu'OpenBSD soit un système d'exploitation Unix-like très
traditionnel et très familier pour les personnes ayant utilisé d'autres
systèmes d'exploitation Unix-like, il existe d'importantes différences.
Les nouveaux utilisateurs d'OpenBSD doivent se baser sur leur propre
expérience :
si votre connaissance d'Unix se limite à une certaine expérience avec
une variante de Linux, vous pourrez trouver OpenBSD "étrange". Soyez
rassuré, Linux parait aussi "étrange" pour quelqu'un qui a commencé son
expérience d'Unix avec OpenBSD. Vous devez faire la distinction entre le
"standard" et votre expérience.

<p>
Si vous avez appris Unix à l'aide d'un des 
<a href="../../books.html">bons ouvrages </a> sur Unix en
général, et si vous avez saisi la "philosophie Unix" puis étendu votre
connaissance à un plate-forme particulière, vous trouverez qu'OpenBSD
est un Unix "vrai" et très familier. Si vous avez appris Unix en
utilisant un procédé de type "saisis ceci au clavier pour faire cela" ou
un livre tel que "Apprendre PinkBeenie v8.3 en 31.4 Heures", puis vous
vous êtes dit que vous "connaissez Unix", vous trouverez certainement
OpenBSD très différent.

<p>
Une différence importante entre OpenBSD et plusieurs autres systèmes
d'exploitation est la documentation. Les développeurs OpenBSD sont très
fiers des
<a href="http://www.openbsd.org/cgi-bin/man.cgi">pages de manuel</a> du
système. Les pages de manuel sont <i>les</i>sources de référence de la
documentation OpenBSD -- ce qui n'est pas le cas de cette FAQ ou des
pages maintenues indépendamment du projet ou des "HOWTO"s etc. Lorsqu'un
développeur fait une modification au niveau système, on attend de sa
part qu'il mette à jour les pages du manuel en même temps que la
modification du code système, et pas "après" ou "losqu'il aura le temps
de le faire" ou lorsque "quelqu'un se plain". Une page de manuel existe
pour virtuellement chaque programme, utilitaire, pilote, fichier de
configuration et ainsi de suite dans le système de base. On attend de la
part de l'utilisateur qu'il prenne le temps d'effectuer des recherches
dans les pages du manuel avant de demander de l'aide sur les
<a href="../../fr/mail.html">listes de diffusion</a>.

<p>
Voici quelques unes des différences les plus communes entre OpenBSD et
d'autres variantes Unix.

<ul>
<li>OpenBSD est un Unix du style "BSD" assez pur, qui suit la conception
    4.4BSD de manière rapprochée. Linux et SCO Unix sont des systèmes du
    système "System V". Certains systèmes d'exploitation Unix-like (y
    compris quelques distributions Linux) font un mélange de plusieurs
    caractéristiques propres à Sys7 et à BSD. Cela prête à confusion
    particulièrement dans les
    <a href="faq10.html#rc">scripts de démarrage</a>, pour lesquels
    OpenBSD utilise le système traditionnel
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">rc(8)</a>
    4.4BSD.

<li>OpenBSD est un <i>système</i> complet, destiné à être maintenu de
    manière homogène. Ce n'est pas un "noyau plus quelques utilitaires"
    qui peuvent être mis à jour séparemment. Si vous n'arrivez pas à
    maintenir votre système (noyau, utilitaires et applications)
    homogène, de mauvaises choses peuvent arriver.

<li>Etant donné que plusieurs applications ne sont pas développées pour
    être compilées directement et s'exécuter dans un environnement
    OpenBSD, OpenBSD a une
    <a href="faq8.html#Ports">arborescence de ports</a>, un système
    qui permet aux utilisateurs de facilement acquérir du code, le
    modifier pour qu'il soit compilable sur OpenBSD, installer des
    dépendances, le compiler, et l'installer et le supprimer de manière
    standardisée et maintenable. Des
    <a href="faq8.html#Packages">packages</a> pré-compilés sont créés
    et distribués par l'équipe de portage OpenBSD. Les utilisateurs sont
    <a href="faq8.html#PortsvsPkgs">encouragés</a> à utiliser des
    packages au lieu de compiler les leurs.

<li>OpenBSD utilise CVS pour les modifications des sources. OpenBSD a
    été un pionnier d'<a href="../../fr/anoncvs.html">anonymous CVS</a>,
    qui permet à n'importe qui d'extraire l'arborescence complète des
    sources pour n'importe quelle version d'OpenBSD (à partir de 2.0
    jusqu'à la version actuelle, y compris n'importe quelle révision de
    n'importe quel fichier située entre ces deux versions) à n'importe
    quel moment, et vous pouvez accéder aux modifications les plus
    récentes à peine quelques heures après qu'elles aient été effectué.
    Il y a aussi une There is also a very convenient and easy to use
    <a href="http://www.openbsd.org/cgi-bin/cvsweb/">interface web pour CVS </a>
    très utile et facile d'utilisation.

<li>OpenBSD produit une version officielle disponible sur 
    <a href="../../orders.html">CD</a> et par
    <a href="../../fr/ftp.html">FTP</a> tous les six mois selon un
    <a href="faq1.html#Next">agenda prédéfini</a>. Des
    snapshots pour toutes les plates-formes supportées sont créés de
    manière semi-régulière à partir du code de développement le plus
    récent. Un des buts du projet OpenBSD est de garder l'arborescence
    des sources compilable à tout moment et de faire en sorte que le
    système issu de la compilation de cette arborescence soit
    utilisable. L'arborescence peut connaître des problèmes de
    compilation mais c'est à titre exceptionnel et ces problèmes sont
    résolus rapidement.

<li>OpenBSD contient
    <a href="../../fr/crypto.html"> une cryptographie forte</a>,
    qui ne peut être incluse dans des systèmes d'exploitation provenant
    de certains pays.

<li>OpenBSD fait l'objet d'un audit sécurité lourd et continu pour
    s'assurer de la qualité (et donc, de la sécurité) du code.

<li>Le noyau d'OpenBSD est<tt>/bsd</tt>.

<li>Les noms des disques durs sont du type <tt>/dev/wd</tt> (IDE) et
    <tt>/dev/sd</tt> (SCSI ou équipements à émulation SCSI).

<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&amp;sektion=8">/sbin/route</a>
    sans arguments sous Linux fournit l'état de toutes les routes
    actives, mais sous OpenBSD (et plusieurs autres systèmes
    d'exploitation), vous aurez besoin du paramètre "<i>show</i>" ou
    utilisez la commande
    "<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&amp;sektion=1"><tt>netstat -r</tt></a>".

<li>OpenBSD NE supporte pas les Systèmes de Fichiers à Journaux tels que
    ReiserFS, JFS d'IBM ou XFS de SGI. Au lieu de cela, nous utilisons
    la fonctionnalité 
    <a href="faq14.html#SoftUpdates">Soft Updates</a>
    du très robuste Unix Fast File System (FFS) pour atteindre les
    objectifs de performance et de stabilité.

<li>OpenBSD inclut <a href="../pf/fr/index.html">Packet Filter (PF)</a>,
    et non pas ipfw, ipchains, netfilter, iptables, ou ipf. Ce qui veut
    dire que la Traduction d'Adresses IP (connu sous le nom d'IP-
    Masquerading sous Linux), la gestion de la bande passante et le
    filtrage est effectué via
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>,
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>,
    et
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5">pf.conf(5)</a>.
    Consultez le
    <a href="../pf/fr/index.html">Guide de l'Utilisateur PF</a>
    pour des informations détaillées sur la configuration.

<li>Les adresses des interfaces sont stockées dans les fichiers
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5">/etc/hostname.&lt;interfacename&gt;</a>
    (par exemple, <tt>/etc/hostname.dc0</tt> pour une interface réseau
    utilisant le pilote
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&amp;sektion=4">dc(4)</a>).
    Ces fichiers peuvent contenir un nom d'hôte (résolu à partir de
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hosts&amp;sektion=5">/etc/hosts</a>)
    au lieu d'une adresse IP.

<li>Le nom de la machine est dans le fichier
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=myname&amp;sektion=5">/etc/myname</a>.

<li>La passerelle par défaut est stockée dans le fichier
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mygate&amp;sektion=5">/etc/mygate</a>.

<li>Le shell utilisateur par défaut d'OpenBSD est
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sh&amp;sektion=1">/bin/sh</a>,
    qui est <a href="http://web.cs.mun.ca/~michael/pdksh/">pdksh</a>, le
    shell Korn du domaine public en mode Bourne Shell. Les autres shells
    inclus sont
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">csh</a>
    (le <a href="faq10.html#rootshell">shell par défaut</a> de <i>root</i>)
    et
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh</a>.
    Les shells tels que <i>bash</i> et <i>tcsh</i> peuvent être ajoutés
    à partir des <a href="faq8.html#Packages">packages</a> ou
    installés à partir des <a href="faq8.html#Ports">ports</a>. Les
    utilisateurs familiers avec <i>bash</i> sont encouragés à <a
    href="faq10.html#ksh">essayer ksh(1)</a> avant d'installer
    <i>bash</i> sur leur système -- il a la plupart des fonctionnalités
    que les utilisateurs utilisent dans <i>bash</i>.

<li>La gestion des mots de passe est différente de celle de la plupart
    des autres systèmes d'exploitation Unix-like. Les mots de passe sont
    stockés dans le fichier
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=master.passwd&amp;sektion=5">master.passwd(5)</a>
    qui ne peut être lu que par <i>root</i>. Ce fichier ne doit être
    modifié que par le programme
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw</a>.

<li>Les périphériques sont appelés selon le pilote et pas selon le type.
    Par exemple, il n'existe pas de périphériques eth*. Pour une carte
    Ethernet NE2000, ça serait ne0 et xl0 pour des périphériques
    Ethernet 3Com Etherlink XL ou Fast Etherlink XL etc. Tous ces
    pilotes ont des pages de manuel dans la section 4. Ainsi, pour en
    savoir plus sur les messages que votre pilote 3c905 affiche, vous
    pouvez faire
    <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xl&amp;sektion=4">"<tt>man 4 xl</tt>"</a>.

<li>OpenBSD/i386 utilise un système de partitionnement de disque à "deux
    couches", où la première couche est la partition
    <a href="faq14.html#fdisk">fdisk</a>, visible depuis le BIOS, et
    avec laquelle la plupart des utilisateurs d'ordinateurs compatibles
    IBM sont familiers. La seconde couche est le
    <a href="faq14.html#disklabel">disklabel</a>, un système de
    partionnement BSD traditionnel. OpenBSD supporte un maximum de 15
    partitions disklabel sur un disque, toutes dans la même partition
    fdisk. Ceci permet à OpenBSD/i386 de coexister avec d'autres
    systèmes d'exploitation, y compris d'autres systèmes d'exploitation
    Unix-like. OpenBSD doit faire partie des 4 partitions "primaires".

<li>Certains systèmes d'exploitation vous encouragent à adapter votre
    noyau à votre machine. Les utilisateurs d'OpenBSD sont
    <a href="faq5.html#Why">encouragés</a> à utiliser le noyau standard
    GENERIC fourni et testé par les développeurs. Les utilisateurs
    souhaitant "adapter" et "optimiser" causent souvent plus de
    problèmes qu'ils n'en résolvent et aucun ne leur sera fourni par les
    développeurs.

<li>L'équipe de développement OpenBSD travaille dur pour maintenir la
    <a href="../../fr/policy.html">politique de copyright</a> et la 
    <a href="../../fr/security.html">securité</a> du projet.
    Pour cette raison, certaines nouvelles versions de logiciels qui ne
    remplissent pas les objectifs de licence ou de sécurité ne sont pas
    intégrées à OpenBSD, et pourraient ne jamais l'être. La sécurité et
    les licences libres ne seront jamais négligées au profit d'un numéro
    de version plus grand.
 
</ul>
<br>

<p>
<a name= "DualBoot"></a>
<h2>9.2 - Double démarrage de Linux et de OpenBSD</h2>

<p>
Oui c'est possible !

<p>
Lisez <a href= "ftp://ftp.openbsd.org/pub/OpenBSD/3.7/i386/INSTALL.linux">INSTALL.linux</a>.

<p>
<a name= "passwd"></a>
<h2>9.3 - Convertir votre fichier de mots de passe de Linux (ou de tout
      autre système de type "Sixth Edition") au format BSD</h2>

<p>
Tout d'abord, déterminez si votre fichier de mots de passe Linux est en
mode shadow ou pas. Si c'est le cas, installez
<a href="http://www.openwall.com/john/">John the Ripper</a>
et utilisez son utilitaire unshadow pour faire fusionner les fichiers
<tt>passwd</tt> et <tt>shadow</tt> en un seul fichier type "Sixth
Edition".

<p>
En utilisant votre fichier de mots de passe Linux, que nous allons
appeler <tt>linux_passwd</tt>, vous devez rajouter "::0:0" entre les
champs quatre et sept.
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=awk&amp;sektion=1">awk(1)</a>
peut faire cela pour vous.

<blockquote>
<pre>
# <b>cat linux_passwd | awk -F : # '{printf("%s:%s:%s:%s::0:0:%s:%s:%s\n", \</b>
&gt; <b>$1,$2,$3,$4,$5,$6,$7); }' &gt; new_passwd</b>
</pre>
</blockquote>

A partir de là, vous devriez éditer le fichier <tt>new_passwd</tt> et
enlever les entrées correspondantes à root et d'autres entités système
qui sont déjà présentes dans le fichier de mots de passe OpenBSD ou ne
sont pas applicables à OpenBSD (toutes). De même, assurez vous qu'il n'y
a pas des noms d'utilisateurs ou des ID utilisateurs dupliqués entre
<tt>new_passwd</tt> et le fichier <tt>/etc/passwd</tt> de la machine
OpenBSD. La manière la plus facile consiste à utiliser un nouveau<i>
</i><tt>/etc/passwd</tt>.

<blockquote>
<pre>
# <b>cat new_passwd &gt;&gt; /etc/master.passwd</b>
# <b>pwd_mkdb -p /etc/master.passwd</b>
</pre>
</blockquote>

La dernière étape, <tt>pwd_mkdb</tt>, est nécessaire pour reconstruire
les fichiers /etc/spwd.db et /etc/pwd.db. Cette commande crée aussi un
fichier de mots de passe au format "Sixth Edition" (sans les mots de
passe cryptés) dénommé /etc/passwd pour les programmes qui l'utilisent.
OpenBSD utilise un algorithme de cryptage plus fort, blowfish, qui est
rarement présent dans d'autres systèmes qui utilisent des fichiers de
mots de passe au format "Sixth Edition". Pour utiliser cet algorithme
plus solide, dites aux utilisateurs d'utiliser 'passwd' et de changer
leur mot de passe. Le nouveau mot de passe sera crypté avec l'algorithme
par défaut (blowfish si vous n'avez pas édité /etc/passwd.conf). Ou, en
utilisateur <i>root</i>, vous pouvez utiliser <tt>passwd
<i>username</i></tt>.


<p>
<a name= "Interact"></a>
<h2>9.4 - Exécution des binaires Linux sous OpenBSD</h2>

<p>
OpenBSD/i386 est capable d'exécuter des binaires Linux lorsque le noyau
est compilé avec l'option COMPAT_LINUX et le paramètre sysctl
kern.emul.linux positionné. Si vous utilisez le noyau GENERIC (ce qui
devrait être le cas normalement), l'option COMPAT_LINUX est incluse et
vous aurez juste besoin de positionner le paramètre sysctl précité comme
suit :

<blockquote>
<pre>
# <b>sysctl kern.emul.linux=1</b>
</pre>
</blockquote>

Pour que cette modification soit prise en compte à chaque redémarrage de
la machine, supprimez le caractère "#" (commentaire) au début de la
ligne

<blockquote>
<pre>
#kern.emul.linux=1      # enable running Linux binaries
</pre>
</blockquote>

dans le fichier /etc/sysctl.conf. Vous devez alors obtenir : 

<blockquote>
<pre>
kern.emul.linux=1       # enable running Linux binaries
</pre>
</blockquote>

puis redémarrez votre système pour que cette modification puisse prendre
effet.

<p>
Pour utiliser des binaires Linux qui ne sont pas statiquement liés (la
plupart d'entre eux), vous devez suivre les instructions de la page du
manuel
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&amp;sektion=8">compat_linux(8)</a>. 

<p>
Un moyen simple d'obtenir la plupart des librairies Linux les plus
communes est d'installer <tt>redhat/base</tt> à partir du site
miroir FTP le plus proche.
Pour plus d'informations concernant les packages et le système de ports,
veuillew consulter <a href="faq8.html#Packages">FAQ 8, Packages</a>.
Pour installer le package mentionné ci-dessus, utilisez les commandes
suivantes :

<blockquote><pre>
# export PKG_PATH=ftp://your.ftp.mirror/pub/OpenBSD/3.7/packages/i386
# pkg_add redhat_base-8.0p4.tgz
</pre></blockquote>

A partir d'OpenBSD 3.7,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
exécutera automatiquement sysctl pour paramétrer correctement
kern.emul.linux à la bonne valeur après avoir ajouté le package.
Cependant, il ne modifie pas <tt>/etc/sysctl.conf</tt>.

<p>
<a name= "Ext2FS"></a>
<h2>9.5 - Accèder à vos fichiers Linux depuis OpenBSD</h2>

<p>
OpenBSD supporte le système de fichiers EXT2FS.
Pour plus d'informations, veuillez consulter la <a
href="faq14.html#foreignfs">FAQ 14</a>.

<p>
<font color= "#0000e0">
<a href= "index.html">[Index de La FAQ]</a>
<a href= "faq8.html">[Section 8 - Questions
Générales]</a>
<a href= "faq10.html">[Section 10 - Gestion du système]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[back]"></a>
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq9.html,v 1.74 ]<br>
$Translation: faq9.html,v 1.37 2005/07/23 11:23:40 aanriot Exp $<br>
-->
$OpenBSD: faq9.html,v 1.28 2005/07/27 10:30:04 saad Exp $
</small>

</body>
</html>
