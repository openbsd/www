<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>15 - Système de Ports et de Paquetages OpenBSD</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>

<!--
Copyright (c) 2005, 2007 Steven Mestdagh <steven@openbsd.org>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor= "#ffffff" text= "#000000">

<a href="../../fr/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="
0">
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[Index de la FAQ]</a>
<a href= "faq14.html">[Section 14 - Configuration des disques]</a>
</font>

<h1><font color="#e00000">15 - Système de Ports et de Paquetages OpenBSD</font></h1><hr>

<h3>Table des matières</h3>
<ul>
<li><a href="#Intro"          >15.1 - Introduction</a>
<li><a href="#PkgMgmt"        >15.2 - Gestion des paquetages</a>
  <ul>
  <li><a href="#PkgHow"       >15.2.1 - Comment cela fonctionne-t-il ?</a>
  <li><a href="#Easy"         >15.2.2 - Faire les choses simplement</a>
  <li><a href="#PkgFind"      >15.2.3 - Trouver des paquetages</a>
  <li><a href="#PkgInstall"   >15.2.4 - Installer de nouveaux paquetages</a>
  <li><a href="#PkgList"      >15.2.5 - Lister les paquetages installés</a>
  <li><a href="#PkgUpdate"    >15.2.6 - Mettre à jour les paquetages 
  installés</a>
  <li><a href="#PkgRemove"    >15.2.7 - Supprimer les paquetages installés</a>
<!--  <li><a href="#PkgSecurity"  >15.2.8 - Mises à jour de sécurité (paquetages 
  -stable)</a>
-->
  <li><a href="#PkgPartial"   >15.2.8 - Suppression ou installation
  incompléte de paquetage</a>
  </ul>
<li><a href="#Ports"          >15.3 - Utilisation des ports</a>
  <ul>
  <li><a href="#PortsHow"     >15.3.1 - Comment cela fonctionne-t-il ?</a>
  <li><a href="#PortsFetch"   >15.3.2 - Récupérer l'arbre des ports</a>
  <li><a href="#PortsConfig"  >15.3.3 - Configuration du système des ports</a>
  <li><a href="#PortsSearch"  >15.3.4 - Rechercher dans l'arbre des ports</a>
  <li><a href="#PortsInstall" >15.3.5 - Installation normale :
  un exemple simple</a>
  <li><a href="#PortsClean"   >15.3.6 - Nettoyer aprés une compilation</a>
  <li><a href="#PortsDelete"  >15.3.7 - Désinstaller un paquetage de port</a>
  <li><a href="#PortsFlavors" >15.3.8 - Utiliser les saveurs ("flavors") et 
  les sous-paquetages ("subpackages")</a>
<!--  <li><a href="#PortsSecurity">15.3.9 - Mises à jour de sécurité
(-stable)</a> -->
  </ul>
<li><a href="#PkgFAQ"         >15.4 - FAQ</a>
  <ul>
  <li><a href="#NoFun"        >15.4.1 - J'obtiens toutes sortes d'erreurs
  folles. Je n'arrive pas du tout à faire fonctionner ces ports.</a>
  <li><a href="#Latest"       >15.4.2 - Pourquoi la derniére version de mon
  logiciel favori/préféré n'est pas disponible ?</a>
  <li><a href="#NoPkg"        >15.4.3 - Pourquoi n'y a-t-il pas de paquetage
  de mon logiciel favori/préféré ?</a>
  <li><a href="#NoPort"       >15.4.4 - Pourquoi n'y a-t-il pas de port de
  mon logiciel favori/préféré ?</a>
  <li><a href="#NotInBase"    >15.4.5 - Pourquoi mon logiciel favori/préféré
  ne fait pas partie du systéme de base ?</a>
  <li><a href="#PkgVsPorts"   >15.4.6 - Qu'est ce que je dois utiliser : 
  paquetages ou ports ?</a>
  <li><a href="#Knobs"        >15.4.7 - Comment puis-je optimiser ces ports
  pour obtenir le maximum de performance ?</a>
  <li><a href="#Wait"         >15.4.8 - J'ai soumis un nouveau port/une mise
  à jour depuis plusieurs semaines. Pourquoi cela n'a pas été intégré 
  ("commited") ?</a>
  </ul>
<li><a href="#Problems"       >15.5 - Comment signaler un problème</a>
<li><a href="#Helping"        >15.6 - Comment nous aider</a>
</ul>

<a name="Intro"></a>
<h2>15.1 - Introduction</h2>

<p>
Il y a quantité d'application tierces disponibles dont une que l'on 
souhaiterait utiliser sur un système OpenBSD.
Pour faire que ce logiciel soit plus simple à installer et à administrer, 
et aussi pour l'aider à ce qu'il suive la politique et les objectifs
d'OpenBSD, ce logiciel tiers est <i>porté</i> sur OpenBSD.
Cet effort de portage peut impliquer plusieurs choses différentes.
Par exemples : faire que le logiciel utilise les répertoires standards
de OpenBSD (exemple : les fichiers de configuration vont dans <tt>/etc</tt>),
se conformer aux spécifications des librairies partagées d'OpenBSD, faire
que le logiciel soit plus sécurisé autant que possible, etc...

<p>
Le résultat final de l'effort de portage sont des paquetages binaires prêts
à être installés.
Le but du système de paquetages est de garder une trace des logiciels
installés, de sorte qu'a n'importe quel moment on puisse le mettre à jour
ou le supprimer trés simplement.
De cette façon, il ne reste aucune trace de fichiers inutiles et les
utilisateurs peuvent garder leur système propre.
Le système de paquetage s'assure également que rien n'est supprimé par
accident, arrétant ainsi le logiciel de fonctionner correctement.
Un autre avantage est que <b>les utilisateurs ont rarement le besoin de
compiler un logiciel à partir des sources</b>, alors que les paquetages sont
déjà compilés, disponibles et prêt à être utilisé sur un système OpenBSD. 
En quelques minutes, un grand nombre de paquetages peuvent être récupérés et
installés avec tout à la bonne place.

<p>
<b><font color="#e00000">
Les paquetages et la collection des ports NE passe PAS par le même audit
complet de sécurité qui est réalisé sur le système de base d'OpenBSD.
Bien que nous tâchions de maintenir la qualité de la collection des
paquetages élévée, nous n'avons juste pas assez de ressources humaines pour 
assurer le même niveau de robustesse et de sécurité.
</font></b>
Bien évidemment les <a href="#PortsSecurity">mises à jour de sécurité</a> pour
différentes applications sont intégrées dans l'arbre des ports aussi 
rapidement que possible, et les mises à jour de sécurité des paquetages
correspondants sont mises à disposition des snapshots de <i>-current</i>.

<a name="PkgMgmt"></a>
<h2>15.2 - Gestion des paquetages</h2>

<a name="PkgHow"></a>
<h3>15.2.1 - Comment cela fonctionne-t-il ?</h3>

<p>
Les paquetages sont les binaires pré-compilés d'une partie des logiciels
tiers les plus utilisés.

Les paquetages peuvent-être gérés facilement avec l'aide de plusieurs
utilitaires, également désignés comme les outils pkg* :
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_add(1)</a> 
  - un utilitaire pour installer et mettre à jour les paquetages logiciels.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_delete(1)</a>
  - un utilitaire pour effacer les paquetages logiciels précedemment installés.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_info(1)</a>
  - un utilitaire pour afficher des informations sur les paquetages logiciels.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_create&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_create(1)</a> 
  - un utilitaire pour créer des paquetages logiciels.
</ul>

<p>
Afin de fonctionner correctement, une application X peut exiger de que
d'autres applications Y et Z soient installées.
L'application X serait dépendante de ces autres applications, c'est pourquoi Y
et Z s'appellent les<i> dépendances</i> de X.
Alternativement, Y peut exiger d'autres applications P et Q, et Z peut
exiger l'application R pour fonctionner correctement.
De cette façon, un <i>arbre entier de dépendance</i> est formé.

<p>
Les paquetages ressemblent à de simples archives <tt>.tgz</tt>.
Fondamentalement ils sont juste cela, mais il y a une différence cruciale :
ils contiennent des <i>informations supplémentaires sur le paquetage</i>.
Ces informations sont utilisées par
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_add(1)</a>
pour plusieurs buts :

<ul>
<li>Différents contrôles : le paquetage a-t-il déjà été installé ou est-il en
conflit avec d'autres paquetages installés ou noms de fichier ?
<li>Les dépendances qui ne sont pas encore présentes sur le système sont
automatiquement récupérées et installées, avant de procéder à l'installation
du paquetage.
<li>L'information sur le(s) paquetage(s) sont enregistrées dans un
répertoire centralisé, par défaut il se trouve dans <tt>/var/db/pkg</tt>.
Ceci, entre autres, empêchera les dépendances d'un paquetage d'être supprimée
avant que le paquetage lui-même ait été supprimé. Ceci aide à s'assurer qu'une
application ne peut pas être accidentellement cassée par un utilisateur
négligent.
</ul>


<a name="Easy"></a>
<h3>15.2.2 - Faire les choses simplement: PKG_PATH</h3>

<p>
Vous pouvez faire les choses vraiment trés simplement en utilisant la
variable d'environnement <tt>PKG_PATH</tt>.
Faite la juste pointer à votre endroit favoris, et pkg_add(1) ira
automatiquement regarder les paquetages que vous spécifierez, <b>et</b>
aussi récuperera et installera automatiquement les dépendances nécéssaires
à ce paquetage.

<p>
Une liste des endroits possibles pour récupérer des paquetages est donnée
dans la <a href="#PkgFind">section suivante</a>.

<p>
Exemple 1: récupérer de votre <a href="../../orders.html">CDROM</a>,
en assurant qu'il est bien monter sur <tt>/mnt/cdrom</tt>
<blockquote><pre>
$ <b>export PKG_PATH=/mnt/cdrom/4.2/packages/`machine -a`/</b>
</pre></blockquote>

<p>
Exemple 2: récupérer d'un <a href="../../fr/ftp.html">miroir FTP</a> proche
<blockquote><pre>
$ <b>export PKG_PATH=ftp://your.ftp.mirror/pub/OpenBSD/4.2/packages/`machine -a`/</b>
</pre></blockquote>

<p>
C'est habituellement une bonne idée d'ajouter une ligne similaire aux
exemples ci-dessus dans votre <tt>~/.profile</tt>.
Comme avec la variable classique <tt>PATH</tt>, vous pouvez spécifier
plusieurs endroits séparés par deux points.
<b>CEPENDANT, tous les chemins de la variable <tt>PKG_PATH</tt> DOIVENT se
terminer par un slash (/).</b>
De cette façon, pkg_add(1) peut découper le chemin correctement même si il
posséde des URL contenant des deux points.
Si la premiére entrée dans <tt>PKG_PATH</tt> échoue, la suivante est essayée,
ainsi de suite, jusqu'a ce que le paquetage soit trouvé.
Si toutes les entrées échouent, une erreur est générée.

<p>
Il est a noter l'utilisation de 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=machine&amp;sektion=1">machine(1)</a>
dans les lignes de commandes précédentes.
Cela va automatiquement substituer votre "architecture d'application" OpenBSD
installée, qui est normalement, mais pas toujours, le nom de votre plate-forme.
Bien sur, si vous utilisez les snapshots, vous devrez remplacer "4.2" par
"snapshots".


<a name="PkgFind"></a>
<h3>15.2.3 - Trouver des paquetages</h3>

Une large collection de paquetages pré-compilés est disponible pour les 
architectures les plus courantes.
Regardez juste pour vos paquetages à l'un de ces endroits :

<ul>
<li>L'un des trois <a href="../../orders.html">CD-ROMs</a>,
dépendant de votre architecture.
Les CD-ROMs embarquent seulement les plus courants utilisés, paquetages
librement distribuables pour les plates-formes les plus couramment utilisées.
<li>Sur les <a href="../../fr/ftp.html">serveurs FTP miroirs</a>.
Les paquetages se trouvent dans le répertoire <tt>/pub/OpenBSD/4.2/packages</tt>.
De la, les paquetages sont découpés en fonction de leur architecture.
<li>Dans les listes de paquetages sur le site de OpenBSD :
<ul>
<li><a href="http://www.openbsd.org/4.2_packages/">Paquetages pour OpenBSD 4.2</a>
<li><a href="http://www.openbsd.org/4.1_packages/">Paquetages pour OpenBSD 4.1</a>
<li><a href="http://www.openbsd.org/4.0_packages/">Paquetages pour OpenBSD 4.0</a>
</ul>
</ul>

<p>
Si vous avez l'arbre des ports sur votre système, vous pouvez rapidement
trouver le paquetage que vous recherchez comme expliqué dans
<a href="#PortsSearch">Rechercher dans l'arbre des ports</a>.

<p>
Vous pouvez remarquer que certains paquetages sont disponibles dans
différentes variétes, formellement appelées <b>saveurs ("flavors")</b>.
D'autres sont des morceaux de la même application qui peuvent être installés
séparemment.
Ils sont appelés <b>sous-paquetages ("subpackages")</b>.
Cela sera détaillé plus loin dans <a href="#PortsFlavors">Utiliser les
saveurs ("flavors") et les sous-paquetages ("subpackages")</a> mais cela
signifie simplement qu'une saveur est un paquetage installé avec un groupe
d'options différentes.
Actuellement, plusieurs paquetages possédent des saveurs, par exemple :
le support de base de données, le support de système sans X ou l'ajout de
réseaux comme SSL et IPv6.
Chaque saveur d'un paquetage aura un suffixe différent dans le nom de son
paquetage.
Pour des informations plus détaillées sur le nom des paquetages, veuillez
vous reporter à
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=packages-specs&amp;sektion=7">packages-specs(7)</a>.

<p>
<b>Note :</b>
Tous les paquetages possibles ne sont pas nécessairement disponibles sur les
serveurs FTP !
Certaines applications ne fonctionnent simplement pas sur toutes les
architectures.
Certaines applications ne peuvent pas être distribuées par FTP (ou CDROM)
pour des raisons de licences.
Il y a aussi de multiples combinaisons de saveurs d'un port, et le projet
OpenBSD ne posséde pas les ressources pour les construire toutes.
Si vous avez besoin d'une combinaison qui n'est pas disponible, vous devrez
fabriquer le port à partir des sources.
Pour plus d'informations pour savoir comment faire cela, lire
<a href="#PortsFlavors">Utiliser les saveurs ("flavors") et les sous-paquetages
("subpackages")</a> dans la section Ports de ce document.


<a name="PkgInstall"></a>
<h3>15.2.4 - Installer de nouveaux paquetages</h3>

Pour installer de nouveaux paquetages, l'utilitaire
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_add(1)</a> 
est utilisé.
Si vous avez <a href="#Easy">fait les choses simplement</a> pour vous-même
en configurant la variable d'environnement <tt>PKG_PATH</tt>, vous pouvez
juste appeler pkg_add(1) avec le nom du paquetage, comme dans l'exemple
simple suivant.

<blockquote><pre>
$ <b>sudo pkg_add -v screen-4.0.3p0</b>
parsing screen-4.0.3p0
installed /etc/screenrc from /usr/local/share/examples/screen/screenrc | 71%
screen-4.0.3p0: complete
</pre></blockquote>

<p>
Dans cet exemple l'option <b>-v</b> a été utilisé pour obtenir une sortie plus 
bavarde.
Cet option n'est pas nécessaire mais elle est utile pour deboguer et a été
utilisée ici pour donner un peu plus de perspicacité dans ce que pkg_add(1)
est entrain de faire.
Notez le message mentionnant <i>/etc/screenrc</i>.
Spécifier plusieurs fois l'option <b>-v</b> produira une sortie encore plus
bavarde.

<p>
<h4>Utiliser pkg_add(1) en mode interactif</h4>

Depuis OpenBSD 3.9, pkg_add(1) posséde un mode intéractif qui peut être
activé en l'invoquant avec l'option <b>-i</b>, et cela aura pour
conséquence de vous posez des questions quand il ne pourra pas prendre des
décisions par lui-même. 
Par exemple, si vous ne connnaissez pas le numéro de version d'un paquetage
à l'avance, vous pouvez essayer quelque chose comme :

<blockquote><pre>
$ <b>sudo pkg_add -i screen</b>
Ambiguous: screen could be screen-4.0.3p0 screen-4.0.3p0-shm screen-4.0.3p0-static
Choose one package
         0: &lt;None&gt;
         1: screen-4.0.3p0
         2: screen-4.0.3p0-shm
         3: screen-4.0.3p0-static
Your choice: 1
screen-4.0.3p0: complete
</pre></blockquote>


<p>
Pour certains paquetages, des informations additionnelles importantes vous
serons données par rapport à la configuration ou l'utilisation de
l'application sur un système OpenBSD.
Comme c'est important, elles seront affichées que vous utilisiez ou non
l'option <b>-v</b>.
Considerez l'exemple suivant:

<blockquote><pre>
$ <b>sudo pkg_add ghostscript-fonts-8.11</b>
ghostscript-fonts-8.11: complete
You may wish to update your font path for /usr/local/share/ghostscript/fonts
--- ghostscript-fonts-8.11 -------------------
To install these fonts for X11, just make sure that the fontpath
lists the 75dpi or 100dpi bitmap fonts before the ghostscript fonts,
and make sure you have the string ":unscaled" appended to the bitmap
font's fontpath. This way, the bitmap fonts will be used if they
match, and the Type 1 versions will be used if the font needs to be
scaled. Below is the relevant section from a typical xorg.conf file.

   FontPath   "/usr/X11R6/lib/X11/fonts/misc/"
   FontPath   "/usr/X11R6/lib/X11/fonts/75dpi/:unscaled"
   FontPath   "/usr/X11R6/lib/X11/fonts/100dpi/:unscaled"
   FontPath   "/usr/local/lib/X11/fonts/ghostscript/"
   FontPath   "/usr/X11R6/lib/X11/fonts/Type1/"
</pre></blockquote>

<p>
Continuons maintenant avec l'exemple d'un paquetage qui posséde des
dépendances :

<blockquote><pre>
$ <b>sudo pkg_add -v tin-1.8.2p0</b>
parsing tin-1.8.2p0
Dependencies for tin-1.6.2 resolve to: gettext-0.14.6, libutf8-0.8, pcre-6.4p1, libiconv-1.9.2p3 (todo: libiconv-1.9.2p3,gettext-0.14.6,pcre-6.4p1,libutf8-0.8)
tin-1.8.2p0:parsing libiconv-1.9.2p3
tin-1.8.2p0:libiconv-1.9.2p3: complete
tin-1.8.2p0:parsing gettext-0.14.6
Dependencies for gettext-0.14.6 resolve to: expat-2.0.0, libiconv-1.9.2p3 (todo: expat-2.0.0)
tin-1.8.2p0:parsing expat-2.0.0
tin-1.8.2p0:expat-2.0.0: complete
tin-1.8.2p0:gettext-0.14.6: complete
tin-1.8.2p0:parsing pcre-6.4p1
tin-1.8.2p0:pcre-6.4p1: complete
tin-1.8.2p0:parsing libutf8-0.8
tin-1.8.2p0:libutf8-0.8: complete
tin-1.8.2p0: complete
</pre></blockquote>

Encore une fois nous avons ajouté l'option <b>-v</b> pour en voir plus de ce
qui se passe.
Aprés des investigations dans les informations du paquetage, des dépendances
ont été trouvées et celles-ci ont été installées en premier.
Quelque part au milieu vous pouvez voir le paquetage gettext qui a été
installé, qui dépendait de libiconv.
Avant d'installer gettext, les informations sur le paquetage ont été
examinées et il a été vérifié que libiconv a bien été installé.

<p>
Il est possible de spécifier plusieurs noms de paquetages sur une ligne, ils
seront tous installés en une fois avec les dépendances possibles.

<p>
Si pour une raison vous décidez de ne pas utiliser <tt>PKG_PATH</tt>, il est
aussi possible de spécifier la position absolue d'un paquetage via la ligne
de commande.
Cette position absolue doit être un chemin local ou une URL se référént à
une position FTP, HTTP ou SCP.
Considérons l'installation via FTP dans l'exemple suivant:

<blockquote><pre>
$ <b>sudo pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/4.2/packages/`machine -a`/screen-4.0.3p0.tgz</b>
screen-4.0.3p0: complete
</pre></blockquote>

<p>
Dans cet exemple l'option <b>-v</b> n'a pas été utilisée donc seulement les
messages necéssaires ont été affichés.
Vous pouvez noter que le nom de fichier complet a été tapé en ajoutant le
suffixe <b>.tgz</b>.
Vous pouvez aussi ne pas mettre le suffixe comme dans les exemples
précédents car il est auto-complété par pkg_add(1).

<p>
<b>Note :</b> Toutes les architectures n'ont pas les mêmes paquetages
disponibles.
Certains ports ne fonctionnent pas sur certaines architectures, et les
performances limitent le nombre de paquetages qui peuvent être construit.

<p>
Par sécurité, si vous installez un paquetage que vous avez déjà installé
et supprimé précedemment (ou une ancienne version de celui-ci), pkg_add(1)
ne re-écrira <b>pas</b> les fichiers de configuration qui ont été
modifiés.
A la place, il vous en informera comme dans l'exemple suivant (seulement en
utilisant l'option <b>-v</b>, cependant !) : 

<blockquote><pre>
$ <b>sudo pkg_add -v screen-4.0.3p0</b>
parsing screen-4.0.3p0
The existing file /etc/screenrc has NOT been changed**                 | 71%
It does NOT match the sample file /usr/local/share/examples/screen/screenrc
You may wish to update it manually
screen-4.0.3p0: complete
</pre></blockquote>

Quelquefois vous pouvez rencontrer une erreur comme dans l'exemple suivant :

<blockquote><pre>
$ <b>sudo pkg_add xv-3.10ap4</b>
xv-3.10ap4:jpeg-6bp3: complete
xv-3.10ap4:png-1.2.14p0: complete                                               
xv-3.10ap4:tiff-3.8.2p0: complete                                            
Can't install xv-3.10ap4: lib not found X11.9.0
Even by looking in the dependency tree:
        tiff-3.8.2p0, jpeg-6bp3, png-1.2.14p0
Maybe it's in a dependent package, but not tagged with @lib ?
(check with pkg_info -K -L)
If you are still running 3.6 packages, update them.
</pre></blockquote>

Il y a pkg_add(1) installant bien des dépendances, quand soudain l'installation
de xv est avortée.
C'est une autre mesure de sécurité qui est disponible depuis OpenBSD 3.7.
Les informations sur le paquetage embarquées dans le paquetage lui-même
inclus des informations sur les librairies partagées que le paquetage espére
être déjà installées, les librairies systèmes comme les librairies tierces.
Si une des librairies necéssaires ne peut pas être trouvée, le paquetage ne sera
pas installé car il ne fonctionnerait pas de toute façon.

<p>
Pour résoudre ce type de conflit, vous devez découvrir quoi installer dans
l'ordre afin d'obtenir les bibliothèques necéssaires sur votre système.

<!--
insert a good algorithm here
-->

Il y a plusieurs choses à vérifier :
<ul>
<li>Vous pouvez avoir de vieux paquetages installés : une vieille version de
la librairie requise est présente.
Dans ce cas, mettez à jour ces paquetages.
<li>Votre système est peut-être incomplet : vous n'avez pas installé l'un
des paquetages qui contenait la librairie requise.
Il faut juste <a href="faq4.html#AddFileSet">ajouter un paquetage après
l'installation.</a>
<li>Votre système est peut-être dépassé : vous avez une ancienne version de
la librairie requise.
Démarrez une image d'installation (comme détaillé dans <a href="faq4.html">FAQ 4</a>),
et choississez (U)pgrade de votre système complet.
</ul>

<a name="PkgList"></a>
<h3>15.2.5 - Lister les paquetages installés</h3>

Vous pouvez voir une liste des paquetages installés en utilisant l'utilitaire 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_info(1)</a>
.

<blockquote><pre>
$ <b>pkg_info</b>
aterm-0.4.2p1       color vt102 terminal emulator with transparency support
bzip2-1.0.4         block-sorting file compressor, unencumbered
expat-2.0.0         XML 1.0 parser written in C
fluxbox-0.9.15.1p0  window manager based on the original Blackbox code
gettext-0.14.6      GNU gettext
imlib2-1.3.0        image manipulation library
jpeg-6bp3           IJG's JPEG compression utilities
libiconv-1.9.2p3    character set conversion library
libltdl-1.5.22p1    GNU libtool system independent dlopen wrapper
libungif-4.1.4p0    tools and library routines for working with GIF images
libutf8-0.8         provides UTF-8 locale support
mutt-1.4.2.2i       tty-based e-mail client
pcre-6.4p1          perl-compatible regular expression library
png-1.2.14p0        library for manipulating PNG images
screen-4.0.3p0      multi-screen window manager
tcsh-6.14.00p1      extended C-shell with many useful features
tiff-3.8.2p0        tools and library routines for working with TIFF images
tin-1.8.2p0         threaded NNTP and spool based UseNet newsreader
</pre></blockquote>

<p>
En donnant le nom d'un paquetage installé (ou l'endroit ou se trouve un 
paquetage qui doit être installé), pkg_info(1) donnera plus d'informations 
détaillées sur ce paquetage spécifique. 

<a name="PkgUpdate"></a>
<h3>15.2.6 - Mettre à jour les paquetages installés</h3>

Depuis OpenBSD 3.7, il est possible de mettre à jour des paquetages
existants en utilisant le mécanisme <b>-r</b> (= remplacer) de 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_add(1)</a>.
OpenBSD 3.8 a introduit le mécanisme <b>-u</b> à pkg_add(1), qui a été transformé 
en véritable mécanisme de mise à jour dans 3.9.

<p>
Disons que vous avez une vieille version de unzip installée avant de mettre
à jour cette machine de OpenBSD 4.1 à 4.2.
Maintenant vous pouvez simplement mettre à jour vers le nouveau paquetage
4.1 comme suit :

<blockquote><pre>
$ <b>sudo pkg_add -u unzip</b>
unzip-5.52 (extracting): complete
unzip-5.51 (deleting): complete
unzip-5.52 (installing): complete
Clean shared items: complete
</pre></blockquote>

<p>
Invoquer pkg_add(1) avec l'option <b>-u</b> et sans nom de paquetage va
tenter de mettre à jour tous les packetages installés.

examiner tous les paquetages installés pour des versions mises à jour.
Quand un paquetage posséde des dépendances, elles seront aussi examinées pour
mises à jour.

<p>
<b>Note :</b>
Le mécanisme <b>-u</b> est relié à la variable d'environnement <tt>PKG_PATH</tt>.
Si elle n'est pas définie, pkg_add(1) ne sera pas capable de trouver les
mises à jour.

<p>
A partir d'OpenBSD 4.2, le fait d'avoir plusieurs entrées dans
<tt>PKG_PATH</tt> ne veut plus dire que toutes les entrées seront
vérifiées à la recherche de mises à jour.
Au lieu de cela, pkg_add(1) s'arrêtera à la première entrée qui contient
des candidats convenables.

<p>
Si vous aviez un fichier de configuration appartenant à la vieille version
que vous avez modifié, il sera laissé intacte par défaut.
Vous pouvez, cependant, le remplacer par le fichier de configuration de la
nouvelle version en appelant pkg_add(1) avec l'option <b>-c</b>.

<a name="PkgRemove"></a>
<h3>15.2.7 -  Supprimer les paquetages installés</h3>

<p>
Pour supprimer un paquetage, il suffit de prendre simplement le nom propre du 
paquetage comme vu avec pkg_info(1) (regardez 
<a href="#PkgList">Lister les paquetages installés</a> ci-dessus) et utilisez
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_delete(1)</a>
pour supprimer le paquetage.
Dans l'exemple suivant le paquetage screen sera supprimé.
Notez que dans certaines occasions il y a des instructions sur des éléments
supplémentaires qui ont besoin d'être supprimés que pkg_delete(1) ne
supprimera pas pour vous.
Comme avec l'utilitaire pkg_add(1), vous pouvez utiliser l'option <b>-v</b>
pour obtenir une sortie plus bavarde.

<blockquote><pre>
$ <b>sudo pkg_delete screen</b>
screen-4.0.3p0: complete
Clean shared items: complete
</pre></blockquote>

<p>
<b>Note :</b> Souvent, il n'est pas nécessaire de spécifier le numéro de 
version et les saveurs avec le nom du paquetage, puisque pkg_delete(1) sera 
capable de trouver le nom du paquetage complet de lui-même.
Vous devez spécifier le nom complet du paquetage (dans l'exemple c'est 
screen-4.0.3p0) seulement si une ambiguité est possible due à l'installation 
multiple de paquetages avec le nom spécifié. Dans ce cas pkg_delete(1) 
ne peut pas savoir quel paquetage supprimer.

<p>
Par précaution, pkg_delete(1) ne supprimera pas des fichiers de
configuration si ils ont été modifiés.
Au lieu de cela il vous en informera comme suit :

<blockquote><pre>
$ <b>sudo pkg_delete screen</b>
screen-4.0.3p0: complete
Clean shared items: complete 
--- screen-4.0.3p0 -------------------
You should also remove /etc/screenrc (which was modified)
</pre></blockquote>

<p>
Si vous préférez avoir ces fichiers de configuration supprimés automatiquement, 
vous pouvez le faire en utilisant l'option <b>-c</b>.


<!--
<a name="PkgSecurity"></a>
<h3>15.2.8 - Mises à jour de sécurité (paquetages -stable)</h3>

Quand des bogues sérieux ou des failles de sécurité sont découvertes dans
des logiciels tiers, ils sont corrigés dans la branche -stable de l'arbre des 
ports, et une sélection des paquetages binaires mis à jour sont mis à
disposition.

<p>
Veuillez vous référer à la 
<a href="../../fr/pkg-stable.html">page des paquetages stables</a> pour obtenir des 
informations au sujet des paquetages mis à jour et des mises à jour 
importantes de la branche -stable.
Il est à noter que les paquetages mis à jour sont seulement disponibles pour
les plates-formes i386 et amd64.
Pour les autres plates-formes, vous avez besoin d'utiliser la branche -stable
de l'arbre des ports et de compiler les sources.

<p>
Si vous voulez recevoir les annonces de sécurité relatives aux logiciels 
dans les paquetages et le système des ports, vous pouvez souscrire à la 
<a href="../../fr/mail.html">liste de diffusion</a> ports-security.

<p>
Les noms des paquetages sont <b>toujours</b> changés dans le cas d'une mise
à jour du paquetage, pour supprimer tous risques de confusion entre le
paquetage d'une révision et le paquetage corrigé d'un bogue.
Ce changement de nom doit avoir un numéro de version supérieur ou, dans le cas 
ou le numéro de version reste inchangé, un suffixe <b>pN</b> est ajouté, ou 
<b>N+1</b> représente le nombre de fois que ce paquetage a été modifié.
-->

<a name="PkgPartial"></a>
<h3>15.2.8 - Suppression ou installation incompléte de paquetage</h3>

Dans quelques rares cas, vous pouvez avoir un paquetage qui n'a pas été
installé ou supprimé complétement à cause de conflits avec d'autres fichiers.
L'installation incompléte est normalement marquée avec un préfixe "partial-"
au nom du paquetage.
Cela peut, dans certains cas, intervenir quand vous pressez accidentellement 
CTRL+C durant l'installation :

<blockquote><pre>
$ <b>sudo pkg_add screen-4.0.3p0</b>
screen-4.0.3p0: complete                                                      7%
Adjusting md5 for /usr/local/info/screen.info-3 from 49fb3fe1cc3a3b0057518459811b6dac to 3b9c7811244fb9f8d83bb27d3a0f60d8
/usr/sbin/pkg_add: Installation of screen-4.0.3p0 failed , partial installation recorded as partial-screen-4.0.3p0
</pre></blockquote>

<p>
C'est toujours une bonne idée de supprimer un paquetage partiel de son système 
et de corriger les problémes potentiels qui ont conduit à cette erreur.
C'est souvent l'indication que vous n'avez pas un système propre avec tout 
d'installé à partir des paquetages, mais surement des paquetages mélangés
avec d'autres logiciels installés à partir des sources.


<a name="Ports"></a>
<h2>15.3 - Utilisation des ports</h2>

Comme mentionné dans l'introduction, les paquetages sont compilés à partir
de l'arbre des ports.
Dans cette section nous allons vous expliquer comment l'arbre des ports
fonctionne, quand vous devez l'utiliser et comment vous pouvez l'utiliser.

<p>
<b>NOTE IMPORTANTE </b>: L'arbre de ports est destiné aux utilisateurs avançés.
<b>Tout le monde est encouragé à utiliser les 
<a href="#PkgMgmt">paquetages</a> binaires pre-compilés</b>.
NE posez pas de questions de débutant sur les listes de diffusion comme
"Comment est-ce que je peux faire fonctionner l'arbre des ports ?".
Si vous avez des questions sur l'arbre des ports, il est considéré que vous
avez lu les pages du manuel, cette FAQ et que vous êtes capable de
travailler avec.


<a name="PortsHow"></a>
<h3>15.3.1 - Comment cela fonctionne-t-il ?</h3>

L'arbre des ports, un concept à l'origine emprunté à
<a href="http://www.freebsd.org">FreeBSD</a>, est un ensemble de Makefiles,
un pour chaque application tierce, pour controler

<ul>
<li>ou et comment récupérer les sources du logiciel,
<li>de quel autre logiciel il dépend,
<li>comment modifier les sources (si nécessaire),
<li>comment le configurer et le compiler,
<li>comment le tester (optionnel),
<li>comment l'installer.
</ul>

<p>
En dehors du Makefile, chaque port contient aussi au moins ce qui suit :

<ul>
<li>un fichier PLIST ou liste de paquetage, qui contient les instructions pour 
la création du paquetage des que l'application a été compilé,
<li>un fichier DESCR ou description de l'application,
<li>un fichier distfile contenant les tailles et sommes de contrôle 
("checksums") des fichiers fournis.
</ul>

<p>
Toutes ces informations sont contenus dans une hiérarchie de répertoires sous
<tt>/usr/ports</tt>.
Cette hiérarchie contient trois sous-répertoires spéciaux :
<ul>
<li><tt>distfiles/</tt> - ou le système des ports stocke l'ensemble de la
distribution des logiciels aprés téléchargement.
<li><tt>infrastructure/</tt> - le répertoire principal de l'infrastructure
des ports, contenant touts les scripts nécessaires et makefiles. 
<li><tt>packages/</tt> - contenant tous les paquetages binaires construit
par le système des ports.
</ul>
Tous les autres sous-répertoires forment les différentes catégories
d'applications, qui contiennent les sous-répertoires des ports réels.
Les ports complexes doivent être organisés à un niveau encore plus profond, 
par exemple si ils ont un noyau principal et un ensemble d'extensions, ou
une version stable et une snapshot de l'application.
Tous les répertoires de port doivent contenir un sous-répertoire <tt>pkg/</tt> 
qui contient une liste(s) de paquetage et un fichier de description(s).
Ils peuvent aussi contenir un sous-répertoire <tt>patches/</tt> et 
<tt>files/</tt>, pour les patchs source et les fichiers additionnels,
respectivement.

<p>
Quand un utilisateur éxecute 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a>
dans un sous-répertoire d'un port spécifique, le système va récursivement 
traverser toutes les dépendances de l'arbre, vérifier si les dépendances
exigées sont installées, compiler et installer toute dépendance manquante,
et enfin continuer la construction du port désiré.
Toute la construction se fait dans le <i>répertoire de travail</i> que le
port crée.
C'est l'un des sous-répertoires du répertoire principal du port, dans ce cas il 
est identifié par son préfixe "w-", ou un sous-répertoire de 
<tt>${WRKOBJDIR}</tt>, si la variable <tt>WRKOBJDIR</tt> a été définie (voir
<a href="#PortsConfig">Configuration du système des ports</a>).

<p>
<b>Note :</b> Les ports ne sont jamais directement installés sur votre système !
Ils utilisent un <i>faux répertoire d'installation</i>.
Tous ce qui est installé ici est empaqueté ensemble dans un paquetage (qui
est stocké dans le sous-répertoire <tt>packages/</tt> de l'arbre des ports
comme mentionné précedemment).
Installer un port signifie réellement : création d'un paquetage, et enfin
installation de ce paquetage !

<p>
<b>Plus d'informations</b> sur le système des ports peut-être trouvé dans les
pages de manuel suivantes :

<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&amp;sektion=7">ports(7)</a>
- décrit les différents stades (création de cibles) de l'installation des ports,
l'utilisation des saveurs et des sous-paquetages et quelques autres options.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bsd.port.mk&amp;sektion=5">bsd.port.mk(5)</a>
- des informations détaillées sur la création de cibles, les variables, le faux
cadre de travail (répertoire d'installation), etc... 
</ul>

<a name="PortsFetch"></a>
<h3>15.3.2 - Récupérer l'arbre des ports</h3>

Avant de continuer, vous devez lire la section sur comment NE PAS
<a href="#NoFun">mélanger votre système OpenBSD et l'arbre des ports.</a>
Des que vous avez décidé quel saveur de l'arbre des ports vous désirez, vous
pouvez récupérer l'arbre des ports de différentes sources.
La table ci-dessous donne une vue d'ensemble d'où vous pouvez trouver les
différentes saveurs, et sous quelle forme.
Un 'x 'marque la disponibilité et un '-' qu'il n'est pas disponible en
utilisant les sources spécifiées.

<p>
<table border="1" align="center" style="empty-cells: show;">
<tr align="center">
<td align="left">Source</td>
<td>Form</td>
<td colspan="4">Flavor</td>
</tr>
<tr align="center">
<td colspan="2"></td>
<td>-release</td>
<td>-stable</td>
<td>snapshots</td>
<td>-current</td>
</tr>
<tr align="center">
<td align="left"><a href="../../orders.html">CD-ROM</a></td>
<td>.tar.gz</td>
<td>x</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr align="center">
<td align="left"><a href="../../fr/ftp.html">FTP mirrors</a></td>
<td>.tar.gz</td>
<td>x</td>
<td>-</td>
<td>x</td>
<td>-</td>
</tr>
<tr align="center">
<td align="left"><a href="../../fr/anoncvs.html">AnonCVS</a></td>
<td>cvs checkout</td>
<td>x</td>
<td>x</td>
<td>-</td>
<td>x</td>
</tr>
</table>

<p>
Sur le CD-ROM et les miroirs FTP, recherchez un fichier dénommé 
<tt>ports.tar.gz</tt>.
Vous pouvez désarchiver ("untar") ce fichier dans le répertoire <tt>/usr</tt>, 
ce qui va créer <tt>/usr/ports</tt>, et tous les répertoire en dessous.
Par exemple:

<blockquote><pre>
$ <b>cd /tmp</b>
$ <b>ftp ftp://ftp.openbsd.org/pub/OpenBSD/4.2/ports.tar.gz</b>
$ <b>cd /usr</b>
$ <b>sudo tar xzf /tmp/ports.tar.gz</b>
</pre></blockquote>

<p>
Les snapshots disponibles sur les FTP miroirs sont générés quotidiennement
de l'arbre des ports -current.
Vous pouvez trouver les snapshots dans le répertoire 
<tt>pub/OpenBSD/snapshots/</tt>
Si vous utilisez un snapshot de l'arbre des ports, vous devez avoir installé
un snapshot correspondant d'OpenBSD.
Soyez sure d'avoir votre arbre des ports et votre système OpenBSD synchrone !

<p>
Pour plus d'informations sur la façon d'obtenir l'arbre des ports via AnonCVS, 
veuillez lire la <a href="../../fr/anoncvs.html">page AnonCVS</a> qui contient une 
liste des serveurs disponibles et un nombre d'exemples.


<a name="PortsConfig"></a>
<h3>15.3.3 - Configuration du système des ports</h3>

<p>
<b>NOTE :</b>
Cette section introduit des paramétres de configuration globale additionnels
pour construire des applications des ports.
Vous pouvez sauter cette section, mais alors vous devrez exécuter
plusieurs fois make(1) dans les exemples comme root.

<p>
Parce que le projet OpenBSD ne posséde pas les ressources pour auditer tout
le code source de toutes les applications dans l'arbre des ports, vous
pouvez configurer le système de port pour prendre quelques mesures de sécurité.
L'infrastructure des ports est capable d'exécuter toute la construction
comme un utilisateur normal, et d'exécuter seulement les étapes qui exigent
des privilèges de super-utilisateur comme root.
Les exemples sont les <tt>fausses</tt> créations et <tt>installations</tt>
de cibles.
Cependant, parce que les privilèges root sont toujours requis à un certain
point, le système de port ne vous sauvera pas quand vous déciderez de
construire une application malveillante.

<p>
<ul>
<li>Vous pouvez installer 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a>
et avoir un système de port qui l'utilise pour les taches qui requiert les
droits en super-utilisateur.
Ajoutez juste la ligne suivante a <tt>/etc/mk.conf</tt>

<blockquote><pre>
SUDO=/usr/bin/sudo
</pre></blockquote>

<li>Vous pouvez modifer les droits de propriété de l'arbre des ports pour
que vous puissiez y écrire comme un utilisateur normal.
Dans ce cas, l'utilisateur normal devra être ajouté au groupe wsrc, et les
répertoires dépendants devront avoir le groupe en écriture.

<blockquote><pre>
# <b>chgrp -R wsrc /usr/ports</b>
# <b>find /usr/ports -type d -exec chmod g+w {} \;</b>
</pre></blockquote>

<li>Vous pouvez avoir le sytème des ports utiliser 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&amp;sektion=1">systrace(1)</a>
en ajoutant la ligne suivante à <tt>/etc/mk.conf</tt>

<blockquote><pre>
USE_SYSTRACE=Yes
</pre></blockquote>

Ceci impose la procédure de construction de rester à l'intérieur des
répertoires permis, et interdit d'écrire dans des endroits illégaux, réduisant 
de ce fait considérablement le risque d'un système endommagé.
Il est à noter que l'utilisation de systrace(1) ajoute environ 20% de temps
supplémentaire à la construction.

</ul>

<p>
Il est possible d'utiliser un arbre des ports en lecture seulement en
séparant les répertoires qui sont écrits durant la construction du port :

<ul>
<li>Le répertoire de travail des ports.
Il est controlé par la variable <tt>WRKOBJDIR</tt>, qui spécifie le
répertoire qui doit contenir les répertoires de travail.
<li>Le répertoire contenant les fichiers distribués.
Il est controlé par la variable <tt>DISTDIR</tt>.
<li>Le répertoire contenant les nouveaux paquetages binaires crées.
Il est controlé par la variable <tt>PACKAGE_REPOSITORY</tt>.
</ul>

Par exemple, vous pouvez ajouter les lignes suivantes dans <tt>/etc/mk.conf</tt>

<blockquote><pre>
WRKOBJDIR=/usr/obj/ports
DISTDIR=/usr/distfiles
PACKAGE_REPOSITORY=/usr/packages
</pre></blockquote>

Si désiré, vous pouvez aussi changer les droits de propriété de ces répertoires 
par votre nom d'utilisateur et de groupe local, de sorte que le système des
ports puisse créer les répertoires de travail correspondants comme un
utilisateur normal.


<a name="PortsSearch"></a>
<h3>15.3.4 - Rechercher dans l'arbre des ports</h3>

Des que vous avez l'arbre des ports en place sur votre système, il devient
trés simple de rechercher un logiciel.
Il faut juste utiliser <tt>make search key="searchkey"</tt>, comme montré
dans l'exemple suivant.

<blockquote><pre>
$ <b>cd /usr/ports</b>
$ <b>make search key=rsnapshot</b>
Port:   rsnapshot-1.2.9
Path:   net/rsnapshot
Info:   remote filesystem snapshot utility
Maint:  Sigfred Haversen
Index:  net
L-deps: 
B-deps: :net/rsync
R-deps: :net/rsync
Archs:  any
</pre></blockquote>

Le résultat de la recherche donne une sympathique vue d'ensemble de chaque
application qui a été trouvée : le nom du port, le chemin vers le port, une
ligne de description, le mainteneur du port, les mots clés relatifs au port,
les dépendances de librairies/compilation/éxecutables, et l'architecture sur
laquelle le port est connu pour fonctionner.

<p>
Ce mécanisme, cependant, est trés basique, il exécute juste awk(1) sur le
fichier d'index des ports.
Depuis OpenBSD 4.0, un nouveau port appelé "sqlports" a été crée, permettant
de faire des recherches en utilisant SQL de maniére trés précise.
C'est une base de donnée SQLite, mais fondamentalement n'importe quel format
de base de données peut-être crée pour être utilisé dans l'infrastructure des
ports.
Le port de sqlports inclus le script utilisé pour générer la base de
données, qui pourrait être utilisé comme base pour générer des bases de
données dans des formats différents.

<p>
Il faut juste pkg_add(1) le paquetage de sqlports, et dans ce cas, le
paquetage de sqlite3 sera démarré.
Un session d'exemple peut ressembler à :

<blockquote><pre>
$ sqlite3 /usr/local/share/sqlports
SQLite version 3.3.12
Enter ".help" for instructions
sqlite> SELECT FULLPKGNAME,COMMENT FROM Ports WHERE COMMENT LIKE '%statistics%'; 
Guppi-0.40.3p1|GNOME-based plot program with statistics capabilities
mailgraph-1.12|a RRDtool frontend for Postfix statistics
R-2.4.1|clone of S, a powerful math/statistics/graphics language
py-probstat-0.912p0|probability and statistics utilities for Python
darkstat-3.0.540p1|network statistics gatherer with graphs
pfstat-2.2p0|packet filter statistics visualization
tcpstat-1.4|report network interface statistics
wmwave-0.4p2|Window Maker dockapp to display wavelan statistics
diffstat-1.43p0|accumulates and displays statistics from a diff file
sqlite>
</pre></blockquote>

L'exemple ci-dessus reste un recherche trés simple.
Avec SQL, à peu prés tout peu être recherché avec, incluant les dépendances, 
les options de configuration, librairies partagées, etc...

<a name="PortsInstall"></a>
<h3>15.3.5 - Installation normale : un exemple simple</h3>

Pour clarifier les choses, considérons un exemple simple : rsnapshot.
Cette application posséde une dépendance : rsync.

<blockquote><pre>
$ <b>cd /usr/ports/net/rsnapshot</b>
$ <b>make install</b>
===>  Checking files for rsnapshot-1.2.9
&gt;&gt; rsnapshot-1.2.9.tar.gz doesn't seem to exist on this system.
&gt;&gt; Fetch http://www.rsnapshot.org/downloads/rsnapshot-1.2.9.tar.gz.
100% |**************************************************|   173 KB    00:02
&gt;&gt; Size matches for /usr/ports/distfiles/rsnapshot-1.2.9.tar.gz
&gt;&gt; Checksum OK for rsnapshot-1.2.9.tar.gz. (sha1)
===&gt;  rsnapshot-1.2.9 depends on: rsync-2.6.9 - not found
===&gt;  Verifying install for rsync-2.6.9 in net/rsync
===&gt;  Checking files for rsync-2.6.9
&gt;&gt; rsync-2.6.9.tar.gz doesn't seem to exist on this system.
&gt;&gt; Fetch ftp://ftp.samba.org/pub/rsync/old-versions/rsync-2.6.9.tar.gz.
100% |**************************************************|   792 KB 00:31
&gt;&gt; Size matches for /usr/ports/distfiles/rsync-2.6.9.tar.gz
&gt;&gt; Checksum OK for rsync-2.6.9.tar.gz. (sha1)
===&gt;  Verifying specs:  c
===&gt;  found c.40.3
===&gt;  Extracting for rsync-2.6.9
===&gt;  Patching for rsync-2.6.9
===&gt;  Configuring for rsync-2.6.9
  [...snip...]
===&gt;  Building for rsync-2.6.9
  [...snip...]
===&gt;  Faking installation for rsync-2.6.9
  [...snip...]
===&gt;  Building package for rsync-2.6.9
Link to /usr/ports/packages/i386/ftp/rsync-2.6.9.tgz
Link to /usr/ports/packages/i386/cdrom/rsync-2.6.9.tgz
===&gt;  Installing rsync-2.6.9 from /usr/ports/packages/i386/all/rsync-2.6.9.tgz
rsync-2.6.9: complete
===&gt; Returning to build of rsnapshot-1.2.9
===&gt;  rsnapshot-1.2.9 depends on: rsync-2.6.9 - found
===&gt;  Extracting for rsnapshot-1.2.9
===&gt;  Patching for rsnapshot-1.2.9
===&gt;  Configuring for rsnapshot-1.2.9
  [...snip...]
===>  Building for rsnapshot-1.2.9
  [...snip...]
===&gt;  Faking installation for rsnapshot-1.2.9
  [...snip...]
===&gt;  Building package for rsnapshot-1.2.9
Link to /usr/ports/packages/i386/ftp/rsnapshot-1.2.9.tgz
Link to /usr/ports/packages/i386/cdrom/rsnapshot-1.2.9.tgz
===&gt;  rsnapshot-1.2.9 depends on: rsync-2.6.9 - found
===&gt;  Installing rsnapshot-1.2.9 from /usr/ports/packages/i386/all/rsnapshot-1.2.9.tgz
rsnapshot-1.2.9: complete
</pre></blockquote>

<p>
Comme vous pouvez le voir, le système des ports fait beaucoup de choses
automatiquement.
Il récupére, extrait, modifie le code source, configure et construit
(compile) le source, installe les fichiers dans un faux répertoire, crée un
paquetage (correspondant à la liste de paquetage) et installe ce paquetage 
sur votre système (usuellement sous <tt>/usr/local/</tt>).
Et il fait cela récursivement <b>pour toutes les dépendances</b> du port.
Il faut juste voir les lignes  
"<tt>===&gt; Verifying install for ...</tt>" et 
"<tt>===&gt; Returning to build of ...</tt>" dans la sortie ci-dessus,
indiquant le chemin à travers l'arbre des dépendances.

<p>
Si une version précédente de l'application que vous voulez installer a déjà
été installée sur votre système, vous pouvez utiliser <tt><b>make
update</b></tt> à la place de <tt><b>make install</b></tt>.
Cela appelera pkg_add(1) avec l'option <b>-r</b>.

<p>
<b>Note :</b>
Les grosses applications nécessitent une quantité importante de ressources
système pour être construite.
De bons exemples sont les compilateurs comme GCC 4.0 ou le Java 2 Software
Development Kit.
Si vous obtenez des erreurs du type "out of memory" quand vous construisez
ce type de port, ceci a habituellement une de ces deux causes :

<ul>
<li>Les limites de vos ressources sont trop restrictives.
Ajustez les avec le ulimit de ksh ou le limit de csh.
Si cela n'aide pas, devenez juste root avant de démarrer la construction, ou
utilisez
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a>
avec l'option <tt>-c</tt> pour éxecuter la construction avec les ressources
limitées par la classe de login (se référer à 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5">login.conf(5)</a>
pour des détails sur les classes de login).
<li>Vous n'avez simplement pas assez de RAM sur votre machine.
</ul>


<a name="PortsClean"></a>
<h3>15.3.6 - Nettoyer aprés une compilation</h3>

Vous voulez probablement nettoyer le répertoire de travail par défaut du port 
aprés avoir construit et installé le paquetage. 

<blockquote><pre>
$ <b>make clean</b>
===&gt;  Cleaning for rsnapshot-1.2.9
</pre></blockquote>

En outre, vous pouvez aussi nettoyer les répertoires de travail de toutes
les dépendances du port avec cette cible de make :

<blockquote><pre>
$ <b>make clean=depends</b>
===&gt;  Cleaning for rsync-2.6.9
===&gt;  Cleaning for rsnapshot-1.2.9
</pre></blockquote>

Si vous désirez supprimer l'ensemble des sources de la distribution du port,
vous pouvez utiliser

<blockquote><pre>
$ <b>make clean=dist</b>
===&gt;  Cleaning for rsnapshot-1.2.9
===&gt;  Dist cleaning for rsnapshot-1.2.9
</pre></blockquote>

Dans le cas ou vous avez compilé de multiples saveurs du même port, vous
pouvez nettoyer les répertoires de travail de toutes ces saveurs en une fois
en utilisant

<blockquote><pre>
$ <b>make clean=flavors</b>
</pre></blockquote>

Vous pouvez aussi effectuer un nettoyage au fur et à mesure que la
compilation a lieu en positionnant une variable spéciale.
Les répertoires de compilation seront automatiquement nettoyés une fois
les paquetages créés :
<blockquote><pre>
$ <b>make package BULK=Yes</b>
</pre></blockquote>

<a name="PortsDelete"></a>
<h3>15.3.7 - Désinstaller un paquetage de port</h3>

Il est trés simple de désinstaller un port :

<blockquote><pre>
$ <b>make uninstall</b>
===&gt; Deinstalling for rsnapshot-1.2.9
rsnapshot-1.2.9: complete
Clean shared items: complete
</pre></blockquote>

Cela appelera pkg_delete(1) pour avoir le paquetage correspondant supprimé
de votre système.
Si vous le désirez, vous pouvez aussi désinstaller et re-installer un
paquetage de port en utilisant

<blockquote><pre>
$ <b>make reinstall</b>
===&gt;  Cleaning for rsnapshot-1.2.9
/usr/sbin/pkg_delete rsnapshot-1.2.9
rsnapshot-1.2.9: complete
Clean shared items: complete
===&gt;  Installing rsnapshot-1.2.9 from /usr/ports/packages/i386/all/rsnapshot-1.2.9.tgz
rsnapshot-1.2.9: complete
</pre></blockquote>

Si vous voudriez vous débarasser des paquetages que vous avez juste construit, 
vous pouvez faire comme suit :

<blockquote><pre>
$ <b>make clean=packages</b>
===&gt;  Cleaning for rsnapshot-1.2.9
rm -f /usr/ports/packages/i386/all/rsnapshot-1.2.9.tgz
</pre></blockquote>

<a name="PortsFlavors"></a>
<h3>15.3.8 - Utiliser les saveurs ("flavors") et les sous-paquetages ("subpackages")</h3>

Veuillez lire la page du manuel 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&amp;sektion=7">ports(7)</a>
qui donne une bonne vue d'ensemble du sujet.
Il y a deux mécanismes pour controler le paquetage d'un logiciel en fonction
des différents besoins.

<p>
Le premier mécanisme est appelé <b>saveurs ("flavors")</b>.
Une saveur indique habituellement un certain ensemble d'options de compilation.
Par exemple, quelques applications ont une saveur "no_x11" qui peut être
employée sur des systèmes sans X.
Certains shells possédent un saveur "static", qui contruira une version avec
les librairies liées statiquement.
Il y a des ports qui ont différentes saveurs pour les construire avec
différents toolkits graphiques.
D'autres exemples incluent : le support pour différents formats de bases de
données, différentes options réseaux (SSL, IPv6, ...), différentes taille de
papiers, etc...

<p>
<b>Résumé :</b>
Très probablement vous emploierez des saveurs quand un paquet n'a pas été
rendu disponible pour la saveur que vous recherchez. 
Dans ce cas-ci vous indiquerez la saveur désirée et construirez le port 
vous-même.

<p>
La plupart des saveurs de ports auront leur propre répertoire de travail
durant leur construction et chaque saveur sera packagée avec un nom de
paquetage correspondant pour éviter toute confusion.
Pour voir les différentes saveurs d'un port, vous devrez aller dans son
sous-répertoire et taper

<blockquote><pre>
$ <b>make show=FLAVORS</b>
</pre></blockquote>

Vous devriez aussi regarder les fichiers DESCR d'un port étant donné
qu'ils sont supposés décrire les saveurs disponibles.

<p>
Le second mécanisme est appelé <b>sous-paquetages ("subpackages")</b>.
Un porteur de paquetage peut décider de créer des sous-paquetages pour
différentes parties de la même application, si elles peuvent-être
logiquement séparées.
Vous verrez souvent des sous-paquetages pour la partie cliente et pour la
partie serveur d'un programme.
Quelquefois une documentation importante est livrée dans un sous-paquetage
séparé parce qu'elle prend trop d'espace disque.
Toute fonctionnalité additionnelle qui a beaucoup de dépendances sera
souvent packagée séparément.
La personne effectuant le portage devra aussi décider quel
sous-paquetage est considéré comme principal, à installer par défaut.
D'autres exemples incluent : des suites de tests importants qui sont fournis
avec le logiciel, des modules séparés pour supporter différentes choses, etc...

<p>
<b>Résumé :</b>
Certains ports sont répartis en plusieurs paquetages. make install va
uniquement installer le sous-paquetage principal.

<p>
Pour afficher les différents paquetages émanant d'un port donné,
utilisez :
<blockquote><pre>
$ <b>make show=PACKAGES</b>
</pre></blockquote>
<p>

<code>make install</code> installera uniquement le premier
sous-paquetage.
Pour les installer tous, utilisez :

<blockquote><pre>
$ <b>make install-all</b>
</pre></blockquote>
<p>

Pour afficher les différents sous-paquetages disponibles pour un port, utilisez

<blockquote><pre>
$ <b>make show=MULTI_PACKAGES</b>
</pre></blockquote>

Il est possible de sélectionner quel(s) sous-paquetage(s) a installer à partir
de l'arbre des ports.
Aprés quelques tests, cette procédure appelera juste 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_add(1)</a>
pour installer le(s) sous-paquetage(s) désiré(s).

<blockquote><pre>
$ <b>env SUBPACKAGE="-server" make install</b>
</pre></blockquote>

<p>
<b>Note :</b>
Le mécanisme de sous-paquetage manipule seulement des paquetages, il ne modifie
aucune option de configuration avant de construire le port. 
Dans ce but vous devez employer les saveurs.


<!--
<a name="PortsSecurity"></a>
<h3>15.3.9 - Mises à jour de sécurité (-stable)</h3>

Quand un bogue sérieux ou une faille de sécurité sont découverts dans un
logiciel tiers, ils sont corrigés dans la branche <b>-stable</b> de l'arbre
des ports.
Rappelez-vous que le cycle de vie est de 1 an : seulement la current et la
derniére révision sont mises à jour, comme expliqué dans 
<a href="faq5.html#Flavors">FAQ 5 - Saveurs ('Flavors") OpenBSD</a>.

<p>
Cela signifie que tous ce que vous devez faire est de s'assurer d'avoir
récupéré la branche correcte de l'arbre de ports, et de construire le logiciel 
désiré de celui-ci.
Vous pouvez avoir un arbre mis à jour avec CVS, et en plus s'abonner à la
<a href="../../fr/mail.html">liste de diffusion</a> ports-security pour reçevoir les 
annonces de sécurité relatives aux logiciels dans l'arbre des ports.

<p>
Bien evidemment, les mises à jour de sécurité sont effectuées sur l'arbre
des ports -current avant d'être intégrées dans la branche -stable.
-->

<a name="PkgFAQ"></a>
<h2>15.4 - FAQ</h2>

<a name="NoFun"></a>
<h3>15.4.1 - J'obtiens toutes sortes d'erreurs
  folles. Je n'arrive pas du tout à faire fonctionner ces ports.</h3>

<p>
Il est très probable que vous employiez un système et un arbre des ports qui 
n'est pas synchrone.

<p>
<i>Pardon ?</i>
<ul>
<li>Lire TOUT sur 
<a href="faq5.html#Flavors">Saveurs ('Flavors") OpenBSD</a> :
-release, -stable et -current.
Un court résumé suit, mais veuillez lire le document mentionné ci-dessus pour 
avoir une idée du sujet si vous voulez l'employer.
<ul>
<li><a href="../../orders.html">Release</a>: Ce qui est sur le CD.
<li><a href="../../fr/stable.html">Stable</a>: Release, avec de la sécurité et
  plus de fiabilité.
<li><a href="current.html">Current</a>: La version de développement d'OpenBSD.
</ul>       
<li>Ne PAS récupérer un arbre des ports -current et espérer qu'il fonctionne
sur un système en -release ou -stable.
C'est l'une des erreurs les plus communes et vous irriterez des personnes
quand vous demandez de l'aide en disant "rien ne semble fonctionner !"
<b>Si vous suivez -current, vous aurez besoin d'un système en -current et
d'un arbre des ports en -current</b>.
Oui, cela signifie vraiment qu'un nouveau port merveilleux ne fonctionnera
pas sur votre "vieux" système -- même si ce système était -current juste
quelques semaines auparavant.
Gardez en mémoire que si vous utilisez X11 comme une partie de votre système, 
il doit aussi suivre la branche correspondante ! 
<li>Parce que des changements non intrusifs sont faits dans -stable, il est
possible d'utiliser des paquetages et ports -release sur un système
-stable et vice-versa.
Il n'est pas nécessaire de mettre à jour tous les paquetages installés aprés
avoir appliqué quelques patchs correctifs d'erreurs sur votre système.
</ul>

<p>
Un autre erreur courante est l'installation oubliée de X11.
Même si le port que vous essayez de construire n'a pas de dépendance directe
avec X11, un sous-paquetage ou ces dépendances peuvent avoir besoin des entetes 
X11 ou des librairies.
Construire des ports sur un système sans X11 n'est pas supporté, même si
vous insistez pour le faire ainsi, vous serez seul pour le gérer.
Pour plusieurs ports, il y a cependant, la saveur de paquetage "no_x11"
disponible, avec laquelle vous pouvez installer sans avoir besoin de X11 sur
votre système.

<p>
Pour 4.2, plusieurs paquetages utilisant libexpat <i>nécessitent</i>
l'installation de xbase42.tgz, même s'ils n'ont aucune fonctionnalité
graphique.
Ce problème sera corrigé en 4.3.

<a name="Latest"></a>
<h3>15.4.2 - Pourquoi la derniére version de mon logiciel favori/préféré n'est 
  pas disponible ?</h3>

Si vous utilisez une version révision ou stable d'OpenBSD, vous ne trouverez
pas de mise à jour de paquetage avant la prochaine révision, ou alors si un
problème de sécurité intervient et justifie une mise à jour du port dans la
branche -stable et du paquetage correspondant.

<p>
<b>ATTENTION : NE PAS mélanger les versions des Ports et d'OpenBSD :</b>

<p>
En faisant ainsi tôt ou tard (probablement trés tôt en fait) cela va vous
causer des maux de tête en essayant de résoudre 
<a href="#NoFun">toutes sortes d'erreurs</a> !

<p>
<i>Mais hé, je suis en -current ici !</i>

<p>
La collection des ports est un projet de volontaires.
Quelquefois le projet n'a simplement pas les ressources en développeur pour
avoir tout de mis à jour en permanence.
Les développeurs assez souvent reprennent ce qui les intéressent et ce qu'ils 
peuvent tester dans leur environnement.
Vos <a href="../../fr/donations.html">donations</a> peuvent faire la différence
pour le test des ports sur plus de plates-formes.

<p>
Quelques ports isolés peuvent traîner derrière les versions traditionnelles
pour cette raison.
La collection des ports peut avoir une version de retard d'un programme de
Janvier pendant qu'une nouvelle version du programme a été livrée par ces
développeurs en mai trois mois plus tard.
Souvent c'est une décision réfléchie; la nouvelle version peut avoir des
problémes sur OpenBSD que le mainteneur essaye de corriger, ou alors ils ont
fait une version plus mauvaise que la version précédente : OpenBSD peut avoir 
différents <a href="../../fr/goals.html">buts</a> que les autres principaux 
développeurs dans d'autres projets, qui quelquefois résulte dans une
fonctionnalité et un désign ou un choix d'implémentation qui est indésirable
du point de vue des développeurs de OpenBSD.
La mise à jour peut également être remise à plus tard parce que la nouvelle
version n'est pas considérée une mise à jour cruciale.

<p>
Si vous avez réellement besoin d'une nouvelle version du port, vous pouvez
contacter le mainteneur du port pour qu'il le mette à jour
(voir <a href="#Problems">ci-dessous</a> comment trouver qui est le mainteneur).
Si vous pouvez nous <a href="#Helping">aider</a> avec ceci, tout ira pour le
mieux.


<a name="NoPkg"></a>
<h3>15.4.3 -  Pourquoi n'y a-t-il pas de paquetage de mon logiciel 
  favori/préféré ?</h3>

Il y a plusieurs raisons possibles à cela :

<ul>
<li>Sur les <a href="../../orders.html">CD-ROMs</a> d'OpenBSD, il n'y a pas
assez d'espace pour inclure tous les paquetages possibles pour toutes les
plates-formes possibles.
Par conséquent seulement les paquetages les plus utilisés sont inclus sur les
CDs.
En plus, certains logiciels peuvent seulement être redistribué gratuitement, 
ceci signifie qu'ils ne peuvent pas être inclus sur le CDs.
Si vous ne trouvez pas un paquetage sur les CDs, essayez une autre source,
comme un miroir FTP.
<li>Certains logiciels ne peuvent simplement pas être redistribué sous la
forme d'un paquetage binaire en suivant leurs licences.
D'autre logiciels sont encombrés par des brevets et ne peuvent donc pas être
redistribué.
Si votre logiciel favori/préféré tombe dans ces catégories, vous aurez
besoin d'utiliser le port et de le compiler des sources.

<li>Evidemment, mais parfois oublié : il n'y a
<a href="#NoPort">pas de port de votre logiciel favori/préféré</a>.
Vous pouvez le vérifier en <a href="#PortsSearch">recherchant dans l'arbre des ports</a>.
S'il n'y a en effet aucun port de votre logiciel favori/préféré, vous êtes
le bienvenue pour <a href="#Helping">aider</a>.
</ul>

<a name="NoPort"></a>
<h3>15.4.4 - Pourquoi n'y a-t-il pas de port de mon logiciel favori/préféré ?</h3>

La collection des ports est un projet de volontaires.
Le développement de port actif est réalisé par un nombre limité de personnes, 
à leur temps perdu.
Ces personnes réalise souvent de nouveaux ports seulement sur les logiciels
qu'ils utilisent directement ou qui les intéressent.

<p>
Vous pouvez <a href="#Helping">aider</a>.
Voyez pour créer votre propre port.
Il y a de la documentation disponible dans :
<a href="../../fr/porting.html">Construction d'un port OpenBSD</a>.
Lisez la et lisez la encore.
Spécialement la partie sur <i>maintenir</i> votre port.
Donc essayez de construire un nouveau port, et testez-le soigneusement point 
par point.
Si finalement il fonctionne parfaitement pour vous, soumettez le à la liste
de diffusion des ports à <a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.
Vous avez beaucoup de chances de reçevoir un retour et des tests d'autres
personnes.
Si l'essai est réussi, votre port sera considéré comme pris dans l'arbre des
ports.


<a name="NotInBase"></a>
<h3>15.4.5 - Pourquoi mon logiciel favori/préféré ne fait pas partie du systéme 
  de base ?</h3>

Puisque OpenBSD est supposé être un petit systéme d'exploitation Unix-like
autonome, nous devons tracer une ligne quand à quoi inclure.
Généralement, pour une application qui doit être incluse dans le système de 
base :

<ul>
<li>Elle doit suivre les grands standards de qualité, suivre les mêmes
<a href="../../fr/goals.html">buts</a> que le projet OpenBSD.
<li>Sa licence ne doit pas être trop restrictive et doit être compatible
avec la licence BSD.
<li>Elle ne doit pas être trop volumineuse, afin de maintenir la taille du 
système de base acceptable.
</ul>

<p>
Plus de réponses à cette question peuvent aussi être trouvées dans la 
<a href="faq1.html#HowAbout">FAQ 1</a>.

<a name="PkgVsPorts"></a>
<h3>15.4.6 - Qu'est ce que je dois utiliser : paquetages ou ports ?</h3>

En général, il est <b>fortement conseillé</b> d'utiliser les paquetages au
lieu de construire une application des ports.
L'équipe des ports de OpenBSD considére que les paquetages sont le but de
leur effort de portage, pas les ports en eux-mêmes.

<p>
Construire un application complexe des sources n'est pas trivial.
Non seulement l'application doit être compilée, mais les outils utilisés
pour la construire doivent être compilés aussi.
Malheureusement, OpenBSD, les outils, et les applications sont en évolution,
et souvent, obtenir que tous les morceaux fonctionnent ensemble est un défi.
Des que tout fonctionne, une révision d'une des piéces le jour suivant peut
tout casser.
Tous les <a href="faq1.html#Next">six mois</a>, comme une
<a href="faq5.html#Flavors">nouvelle révision</a> d'OpenBSD est réalisée,
un effort est fait pour tester la construction de chaque port sur toutes les
plates-formes, mais durant le cycle de développement il est courant que
certains ports soient cassés.

<p>
En plus d'avoir toutes les piéces fonctionnant ensemble, il y a juste la
matiére en temps et ressource requise pour compiler quelques applications
des sources.
Un exemple courant est <a href="http://www.cvsup.org/">CVSup</a>, un outil
communement utilisé pour 
<a href="../../fr/cvsup.html">suivre l'arbre des ports de OpenBSD</a>.
Pour installer CVSup sur un système modérement rapide avec une bonne
connexion Internet cela prend environ dix secondes -- le temps requis pour
télécharger et désarchiver un unique fichier de paquetage de 779Ko.
En contraste, construire CVSup sur la même machine des sources est une tache
énorme, qui requiert beaucoup d'outils et de "bootstrapper" un compilateur,
prenant au moins un heure et demi sur la même machine.
D'autres applications comme <a href="http://www.mozilla.org">Mozilla</a>
ou <a href="http://www.kde.org">KDE</a> prennent des heures et un espace
disque énorme en plus de beaucoup de RAM/swap pour les construire.
Pourquoi aller vers autant de temps et d'efforts quand les programmes sont
déjà compilés et attendent sur votre <a href="../../orders.html">CD-ROM</a> ou
<a href="../../fr/ftp.html">miroir FTP</a> d'être utilisés ?

<p>
Bien évidemment, il y a quelques bonnes raisons d'utiliser les ports au
lieu des paquetages dans certains cas :

<ul>
<li>Les lois de distributions interdisent OpenBSD de distribuer un paquetage.
<li>Vous désirez modifer ou deboguer l'application ou étudier son code source.
<li>Vous avez besoin d'une saveur du port qui n'est pas construite par
l'équipe des ports d'OpenBSD.
<li>Vous désirez modifier la structure des répertoires (par exemple modifier 
<tt>PREFIX</tt> ou <tt>SYSCONFDIR</tt>).
</ul>

Cependant, pour la plupart des gens et des applications, utiliser les
paquetages est plus simple, et définitivement la méthode recommandée pour
ajouter des applications à un système OpenBSD. 


<a name="Knobs"></a>
<h3>15.4.7 -  Comment puis-je optimiser ces ports pour obtenir le maximum 
  de performance ?</h3>

OpenBSD est orienté stabilité et sécurité.
Comme le noyau GENERIC qui est par défaut et le seul noyau supporté,
l'équipe des ports s'assure que les ports fonctionnent et sont stables.
Si vous voulez modifier plusieurs options de compilation, c'est de votre
propre chef.
S'il vous plait ne posez pas de questions sur les listes de diffusion sur le
pourquoi cela ne fonctionne plus quand vous essayez quelques options pour
que cela s'éxecute plus rapidement.
En général, toutes ces optimisations ne sont pas nécessaires pour plus de 99% 
des utilisateurs, et c'est souvent une perte de temps compléte pour vous,
les utilisateurs, aussi bien que pour les développeurs qui lisent vos
"problémes" alors qu'en réalité il n'y en a aucun.


<a name="Wait"></a>
<h3>15.4.8 J'ai soumis un nouveau port/une mise à jour depuis plusieurs 
  semaines. Pourquoi cela n'a pas été intégré ("commited") ?</h3>

L'équipe des ports posséde des ressources limitées et aucun "committer" n'est
capable de regarder à votre port/mise à jour dans les temps. C'est trés
frustrant mais ignorez ce fait. Prenez soin de votre port, envoyez des mises
à jour et éventuellement quelqu'un s'occupera de lui. Il est déjà arrivé
dans le passé que des personnes ont soudain du temps de libre pour intégrer
des ports ou leur intérét à changé vers de nouveaux domaines et soudainement 
votre ancien envoie devient intéressant, si l'on s'en souvient.


<a name="Problems"></a>
<h2>15.5 - Comment signaler un problème</h2>

Si vous avez des soucis avec un port existant, veuillez envoyer un e-mail au
mainteneur du port.
Pour voir qui est le mainteneur du port, tapez par exemple :

<blockquote><pre>
$ cd /usr/ports/archivers/unzip
$ make show=MAINTAINER
</pre></blockquote>

<p>
Alternativement, si il n'y a pas de mainteneur, ou si vous ne pouvez pas le/la
contacter, envoyez un e-mail à la liste de diffusion des ports d'OpenBSD
<a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.
Veuillez NE PAS utiliser la liste de diffusion misc@openbsd.org pour des
questions sur les ports.
<p>
Dans tous les cas veuillez fournir :
<ul>
<li>Votre version d'OpenBSD incluant tous les patches que vous avez appliqué.
Le numéro de version du noyau est donné par : <tt>sysctl -n kern.version</tt>
<li>La version de votre arbre des ports : si le fichier <tt>/usr/ports/CVS/Tag</tt>
existe, fournissez en le contenu.
Si le fichier est absent, vous devez utiliser l'arbre des ports -current.
<li>Un description compléte du probléme.
Ne soyez pas effrayé de fournir des détails
Mentionnez toutes les étapes que vous avez suivi avant que le problème survienne.
Est-ce que ce probléme est reproductible ?
Plus d'informations vous fournirez, plus d'aide vous recevrez.
</ul>
Pour les ports qui ne se construisent pas correctement, un rapport complet
de construction est souvent toujours requis.
Vous pouvez utiliser le script portslogger, trouvé dans 
<tt>/usr/ports/infrastructure/build</tt>, pour cela.
Un exemple d'éxecution de portslogger ressemble à :

<blockquote><pre>
$ mkdir ~/portslogs
$ cd /usr/ports/archivers/unzip
$ make clean install 2&gt;&amp;1 | /usr/ports/infrastructure/build/portslogger \
           ~/portslogs
</pre></blockquote>

Aprés cela, vous devez avoir un fichier de log de la construction dans votre
répertoire ~/portslogs que vous pouvez envoyer au mainteneur du port.
Toutefois, soyez sur que vous n'avez pas utilisé des options spéciales lors
de la construction, par exemple dans <tt>/etc/mk.conf</tt>.

<p>
Alternativement, vous pouvez
<ul>
<li>Utiliser
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=script&amp;sektion=1">script(1)</a>
pour créer un rapport complet de construction.
Ne supprimez pas les informations de configuration.
<li>Attachez la sortie à
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1&amp;manpath=OpenBSD+4.2">pkg_info(1)</a>
si cela semble approprié
<li>Les erreurs internes du compilateur 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a>
vous demande de reporter les bogues à la liste de diffusion gcc.
Cela économise du temps si vous suivez ces directives, et fournissez au
moins les divers fichiers produits par <tt>gcc -save-temps</tt>.
</ul>


<a name="Helping"></a>
<h2>15.6 - Comment nous aider</h2>

Il y a plusieurs façons de nous aider.
Elle sont listée ci-dessous, par ordre croissant de difficulté.

<ul>
<li><a href="#Problems">Signaler les problémes</a> que vous rencontrez.
<li>Vous pouvez systématiquement tester les ports et reporter les cassures
("breakages"), ou suggérer des améliorations.
Jetez un oeil au <a href="../../fr/porttest.html">Guide de Tests des Ports</a>.
<li>Testez les mises à jour des ports qui sont postées dans la liste de
diffusion des ports.
<li>Envoyez des mises à jour ou des patches ou mainteneur du port, ou sur la
liste de diffusion des ports si il n'y a pas de mainteneur du port.
Généralement cela est trés apprécié, sauf si vos patches causent aux
développeurs une perte de temps au lieu d'un gain de celui-ci.
<li>Créer de nouveaux ports.
Si vous êtes trés affamé et voulez savoir tout sur le portage d'applications
sur OpenBSD, un bon point de démarrage est 
<a href="../../fr/porting.html">Construction d'un port OpenBSD</a>.
</ul>

<b>Note :</b> Pour toute création de nouveaux ports et des tests conséquents, 
ou pour tester des mises à jour de port, vous 
<b>devez avoir un système -current !</b>
En général, ce n'est pas un environnement désirable à cause de ces
changements permanents par nature, donc procédez seulement si vous êtes sure
de pouvoir mettre à jour vous-même le système -current.

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq14.html">[Section 14 - Configuration des disques]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq15.html,v 1.45 ]<br>
$Translation: faq15.html,v 1.13 2008/01/20 18:05:36 saad Exp $<br>
-->
$OpenBSD: faq15.html,v 1.8 2008/01/20 18:26:40 saad Exp $
</small>

</body>
</html>
