<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>9 - Migrating from Linux</title>
<link rev="made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2004 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ の目次]</a>
<a href= "faq8.html">[8 章 - 一般的な質問]</a>
<a href= "faq10.html">[10 章 - システムの管理]</a>
</font>

<h1><font color="#e00000">9 - Linuxからの移行</font></h1>
<hr>

<p>
<h3>目次</h3>
<ul>
<li><a href= "#Linux">9.1 - Linux (やその他のフリーの Unix系 OS)
ユーザのための豆知識</a>
<li><a href= "#DualBoot">9.2 - Linux と OpenBSD のデュアルブート</a>
<li><a href= "#passwd">9.3 - Linux (あるいはその他 System-7 形式)
のパスワードファイルを BSD-形式に変換するには</a>
<li><a href= "#Interact">9.4 - OpenBSD 上で Linux バイナリを実行するには</a>
<li><a href= "#Ext2FS">9.5 - OpenBSD から Linux のファイルにアクセスするには</a>
</ul>

Linux ユーザのためのより詳しい情報は、<a href="http://sites.inka.de/mips/unix/bsdlinux.html">http://sites.inka.de/mips/unix/bsdlinux.html</a> を参照してください。
<hr>
<br>

<p>
<a name= "Linux"></a>
<h2>9.1 - Linux (やその他のフリーの Unix系 OS) ユーザのための豆知識</h2>

<p>
OpenBSD には、いくつかちがいがあります。このちがいは、起動シーケンスや
ネットワークインターフェースの使い方、ディスク管理や、その他いろいろな
ところに出てきます。ほとんどの違いは、きちんと説明されていますが、
manpages を探し回る必要があります。このドキュメントは、そのような違いの
インデックスになるよう記述されています。

<p>
<ul>
   <li>OpenBSD には <a href="../../ja/ports.html">ports ツリー</a>があります。
   これは、現時点では OpenBSD 環境ネイティブなアプリケーションが多くはない、
   ということに対応するためのものです。ports は、アプリケーションがエンド
   ユーザに使いやすい形で提供されることと、OpenBSD を念頭においてより多くの
   アプリケーションを開発して欲しい、ということで提供されています。いずれ
   この ports ツリーを使って、バイナリの
   <a href="../../ja/ports.html#Get">packages</a> のすてきなセットをつくりましょう。
   <li>OpenBSD はソースの変更に CVS を使います。Linux の場合は、ソースコード
   は別々のディストリビューション経由で配布されています。OpenBSD は
   anonymous CVS のパイオニアで、誰でもいつでも OpenBSD のどのバージョンに
   ついても (2.0 から current まで、その間のすべての変更も含めて) フルソース
   を引き出せます。さらに、とても便利で使いやすい
   <a href="http://www.openbsd.org/cgi-bin/cvsweb/">CVS の web インターフェース</a>
   もあります。
   <li>OpenBSD は定期的に各アーキテクチャのスナップショットをリリースして、
   半年ごとに安定した公式 CD リリースを作成しています。
   <li>OpenBSD は強い暗号を含んでいます。これはアメリカベースの OS には
   入れられません
   (<a href= "../../ja/crypto.html">http://www.openbsd.org/crypto.html</a>
   を参照)。OpenBSD はまた念入りなセキュリティ監査を経ていて、多くの
   セキュリティ機能が既にソースツリーに組み込まれています
   (IPSEC, KERBEROS など)。
   <li>OpenBSD のカーネルは /bsd です。
   <li>ハードディスクの命名が普通は <i>/dev/wd</i> (IDE) と
   <i>/dev/sd</i> (SCSI または SCSI ディスクをエミュレートする ATA デバイス)
   <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">/sbin/ifconfig</a>
   を引数なしで使用すると、Linux ではインターフェース全部の状態が表示されますが、
   OpenBSD でこのようにするには -a フラグが必要になります。
   <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=route&amp;sektion=8">/sbin/route</a>
   を引数なしで使用すると、Linux では有効な経路 (ルート) 全部の状態が表示されま
   すが、OpenBSD でこのようにするには "<i>show</i>" パラメータが必要になりますし、
   あるいは <b>netstat -r</b> を使いましょう (すばらしい)。
   <li>OpenBSD には ReiserFS や IBM の JFS や SGI の XFS のようなジャーナル
   ファイルシステムはありません。その代わりに <a href="faq14.html#SoftUpdates">
   Soft Updates</a> を使用してください。
   <li>OpenBSD には ipfw や ipchains や netfilter や iptables や ipf ではなく、
      Packet Filter (PF) が附属しています。これはつまり、
<ul>
   <li>(Linux では IP マスカレード として知られる) ネットワークアドレス変換
   (Network Address Tranlation: NAT) は (-N を使って) pfctl で実行されます
   (<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>)。
   <li>ipfwadm は pfctl を通じて実施されます
   (<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8">pfctl(8)</a>、
    <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>、
    <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5">pf.conf(5)</a>)。
   <li>詳しい設定の支援や情報については <a href="../pf/ja/index.html">PF ユーザーズガイド</a>
   を参照してください。
</ul>
   <li>インターフェースアドレスは
   <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5">/etc/hostname.&lt;interfacename&gt;</a> に保存されます。
   IP アドレスのかわりにホスト名も使用できます。
   <li>マシン名は <i>/etc/myname</i> にあります。
   <li>デフォルトのゲートウェイは <i>/etc/mygate</i> にあります。
   <li>OpenBSD のデフォルトシェルは /bin/sh で、これは Korn shell です。
   bash や tcsh のようなシェルは package からインストールしたり ports
   ツリーからインストールしたりできます。
   <li>パスワード管理はいろいろと違います。主要なファイルが異なります。
   (<a href=" http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=1">passwd(1)</a>、
    <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=passwd&amp;sektion=5">passwd(5)</a>)
   <li>デバイスはドライバによって名前が付与されており、種類には依存しません。ですので、
   たとえば eth* デバイスというのはありません。ne2000 Ethernet カードなら ne0、3Com
   Etherlink XL や Fast Etherlink XL Ethernet カードなら xl0 のようになります。
   <li>OpenBSD の開発者たちはかなり真剣にがんばって、manual ページが
   正しく更新されるようにしています。情報が見たい場合には、
   <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=man">man(1)</a>
   コマンドを御使用ください。
   </ul>

<br>

<p>
<a name= "DualBoot"></a>
<h2>9.2 - Linux と OpenBSD のデュアルブート</h2>

<p>
もちろん、できます !

<p>
<a href= "ftp://ftp.openbsd.org/pub/OpenBSD/3.3/i386/INSTALL.linux">INSTALL.linux</a> をお読みください。

<p>
<a name= "passwd"></a>
<h2>9.3 - linux (あるいはその他 System-7 形式) のパスワードファイルを
BSD-形式に変換するには</h2>

<p>
まず、Linux パスワードがシャドー化されているかどうかを調べてください。
もし、シャドー化されていましたら、<a href="http://www.openwall.com/john/">John the Ripper</a>
付属の unshadow ユーティリティで、<tt>passwd</tt> と <tt>shadow</tt> ファイル
とをマージして、ひとつの System 7-形式のファイルにしてください。

<p>
Linux のパスワードファイルは、ここでは <tt>linux_passwd</tt> と呼ぶことにします。
これにはフィールド 4 と 7 との間に ::0:0 を追加する必要があります。これは、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=awk&amp;sektion=1">awk(1)</a>
が自動的に実行してくれます。

<blockquote>
<pre>
# <b>cat linux_passwd | awk -F : '{printf("%s:%s:%s:%s::0:0:%s:%s:%s\n", \</b>
> <b>$1,$2,$3,$4,$5,$6,$7); }' &gt; new_passwd</b>
</pre>
</blockquote>

この時点で、<tt>new_passwd</tt> ファイルを変更して、 root などのシステム関連の
エントリで、既に OpenBSD のパスワードファイルに存在していたり、OpenBSD では
無意味なもの (すべて) を削除しておいてください。さらに <tt>new_passwd</tt> と
OpenBSD 側の <tt>/etc/passwd</tt> でユーザ名やユーザ ID の重複がないことも
確かめてください。これを実施するのにいちばん簡単な方法は、
まっさらな <tt>/etc/passwd</tt> から始めることです。

<blockquote>
<pre>
# <b>cat new_passwd &gt;&gt; /etc/master.passwd</b>
# <b>pwd_mkdb -p /etc/master.passwd</b>
</pre>
</blockquote>

最後のステップとして、/etc/spwd.db と /etc/pwd.db ファイルを作成しなおすのに
<tt>pwd_mkdb</tt> が必要になります。これはまた System 7-形式のパスワード
ファイル (暗号化されたパスワードは除く) を /etc/passwd に作ります。これを
使用するプログラムがあるからです。OpenBSD はパスワードに最も強力な暗号
blowfish を使用していて、これは完全な System 7-形式のパスワードファイルを
使用するシステムではまず見ることができません。この強力な暗号方式に切り替える
のでしたら、各ユーザに 'passwd' を実行してもらい、パスワードを変えてもらい
ましょう。みんなが入れる新しいパスワードは、デフォルト設定の暗号化方式で
暗号化されます
(/etc/login.conf を変更していなければ、通常は blowfish です)。
または root になって <tt>passwd <i>username</i></tt> を実行しても良いでしょう。


<p>
<a name= "Interact"></a>
<h2>9.4 - OpenBSD 上で Linux バイナリを実行するには</h2>

<p>
OpenBSD/i386 は、カーネルが COMPAT_LINUX オプション付きでコンパイルされ、
sysctl の実行時パラメータ kern.emul.linux が設定されている場合に、
Linux バイナリを実行することができます。
(あなたが使用すべき) GENERIC カーネルを使用している場合には、COMPAT_LINUX
は既に有効化されていますので、あなたは単に以下のようにするだけです。

<blockquote>
<pre>
# <b>sysctl -w kern.emul.linux=1</b>
</pre>
</blockquote>

コンピュータの起動時にこれが自動的に実行されるようにするためには、
以下の /etc/sysctl.conf ファイルの

<blockquote>
<pre>
#kern.emul.linux=1      # enable running Linux binaries
</pre>
</blockquote>

行頭の # (コメント) 文字を除去して以下のようにし、

<blockquote>
<pre>
kern.emul.linux=1       # enable running Linux binaries
</pre>
</blockquote>

そしてこれを反映するため、再起動してください。

<p>
スタティックリンクされていない Linux バイナリ
(つまりほとんど) を実行するためには、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&amp;sektion=8">compat_linux(8)</a>
マニュアルページに記述された手順に従う必要があります。

<p>
便利な Linux ライブラリのほとんどを簡単に取得するための方法は、ports
コレクションから <tt>redhat/base</tt> をインストールすることです。
ports コレクションについてのより詳しいことは
<a href="faq8.html#Ports">FAQ 8 - Ports</a> を参照してください。
ports ツリーがインストールされているのでしたら、
次のコマンドで Linux ライブラリをインストールできます。

<blockquote>
<pre>
# <b>cd /usr/ports/emulators/redhat/base</b>
# <b>make install</b>
</pre>
</blockquote>


<p>
<a name= "Ext2FS"></a>
<h2>9.5 - OpenBSD から Linux のファイルにアクセスするには</h2>

<p>
OpenBSD は EXT2FS ファイルシステムをサポートしています。OpenBSD が Linux パーティションをどのように見ているのか、

<blockquote>
<pre>
# <b>disklabel <i>disk</i></b>
</pre>
</blockquote>

(ここで <tt><b><i>disk</i></b></tt> は、あなたのディスクのデバイス名のことで、 
たとえば、<tt><b>wd0</b></tt>)
を使用して知ることができます。
しかし、それがどのような変更であっても、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel (8)</a> 
や
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8">fdisk (8)</a> 
をディスクラベルを変更するために<b>使用してはいけません</b>。

<p>
disklabel の使用について、詳しくは
<a href="faq14.html#disklabel">FAQ 14 - disklabel</a> を参照してください。



<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ の目次]</a>
<a href= "faq8.html">[8 章 - 一般的な質問]</a>
<a href= "faq10.html">[10 章 - システムの管理]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[back]"></a>
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq9.html,v 1.58 ]
<br>
$Translation: faq9.html,v 1.26 2004/02/10 08:02:12 toshi Exp $
<br>
$OpenBSD: faq9.html,v 1.27 2004/05/09 09:58:22 saad Exp $
</small>
</body>
</html>
