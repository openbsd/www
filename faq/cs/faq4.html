<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>4 - OpenBSD 4.8 Instalační příručka</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2010 by OpenBSD.">
</head>

<!-- Passes validator.w3.org.  Please keep it this way -->

<body bgcolor= "#ffffff" text= "#000000">

<a href="../../cs/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
</a>
<p>

<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq3.html">[Do sekce 3 - Začínáme s OpenBSD]</a>
<a href= "../faq5.html">[Do sekce 5 - Sestavení systému ze zdrojů]</a>
</font>

<h1><font color="#e00000">4 - OpenBSD 4.8 Instalační příručka</font></h1>

<hr>

<p>
<h3>Obsah</h3>
<ul>
<li><a href= "#Overview"    >4.1 - Přehled instalace OpenBSD</a>
<li><a href= "#Checklist"   >4.2 - Kontrola před instalací</a>
<li><a href="#MkInsMedia"   >4.3 - Vytváření bootovacích OpenBSD
                                     instalačních médií</a>
    <ul>
    <li><a href="#MkCD-ROM" >4.3.1 - Vytváření bootovacího CD</a>
   <li><a href="#UnixFlop"  >4.3.2 - Vytváření disket na Unixu</a>
     <li><a href="#DosFlop" >4.3.3 -  Vytváření disket na Windows</a>
    </ul>
<li><a href="#Boot"         >4.4 - Spuštění instalačního média OpenBSD</a>
<li><a href="#Install"      >4.5 - Vykonání jednoduché instalace</a>
  <ul>
  <li><a href="#InstStart"    >4.5.1 - Spuštění instalace</a>
  <li><a href="#InstQuestions">4.5.2 - Otázky okolo instalace</a>
  <li><a href="#InstDisks"    >4.5.3 - Nastavení disků</a>
  <li><a href="#InstMedia"    >4.5.4 - Výběr instalačního média a setů</a>
  <li><a href="#Inst1stBoot"  >4.5.5 - První boot!</a>
  <li><a href="#InstFinish"   >4.5.6 - Ukončení</a>
  </ul>

  <li><a href="#More"         >4.6 - Detaily komplexnější instalace<a>
  <ul>
  <li><a href="#MoreNetwork"  >4.6.1 - Nastavení sítě</a>
  <li><a href="#MoreTimeZone" >4.6.2 - Nastavení časové zóny</a>
  <li><a href="#Morefdisk"    >4.6.3 - Uživatelské rozložení fdisk(8)</a>
  <li><a href="#Moredisklabel">4.6.4 - Uživatelské rozložení disklabel(8)</a>
  </ul>
  <li><a href= "#FilesNeeded" >4.7 - Které soubory jsou nutné pro instalaci?</a>
  <li><a href= "#Partitioning">4.8 - Jak mám rozdělit disk?</a>
  <li><a href= "#Multibooting">4.9 - Multiboot OpenBSD/i386</a>
  <li><a href= "#SendDmesg"   >4.10 - Zaslání dmesg na dmesg@openbsd.org po instalaci</a>
  <li><a href= "#AddFileSet"  >4.11 - Přidání setu po instalaci</a>
  <li><a href= "#bsd.rd"      >4.12 - Co je to 'bsd.rd'?</a>
  <li><a href= "#InstProb"    >4.13 - Běžné instalační problémy</a>
  <ul>
    <li><a href="#cpq16m"     >4.13.1 - Můj Compaq detekuje jen 16M RAM</a>
    <li><a href="#noboot"     >4.13.2 - Moje i386 nechce po instalaci bootovat<i/a>
    <li><a href="#sshhang"    >4.13.3 - Můj stroj nabootoval, ale visí na ssh-keygen procesu</a>
    <li><a href="#noftplist"  >4.13.4 - Vidím zprávu "Failed to change directory" při instalaci</a>
    <li><a href="#blankfdisk" >4.13.5 - Moje fdisk partition tabulka je poškozená nebo prázdná!</a>
    <li><a href="#noflopcd"   >4.13.6 - Nemám disketovou nebo CD-ROM mechaniku na mém stroji</a>
  <li><a href="#shamismatch">4.13.7 - Při instalaci vidím, že SHA256 
hash nesouhlasí!</a>
  </ul>
<li><a href= "#site"        >4.14 - Přizpůsobení instalačního procesu</a>
<li><a href= "#Multiple"    >4.15 - Jak nainstaluji více podobných
     systémů?</a>
<li><a href="#getdmesg"     >4.16 - Jak získám dmesg(8) pro nahlášení
     instalačního problému?</a>
</ul>
<hr>

<p>
<a name= "Overview"></a>
<h2>4.1 - Přehled instalace OpenBSD</h2>

<p>
OpenBSD bylo dlouho respektováno pro svůj jednoduchý a přímý
instalační proces, který je konzistentní napříč platformami.

<p>
Všechny platformy používají velmi podobnou instalační proceduru, 
ale jsou zde drobné rozdíly v detailech pro některé platformy.
Ve všech případech je nutné číst INSTALL
dokumenty v <i>platform</i> adresáři na CD-ROM nebo FTP serverech
(například, <tt>i386/INSTALL.i386</tt>, <tt>macppc/INSTALL.macppc</tt>
nebo <tt>sparc/INSTALL.sparc</tt>).

<p>
OpenBSD instalátor je <a href="#bsd.rd">speciální</a> jádro
s mnoha utilitami a instalačními skripty zakomponovanými
do RAM disku.
Po té, co je tento kernel nahrán, je operační systém extrahován z
mnoha komprimovaných
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
(<tt>.tgz</tt>) souborů ze zdroje jiného než je tento před-nahraný RAM disk.
Je zde několik způsobů jak nahrát instalační kernel:


<ul>
<li><b>Disketa:</b>
OpenBSD může být nainstalováno na mnoho platforem nabootováním 
instalátoru z jediné diskety.
Bohužel, kvůli omezenému místu některé větší platformy (sparc64,
amd64, alpha) nemají některé utility, které mohou být pro vás 
důležité, jako například DHCP klient pro konfiguraci sítě.
Pro takové platformy je lépe použít CD instalaci.
Ovšem pro platformy jako i386 a sparc sami zjistíte, že médium je
velmi kompletní.

<p>
Disketové obrazy mohou byt použity
pro vytvoření instalační diskety na jiném
<a href="#UnixFlop">Unix-like</a> systému nebo na
<a href="#DosFlop">Windows</a> systému.
Typické jméno souboru jsou <tt>floppy46.fs</tt>, některé platformy
mají dostupných více verzí disketových obrazů.

<li><b>CD-ROM:</b> Na několika platformách je k dispozici CD-ROM obraz
(<tt>cd48.iso</tt> pouze pro boot nebo <tt>install48.iso</tt> pro
celou instalaci) , který umožňuje vytvoření bootovacího CD-ROM.


<li><b>Existující partition:</b> <a href="#bsd.rd">RAM disk</a> kernel
může být spuštěn z existující partition pro upgrade nebo
re-instalaci.

<li><b>Síť:</b> Některé platformy podporují boot po síti
(například pomocí <a href="../faq6.html#PXE">PXE</a> nebo jiným
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">síťovým
bootem</a>).

<li><b>Zapsání souborového systému na disk (miniroot):</b> obraz
souborového systému, který může být zapsán na existující partition a poté z ní
spuštěn.

<li><b>Bootovací páska:</b> Některé platformy podporují boot z pásky.
Tyto pásky mohou být vytvořeny pomocí instrukcí v INSTALL.<i>platforma</i>.


</ul>

Ne všechny <a href="../plat.html">platformy</a> podporují všechny bootovací možnosti:

<ul>
<li><a href="../../alpha.html"><b>alpha:</b></a> Disketa, CD-ROM, síť,
zapsání obrazu diskety na hard disk.

<li><a href="../../amd64.html"><b>amd64:</b></a> Disketa, CD-ROM,
<a href="../faq6.html#PXE">síť</a>.

<li><a href="../../armish.html"><b>armish:</b></a>

Liší se podle typu.

<li><a href="../../hp300.html"><b>hp300:</b></a> CD-ROM, síť.

<li><a href="../../hppa.html"><b>hppa:</b></a> Síť.

<li><a href="../../i386.html"><b>i386:</b></a> Disketa, CD-ROM,
<a href="../faq6.html#PXE">síť</a>.

<li><a href="../../landisk.html"><b>landisk:</b></a> miniroot, instalace
pomocí jiného počítače.

<li><a href="../../macppc.html"><b>macppc:</b></a> CD-ROM, síť.

<li><a href="../../mvme68k.html"><b>mvme68k:</b></a> Síť, bootovací páska.

<li><a href="../../mvme88k.html"><b>mvme88k:</b></a> Síť, bootovací páska.

<li><a href="../../sparc.html"><b>sparc:</b></a> Disketa, CD-ROM, síť,
zapsání obrazu do existující swap partition, bootovací páska.

<li><a href="../../sparc64.html"><b>sparc64:</b></a> Disketa (pouze U1/U2),
CD-ROM, síť, zapsání obrazu do existující partition.


<li><a href="../../vax.html"><b>vax:</b></a> Disketa, síť.

<li><a href="../../zaurus.html"><b>zaurus:</b></a> Nabootujte bsd.rd z Linux partition.  Podívejte se na
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.7/zaurus/INSTALL.zaurus">INSTALL.zaurus</a>
pro detaily.

</ul>

Všechny platformy také mohou použít
<a href="#bsd.rd">bsd.rd</a> pro reinstalaci nebo upgrade.

<p>
Jakmile instalační kernel naběhne, tak máte několik možností odkud získat
 <a href="#FilesNeeded">instalační distribuční sety</a>.
Opět, ne každá platforma podporuje každou možnost.


<ul>
<li><b>CD-ROM:</b> Samozřejmě,že preferujeme použití
<a href="../../orders.html">Oficiálního CD-ROM setu</a>, ale také můžete použít
<tt>install48.iso</tt> nebo si vytvořit své vlastní.

<li><b>FTP:</b>
Některý z OpenBSD
<a href="../../cs/ftp.html">FTP mirrorů</a>
nebo Váš vlastní lokální FTP server obsahující distribuční sety.

<li><b>HTTP:</b>

Některý z OpenBSD
<a href="../../cs/ftp.html#http">HTTP mirrorů</a>
nebo Váš vlastní lokální web server obsahující distribuční sety.

<li><b>Lokální disk partition:</b>
V mnoha případech můžete instalovat distribuční sety z jiné partition
na lokálním  hard disku.
Například, na <a href="../../i386.html">i386</a>,
můžete instalovat z FAT partition nebo CD-ROM formátovaném v
ISO9660, Rock Ridge nebo Joliet formátu.
V některých případech budete muset manuálně připojit souborový systém před jeho použitím.

<li><b>NFS:</b>
Některé platformy podporují NFS připojení pro distribuční sety.

<li><b>Páska:</b>
Distribuční sety mohou být také načteny z podporované pásky.
Detaily o vytváření pásky jsou v <tt>INSTALL.</tt><i>platforma</i>

dokumentu.
</ul>

<a name="Checklist"></a>
<h2>4.2 - Kontrola před instalací</h2>

<p>
Předtím než začnete s instalací, tak by jste měli mít nějakou
představu co je Vašim cílem.

Minimálně by jste měli vědět následující věci:
<ul>
<li>Platforma počítače
<li>Nainstalovaný a dostupný hardware
  <ul>
  <li>Ověřte si kompatibilitu Vašeho hardware na
      stránce kompatibility
  <li>Pokud používáte ISA, tak také potřebujete znát hardware nastavení a ověřit,
      že jsou taková jaké OpenBSD vyžaduje.
  </ul>

<li>Jaká instalační metoda se použije (CD-ROM, FTP, atd.)
<li>Pokud se objeví závažný bug, jak bude systém aktualizován?
  <ul>
  <li>Pokud lokálně, tak budete potřebovat na disku
      <a href="#Partitioning">dostatek místa</a> pro
      zdrojové kódy a jejich kompilaci.
  <li>Jinak budete potřebovat přístup k dalšímu počítači,kde vytvoříte
      aktualizované
      <a href="../faq5.html#Release">release</a>.
  </ul>
<li>Požadované rozložení disku
  <ul>
  <li>Musí být současná data někde uložena?
  <li>Bude OpenBSD koexistovat na tomto počítači s jiným OS?
      Pokud ano, jak budou oba spouštěny?
      Budete potřebovat nainstalovat "boot manager"?
  <li>Bude použit celý disk pro OpenBSD nebo chcete
      zachovat existující partition/OS (nebo místo pro nějáký budoucí)?
  <li>Jak chcete provést sub-partition rozdělení OpenBSD části Vašeho
      disku?
  </ul>

<li>Síťové nastavení, pokud se nepoužívá DHCP:
  <ul>
  <li>Doménové jméno
  <li>Domain Name Server(y) (DNS) adresa
  <li>IP adresa a subnet maska pro každou síťovou kartu
  <li>Gateway adresa
  </ul>
<li>Budete používat X Window systém?
</ul>


<a name="MkInsMedia"></a>
<h2>4.3 - Vytváření bootovacích OpenBSD instalačních médií</h2>

<p>

V příkladech se podíváme na instalační obrazy dostupné pro
<a href="../../i386.html">i386</a>
a <a href="../../sparc.html">sparc</a> platformy.

<p>
<a href="../../i386.html">i386</a> platforma má šest samostatných
instalačních obrazů disků ze kterých lze vybírat:

<ul>
<li><b><tt>cd48.iso</tt></b> je ISO9660 obraz, který může být 
použit k vytvoření bootovacího CD s většinou populárních CD-ROM vypalovacích programů na většině platforem. Tento obraz má nejširší výběr ovladačů a je obvykle doporučenou volbou pokud Váš hardware umí bootovat z CDROM.
<li><b><tt>cdemu48.iso</tt></b> je ISO9660 obraz používající
  "disketovou emulaci" bootování za pomoci 2.88M disketového obrazu.
  Doufá se, že málo lidí bude potřebovat tento
  obraz -- většina lidí použije <tt>cd48.iso</tt>, použijte
  <tt>cdemu48.iso</tt> jen když <tt>cd48.iso</tt> pro vás nefunguje.
<li><b><tt>install48.iso</tt></b> je ISO9660 obraz obsahující
  všechny standardní distribuční sety. Tento soubor může 
  být použit k vytvoření CD, které je schopné stand-alone
  OpenBSD instalace.
<li><b><tt>floppy48.fs</tt></b> (Desktop PC) podporuje mnoho
  PCI a ISA NICs, IDE a jednoduché SCSI adaptéry a některé
  PCMCIA. Většina uživatelů použije tento obraz pokud bootuje z
  diskety
<li><b><tt>floppyB48.fs</tt></b> (Servery) podporuje mnoho 
  RAID řadičů, a některé méně běžné SCSI adaptéry.
  Bohužel podpora pro mnoho standardních SCSI adapterů a mnoho
  EISA a ISA NICs byla odstraněna.
<li><b><tt>floppyC48.fs</tt></b> (Laptopy) podporuje CardBus a
  PCMCIA zařízení nacházející se v mnoha laptopech.
</ul>

<p>
<a href="../../sparc.html">sparc</a> platforma ma čtyři samostatné
instalační disk obrazy k výběru:

<ul>
<li><b><tt>floppy48.fs:</tt></b> Podporuje systémy s disketou.
<li><b><tt>cd48.iso</tt></b> ISO obraz použitelný k vytvoření vlastního CD pro boot SPARC systému s CD-ROM.
<li><b><tt>miniroot48.fs</tt></b> Může být zapsán do swap partition
  a z ní nabootován.
<li><b><tt>install48.iso</tt></b> je ISO9660 obraz obsahující
  všechny standardní distribuční sety. Tento soubor může být 
  použit k vytvoření CD, které je schopné stand-alone OpenBSD
  instalace.
</ul>

Na moderních platformách je nejlepší použít CDROM
bootovací obrazy. V některých "větších" platformách (jako 
např. amd64, sparc64), disketové obrazy mají mnoho ovladačů a
utilit odstraněno což může instalaci ztížit.
Starší platformy jako i386 a sparc jsou stále vcelku dobře
instalovatelné z diskety.

<a name="MkCD-ROM"></a>
<h3>4.3.1 - Vytvoření CD-ROM</h3>

<p>
Můžete vytvořit CD-ROM za pomoci <tt>cd48.iso</tt> nebo
<tt>install48.iso</tt> souborů.
Přesné detaily jsou zde ponechány na čtenáři ke zjištění jim
dostupných nástrojů.

<p>
V OpenBSD můžete vytvořit CD z ISO obrazu pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&amp;sektion=1">cdio(1)</a>:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>cdio tao cd48.iso</b>
</pre></td></tr></table>

<p>
Většina CD nahrávačů prodaných pro Windows a Macintosh systémy
má přibalen software, který umí vypalovat ISO obrazy na prázdná
média. Pokud vaše nemá, tak můžete využít jednu z mnoha bezplatných
aplikací, které toto pro vás mohou udělat také.

<p>
Jiné Unix-like systémy používají aplikace jako
<a href="http://www.cdrkit.org/">cdrkit</a>.


<a name="MkFlop"></a>
<a name="UnixFlop"></a>
<h3>4.3.2 - Vytváření disket na Unixu</h3>

<p>
Přesné detaily a jména zařízení se mohou mezi Unix variantami
lišit; použijte co platí pro váš systém.

<p>
Pro vytvoření formátované diskety použijte
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdformat&amp;sektion=1&amp;arch=i386">fdformat(1)</a>

příkaz, který formátuje a zároveň kontroluje vadné bloky.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>fdformat /dev/rfd0c</b>
  Format 1440K floppy `/dev/rfd0c'? (y/n): y
  Processing VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV done.
</pre></td></tr></table>

<p>
Pokud je Váš výstup podobný jako v příkladu výše, tak je disk OK.
Ale pokud nevidíte VŠECHNY "V" znaky, tak je disk pravděpodobně
vadný a měli by jste zkusit jiný.

<p>
K zapsání obrazu na disk použijte
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=0">dd(1)</a>.
Příklad použití <tt>dd(1)</tt> je níže:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>dd if=floppy48.fs of=/dev/rfd0c bs=32k</b>
</pre></td></tr></table>

<p>
Jakmile je obraz zapsán, tak ověřte, že nakopírovaný obraz je
stejný jako originální pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cmp&amp;sektion=1">cmp(1)</a>

příkazu.
Pokud je disketa stejná jako obraz, tak prostě uvidíte jen další prompt.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  # <b>cmp /dev/rfd0c floppy48.fs</b>
</pre></td></tr></table>

<a name="DosFlop"></a>
<h3>4.3.3 - Vytváření disket na Windows</h3>

<p>
K přípravě diskety na Windows použijte napřed nativní
formátovací nástoje k formátování disku a ověřte, že disk nemá
vadné sektory.

<p>
K zapsání instalačního obrazu na připravenou disketu můžete
použít
<tt>ntrw.exe</tt>, které může být staženo z
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.7/tools/">tools</a>
adresáře na jakémkoliv FTP mirroru.


<p>
Příklad použití <i>ntrw</i>:
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  C:\> <strong>ntrw floppy48.fs a:</strong>
  3.5", 1.44MB, 512 bytes/sector
  bufsize is 9216
  1474560 bytes written
</pre></td></tr></table>

<a name="Boot"></a>
<h2>4.4 - Spuštění instalačního OpenBSD média</h2>

<h3>Bootování i386/amd64</h3>

Bootování instalačního média na i386 a amd64 PC platformách není nic nového pro většinu lidí. 
Váš systém musí být nastaven aby mohl nabootovat z média které si
vyberete, obvykle pomoci nastavení v BIOS.
Pokud chcete bootvat z CD, tak to váš BIOS musí umět a musí tak
být nastaven. Některé starší systémy nemají tuto volbu a musíte
použít disketu pro nabootování instalačního obrazu. Ale nebojte se; i když nabootujete z diskety, tak stále můžete instalovat z CD 
pokud je to podporováno OpenBSD (např. většina IDE zařízení).

<p>
Můžete také instalovat nabootováním <a href="#bsd.rd">bsd.rd</a> z
existující OpenBSD partition nebo přes síť použitím

<a href="../faq6.html#PXE">PXE boot procesu</a>.

<h3>Bootování sparc/sparc64</h3>

<b>POZNÁMKA:</b>
Na <a href="../../sparc64.html">sparc64</a> platformě, pouze SBus
typy (Ultra 1, Ultra 2) jsou bootovatelné z diskety.

<p>
Potřebujete aby systém byl v monitor ROM promptu, který obvykle
vypadá jako "<tt>ok </tt>".
Pokud používáte Sun klávesnici, stiskněte a držte "STOP" a
klepněte na "A".
Pokud používáte serial konzoli, tak BREAK by vás měl vrátit do
monitor promptu.

<p>
Použijte následující příkaz pro nabootování z diskety
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot floppy</b>
</pre></td></tr></table>

<p>
Obvykle můžete nabootovat z CDROM na Sun systému z
boot promptu pomocí '<tt>boot cdrom</tt>':

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ok <b>boot cdrom</b>
</pre></td></tr></table>

<a name="Install"></a>
<h2>4.5 - Vykonání jednoduché instalace</h2>

Nový OpenBSD instalátor je navržen k instalaci a konfiguraci
 OpenBSD ve velmi snadno použitelné defaultní konfiguraci s 
minimem nutných uživatelských zásahů.
Ve skutečnosti stačí většinou zmáčknout <i>ENTER</i> několikrát
po sobě k získání dobré OpenBSD instalace a přesunout vaše ruce
ke zbytku klávesnice jen při zadávání root hesla.

<p>

Instalátor vytvoří rozdělení disku podle velikosti vašeho disku.
I když to NEBUDE perfektní rozdělení pro VŠECHNY lidi, tak to
nabízí dobrý počáteční bod a náhled na celkovou strategii toho co
potřebujete.

<p>
Začneme s velmi jednoduchou instalací s lehkou diskuzí o nabízených
možnostech a použijeme kouzla hypertextových odkazů, které
vám umožní si přečíst více o tématu, které vás zajímá a pro 
prozkoumání vašich možností.

<p>
Instalační poznámky pro každou platformu jsou na instalačních CD
a FTP serverech v souboru <tt>INSTALL.<i>&lt;plat&gt;</i></tt>, kde
<i>&lt;plat&gt;</i> je vaše <a href="../../cs/plat.html">platforma</a>, např. <tt>i386</tt>.

<a name="InstStart"></a>
<h3>4.5.1 - Spuštění instalace</h3>
<!-- XXXrelease -->
Cokoliv si myslíte o bootování, tak nyní je čas jej použít.  Během 
bootovacího procesu kernel a všechny programy použité k instalaci
OpenBSD jsou nahrány do paměti. Jakmile je instalační jádro
nabootováno, tak bootovací médium již není nadále potřebné, protože
všechno běží z RAM disku. V tomto bodě Můžete vaše CD nebo 
disketu vytáhnout pokud nepotřebujete CD pro instalační soubory.

<p>
Skoro ve všech bodech OpenBSD instalace můžete přerušit
instalaci pomocí CTRL-C a můžete ji restartovat
bez rebootu pomocí příkazu <tt>install</tt> v příkazovém řádku.
Také můžete zadat "!" na většině míst v instalaci k získání
příkazového řádku (shell), poté ukončete shell k návratu do
 instalátoru.

<p>

Pokud je Váš boot úspěšný, tak můžete vidět hodně textových zpráv, 
které rolují směrem dolů.
Tento text, na mnoha architekturách bílá na modré, je
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg</a>,
jádro říkající vám, které zařízení našlo a jak jsou spojeny s 
ostatními zařízeními.
Kopie tohoto textu je uložena jako <tt>/var/run/dmesg.boot</tt>.

<p>
Poté můžete vidět následující:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  ...	
  root on rd0a swap on rd0b dump on rd0b
  erase ^?, werase ^W, kill ^U, intr ^C, status ^T
  
  Welcome to the OpenBSD/i386 4.8 installation program.
  (I)nstall, (U)pgrade or (S)hell? <b>i</b>
</pre></td></tr></table>

<p>
A tím jsme dosáhli naší první otázky.  Ukazují se vám
tři možnosti:

<ul>
<li><b>Install:</b> nahrání OpenBSD na systém, přepíše
cokoliv co zde bylo.  Nezapomeňte, že je možné některé
partition nechat v tomto procesu nedotčené jako např. 
<tt>/home</tt>, ale jinak předpokládejte, že všechno bude přepsáno.
<li><b>Upgrade:</b> Instaluje novou sadu <a href="#FilesNeeded">instalačních
souborů</a> na tento počítač, ale nepřepisuje žádné konfigurační
informace, uživatelská data nebo dodatečné programy. Neprovádí se žádné
formátování disku a také žádný přepis <tt>/etc</tt> nebo <tt>/var</tt> 

adresářů.
Několik důležitých poznámek:
<ul>
<li> Nebudete mít možnost instalovat
<tt>etc48.tgz</tt> soubor.
Po instalaci by jste měli 
<a href="../upgrade48.html#etcUpdates">manuálně sloučit</a> změny
<tt>etc48.tgz</tt> do Vašeho systému předtím než jej můžete očekávat 
plně funkční.
Toto je důležitý krok, který musí být udělán, protože jinak několik
 klíčových služeb (jako např.
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">pf(4)</a>)
nemusí fungovat.

<li>Upgrade proces není navržen k přeskakování verzí!
I když to bude většinou fungovat, tak to není podporováno.
Pro OpenBSD 4.8, upgrade 4.7 na 4.8 je jediný podporovaný upgrade.
Pokud chcete udělat upgrade ze starší verze, tak napřed udělejte upgrade na
mezilehlé verze.Pokud je verze velmi stará, tak raději použijte kompletní 
reinstalaci.

</ul>

<!-- XXXversion -->
Více informací o upgradech mezi verzemi naleznete v
<a href="../upgrade48.html">OpenBSD Upgrade Guide 4.8</a>.

<li><b>Shell:</b> Občas potřebujete udělat nějakou opravu nebo údržbu
na systému, který nemůže (nebo by neměl) nabootovat do normálního jádra. Tato volba Vám umožní provést údržbu systému.
Mnoho důležitých utilit je k dispozici na bootovacím médiu.
</ul>

Přepokládáme, že zde vybíráte volbu "(I)nstall".

<a name="InstQuestions"></a>
<h3>4.5.2 - Instalační otázky</h3>
 
Nyní začínáme dostávat otázky, které nám umožní nastavit náš systém.
Ve většině případů si všimnete, že napřed je otázka a pak instalátor
zpracuje vaši odpověď.
Pokud máte pomalý počítač nebo pomalé Internetové připojení, můžete
odpovědět na tyto otázky, jít pryč, přijít později zpátky a pouze
rebootovat systém k dokončení instalace.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>

  At any prompt except password prompts you can escape to a shell by
  typing '!'. Default answers are shown in []'s and are selected by
  pressing RETURN.  You can exit this program at any time by pressing
  Control-C, but this can leave your system in an inconsistent state.

  Choose your keyboard layout ('?' or 'L' for list) [default] 
<b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Ve většině případů je defaultní rozložené klávesnice (nebo typ terminálu
pokud se instaluje přes sériovou konzoli) dostačující, ale nemusí tomu
tak být vždy. Odpovězte tak jak vám vyhovuje.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  System hostname? (short form, e.g. 'foo') <i><b>puffy</b></i>
</pre></td></tr></table>

<p>
Tato hodnota společně s DNS jménem (specifikovaným
<a href="#MoreNetwork">níže/a>) bude uložena v souboru
 <tt>/etc/myname</tt>, který je použít během normálního bootu k
nastavení hostname systému.
Pokud nenastavíte doménové jméno systému, tak se defaultně použije
'my.domain' .

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
   Available network interfaces are: fxp0 vlan0.
   Which one do you wish to configure? (or 'done') [fxp0]     
   <i><b>Enter</b></i>
</pre></td></tr></table>

<p>
<tt>vlan0</tt> je VLAN virtuální rozhraní.
Zde pro naše účely budeme tuto volbu ignorovat a zůstaneme u
fyzických rozhraní.
Pokud máte několik fyzických rozhraní, tak zde budou vypsány.
Všimněte si, že jsou identifikovány názvem ovladače a ne jen
generická Ethernet zařízení.
V tomto případě, "<tt>fxp0</tt>" ukazuje na první zařízení užívající
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fxp&amp;sektion=4">fxp(4)</a>
ovladač, <tt>fxp1</tt> by bylo druhé zařízení, atd.
Více o pojmenování zařízení je v  <a href="../faq6.html#Setup.if">FAQ 6</a>.

<p>
Po vybrání zařízení, které chcete konfigurovat jej budete nyní
konfigurovat. Ve většině případů jej budete chtít konfigurovat
 pomocí DHCP:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  IPv4 address for fxp0? (or 'dhcp' or 'none') [dhcp] <b><i>Enter</i></b>
  Issuing hostname-associated DHCP request for fxp0.
  DHCPDISCOVER on fxp0 to 255.255.255.255 port 67 interval 1
  DHCPOFFER from 192.168.1.250 (08:00:20:94:0b:c8)
  DHCPREQUEST on fxp0 to 255.255.255.255 port 67
  DHCPACK from 192.168.1.250 (08:00:20:94:0b:c8)
  bound to 192.168.1.199 -- renewal in 43200 seconds.
</pre></td></tr></table>

<p>
DHCP nakonfiguruje IP adresu, masku subnetu, defaultní gateway,
DNS doménové jméno a DNS servery.
Pokud nepoužíváte DHCP, tak budete muset všechny tyto volby
specifikovat ručně ; podívejte se na detailnější diskuzi
<a href="#MoreNetwork">níže</a>.
<a name="backMoreNetwork"></a>

<p>
Pokud máte nějakou IPv6 konfiguraci k nastavení nebo zde jsou
jiné rozhraní ke konfiguraci (nebo se vám nelibi konfigurace
předchozího), tak to můžete udělat nyní, ale v našem případě
jsme hotovi:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  IPv6 address for fxp0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
  Available network interfaces are: fxp0 vlan0.
  Which one do you wish to configure? (or 'done') [done] <b><i>Enter</i></b>
  Using DNS domainname in.nickh.org
  Using DNS nameservers at 192.168.1.252
  Do you want to do any manual network configuration? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Pokud odpovíte "yes" na "manual network configuration" otázku, tak
budete přepnuti do shellu, kde můžete konfigurovat cokoliv dalšího
co potřebuje konfiguraci, poté napište "exit" pro návrat zpět
k instalačnímu programu.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Password for root account? (will not echo) <i>PaSsWoRd</i>
  Password for root account? (again) <i>PaSsWoRd</i>
</pre></td></tr></table>


<p>
Použijte bezpečné heslo pro root účet, nezapomeňte: na Internetu,
oni JSOU tam aby se dostali do vašeho počítače, budou zkoušet mnoho
běžných hesel o kterých si lidé myslí, že jsou bezpečná.

<p>
Později budete mít šanci vytvořit administrační účet a vypnout
vzdálený (SSH) přístup na root účet, ale stále potřebujete
dobré heslo pro váš root účet.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Start sshd(8) by default? [yes] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Obvykle chcete aby sshd(8) běželo.
Pokud vaše nasazení nepotřebuje sshd(8), tak je zde malá
a teoretická bezpečnostní výhoda, když vůbec neběží.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Start ntpd(8) by default? [no] <b>y</b>
  NTP server? (hostname or 'default') [default] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Nyní můžete vybrat jestli chcete aby běžel
<a href="../faq6.html#OpenNTPD">OpenNTPD</a>, OpenBSD NTP implementace.
OpenNTPD je způsob jak udržet vaše počítačové hodiny synchronizované
s malým dopadem na celý systém. Defaultní konfigurace je
<a href="http://www.pool.ntp.org">pool.ntp.org</a>, která používá
mnoho volně přístupných time serverů na celém světě.

<p>
Jeden důvod proč by jste NECHTĚLI používat ntpd(8) je pokud
používáte <a href="#Multibooting">dual-boot</a>. 
Většinou s jiným OS, který nepoužívá GMT
pro nastavení hardware hodin, protože nechcete aby OpenBSD měnilo
čas pro jiný OS.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you expect to run the X Window System? [yes] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Ne všechny platformy se vás zeptají jestli očekáváte používání X, 
ty které ano, tak používají nastavení sysctl pro využití X.
Odpovědí "y" zde se modifikuje <tt>/etc/sysctl.conf</tt> aby
obsahoval řádek <tt>machdep.allowaperture=1</tt> nebo
<tt>machdep.allowaperture=2</tt>, což záleží na vaší platformě.

<p>
Pokud neplánujete používání X na tomto systému nebo si nejste
jistí, tak zde odpovězte 'N', protože toto může být snadno změněno
úpravou <tt>/etc/sysctl.conf</tt> a rebootem pokud se tak rozhodnete
později. Je zde potencionální bezpečnostní výhoda, když se tento
aperture ovladač
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>
ponechá vypnutý, protože grafický systém na moderních video
kartách může být potencionálně využit k pozměnění paměti, která
je mimo kontrolu procesoru. Uvědomte si, že ne-grafické aplikace, 
které potřebují X knihovny a utility ke své funkci NEPOTŘEBUJÍ mít
toto sysctl nastavené.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you want the X Window System to be started by xdm(1)? [no] <b>y</b>
</pre></td></tr></table>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1">xdm(1)</a>
spouští X prostředí při bootu.
Doporučujeme tohle udělat při instalaci jen pokud jste si jistí,
že váš X systém bude fungovat automaticky.
V ostatních případech <a href="../faq11.html">nastavte X</a> před
nastavením xdm(1).

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Change the default console to com0? [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Pokud si přejete nastavit serial konzoli místo vašeho default
systémového nastavení (obvykle klávesnice a monitor), tak toto
 je vaše šance.
Pokud změníte default na "y", tak budete dotázáni na nastavení
bit-rate. Uvědomte si, že pro serial konzole, rychlejší není 
vždy lepší, převzetí default nastavení pro vaši platformu je
velmi doporučováno.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
    Setup a user? (enter a lower-case loginname, or 'no') [no] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Dostali jste šanci nastavit uživatele JINÉHO než root pro
správu systému.
Tento uživatel bude člen "wheel" skupiny, takže můžete používat
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&amp;sektion=1">su(1)</a>
a budete dotázáni na heslo roota.

<p>
Uvědomte si, že pokud chcete vytvořit uživatele, tak musíte zadat
uživatelské jméno a ne "y" nebo "yes".

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  What timezone are you in? ('?' for list) [Canada/Mountain] <b>US/Michigan</b>
</pre></td></tr></table>

<p>
OpenBSD předpokládá, že vaše hodiny real-time clock (RTC) jsou
nastaveny na GMT. Také musíte specifikovat vaši časovou zónu ve
které se nacházíte.
Pro vaši fyzickou lokaci může být několik správných odpovědí.
Zadáním "?" v promptu se vám zobrazí nápověda pro nalezení správné
zóny.

<p>
Uvědomte si, že instalátor většinou správně uhodne vaši časovou
zónu a poté stačí jen stisknout "Enter".

<p>
Více o nastavení časové zóny <a href="#MoreTimeZone">zde</a>.
<a name="backMoreTimeZone"></a>

<a name="InstDisks"></a>
<h3>4.5.3 - Nastavení disků</h3>

<i><b>Důležitá poznámka:</b>
Uživatelé s velkým diskem (větší než byl obvykle dostupný v době
kdy byl jejich počítač vyroben) by se měli podívat na
<a href="../faq14.html#LargeDrive">tuto sekci</a> před pokračováním
dále.</i>

<p>
Správné rozvržení vašeho disku je asi nejtěžší část OpenBSD
instalace.

<p>
Nastavení disků v OpenBSD se trochu mezi platformami liší.
Pro <a href="../../i386.html">i386</a>, <a href="../../amd64.html">amd64</a>,
<a href="../../macppc.html">macppc</a>, <a href="../../zaurus.html">zaurus</a>
a <a href="../../armish.html">armish</a>,
je nastavení disků rozděleno do dvou částí.
Napřed se nastaví OpenBSD slice pomocí fdisk(8) a poté se tato
slice rozdělí do OpenBSD partitions pomocí disklabel(8).

<p>
Někteří uživatelé mohou být trochu zmateni zde použitou terminologií. Vypadá to ,že používáme slovo "partition" dvěma různými způsoby. Toto zjištění je správné. Ve výše vypsaných OpenBSD platformách jsou dvě vrstvy rozdělení disku, první můžete považovat za Operating System partitioning což je způsob jak OS na jednom PC označují své vlastní místo na disku a druhý, což je rozdělení OpenBSD partition na jednotlivé file systémy. První vrstva je viditelná jako disk partition pro DOS, Windows a jiné OS, které používají stejné rozložení disku, druhá vrstva rozdělení je viditelná pouze pro OpenBSD a OS, které mohou přímo číst OpenBSD file systém.

<p>
Nový instalátor OpenBSD se snaží úlohu rozdělení vašeho disku udělat
snažší za pomoci rozumných defaultních nastavení pro "běžné" použití.
Uvědomte si, že mnoho lidí bude stále chtít toto upravit nebo
použít jejich vlastní rozdělení disku, ale noví uživatelé 
pravděpodobně začnou s touto konfigurací dokud nezjistí, že to 
potřebují udělat jinak. Nezapomeňte, že defaultní rozložení se liší
podle toho jak velký je váš disk.

<p>
Pro teď využijeme default nastavení na našem 40G disku.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available disks are: wd0.
  Which one is the root disk? (or 'done') [wd0]
  Disk: wd0       geometry: 4863/255/63 [78125000 Sectors]

  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 06      0   1   1 -    521 254  63 [          63:     8385867 ] DOS > 32MB
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Use (W)hole disk or (E)dit the MBR? [whole] <i><b>Enter</b></i>
  Setting OpenBSD MBR partition to whole wd0...done.
</pre></td></tr></table>
Všimněte si, že tento disk již obsahuje nějakou partition 
-- <i>použitím "whole" se odstraní!</i>.

<p>
Použití volby "whole" pro OpenBSD nastaví několik důležitých věcí:
<ul>
<li>vymaže jakékoliv existující partitions na disku
<li>vytvoří MBR a podpis disku takže je bootovací
<li>Vytvoří OpenBSD partition(slice) zabírající celý disk
<li>Nastaví partition jako "active".
</ul>

Velmi často ale tohle nechcete udělat, protože:
<ul>
<li>Chcete zachovat partitions jiných OS
<li>Chcete zachovat "setup", "suspend to disk" nebo jiné systémové
partitions
<li>Chcete nastavit <a href="#Multibooting">multi-booting</a>
systém
</ul>

Nezapomeňte, že je kriticky důležité aby nový (nebo nikdy pro
bootování použitý) disk měl platný MBR, platnou signature, 
OpenBSD partition a partition označenou jako "active".
Pokud tyto volby nenastavíte pomocí "Use whole disk" volby, tak
se musíte ručně ujistit, že jsou nastaveny.

<p>
Více informací o fdisk rozdělení vašeho disku
<a href="#Morefdisk">níže</a>.
<a name="BackMorefdisk"></a>

<p>
Nyní rozdělíme naší OpenBSD fdisk partition do OpenBSD
disk partitions pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Setting OpenBSD MBR partition to whole wd0...done.
  The auto-allocated layout for wd0 is:
  #                size           offset  fstype [fsize bsize  cpg]
    a:          1024.0M               63  4.2BSD   2048 16384    1 # /
    b:           507.1M          2097215    swap                   
    c:         38147.0M                0  unused                   
    d:          2620.4M          3135791  4.2BSD   2048 16384    1 # /tmp
    e:          4143.1M          8502287  4.2BSD   2048 16384    1 # /var
    f:          2048.0M         16987323  4.2BSD   2048 16384    1 # /usr    
    g:          1024.0M         21181627  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          3610.7M         23278779  4.2BSD   2048 16384    1 # /usr/local
    i:          1961.6M         30673543  4.2BSD   2048 16384    1 # /usr/src
    j:          1961.6M         34690971  4.2BSD   2048 16384    1 # /usr/obj    
    k:         19245.9M         38708399  4.2BSD   2048 16384    1 # /home
  Use (A)uto layout, (E)dit auto layout, or create (C)ustom layout? [a] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Instalátor nám ukazál jím navržené "Auto layout" pro
OpenBSD partitions na našem disku, které budeme akceptovat.

<p>
Pokud vám navržené rozložení nevyhovuje, tak jej můžete samozřejmě
editovat nebo kompletně změnit, více detailů o
disklabel partitioning <a href="#Moredisklabel">níže</a>.
<a name="BackMoredisklabel"></a>

<p>
<b>POZNÁMKA: pro ty co re-instalují</b>
Nový instalátor  nezruší váš starý disklabel pokud vyberete
"(C)ustom Layout", ale budete muset znovu specifikovat každý 
 přípojný bod pomocí 'm' volby v disklabel(8).

<p>
Instalátor nyní vytvoří tyto partitions a vytvoří na nich file
systémy pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8">newfs(8)</a>,
a připojí je pro instalaci:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  /dev/rwd0a: 1024.0MB in 2097152 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0k: 19245.9MB in 39415696 sectors of 512 bytes
  96 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0d: 2620.4MB in 5366496 sectors of 512 bytes
  13 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0f: 2048.0MB in 4194304 sectors of 512 bytes
  11 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0g: 1024.0MB in 2097152 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0h: 3610.7MB in 7394764 sectors of 512 bytes
  18 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0j: 1961.6MB in 4017428 sectors of 512 bytes
  10 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0i: 1961.6MB in 4017428 sectors of 512 bytes
  10 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0e: 4143.1MB in 8485036 sectors of 512 bytes
  21 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local)
  /dev/wd0k on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0d on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0f on /mnt/usr type ffs (rw, asynchronous, local, nodev)
  /dev/wd0g on /mnt/usr/X11R6 type ffs (rw, asynchronous, local, nodev)
  /dev/wd0h on /mnt/usr/local type ffs (rw, asynchronous, local, nodev)
  /dev/wd0j on /mnt/usr/obj type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0i on /mnt/usr/src type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0e on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid)
</pre></td></tr></table>

<p>

Všimněte si, že je zde <i>c</i> partition, kterou jsme ignorovali. 
 Toto je partition, která reprezentuje celý disk; nepokoušejte se
 ji měnit.

<a name="InstMedia"></a>
<h3>4.5.4 - Výběr instalačního média a souborových setů</h3>

V dalším kroku dostanete možnost vybrat vaše instalační médium.
V tomto případě budeme instalovat z FTP serveru.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Location of sets? (cd disk ftp http or 'done') [cd] <b>ftp</b>
  HTTP/FTP proxy URL? (e.g. 'http://proxy:8080', or 'none') [none] <b><i>Enter</i></b>
  Server? (hostname, list#, 'done' or '?') [mirror.example.org] <b>obsd.cec.mtu.edu</b>
</pre></td></tr></table>
Pokud si nemůžete zapamatovat váš oblíbený (nebo jakýkoliv!) 
 mirror, tak instalátor často nabídne defaultní, který pro vás 
bude dobře fungovat.
Jinak stiskněte "?" pro zobrazení mirrorů a vyberte číslo mirroru, 
který vám vyhovuje.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Server directory? [pub/OpenBSD/4.8/i386] <b><i>Enter</i></b>
  Login? [anonymous] <b><i>Enter</i></b>
</pre></td></tr></table>

Veřejné FTP mirrory podporují anonymní stahování, samozřejmě, ale
můžete mít lokální server, který vyžaduje login a heslo.

<p>
Nyní můžete upravit výběr <a href="#FilesNeeded">setů</a>.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
    Select sets by entering a set name, a file name pattern or 'all'. De-select
  sets by prepending a '-' to the set name, file name pattern or 'all'. Selected
  sets are labelled '[X]'.
      [X] bsd           [X] etc48.tgz     [X] game48.tgz    [X] xfont48.tgz
      [X] bsd.rd        [X] misc48.tgz    [X] xbase48.tgz   [X] xserv48.tgz
      [ ] bsd.mp        [X] comp48.tgz    [X] xetc48.tgz
      [X] base48.tgz    [X] man48.tgz     [X] xshare48.tgz
  Set name(s)? (or 'abort' or 'done') [done] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Minimálně potřebujete jádro (<tt>bsd</tt>),
base48.tgz a etc48.tgz sety.
Dokud nevíte co děláte, tak ponechte defaultní výběr setů.
Můžete přidat a odebrat set pomocí "+" a "-" znaků před
jménem setu a také použít wildcards:
<ul>
<li><tt><b>-comp48.tgz</b></tt> odstraní <tt>comp48.tgz</tt>
<li><tt><b>+bsd.mp</b></tt> přidá bsd.mp
<li><tt><b>-x*</b></tt> odstraní všechny X součásti
</ul>

Ale opět použijeme default.
Tento stroj má jeden procesor, takže bsd.mp se neinstaluje, ale
všechno ostatní ano.
Pokud bude později vyměněn procesor za SMP, tak budete chtít
bsd.mp instalovat taky.

<p>
A nyní začneme naši instalaci!
Tohle je část kde se můžete rozhodnout přijít později pokud máte
pomalý počítač nebo Internetové připojení, ale s rychlým počítačem 
a lokálními soubory může tento proces trvat jen pár minut nebo i 
 méně!

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  bsd          100% |*************************************|  8647 KB    00:04
  bsd.rd       100% |*************************************|  6179 KB    00:03
  base48.tgz   100% |*************************************| 51606 KB    01:46
  etc48.tgz    100% |*************************************|   507 KB    00:01
  misc48.tgz   100% |*************************************|   356 KB    00:06
  comp48.tgz   100% |*************************************| 55031 KB    03:08
  man48.tgz    100% |*************************************|  9013 KB    00:21
  game48.tgz   100% |*************************************|  2568 KB    00:04
  xbase48.tgz  100% |*************************************| 11516 KB    00:21
  xetc48.tgz   100% |*************************************| 71379       00:00
  xshare48.tgz 100% |*************************************|  3243 KB    00:12
  xfont48.tgz  100% |*************************************| 38485 KB    00:57
  xserv48.tgz  100% |*************************************| 20629 KB    00:39
  Location of sets? (cd disk ftp http or 'done') [done] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Ano, znova se nás to ptá odkud chceme instalovat.
Na tohle se tak často zapomíná, zapomenuté nebo poškozené sety
mohou být re-instalovány a také <a href="#site">uživatelské sety</a> mohou být nainstalovány.

<p>
Opět použijeme default a jsme hotovi s instalací setů.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Saving configuration files...done.
  Generating initial host.random file...done.
  Making all device nodes...done.

  CONGRATULATIONS! Your OpenBSD install has been successfully completed!
  To boot the new system, enter 'reboot' at the command prompt.
  When you login to your new system the first time, please read your mail
  using the 'mail' command.
 
  #
</pre></td></tr></table>

<a name="Inst1stBoot"></a>
<h3>4.5.5 - První boot!</h3>
OpenBSD je nyní nainstalováné na vašem systému a připravené pro svůj 
první boot, ale než se tak stane...

<p>
<h4>Než provedete reboot</h4>
V tomto místě je váš systém nainstalován a připraven na reboot a
nakonfigurován pro použití.  Než to uděláte, tak by bylo dobré se 
podívat na <a href="../../errata.html">Errata stránku</a> jestli 
 jsou tady nějáké chyby, které by se vás mohly okamžitě týkat.

<p>
Trik, který můžete použít "před prvním bootem" pro konfiguraci je 
 provést:
<pre>
    # <b>/mnt/usr/sbin/chroot /mnt</b>
</pre>
v příkazovém řádku.
Toto nastaví vaše přípojné body tak jako budou na normálním systému 
po rebootu vašeho nově nainstalovaného systému.
Nyní můžete provést základní systémovou konfiguraci jako přidání 
uživatelů, změna přípojných bodů atp.

<h4>Po rebootu</h4>

Pri vašem prvním bootu se vygenerují <a href="http://www.openssh.com">SSH</a> klíče.
Na moderních počítačích to zabere pár sekund, nemusíte si toho ani
všimnout. Na starších systémech to může trvat mnoho minut nebo i 
hodinu či více na opravdu pomalém systému.

<p>
Jedna z prvních věcí ke čtení po instalaci vašeho systému je
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">afterboot(8)</a>.

<p>
Také můžete zjistit, že následující odkazy jsou taky užitečné:
<ul>
<li><a href="../faq10.html#AddDelUser">Adding users in OpenBSD</a>
<li><a href="../faq6.html#Setup">Initial Network Setup</a>
<li><a href="faq2.html#ManPages">Man Pages of popular/useful commands</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi">OpenBSD man pages on
  the Web</a>
<li><a href="../faq15.html">The OpenBSD Packages and Ports system for
  installing software</a>
</ul>

<a name="InstFinish"></a>
<h3>4.5.6 - Jedna poslední věc...</h3>

OpenBSD vývojáři vás prosí o <a href="#SendDmesg">Zaslání kopie 
vašeho dmesg</a>.
Toto je velmi oceňováno vývojáři a ve výsledku všemi uživateli.


<a name="More"></a>
<h2>4.6 - Detaily více komplexní instalace</h2>
Někdy prostě nemůžete použít jenom to co je default.
Zde následuje více informací o jednotlivých částech instalace.

<a name="MoreNetwork"></a>
<h3>4.6.1 - Nastavení sítě</h3>

Pokud nemáte k dispozici DHCP server, tak musíte vaše síťové 
adaptéry nastavit ručně.
Zde je příklad:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
   Which one do you wish to configure? (or 'done') [xl0] <b><i>Enter</i></b>
  IPv4 address for xl0? (or 'dhcp' or 'none') [dhcp] <b>192.168.1.37</b>
  Netmask? [255.255.255.0] 255.255.254.0
  IPv6 address for xl0? (or 'rtsol' or 'none') [none] <b><i>Enter</i></b>
</pre></td></tr></table>

<p>
Po této sadě otázek, dostanete možnost konfigurovat jakýkoliv 
další síťový adaptér, který je na vašem stroji.
Pokud vyberete další síťový adaptér, tak se předchozí otázka 
zopakuje.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available network interfaces are: xl0 vlan0.
  Which one do you wish to configure? (or 'done') [done]
</pre></td></tr></table>

<p>
Nyní nastavíte default gateway a DNS servery což jsou věci, které
mají dopad na všechny síťové adaptéry:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Default IPv4 route? (IPv4 address, 'dhcp' or 'none') <b>192.168.1.1</b>
  add net default: gateway 192.168.1.1
  DNS domain name? (e.g. 'bar.com') [my.domain] <b>example.org</b>
  DNS nameservers? (IP address list or 'none') [none] <b>192.168.1.250 192.168.1.251</b>
</pre></td></tr></table>

<p>
Všimněte si, že může být specifikováno několik DNS serverů oddělených
mezerami.

<p>
Někdy budete ale muste udělat více, například nastavit klíč
pro bezdrátový přístup nebo natvrdo nastavit duplex nebo jinou 
 rychlost (tohle ale nedělejte, dokud si nejste jistí, že MUSÍTE. 
Oprava aktuální konfigurace switche je mnohem lepší nápad!).
Nyní máte šanci odskočit do shellu a udělat ruční konfiguraci jakou
si přejete.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you want to do any manual network configuration? [no] <b>y</b>
  Type 'exit' to return to install.
  # <b>ifconfig xl0 media</b>
  xl0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
          lladdr 00:08:74:2c:df:9c
          groups: egress
          media: Ethernet autoselect (100baseTX full-duplex)
          status: active
          supported media:
                  media 10baseT
                  media 10baseT mediaopt full-duplex
                  media 100baseTX
                  media 100baseTX mediaopt full-duplex
                  media autoselect
          inet 192.168.1.37 netmask 0xfffffe00 broadcast 192.168.1.255
  # <b>ifconfig xl0 media 100baseTX mediaopt full-duplex</b>
  # <b>ifconfig xl0</b>
  xl0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
          lladdr 00:08:74:2c:df:9c
          groups: egress
          media: Ethernet 100baseTX full-duplex
          status: active
          inet6 fe80::208:74ff:fe2c:df9c%xl0 prefixlen 64 scopeid 0x1
          inet 192.168.1.37 netmask 0xfffffe00 broadcast 192.168.1.255
  # <b>exit</b>
<i>...setup resumes...</i>
</pre></td></tr></table>

<a href="#backMoreNetwork">(zpátky tam kde by jsme měli být)</a>
 
<a name="MoreTimeZone"></a>
<h3>4.6.2 - Nastavení časové zóny</h3>
Čas v Unixu není jednoduchá věc (nebo jinak, čas v Unixu je
<i>skutečně</i> snadná věc, lidský čas je politicky manipulovaný 
zmetek). Soubory časových zón pomáhají systému konvertovat Unixový 
čas (počet sekund od půlnoci GMT, 1. Ledna 1970) do lidského času, 
 a berou v potaz věci jako časové zóny, letní čas (DST), DST změny 
pravidel, atd.
Také obsahují historii změn.

<p>
Několik souborů obsahující definici časové zóny může občas 
dát stejný <i>aktuální</i> čas, ale mohou mít rozdílnou historii.
Například EST5EDT a US/Michigan mají stejný čas NYNÍ, ale v roce
1975 byly pravidla jiné, takže pokud budete počítat s daty a časy 
z roku 1975, tak si musíte dávat pozor na rozdíly.
Měli by jste používat co nejvíce specifickou a přesnou definici 
časové zóny ze souboru pro váš region než takovou, která dává aktuální čas právě nyní.

<p>
OpenBSD instalátor vám pomůže najít správný soubor časové zóny pro 
vás pokud si nejste jistí.
Jednoduše stiskněte "<tt>?</tt>" v každém promptu a instalátor vám 
ukáže možnosti. Pokud vám první odpověď nevyhovuje, tak vyberte 
kontinent a zemi a podívejste na možnosti zde:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  What timezone are you in? ('?' for list) [right/EST5EDT] <b>?</b>
  Africa/      Chile/       GB-Eire      Israel       NZ-CHAT      UCT
  America/     Cuba         GMT          Jamaica      Navajo       US/
  Antarctica/  EET          GMT+0        Japan        PRC          UTC
  Arctic/      EST          GMT-0        Kwajalein    PST8PDT      Universal
  Asia/        EST5EDT      GMT0         Libya        Pacific/     W-SU
  Atlantic/    Egypt        Greenwich    MET          Poland       WET
  Australia/   Eire         HST          MST          Portugal     Zulu
  Brazil/      Etc/         Hongkong     MST7MDT      ROC          posix/
  CET          Europe/      Iceland      Mexico/      ROK          posixrules
  CST6CDT      Factory      Indian/      Mideast/     Singapore    right/
  Canada/      GB           Iran         NZ           Turkey
  What timezone are you in? ('?' for list) [right/EST5EDT] <b>US</b>
  What sub-timezone of 'US' are you in? ('?' for list) ?
  Alaska          Central         Hawaii          Mountain        Samoa
  Aleutian        East-Indiana    Indiana-Starke  Pacific
  Arizona         Eastern         Michigan        Pacific-New
  What sub-timezone of 'US' are you in? ('?' for list) <b>Michigan</b>
</pre></td></tr></table>

<p>
Nyní jsme nastavili čas na "US/Michigan". To vytvoří symbolický 
odkaz v <tt>/etc</tt> odkazující na odpovídající zoneinfo soubor v
<tt>/usr/share/zoneinfo</tt>, něco jako toto:

<blockquote><pre>
  /etc/localtime -> /usr/share/zoneinfo/US/Michigan
</pre></blockquote>
 
Všimněte si adresáře "<tt>right/</tt>", tento adresář obsahuje 
  vyrovnání přestupných sekund, ale jinak duplikuje standardní výběry zoneinfo. Více <a href="../faq8.html#NTPerror">zde</a>.

<p>
<a href="#backMoreTimeZone">(zpátky tam kde by jsme měli být)</a>
 
<a name="Morefdisk"></a>
<h3>4.6.3 - Uživatelské rozložení fdisk(8)</h3>

Poznámka: pouze některé OpenBSD platformy používají fdisk a 
obvykle pouze uživatelé
<a href="../../i386.html">i386</a> a <a href="../../amd64.html">amd64</a>
se musí obávat používání fdisku.
Uživatelé většiny ostatních platforem používajících fdisk(8) 
se obecně nemusí obávat multibootingu nebo setup/diagnostických 
partitions. Z tohoto důvodu je tato sekce zaměřena na i386 a amd64

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8">fdisk(8)</a>
je použit k označení OpenBSD části vašeho disku.
Často to pomáhá odlišit OpenBSD od částí použitých jiným
OS nebo systémovou funkcí.

<p>
Pokud máte na disku partition, kterou chcete zachovat nebo si 
přejte nechat nějáké místo pro jinou partition, tak NEBUDETE chtít 
vybrat volbu "(W)hole disk", ale budete muset upravit partitions 
tabulku s
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8">fdisk(8)</a>.
Více informací o ručním použití fdisk(8) najdete
<a href="../faq14.html#fdisk">zde</a>.

<b>Před prací s jakýmkoliv systémem, který obsahuje data, která 
nechcete ztratit se ujistěte, že máte dobrou zálohu.</b>
Je velmi snadné v tomto procesu zničit důležitá data a tak se 
ujistěte, že jste připraveni je dostat v případě potřeby zpět.

<p>
Pokud přidáváte OpenBSD k existujícímu systému, tak budete asi 
potřebovat vytvořit nějáké volné místo na vašem systému ještě před 
instalací OpenBSD. Tohle obvykle obnáší smazání nebo změnu 
velikosti existujících partitions.
Program <a href="http://gparted.sourceforge.net/">gparted</a>
je velmi užitečný pro úpravu velikostí partitions mnoha 
populárních OS a umožňuje tak nainstalovat OpenBSD na uvolněné 
místo.

<p>
In this example, we will assume we are starting with a blank 40G disk
and wish to create a multi-boot system, reserving 5G at the beginning
of the disk for Windows, and the rest for OpenBSD.
Note that a blank drive has to have valid MBR boot code and signature
written to the disk before it can be booted.

<p>
Proces je prakticky stejný i při práci okoli již existující 
partiton. Pouze musíte přeskočit části kde vytváříme Windows 
 partition a zajímat se o instalaci MBR boot kódu.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Available disks are: wd0.
  Which one is the root disk? (or 'done') [wd0] <b><i>Enter</i></b>
  MBR has invalid signature; not showing it.
</pre></td></tr></table>
POKUD má disk již platný MBR, tak by se vám měla ukázat partitions 
tabulka, která může být dobrým způsobem k ověření jestli disk už 
obsahuje nějáká data.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Use (W)hole disk or (E)dit the MBR? [whole] <b>e</b>
 
  You will now create a single MBR partition to contain your OpenBSD data. This
  partition must have an id of 'A6'; must *NOT* overlap other partitions; and
  must be marked as the only active partition.  Inside the fdisk command, the
  'manual' command describes all the fdisk commands in detail.

  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0x0
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
Enter 'help' for information
fdisk: 1>
</pre></td></tr></table>

<p>
Ze všeho nejdříve si všimněte fdisk promptu.
Číslo "1" ukazuje první vrstvu partitions tabulky -- pokud jste 
editovali extended partition, tak to bude "2" (nebo více).
Extended partitions jsou partitions, které mají vlastní sub-partition
tabulku, která umožňuje obejít IBM AT limit čtyř partition v 
 designu. Extended partitions zde nebudou probírány.

<p>
Jako první uděláme partition "0" což bude 5G Windows partition 
 (používající NTFS) a partition "1" bude naše OpenBSD partition 
 používající zbytek disku.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk: 1> <b>e 0</b>
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help)
</pre></td></tr></table>

<p>
Protože si nemůžeme vzpomenout jaké je partition ID pro NTFS, tak 
stiskneme "?" k získání seznamu.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>?</b>
  Choose from the following Partition id values:
  00 unused         20 Willowsoft     66 NetWare 386    A9 NetBSD
  01 DOS FAT-12     24 NEC DOS        67 Novell         AB MacOS X boot
  02 XENIX /        27 Win Recovery   68 Novell         AF MacOS X HFS+
  03 XENIX /usr     38 Theos          69 Novell         B7 BSDI filesy*
  04 DOS FAT-16     39 Plan 9         70 DiskSecure     B8 BSDI swap
  05 Extended DOS   40 VENIX 286      75 PCIX           BF Solaris
  06 DOS > 32MB     41 Lin/Minux DR   80 Minix (old)    C0 CTOS
  07 NTFS           42 LinuxSwap DR   81 Minix (new)    C1 DRDOSs FAT12
  08 AIX fs         43 Linux DR       82 Linux swap     C4 DRDOSs < 32M
  09 AIX/Coherent   4D QNX 4.2 Pri    83 Linux files*   C6 DRDOSs >=32M
  0A OS/2 Bootmgr   4E QNX 4.2 Sec    84 OS/2 hidden    C7 HPFS Disbled
  0B Win95 FAT-32   4F QNX 4.2 Ter    85 Linux ext.     DB CPM/C.DOS/C*
  0C Win95 FAT32L   50 DM             86 NT FAT VS      DE Dell Maint
  0E DOS FAT-16     51 DM             87 NTFS VS        E1 SpeedStor
  0F Extended LBA   52 CP/M or SysV   8E Linux LVM      E3 SpeedStor
  10 OPUS           53 DM             93 Amoeba FS      E4 SpeedStor
  11 OS/2 hidden    54 Ontrack        94 Amoeba BBT     EB BeOS/i386
  12 Compaq Diag.   55 EZ-Drive       99 Mylex          EE EFI GPT
  14 OS/2 hidden    56 Golden Bow     9F BSDI           EF EFI Sys
  16 OS/2 hidden    5C Priam          A0 NotebookSave   F1 SpeedStor
  17 OS/2 hidden    61 SpeedStor      A5 FreeBSD        F2 DOS 3.3+ Sec
  18 AST swap       63 ISC, HURD, *   A6 OpenBSD        F4 SpeedStor
  19 Willowtech     64 NetWare 2.xx   A7 NEXTSTEP       FF Xenix BBT
  1C ThinkPad Rec   65 NetWare 3.xx   A8 MacOS X
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>07</b>
 </pre></td></tr></table>

<p>
Nyní nastavíme počáteční a koncové body:
<p>

<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Do you wish to edit in CHS mode? [n]
</pre></td></tr></table>

<p>
CHS mód umožňuje specifikovat místo na disku v Cylindrech, Hlavách a
 Sektorech. Nezapomeňte, že pro moderní disky jsou CHS čísla úplně 
falešná. Jsou to pouze tři čísla přeložená do sectoru na disku, 
který je přeložen na vaši fyzickou geometrii zařízení (která se 
stejně pravděpodobně liší mezi disky).

<p>
Pokud zde odpovíte "y", tak budete dotázáni na počáteční a koncový 
cylindr, hlavu a sektor. Pokud zde odpovíte "no" (jako to uděláme 
my), tak budete dotázáni na počáteční sektor a velikost.
Editování pomocí CHS je často lehčí, když pracujete okolo 
existující partition. Počáteční sektor a velikost je často lehčí, 
když chcete rychle vytvořit partition danné velikosti.
 
<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  offset: [0] <b>63</b>
</pre></td></tr></table>

<a name="trackoffset"></a>

<p>
The fdisk platforms need a one track gap before the first partition.
One track is one "sectors per track" number of sectors, the last of
the "geometry:" numbers.
Je snadné zde zadat "63" jak je běžné pro většinu moderních
IDE a SATA disků, ale ne všechny disky toto budou používat jako
velikost track. Obvyklé moderní vyjímky jsou SCSI a Flash disky.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  size: [0] <b>5g</b>
  Rounding to nearest cylinder: 10490382
</pre></td></tr></table>

<p>
Hodnota "Size" může být číslo sektorů (512 byte každý) nebo 
požadovaná kapacita následovaná "k", "m" nebo "g".
Při editování pomocí offsetu a velikosti fdisk zaokrouhlí vaši 
 partition tak, že končí na hranici cylindru (OpenBSD se o tohle 
nestará a je pravděpodobné, že žádný moderní OS se o tohle 
nestará, ale některé se někdy v budoucnu mohou).

<p>
Nyní se podívejme na naši novou partition:
<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> p
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0x0
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 07      0   1   1 -    652 254  63 [          63:    10490382 ] NTFS
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
Všimněte si, že prompt nyní obsahuje "*". To znamená, že jsou zde neuložené změny.

<p>
Nyní jsme vytvořili naši Windows partition.
Uvědomte si, že tato partition není nic jiného než rezervované místo 
na disku a není naformátovaná; neexistuje zde souborový systém.
O tohle se postaráte až budete instalovat Windows; svůj úkol
rezervování místa pro Windows partition jsme splnili.

<p>
Nyní vytvoříme naši OpenBSD partition.
V tomto případě bude partition ID "A6".

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> e 1
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   1: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  Partition id ('0' to disable)  [0 - FF]: [0] (? for help) <b>a6</b>
  Do you wish to edit in CHS mode? [n] <b><i>Enter</i></b>
  offset: [0]
</pre></td></tr></table>

<p>
uh-oh!
Co náš offset?  Snadné -- offset předchozí partition plus
velikost partition, v tomto případě, 63+10490382 = 10490445.

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  offset: [0] <b>10490445</b>
  size: [0] <b>*</b>
  fdisk:*1>
</pre></td></tr></table>

<p>
Všimněte si, že jsme zadali "*" jako velikost což znamená 
"zbytek disku". Opět jsme mohli zadat velikost v sektorech, 
"m" nebo "g" pokud by jsme chtěli nechat místo pro něco dalšího.

<p>
Nyní se podíváme na naši partition tabulku:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0x0
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 07      0   1   1 -    652 254  63 [          63:    10490382 ] NTFS
   1: A6    653   0   1 -   4998   5  63 [    10490445:    69802803 ] OpenBSD
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
<b>NEJSME JEŠTĚ HOTOVÍ!</b><br>
Tento disk ještě nemůže bootovat!
Protože to byl nový disk, tak
<a href="../faq14.html#Boot386">MBR</a> na disku je kompletně 
prázdné. Text "Signature: 0x0" ukazuje, že zde není platné signature 
(0xAA55), což znamená, že zde určitě není platný boot kód.
Samozřejmě můžete mít platnou signature bez platného boot kódu díky 
náhodnému špatnému štěstí nebo poškození existujícího boot kódu, ale 
neplatná signature indikuje velmi dobře, že vám chybí boot kód takže 
jej nyní nainstalujeme pomocí příkazu "update":

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>update</b>
  Machine code updated.
  fdisk:*1>
</pre></td></tr></table>

<p>
Musíme také označit partition pomocí "flag" jako "active" aby boot 
ROOM věděla z které partition bootovat:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>f 1</b>
  Partition 1 marked active.
</pre></td></tr></table>

<p>
Nyní se podívejme jak to vypadá:

<p>
<table border=0 width="650"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  fdisk:*1> <b>p</b>
  Disk: wd0       geometry: 4998/255/63 [80293248 Sectors]
  Offset: 0       Signature: 0xAA55
              Starting         Ending         LBA Info:
   #: id      C   H   S -      C   H   S [       start:        size ]
  -------------------------------------------------------------------------------
   0: 07      0   1   1 -    652 254  63 [          63:    10490382 ] NTFS
  *1: A6    653   0   1 -   4998   5  63 [    10490445:    69802803 ] OpenBSD
   2: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
   3: 00      0   0   0 -      0   0   0 [           0:           0 ] unused
  fdisk:*1>
</pre></td></tr></table>

<p>
Seznam věcí, které by jste měli zkontrolovat předtím než ukončíte 
 fdisk(8):

<ul>
<li>Je signature platná?
<li>Partitions se nepřekrývají?
<li>OpenBSD partition s "A6" id je vytvořena?
<li>Správná partition (nejspíše OpenBSD) označena jako active?
</ul>

<p>
<a href="#BackMorefdisk">(zpátky tam kde by jsme měli být)</a>
 

<a name="Moredisklabel"></a>
<h3>4.6.4 - Uživatelské rozložení disklabel</h3>

Uvnitř OpenBSD fdisk(8) partition používáme
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
k vytvoření OpenBSD partitions pro souborový systém.
OpenBSD označuje své partitions pro souborový systém pomocí 
šestnácti písmen "a" až "p".
Partition "a" na bootovacím disku je definována jako root partition,
"b" na bootovacím disku je defaultní swap partition.
"c" na všech discích je "celý disk" partition. Je používána programy, které mají raw přístup k fyzickému disku jako fdisk(8) a 
disklabel(8).
"c" partition je pro vás vytvořena automaticky a neměla by být 
smazána nebo změněna.
Zbývající písmena jsou vám k dispozici pro nadefinování přípojných 
bodů. Můžete písmena přeskakovat, můžete je definovat v jakémkoliv 
pořadí a mohou být v jakémkoliv pořadí na disku (ovšem některé 
platformy mají pravidlo kde může být partition "a").
Také můžete nechat místa na disku nealokovaná a alokovat je později 
nebo potencionálně pozdějí zvětšit existující partitions do 
nealokovaného místa pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=growfs&amp;sektion=8">growfs(8)</a>.

<p>
Všechny partitions, které obsahují nativní FFS partition mají být 
v rozsahu OpenBSD fdisk(8) partition, ale
<a href="../faq14.html#foreignfs">ne-OpenBSD</a> partitions mohou (a
obvykle jsou) být mimo OpenBSD fdisk partition.

<p>
Více informací o používání disklabel naleznete
<a href="../faq14.html#disklabel">zde</a>.

<p>
Více informací o tom, proč rozdělení na partitions je dobré 
a pro plán rozdělení se podívejte <a href="#Partitioning">níže</a>.

<p>
OpenBSD instalátor se pokusí automaticky rozdělit 
váš disk do použitelné, "obecně využitelné" konfigurace založené 
na velikosti vašeho disku.
Pokud je váš disk dostatečně velký, tak nevyužité místo bude 
alokováno pro <tt>/home</tt> partition.
I když je to často docela užitečné, tak to nemusí uspokojit všechny 
potřeby uživatelů.

<p>
Pro náš případ budeme předpokládat, že stavíme statický webový server pro některé z našich přátel.
Máme stroj připojený k slušnému Internetovému připojení s 40G
diskem využitím z většiny pro OpenBSD (se stejnou 5G Windows
partition jako v příkladu výše.
Proč?  Možná má tento systém RAID řadič, který je podporovaný v 
OpenBSD, ale administrovatelný pouze z Windows.
Ale spíše pro to, protože editor FAQ nerad udržuje mnoho různých 
příkladů systémů).


<p>
Web stránky nabízené OpenBSD web serverem budou v
<tt>/var/www</tt> a velmi málo bude uloženo v <tt>/home</tt> a to 
indikuje hlavní změnu od defaultní konfigurace, která musí být 
provedena. Pro zbytek diskuze budeme také předpokládat, že nebudeme 
potřebovat rebuildovat OS ze zdrojů na tomto stroji (budeme to dělat 
jinde). Systém nebude spouštět X, ale protože některé web aplikace 
<a href="#FilesNeededX">očekávají X nainstalované</a>, tak X
sety nainstalujeme.
Stroj není příliš výkonný a nemůže mít více než 1G RAM, ale stejně není pravděpodobné, že naše aplikace bude někdy potřebovat více než 
tohle.

<p>
Takže po chvilce přemýšlení je náš plán pro rozdělení disku takový:
<ul>
<li><tt>/ - root</tt>: 100m.  Toto bude 'a'.
<li><tt>swap</tt>: 1G (takže vždy bude dost místa pro core dump),
   toto bude 'b'
<li><tt>/usr</tt>: 2g, partition d
<li><tt>/tmp</tt>: 100m (nebudeme tohle moc používat), partition e
<li><tt>/usr/local</tt>: 2g, partition f
<li><tt>/usr/X11R6</tt>: 1g, partition g
<li><tt>/home</tt>: 1g, partition h
<li><tt>/var</tt>: 1g (tady se vleze spousta logů), partition j
<li><tt>/var/www</tt>: zbytek disku, partition k
</ul>

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  The auto-allocated layout for wd0 is:
  #                size           offset  fstype [fsize bsize  cpg]
    a:          1024.0M         10490445  4.2BSD   2048 16384    1 # /
    b:           252.1M         12587597    swap
    c:         39205.7M                0  unused
    d:          2319.3M         13103933  4.2BSD   2048 16384    1 # /tmp
    e:          3653.9M         17853877  4.2BSD   2048 16384    1 # /var
    f:          1149.8M         25337016  4.2BSD   2048 16384    1 # /usr
    g:          1024.0M         27691862  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          3422.6M         29789014  4.2BSD   2048 16384    1 # /usr/local
    i:          5122.3M               63    NTFS
    j:          1848.7M         36798433  4.2BSD   2048 16384    1 # /usr/src
    k:          1848.7M         40584654  4.2BSD   2048 16384    1 # /usr/obj
    l:         17540.2M         44370875  4.2BSD   2048 16384    1 # /home
  Use (A)uto layout, (E)dit auto layout, or create (C)ustom layout? [a] <b>c</b>
</pre></td></tr></table>

<p>
Pokud by jsme měli jen drobné změny, tak by jsme asi použili 
volbu "Edit" pro uživatelské upravení rozložení než začínat úplně 
z čistého, ale tady jdeme dělat věci těžší cestou.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  You will now create an OpenBSD disklabel inside the OpenBSD MBR
  partition. The disklabel defines how OpenBSD splits up the MBR partition
  into OpenBSD partitions in which filesystems and swap space are created.
  You must provide each filesystem's mountpoint in this program.

  The offsets used in the disklabel are ABSOLUTE, i.e. relative to the
  start of the disk, NOT the start of the OpenBSD MBR partition.

  Label editor (enter '?' for help at any prompt)
  > <b>p</b>
  OpenBSD area: 10490445-80293248; size: 69802803; free: 69802803
  #                size           offset  fstype [fsize bsize  cpg]
    c:         80293248                0  unused
    i:         10490382               63    NTFS
  >
</pre></td></tr></table>

<p>
Všimněte si, že zde jsou již dvě partitions -- "c" partition, která 
je tady vždy pro vás vytvořena, ale disklabel(8) také rozpoznal 
existující NTFS partition a přiřadil ji disklabel partition a tak 
může být případně přístupná pro OpenBSD (poznámka: aktuálně je 
NTFS podpora experimentální a vyžaduje upravené jádro, ale 
FAT/FAT32 podpora je docela dobrá).

<p>
Nyní vytvoříme naše partitions.
Začneme s "a" partition, naší root partition:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>a a</b>
  offset: [10490445] <b><i>Enter</i></b>
  size: [69802803] <b>100m</b>
  Rounding to cylinder: 208845
  FS type: [4.2BSD]  <b><i>Enter</i></b>
  mount point: [none] <b>/</b>
  >
</pre></td></tr></table>

<p>
Všimněte si, že disklabel se nastavil na první dostupný OpenBSD 
 sektor na disku což je to co chceme. Je také defaultně nastaven 
na velikost celého dostupného místa což NENÍ to co chceme.
Zde to přepíšeme s naší preferovanou velikostí, která může být 
specifikováná v sektorech, "M" nebo "G".

<p>
Obvykle budete chtít použít defaultní FS typ "4.2BSD" pro
FFS (Fast File System) nebo FFS2 partition, mezi další užitečné, 
které můžete najít patří "swap" a "RAID".

<p>
A nakonec přípojný bod.
Naše "a" partition je root partition z definice.

<p>
Nyní uděláme swap což je naše 'b' partition (opět, toto je danné
 -- 'b' na vašem bootovacím disku je swap):
<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>a b</b>
  offset: [10699290] <b><i>Enter</i></b>
  size: [69593958] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [swap] <b><i>Enter</i></b>
  >
</pre></td></tr></table>

<p>
Disklabel opět správně vypočítal náš počáteční sektor a ukázal 
nám předpokládanou velikost "zbývajícího místa", které opět 
přepíšeme s naši žádanou velikostí.
Protože tohle je 'b' partition, tak disklabel předpokládá, že to 
bude swap a když to potvrdíme, tak se nás nebude ptát na 
přípojný bod.

<p>
Nyní jsme připraveni vytvořit zbytek partitions.

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>a d</b>
  offset: [12803805] <b><i>Enter</i></b>
  size: [67489443] <b>2g</b>
  Rounding to cylinder: 4209030
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr</b>
  > <b>a e</b>
  offset: [17012835] <b><i>Enter</i></b>
  size: [63280413] <b>100m</b>
  Rounding to cylinder: 208845
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/tmp</b>
  > <b>a f</b>
  offset: [17221680] <b><i>Enter</i></b>
  size: [63071568] <b>2g</b>
  Rounding to cylinder: 4209030
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr/local</b>
  > <b>a g</b>
  offset: [21430710] <b><i>Enter</i></b>
  size: [58862538] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/usr/X11R6</b>
  > <b>a h</b>
  offset: [23535225] <b><i>Enter</i></b>
  size: [56758023] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/home</b>
  > <b>a j</b>
  offset: [25639740] <b><i>Enter</i></b>
  size: [54653508] <b>1g</b>
  Rounding to cylinder: 2104515
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var</b>
  > <b>a k</b>
  offset: [27744255] <b><i>Enter</i></b>
  size: [52548993] <b><i>Enter</i></b>
  FS type: [4.2BSD] <b><i>Enter</i></b>
  mount point: [none] <b>/var/www</b>
  >
</pre></td></tr></table>

<p>
Všimněte si, že na <tt>/var/www</tt> partition ("k") jsme použili 
defaultní volbu pro využití veškerého zbývajícího místa. S 
moderními monstrózně velkými disky je to obvykle špatný nápad. 
Pokud víte, že to nikdy nevyužijete, tak to nealokujte a ponechte 
si to pro využití v budoucnu.

<p>
Nyní se podívejme na naše výsledky pomocí "p" a "p m" příkazů:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>p</b>
  OpenBSD area: 10490445-80293248; size: 69802803; free: 0
  #                size           offset  fstype [fsize bsize  cpg]
    a:           208845         10490445  4.2BSD   2048 16384    1 # /
    b:          2104515         10699290    swap
    c:         80293248                0  unused
    d:          4209030         12803805  4.2BSD   2048 16384    1 # /usr
    e:           208845         17012835  4.2BSD   2048 16384    1 # /tmp
    f:          4209030         17221680  4.2BSD   2048 16384    1 # /usr/local
    g:          2104515         21430710  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          2104515         23535225  4.2BSD   2048 16384    1 # /home
    i:         10490382               63    NTFS
    j:          2104515         25639740  4.2BSD   2048 16384    1 # /var
    k:         52548993         27744255  4.2BSD   2048 16384    1 # /var/www
  > <b>p m</b>
  OpenBSD area: 10490445-80293248; size: 34083.4M; free: 0.0M
    #                size           offset  fstype [fsize bsize  cpg]
    a:           102.0M         10490445  4.2BSD   2048 16384    1 # /
    b:          1027.6M         10699290    swap
    c:         39205.7M                0  unused
    d:          2055.2M         12803805  4.2BSD   2048 16384    1 # /usr
    e:           102.0M         17012835  4.2BSD   2048 16384    1 # /tmp
    f:          2055.2M         17221680  4.2BSD   2048 16384    1 # /usr/local
    g:          1027.6M         21430710  4.2BSD   2048 16384    1 # /usr/X11R6
    h:          1027.6M         23535225  4.2BSD   2048 16384    1 # /home
    i:          5122.3M               63    NTFS
    j:          1027.6M         25639740  4.2BSD   2048 16384    1 # /var
    k:         25658.7M         27744255  4.2BSD   2048 16384    1 # /var/www
  >
</pre></td></tr></table>

<p>
Stejně jako s fdisk, tak i s OpenBSD disklabel partitions nechcete, 
aby se překrývaly (jiné než 'c' partition, která pokrývá samozřejmě 
vše).

<p>
Uložte vaše změny a opusťte disklabel:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  > <b>w</b>
  > <b>q</b>
  No label changes.
  newfs: reduced number of fragments per cylinder group from 13048 to 12992 to
  enlarge last cylinder group
  /dev/rwd0a: 102.0MB in 208844 sectors of 512 bytes
  5 cylinder groups of 25.38MB, 1624 blocks, 3328 inodes each
  /dev/rwd0h: 1027.6MB in 2104512 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  newfs: reduced number of fragments per cylinder group from 13048 to 12992 to
  enlarge last cylinder group
  /dev/rwd0e: 102.0MB in 208844 sectors of 512 bytes
  5 cylinder groups of 25.38MB, 1624 blocks, 3328 inodes each
  /dev/rwd0d: 2055.2MB in 4209028 sectors of 512 bytes
  11 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0g: 1027.6MB in 2104512 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0f: 2055.2MB in 4209028 sectors of 512 bytes
  11 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0j: 1027.6MB in 2104512 sectors of 512 bytes
  6 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/rwd0k: 25658.7MB in 52548992 sectors of 512 bytes
  127 cylinder groups of 202.47MB, 12958 blocks, 25984 inodes each
  /dev/wd0a on /mnt type ffs (rw, asynchronous, local)
  /dev/wd0h on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0e on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0d on /mnt/usr type ffs (rw, asynchronous, local, nodev)
  /dev/wd0g on /mnt/usr/X11R6 type ffs (rw, asynchronous, local, nodev)
  /dev/wd0f on /mnt/usr/local type ffs (rw, asynchronous, local, nodev)
  /dev/wd0j on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid)
  /dev/wd0k on /mnt/var/www type ffs (rw, asynchronous, local, nodev, nosuid)
  Let's install the sets!
...
</pre></td></tr></table>

<p>
<a href="#BackMoredisklabel">(zpátky tam kde by jsme měli být)</a>

<p>
<a name= "FilesNeeded"></a>

<h2>4.7 - Které soubory jsou potřebné pro instalaci?</h2>
<!-- XXXrelease -->

<p>
Kompletní OpenBSD instalace je rozdělena do několika samostatných 
 <i>setů</i>. Ne každá aplikace potřebuje všechny sety, ale novým 
uživatelům je doporučováno instalovat VŠECHNY. 

Zde je přehled každého z nich:
<p>
<ul>
  <li><b><i>bsd</i></b>          - Toto je jádro. <b>Nutné</b>
  <li><b><i>bsd.mp</i></b> - Multi-procesorové (SMP) jádro (pouze některé
     platformy)
  <li><b><i>bsd.rd</i></b> - <a href="#bsd.rd">RAM disk jádro</a>

  <li><b><i>base48.tgz</i></b>   - Obsahuje základní OpenBSD systém 
    <b>Nutné</b>
  <li><b><i>etc48.tgz</i></b>    - Obsahuje všechny soubory v /etc 
    <b>Nutné</b>
  <li><b><i>comp48.tgz</i></b>    - Obsahuje kompilátor a jeho 
    součásti, hlavičkové soubory a knihovny.
  <li><b><i>man48.tgz</i></b>    - Obsahuje man stránky.
  <li><b><i>misc48.tgz</i></b>   - Obsahuje různé info soubory a setup dokumentaci
  <li><b><i>game48.tgz</i></b>   - Obsahuje hry pro OpenBSD
  <li><b><i>xbase48.tgz</i></b>  - Obsahuje základní soubory pro X11
  <li><b><i>xetc48.tgz</i></b>   - Obsahuje /etc/X11 a /etc/fonts
    konfigurační soubory
  <li><b><i>xfont48.tgz</i></b>  - Obsahuje X11 font server a fonty
  <li><b><i>xserv48.tgz</i></b>  - Obsahuje X11 X servery
  <li><b><i>xshare48.tgz</i></b> - Obsahuje man stránky, lokální nastavení,
    includes a další pro X
</ul>

Sety <b>etc48.tgz</b> a <b>xetc48.tgz</b> nejsou instalovány jako součást
upgrade, ale pouze jako součást kompletní instalace. Takže jakékoliv
vaše úpravy nebudou ztraceny.
Musíte aktualizovat vaše <tt>/etc</tt>, <tt>/dev</tt> a
<tt>/var</tt> adresáře manuálně.

<a name="FilesNeededX"></a>
<h3>Proč musím instalovat X pro mé ne-grafické aplikace?</h3>
I když neplánujete spouštění X, tak některé
<a href="../faq15.html">balíčky</a> vyžadují knihovny nebo jiné 
utility z X nainstalované na vašem systému.
Tyto aplikace mohou být obyvykle jednoduše uspokojeny instalací
xbase48.tgz, zbytek X není vždy nutný. Mnoho lidí stále instaluje 
X na jejich systém bezdůvodně:

<ul>
<li>Pouhá instalace X nezpůsobí, že by se nějáký program na 
systému sám spustil.
<li>Pouhá instalace X na systému nezmění riziko externího 
bezpečnostního problému.
<li>Pokud již někdo JE na vašem systému, tak většinou mohou 
instalovat cokoliv chtějí, takže přítomnost nebo absence X toho 
moc na aktuální situaci nezmění.
<li>Jediné části X, které běží jsou ty části, které potřebuje 
vaše aplikace.
<li>Místo potřebné pro X je relativně malé na moderním hardware.
</ul>
 
Lidé občas tráví hodně času pokusy prozkoumat xbase.48.tgz a 
použít jen soubory, které potřebují k instalaci jejich aplikace.
Tohle není jen bezúčelné, ale vede to k situaci, kterou musíte 
opakovat při každém upgrade což může vést k tomu, že nemusíte svůj 
systém aktualizovat správně a tím vytvoříte REÁLNÉ bezpečnostní 
problémy.

<p>
POKUD potřebujete X, tak je nainstalujte.
Nezasáhne vás to více než aplikace kvůli které to potřebujete.

<a name="FilesNeededComp"></a>
<h3>Nechci instalovat kompilátory</h3>
Ok, neinstalujte, ale neříkejte si, že to je kvůli "bezpečnostním
důvodům".
Pokud je někdo tak dobrý, že se do vašeho systému dostane, tak už je jedno jestli tam kompilátory jsou nebo ne, protože už si je může pak 
nainstalovat i sám.
Ale compXX.tgz set je docela velký a obsahuje mnoho souborů, takže
instalace nebo upgrade nějakou dobu trvá a na pomalých nebo malých 
systémech na tom může záležet.

<p>
Pokud se rozhodnote neinstalovat kompilátor, tak budete pravděpodobně potřebovat další systém k udržování a vytváření 
aktualizovaného software. Je zde mnohem více systémů, které byli 
kompromitovány díky nesprávné administraci než takové, kde to 
způsobil nainstalovaný kompilátor.

<p>
<a name="Partitioning"></a>
<h2> 4.8 - Jak bych měl rozdělit můj disk?</h2>
<!-- XXXrelease -->

<p>
Samozřejmě, že odpověď na tuto otázku se hodně liší podle toho, 
na co chcete váš systém použít. OpenBSD může být nainstalováno na 
méně než 512M, ale instalování na tak malé zařízení je něco pro 
pokročilé uživatele. Dokud nemáte nějáké zkušenosti, tak 4G nebo 8G 
velký disk je pro vás pro začátek doporučený.

<p>
Na rozdíl od mnoha jiných OS, OpenBSD vede uživatele k rozdělení 
jejich disku do několika partitions their
disk into a number of partitions místo jedné nebo dvou velkých 
partitions. Je zde mnoho důvodů proč rozdělit váš disk:

<ul>
<li><b>Bezpečnost:</b> Můžete některé file systémy označit jako 'nosuid', 'nodev', 
  'noexec', 'readonly', atd.  Toto je provedeno instalačním procesem,
  pokud jste použili doporučené partitions.
<li><b>Stabilita:</b> Uživatel nebo špatně fungující program může zaplnit file systém nesmysly pokud má k němu právo zápisu. Vaše 
  kritické programy, které samozřejmě běží na jiných file systémech nejsou přerušeny.
<li><b>Rychlost:</b> File systém, na který se velmi často zapisuje se může
  nějak fragmentovat.  (Naštěstí ffs file systém, který OpenBSD používá
  není náchylný k velké fragmentaci.)
<li><b>Integrita:</b> Když je jeden file systém z nějákého důvodu poškozený, tak ostatní file systémy jsou OK.
<li><b>Velikost:</b> Mnoho počítačů má limity na prostor na disku, kde může být z jádra nahrán boot ROM. V některých případech může být tento limit velmi malý (504M pro starší 486), v ostatních případech je limit mnohem větší (např., 2G, 8G, nebo 128G na i386 systémech).  Protože jádro může skončit kdekoliv na root partition, tak celá 
 root partition by se měla do tohoto limitu vlézt.  Pro více detailů 
 se podívejte na <a href="faq14.html#LargeDrive">tuto sekci</a>.  
Dobré nastavení je udržet vaši / partition kompletně pod 2G pokud 
si nejste jistí, že vaše platforma (a konkretní stroj) zvládá více 
(nebo méně) než tento limit.
<li><b>Pouze ke čtení:</b> Můžete připojit partitions na které nikdy 
nezapisujete nebo zapisujete jen vyjímečně jako "Read-only" po většinu času což eliminuje potřebu použití fsck(8) po havárii nebo 
přerušení elektrické energie a může pomoct při prevenci nechtěných 
změn dat.
<li><b>fsck(8):</b> Velmi velké partitions potřebují více RAM k 
použití fsck(8) a na systému s malou pamětí můžete skončit s nutností použití swap což povede k velmi dlouhému trvání fsck procesu.
</ul>

Pokud má dostatek místa, tak OpenBSD instalátor defaultně nastaví 
tyto partitions:

<ul>
<li><b>/ - root:</b>
Mimo to, že je to místo kde jsou všechny ostatní partitions 
připojovány, tak root file systém také obsahuje všechny potřebné 
soubory pro boot OpenBSD. Včetně jádra a základních utilit v 
<tt>/sbin</tt> a <tt>/bin</tt>, konfigurační soubory v <tt>/etc</tt> a adresář zařízení v <tt>/dev</tt>, které jsou všechny použity 
ke startu systému. Root file systém může být malý třeba 60M, ale 
100M až 200M je jednodušší pro stroj, který bude procházet mnoha 
aktualizacemi. 'a' partition vašeho boot disku se stane automaticky 
vaší root partition. NĚKTERÉ platformy mají omezení ohledně fyzického umístění na disku (např. musí být na začátku disku) aby 
bylo možné bootovat.

<li><b>Swap:</b>
Mimo swap je tato partition používána i pro ukládaní core dumps po 
havárii systému. Proto je dobré aby místo pro swap (pokud je vůbec 
nastaveno) bylo větší než maximální množství RAM, které kdy v tomto 
stroji bude nainstalováno.
Více se dočtete zde <a href="../faq14.html#Swap">FAQ 14, Swap</a>.

<li><b>/tmp:</b>
Tohle je adresář, kde může zapisovat kdokoliv a je to (jak vyplývá 
z názvu!) dočasné uložiště. Většině systémů zde stačí málo místa 
, 50M je většinou něco co stačí, ale jsou zde aplikace, které mohou potřebovat více, mnohem více. Protože je to adresář kam může 
zapisovat kdokoliv, tak OpenBSD, pokud je to jako separátní partition nastaví defaultní konfiguraci nodev a nosuid což minimalizuje využití pro napadení systému. Uvědomte si, že tenhle 
adresář je při rebootu vymazán a soubory, které se nezměnili 24 
hodin jsou každou noc odstraněny.

<li><b>/var:</b>
Tento adresář a přípojný bod je používán pro MNOHO věcí a podle vašeho použití to může být hlavní kandidát na rozdělení do více 
partitions. Některé z věcí, které zde končí (a potencionální 
kandidáti na samostatné přípojné body):
<ul>
  <li><tt>/var/log</tt>: Systémové logy.
  <li><tt>/var/mail</tt>: Příchozí e-mail schránky.
  <li><tt>/var/spool</tt>: Odchozí e-maily (a jiné věci)
  <li><tt>/var/www</tt>: OpenBSD
     <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">web server</a>
     je zde.
  <li><tt>/var/tmp</tt>: Tohle je "stálé" uložiště dočasných souborů, protože soubory, které se zde umístí NEJSOU odstraněny při 
rebootu. Například vi(1) používá tento adresář pro dočasné uložiště. 
Pokud váš počítač zhavaruje nebo je rebootován během té doby kdy 
editujete soubor, tak soubory, které se zde nacházi mohou být 
použity pro obnovení vaší předchozí editace. Soubory, které jsou 
zde přes 24 hodin budou odstraněny čistícími skripty, které se 
spouštějí v noci <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&amp;sektion=8">daily(8)</a>.
<li><tt>/var/crash</tt>: Pokud v systému nastane stav panic, tak se 
pokusí uložit core dump na swap partition ještě před tím, než 
nastane reboot. Tento core dump pak bude uložen do <tt>/var/crash</tt> při rebootu, takže <tt>/var</tt> potřebuje alespoň tolik 
volného místa jako je velikost systémové RAM aby tohle mohlo 
fungovat automaticky.
</ul>

<li><b>/usr:</b>
Tohle je místo, kde je většina OpenBSD systému.
Binárky programů, knihovny, dokumentace, manuálové stránky, atd. 
jsou uloženy v <tt>/usr</tt> adresáři.
Soubory v tomto bodě připojení se moc nemění -- v mnoha případech 
můžete <tt>/usr</tt> partition připojit read-only pokud nebudou 
jiné změny do dalšího upgrade nebo update.

<li><b>/usr/X11R6:</b>
Tohle je místo kde se nachází X Window systém.
X binárky, soubory s fonty, knihovny, atd. jsou všechny zde.
Jediná část X, která tu není jsou konfigurační soubory.

<li><b>/usr/local:</b>
Na defaultní OpenBSD instalaci je tento přípojný bod/adresář 
kompletně prázdný. Je používán pro lokálně nainstalované programy 
a knihovny pro lokální aplikace.

<li><b>/usr/src:</b>
Tento adresář obsahuje základní systémové zdrojové soubory 
mimo X a portů. Tento adresář je defaultně prázdný a můžete ho 
zaplnit způsobem popsaným v 
<a href="../faq5.html#BldGetSrc">FAQ 5</a>.

<li><b>/usr/obj:</b>
Tento adresář se zaplňuje během build procesu objektovými a binárními soubory. Když je tento adresář jako samostatný přípojný 
bod, tak to umožňuje jej prostě přeformátovat než mazat soubor po 
souboru což je ve výsledku mnohem rychlejší.

<li><b>/home:</b>
Toto je místo kam ukládate vaše uživatelské soubory. Když je tento 
připojný bod jako samostatná partition, tak to ulehčuje kompletní 
re-instalaci systému; prostě ji jen při upgrade neformátujte.
</ul>

<p>
Některé další nápady k rozdělení disku:
<ul>
 <li>Pro Váš první pokus s experimentováním na systému může být jedna velká
   <tt>/</tt> partition a swap to nejlehčí dokud kolik místa budete
   potřebovat. Tímto postupem obětujete některé z defaultních
   bezpečnostních vylepšení OpenBSD, které vyžadují oddělené
   file systémy pro <tt>/, /tmp, /var, /usr</tt> a <tt>/home</tt>.
   Nicméně, pravděpodobně nepůjdete do produkce s Vaší první
   instalací OpenBSD.
 <li>Systém vystavený Internetu nebo jiným nepřátelským silám by měl
   mít oddělené <tt>/var</tt> (a možná dokonce oddělené
   <tt>/var/log</tt>) pro logování.
 <li> <tt>/home</tt> partition se může hodit.  Nová verze OS?
   Smažte a nahrajte všechno ostatní, ponechte <tt>/home</tt> partition
   nedotčenou.  Nezapomeňte si uložit kopii konfiguračních souborů!
 <li>Samostatnou partition pro cokoliv, co může vytvořit velké
   množství souborů, které mohou potřebovat smazání může být rychlejší
   reformátovat a znovu vytvořit než smazat.  Podívejte se na <a
   href="../faq5.html#ProbObjPt">FAQ sestavení ze zdrojů</a> pro příklad
   (<tt>/usr/obj</tt>).
 <li>Pokud chcete sestavit Váš systém ze zdrojů z jakéhokoliv důvodu, tak
   zdroje budou v <tt>/usr/src</tt>.  Pokud nevytvoříte samostatnou
   partition pro <tt>/usr/src</tt>, tak se ujistěte, že <tt>/usr</tt> má
   dostatek místa.
 <li>Běžně zapomínaný fakt: <b>nemusíte</b> alokovat všechno místo
   na disku, když nastavujete systém! I když zjistíte, že je těžké
   dnes koupit nový disk menší než 100G, tak může mít smysl
   nechat část disku nealokovanou.  Pokud zaplníte
   partition, tak můžete alokovat novou partition z nevyužitého místa,
   <a href="../faq10.html#DupFS">duplikovat</a> existující partition do
   nové partition, změnit
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab</a>

   k odkazování na novou partition, znovu připojit a nyní máte více místa.
 <li>Pokud uděláte partitions velikostně příliš blízko minimální potřebné velikosti,
   tak toho budete pravděpodobně později litovat, když bude čas provést upgrade
   systému.
 <li>Pokud uděláte velmi velké partitions, tak nezapomeňte, že vykonání
   kontroly file systémů pomocí
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a>
   potřebuje okolo 1M z RAM na gigabyte velikosti file systému a může být velmi
   zdlouhavá nebo dokonce neproveditelná na starších, pomalých systémech
   (podívejte se také do <a href="../faq14.html#LargeDrive">této sekce</a>).
 <li>Pokud povolíte uživatelům zápis do <tt>/var/www</tt> (např., osobní
   web stránky), tak ji budete chtít asi dát na samostatnou partition, aby jste
   mohli použít <a href="../faq10.html#Quotas">quoty</a> k omezení místa,
   které používají a pokud zaplní partition, tak jiné části systému
   nebudou zasaženy.
 <li>Možná budete chtít také vytvořit <tt>/altroot</tt> partition, tak jak
   je popsáno v
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&amp;sektion=8">daily(8)</a>.
   Toto může vytvořit denní kopii Vaší <tt>/</tt> partition, což umožňuje
   extra kopii jádra a <tt>/etc</tt> konfiguračních souborů v případě, že
   se něco stane s Vaší root partition.
   Samozřejmě, že <tt>/altroot</tt> partition musí být velká alespoň
   jako <tt>/</tt>.
   Pokud máte druhý disk a máte něco dalšího pro duplikaci zbytku
   disku, ať už softwarový
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&amp;sektion=4">softraid(4)</a>

   nebo pravidelné kopie pomocí
   <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a
   >/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>,
   tak tento disk může být bootovací po vyjmutí primárního disku.
<li>Kompilování některých <a href="../faq15.html#Ports">portů</a> ze 
zdrojů může zabrat hodně místa na vašich <tt>/usr</tt> a <tt>/tmp</tt> partitions. Tohle je další důvod proč doporučujeme používat 
<a href="../faq15.html#PkgMgmt">před-kompilované balíčky</a>.
<li>Některé editory používají <tt>/var/tmp</tt> jako dočasné uložiště a často musí být velké nebo větší než největší soubor, který editujete. Pokud plánujete editovat 500M velké soubory, tak 
vaše <tt>/var</tt> nebo <tt>/var/tmp</tt> partition musí být 
mnohem větší než jste původně plánovali.

</ul>

<p>
<a name= "Multibooting"></a>
<h2>4.9 - Multiboot s OpenBSD/i386</h2>

Multiboot je několik operačních systémů na jednom počítači a někteří
tím myslí výběr OS k bootování.  Toto <i>není</i>

jednoduchá úloha!  Pokud nerozumíte tomu co děláte, tak můžete
skončit smazáním velkého množství dat z Vašeho počítače.  Noví OpenBSD
uživatelé jsou <i>silně</i> směřováni k začátku s prázdným diskem na
samostatném počítači a praktikování zamýšlené konfigurace na
ne-produkčním systému předtím, než bud, ou zkoušet multiboot konfiguraci na
produkčním počítači.  <a href="../faq14.html">FAQ 14</a> nabízí více
informací o OpenBSD boot procesu.

<p>
Použijte jednu ze čtyř <i>primárních</i> MBR partitions
pro boot OpenBSD (tzv. rozšířené(logické) partitions nemusí fungovat).

<p>
Nezapomeňte, že Windows 7 a Vista mohou měnit velikost systémové 
partition: jděte do Ovládacích panelů, vyhledejte "oddíl" a spusťte systémový
nástroj. Klikněte pravým tlačítkem na oddíl a v menu uvidíte, že mu můžete
změnit velikost. Hlavní omezení je, že Windows Exchange File nemůže být
přesunut, takže pokud potřebujete více místa, tak jej budete muset přesunout
nebo vypnout.

<p>
Zde je několik možností pro multiboot:

<h3>Nastavení aktivních partitions</h3>
Toto je pravděpodobně nejvíce přehlížené a přesto občas nejlepší řešení
pro multiboot.  Jednoduše nastavte aktivní partition v jakémkoliv
OS, který právě používáte aby to byla ta, kterou chcete použít při
příštím bootu.  Prakticky každý OS nabízí program pro tuto
funkci; na OpenBSD je to <a href="../faq14.html#fdisk">fdisk(8)</a>, podobně
pojmenované programy jsou ve Windows 9x a DOS a mnoha dalších operačních
systémech.  Toto může být velmi žádoucí pro OS nebo systémy, kterým hodně
zabere vypnutí a následný reboot -- můžete to nastavit a spustit reboot
proces, poté jít pryč, vzít si šálek kávy a přijít zpátky k nabootovanému
systému způsobem, který jste chtěli -- žádné čekání na kouzelný moment k výběru
dalšího OS.


<h3>Bootovací disketa</h3>
Pokud používáte počítač na kterém používáte OpenBSD nepravidelně (nebo si
nepřejete aby další uživatelé počítače poznali, že se něco změnilo), tak
pouvažujte o využití bootovací diskety.  Jednoduše použijte jednu ze
 <a href="#MkFlop">standardních OpenBSD instalačních disket</a> 
a vytvořte <tt>/etc/boot.conf</tt> soubor
(ano, musíte také vytvořit <tt>/etc</tt> adresář na
disketě) s obsahem:

<pre>
     boot hd0a:/bsd
</pre>

pro bootování systému z hard disku 0, OpenBSD partition 'a',
soubor s jádrem <tt>/bsd</tt>.  Všimněte si, že můžete bootovat i z jiných disků
s podobným řádkem: "<tt>boot hd2a:/bsd</tt>" pro bootování z třetího
hard disku na Vašem systému.  Pro nabootování OpenBSD, strčte disketu dovnitř,
reboot.  Pro nabootování jiného OS, vyndejte disketu, reboot. (také 
pochopitelně můžete použít tuto disketu pro vytvoření bootovacího 
CD) 

<p>
Program 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a>
je načten z diskety a pak vyhledává a čte
<tt>/etc/boot.conf</tt>.  "<tt>boot hd0a:/bsd</tt>" řádek instruuje
boot(8) odkud nahrát jádro -- v tomto případě, první HD, který
BIOS vidí.  Nezapomeňte, pouze malý soubor (<tt>/boot</tt>) je nahrán
z diskety -- systém nahrává celé jádro z hard disku,
takže toto přidá pouze asi pět sekund k bootovacímu procesu.

<h3>Windows NT/2000/XP NTLDR</h3>

Pro multiboot OpenBSD a Windows NT/2000/XP můžete použít NTLDR,
boot loader, který používají NT systémy. Pro multi-boot s NT potřebujete kopii Vašeho
OpenBSD Partition Boot Record (PBR). Po provedení instalace jej můžete
zkopírovat do souboru pomocí 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd(1)</a>,
pomocí procesu podobnému tomuto:

<pre>
	# <strong>dd if=/dev/rsd0a of=openbsd.pbr bs=512 count=1</strong>
</pre>

Poznámka: toto je opravdu dobrý čas Vám připomenout, že slepé zadávání příkazů
bez jejich znalosti je opravdu špatný nápad.
Tento řádek nebude přímo fungovat na většině počítačů.
Je ponecháno na čtenáři přizpůsobit jej jeho počítači. 

<p>
Nyní nabootujte NT a umístěte <tt>openbsd.pbr</tt> na C:. Přidejte řádek podobný
tomuto na konec <tt>C:\BOOT.INI</tt>:


<pre>
	c:\openbsd.pbr="OpenBSD"
</pre>

<p>
Když provedete reboot, tak by jste měli mít možnost vybrat OpenBSD z NT loader
menu. Zde naleznete mnohem více informací o NTLDR -
<a href="http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm">NTLDR
Hacking Guide.</a>

<p>
Na Windows XP můžete editovat boot informace pomocí GUI; podívejte se na
<a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;289022">XP Boot.ini HOWTO</a>.

<p>
Programy, které většinou z toho pro Vás udělají jsou dostupné, například
<a href="http://www.winimage.com/bootpart.htm">BootPart</a>.
Tento program může být spuštěn z Windows NT/2000/XP a umí získat
OpenBSD PBR, umístit ji na Vaši NT/2000/XP partition a přidat jej
do <tt>C:\BOOT.INI</tt>

<p>
Poznámka: Windows NT/2000/XP  boot loader umí bootovat OS pouze
z primárního hard disku.
Nemůžete jej použít ke spuštění OpenBSD z druhého disku v systému.

<h3>Windows Vista</h3>

<p>
Ve Vistě Microsoft zahodil NTLDR podporu ve prospěch jejich nového 
 Boot Configuration Data (BCD) uložiště použitého pro kontrolu boot 
prostředí. Protože <tt>BOOT.INI</tt> se již nadále nepoužívá pro 
úpravy, tak je třeba použít utilitu pro příkazový řádek <tt>bcdedit</tt>.

<p>
Jakmile je OpenBSD PBR nakopírován na Vista systémovou partition, tak je třeba použít následující tři příkazy k výběru a nabootování 
OpenBSD v době, kdy je systém restartován:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /create /d "OpenBSD/i386 4.8" /application bootsector
The entry {05a763ce-d81b-11db-b3ec-000000000000} was successfully created.

C:\Windows\System32>
</pre></blockquote>

<p>
GUID, které zde vidíte <tt>05a763ce-d81b-11db-b3ec-000000000000</tt>,
je ukázáno pro ilustraci.  Všimněte si vašeho GUID zobrazeného při 
spuštění toho příkazu, protože tato hodnota musí být nakopírována 
do následujících příkazů. Pouhé nakopírování GUID zobrazeného 
výše nebude fungovat.

<p>
Nasledující dva příkazy jsou také nutné:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /set {05a763ce-d81b-11db-b3ec-000000000000} device boot
The operation completed successfully.

C:\Windows\system32> bcdedit /set {05a763ce-d81b-11db-b3ec-000000000000} path \openbsd.pbr
The operation completed successfully.

C:\Windows\system32>
</pre></blockquote>

<p>Toto musí být provedeno v konzoli s administrátorskými právy.
Jakmile najdete cmd.exe, tak klikněte pravým tlačítkem pro výběr položky 
"spustit jako administrátor".

<p>
Všimněte si absolutní cesty importovaného PBR souboru. Nepřidávejte 
písmeno disku, protože zde se předpokládá, že soubor je na 
systémové partition. <tt>bcdedit</tt> nebude mít problémy s diskem 
specifikovaným písmenem, ale boot manager pak nebude schopný tento 
soubor správně interpretovat a bude hlásit, že nemůže rozeznat 
nabízenou cestu.

<p>
Po rebootu bude Vista jako první v seznamu boot manageru, následovaná OpenBSD. Vybráním jedné z položek se nabootuje vybraný
operační systém.

<p>
Pokud se nic neděje, tak se rozhlédněte v Ovládacíh panelech po informacíh
o bootou. Pravděpodobně máte Windows boot nastaven bez prodlevy a tak 
nemůžete vidět boot menu. Toto můžete také využití k defaultnímu bootování
OpenBSD.

<p>
Pro více informací si přečtěte <tt>bcdedit</tt> nápovědu pomocí:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /?
</pre></blockquote>

<p>
nebo prohledáním Microsoft dokumentace a web stránky. Dobrý
úvod je v tomto TechNet
<a href="http://technet.microsoft.com/en-us/library/cc721886%28WS.10%29.aspx">
Frequently Asked Questions</a> článku.

<p>
Pro ty, kterým nevyhovuje ruční konfigurace nabízí
<a href="http://neosmart.net/dl.php?id=1">EasyBCD</a> GUI alternativu.

<h3>Windows 7</h3>

<p>
Microsoft rozšířil BCD od vydání Vista aby umožnil více verzím
Windows bootovat přes <tt>bcdedit</tt>.  Díky této větší kontrole 
je potřeba pět příkazů pro konfiguraci multiboot prostředí s OpenBSD.

<p>
Po nakopírování OpenBSD PBR na Windows 7 systémovou partition, 
proveďte následující příkaz pro inicializaci nutných věcí 
v registrech:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /create /d "OpenBSD/i386 4.8" /application bootsector
The entry {0154a872-3d41-11de-bd67-a7060316bbb1} was successfully created.

C:\Windows\system32>
</pre></blockquote>

<p>
Jak již bylo zmíněno předtím, 
<tt>{0154a872-3d41-11de-bd67-a7060316bbb1}</tt> GUID se liší podle 
systému.  Hodnotu, kterou jste obdrželi na výstupu předchozího 
příkazu použijte v následujících příkazech:

<p>
<blockquote><pre>
C:\Windows\system32> bcdedit /set {0154a872-3d41-11de-bd67-a7060316bbb1} device boot
The operation completed successfully.

C:\Windows\system32> bcdedit /set {0154a872-3d41-11de-bd67-a7060316bbb1} path \openbsd.pbr
The operation completed successfully.

C:\Windows\system32> bcdedit /set {0154a872-3d41-11de-bd67-a7060316bbb1} device partition=c:
The operation completed successfully.

C:\Windows\system32> bcdedit /displayorder {0154a872-3d41-11de-bd67-7060316bbb1} /addlast
The operation completed successfully.

C:\Windows\system32>
</pre></blockquote>

<h3>Další boot loadery</h3>

<p>
Některé další boot loadery, které OpenBSD uživatelé úspěšně použili včetně 
<a href="http://gag.sourceforge.net/">GAG</a>,
<a href="http://www.ranish.com/part/">Ranish Partition Manager</a>,
<a href="http://refit.sourceforge.net/">rEFIt</a>
a <a href="http://www.gnu.org/software/grub/">GRUB</a>. 

<p>

<h3>OpenBSD a Linux (i386)</h3>
<!-- XXXversion -->

<p>
Podívejte se prosím na 
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/4.8/i386/INSTALL.linux">INSTALL.linux</a>,
který nabízí detailní instrukce jak zprovoznit OpenBSD a Linux.

<h3>Problémy s časovými zónami</h3>
OpenBSD očekává real-time počítačové hodiny nastavené na UTC
(Universal Coordinated Time).
Některé jiné OS očekávají real-time hodiny nastavené na lokální čas.
Samozřejmě, že toto může způsobit nějáké problémy pokud používáte oba
OS na stejném počítači.
Jeden nebo druhý bude muset být upraven.
Více informací o tomto úkonu je v <a href="../faq8.html#TimeZone">FAQ 8 - Proč
je můj čas mimo o několik hodin?</a>

<a name= "SendDmesg"></a>
<h2>4.10 - Zaslání dmesg na dmesg@openbsd.org po instalaci</h2>

<p>
Pouze pro připomenutí lidem - pro OpenBSD vývojáře je důležité sledovat, který hardware funguje a který hardware nefunguje perfektně včetně hardware senzorů, které se v počítačích nacházejí.

<p>
Citace z /usr/src/etc/root/root.mail
<blockquote><pre>
Pokud chcete zajistit, že OpenBSD běží lépe na Vašich systémech, tak nám prosím
dejte šanci (poté co máte Váš mail systém nakonfigurován!) a použijte něco jako:
 # (dmesg; sysctl hw.sensors) | mail -s "Sony VAIO 505R laptop, apm works OK" dmesg@openbsd.org
aby jsme viděli, které konfigurace lidé používají.  Jak vidíte,
několik informací o Vašem počítači v předmětu nebo těle zprávy nám může pomoci
ještě více.  Použijeme tyto informace ke zlepšení podpory ovladačů zařízení
v příštích vydáních.  (Proveďte toto prosím s GENERIC jádrem,
ne s vlastním zkompilovaným jádrem, to jen v případě, že nefunguje GENERIC
jádro.  Pokud máte více-procesorový počítač, dmesg výsledky GENERIC.MP
a GENERIC jader jsou vítané.)  Informace o ovladačích hardware, které z toho
získáme nám pomohou opravit existující ovladače. Děkujeme!
</pre></blockquote>

<p>
Ujistěte se, že pošlete email z účtu, který je schopen emaily i přijímat.
Vývojáři Vás tak mohou kontaktovat pokud mají něco, co chtějí otestovat
nebo změnit pro zprovoznění Vaší konfigurace. Není důležité
poslat email z počítače, kde je zprovozněn OpenBSD, takže pokud 
ten počítač neumí přijímat emaily, tak udělejte

<pre>
$ (dmesg; sysctl hw.sensors) | mail your-account@yourmail.dom
</pre>
a poté přesměrujte zprávu na
<pre>
 dmesg@openbsd.org

</pre>
kde <tt>your-account@yourmail.dom</tt> je Váš platný emailový účet.

<p>
<b>POZNÁMKY</b>

<ul>
<li>Zašlete prosím pouzde dmesg z GENERIC jádra.
Upravená jádra, která mají ovladače zařízení odebrané nejsou užitečná.
<li>Pokud máte podporovány multiprocesorový systém a
normálně používáte GENERIC.MP jádro, tak pro vývojáře je užitečné vidět
dmesg výstup z GENERIC jádra a GENERIC.MP jádra. Prosím pošlete oba
v samostatných emailech.
<li>Dmesg jsou příjímány na počítači, který používá 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd</a>
systém.
To může způsobit, že Váš dmesg není mail serverem akceptován po nějakou dobu.
Buďte trpěliví, po půl hodině nebo hodině to projde.
</ul>

<p>
Metoda popsaná výše je jednoduchá, ale pokud jste se rozhodli nekonfigurovat email
na Vašem OpenBSD systému, tak stále můžete zaslat dmesg vývojářům.
Uložte dmesg výstup do textového souboru.

<pre>
$ (dmesg; sysctl hw.sensors) > ~/dmesg.txt
</pre>

Poté přeneste tento soubor (pomocí FTP/scp/floppydisk/carrier-pigeon/...) na
systém, který běžně používáte pro email.
Protože dmesg výstup, který zašlete je automaticky zpracováván, tak se ujistěte,
že jste zkontrolovali následující věci na alternativních email klientech/systémech:
<ul>
<li>Nastavte klienta pro zasílání emailů běžným textem;
    nepoužívejte HTML-formátované emaily.
<li>Vypněte jakékoliv vynucené zalamování řádků.
    Mnoho email klientů je nakonfigurováno pro vložení zalomení na 72.sloupci
    (norma pro mailing listy).
<li>Ujistěte se, že Váš email klient neformátuje zprávy do "tekoucí text"
    nesmyslů.
<li>Nezasílejte dmesg výstup jako přílohu.
    Vložte dmesg výstup do těla zprávy.
</ul>


<a name="AddFileSet"></a>

<h2>4.11 - Přidání setů po instalaci</h2>
<!-- XXXversion -->
"Ale ne!  Zapomněl jsem při instalaci nahrát jeden set!"
<p>
Někdy si vzpomenete, že OPRAVDU potřebujete <tt>comp48.tgz</tt> (nebo jinou
systémovou komponentu), ale při instalaci Vás tohle vůbec nenapadlo.
Dobrá zpráva: Jsou zde dvě snadné cesty, jak
přidat sety po prvotní instalaci:

<h3>Pomocí upgrade procesu</h3>
Jednoduše nabootujte instalační médium (CD-ROM nebo disketa) a vyberte Upgrade
(místo Install).  Jakmile se dostanete k seznamu setů pro
instalaci, tak vyberte sety, na které jste předtím zapomněli,
vyberte zdroj a nechte je nainstalovat.

<h3>Použitím tar(1)</h3>
Instalační sety jsou obyčejné komprimované tar soubory a můžete
je manuálně rozbalit z root adresáře file systému:

<p>
<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>

  # cd /
  # tar xzvphf comp48.tgz
</pre></td></tr></table>

<p>
NEZAPOMEŇTE na <tt>'p'</tt> volbu v předchozím příkazu aby
se přístupová práva souborů správně nastavila!
<p>
Běžná chyba je si myslet, že můžete použít
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
k přidání chybějících setů.  Toto nefunguje.  pkg_add(1) je
<a href="../faq15.html#PkgMgmt">nástroj na správu balíčků</a>
pro instalaci software třetí strany.
Pracuje se soubory balíčků a ne s tar soubory jako jsou instalační sety.


<p>
Pokud instalujete <tt>xbase</tt> set na Váš systém poprvé pomocí
tar(1) a bez rebootu, tak cache sdílených knihoven musí být
po instalaci aktulizována pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldconfig&amp;sektion=8"
>ldconfig(8)</a>.
Pro přidání všech X knihoven do cache použijte:

<blockquote><pre>
# <b>ldconfig -m /usr/X11R6/lib</b>
</pre></blockquote>

Případně můžete prostě provést reboot a toto bude uděláno
automaticky pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8"
>rc(8)</a> startovního skriptu.



<a name="bsd.rd"></a>
<h2>4.12 - Co je to 'bsd.rd'?</h2>

<b><tt>bsd.rd</tt></b> je "RAM Disk" jádro. Tento soubor může být velmi užitečný; mnoho vývojářů jej má umístěn na své root partition
systému po celou dobu.

<p>
Název "RAM Disk jádro" popisuje root file systém jádra
-- místo na fyzickém disku jsou utility dostupné po
bootu <tt>bsd.rd</tt> v jádře a spouští se z
file systému v RAM.  <tt>bsd.rd</tt> také obsahuje důležité
nástroje, které Vám umožňují údržbu systému a instalaci.

<p>
Na některých platformách je <tt>bsd.rd</tt> preferovaná 
instalační technika -- umístíte toto jádro na existující 
file systém, nabootujete jej a spustíte z něj instalaci.  Na většině 
platforem, pokud máte starší verzi OpenBSD stačí přes 
FTP stáhnout novou verzi <tt>bsd.rd</tt>, rebootovat z ní a 
nainstalovat novou verzi OpenBSD bez použití jakéhokoliv
výměnného média.


<p>
Zde je příklad bootování <tt>bsd.rd</tt> na i386 systému:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>
  Using Drive: 0 Partition: 3
  reading boot.....
  probing: pc0 com0 com1 apm mem[639k 255M a20=on]
  disk: fd0 hd0+
  &gt;&gt; OpenBSD/i386 BOOT 3.02
  boot&gt; <b>boot hd0a:/bsd.rd</b>
<i>. . . normal boot to install . . .</i>
</pre></td></tr></table>

Jak je ukazáno, tak budete přeneseni do instalačního programu, but you
can also drop to the shell to do maintenance on your system.
<p>
Obecné pravidlo pro bootování <tt>bsd.rd</tt> je změnit boot
jádro z <tt>/bsd</tt> na <tt>bsd.rd</tt> postupném platným
pro Vaši platformu.  


<a name="InstProb"></a>
<h2>4.13 - Běžné instalační problémy</h2>

<a name="cpq16m"></a>

<h3>4.13.1 - Můj Compaq rozpozná jen 16M RAM</h3>
<i>Některé</i> Compaq systémy mají problém, kdy celá RAM není
detekována
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">OpenBSD
second stage boot loaderem</a> správně a pouze 16M je detekováno
použito OpenBSD. Toto může být opraveno buď vytvořením/editováním
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot.conf&amp;sektion=8&amp;arch=i386"><tt>/etc/boot.conf</tt></a>
souboru nebo zadáním příkazů v "<tt>boot></tt>" promptu před
načtením OpenBSD.  Pokud máte počítač s 64M RAM, ale OpenBSD detekovalo
pouze prvních 16M, tak příkaz, který by jste měli použít je:

<pre>
     machine mem +0x3000000@0x1000000
</pre>

k přidání 48M (<tt>0x3000000</tt>) po prvních 16M
(<tt>0x1000000</tt>).  Typické řešení, pokud máte počítač s tímto problémem,
je zadat uvedený příkaz napřed v instalačním
disketa/CD-ROM <tt>boot></tt> promptu, nahrát systém, rebootovat a
vytvořit <tt>/etc/boot.conf</tt> soubor s výše napsaným příkazem v něm, takže
budoucí booty rozpoznají celou RAM.

<p>
Bylo také hlášeno, že ROM aktualizace toto na <i>některých</i>
systémech opraví.

<a name="noboot"></a>

<h3>4.13.2 - Moje i386 po instalaci nebootuje</h3>
Vaše instalace vypadá, že proběhla v pořádku, ale při prvním bootu nevidíte
žádné známky toto, že by se OpenBSD pokoušelo bootovat.  Je zde několik běžných
důvodů pro tuto situaci:

<ul>
<li><b>Žádná partition nebyla označena jako aktivní v fdisk(8).</b>  Pro opravu
rebootujte počítač pomocí boot diskety nebo média a označte("flag") 
partition jako "active" (bootovací). Podívejte se 
<a href="../faq14.html#fdisk">zde</a> a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">zde</a>.

<li><b>Źádný platný boot loader nebyl vůbec dán na disk.</b>
Pokud stisknete "Enter" nebo odpovíte "w" na otázku
"Use (W)hole disk or (E)dit the MBR?" během instalace nebo 
použijete "<tt>reinit</tt>" volbu v fdisk(8), tak
OpenBSD boot záznam je nahrán do Master Boot záznamu na disku;
v jiném případě je existující master boot kód nedotčen.  To může být
problém pokud jiný boot záznam neexistuje.
Jedno řešení je nabootovat znova
instalační médium, spustit shell a vyvolat

<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
pro aktualizaci MBR kódu z příkazové řádky:
<pre>
    # fdisk -u wd0
</pre>
Poznámka: "update" volba v interaktivním ("-e") módu
fdisku nezapíše "signature bytes" nutné k nastavení disku
jako bootovacího.

<li><b>Ve výjimečných případech se něco může stát s "second
stage boot loader" instalací.</b>  Reinstalace second stage boot
loaderu je diskutována <a href="../faq14.html#InstBoot">zde</a>.

</ul>

<a name="sshhang"></a>
<h3>4.13.3 - Můj (starší, pomalejší) počítač naběhl, ale stojí na ssh-keygen
krocích</h3>

Je velmi pravděpodobné, že Váš počítač běží dobře, ale trvá mu
dokončení generování ssh klíčů.  SPARCStation2 nebo Macintosh
Quadra mohou potřebovat <i>několik hodin</i> k dokončení tří
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;sektion=1">ssh-keygen(1)</a>
kroků.
Nechte to prostě dokončit; děje se tak jen jednou po instalaci.

<p>
Nezapomeňte, že defaultní velikost klíče se zvětšila od OpenBSD 3.8, takže
časy pro generování jsou mnohem delší než předtím.
Uživatelé velmi pomalých počítačů asi budou chtít generovat jejich klíče na jiném
počítači, umístit je do <a href="#site">site48.tgz</a> souboru a instalovat 
jej se zbytkem distribučních setů.


<a name="noftplist"></a>
<h3>4.13.4 - Obdržel jsem zprávu "Failed to change directory" při
instalaci</h3>

Při FTP instalaci 

<a href="../faq5.html#Flavors">snapshotu</a> během <i>-beta</i>
fáze OpenBSD vývojového cyklu můžete vidět toto:

<table border=0 width="90%"><tr><td nowrap bgcolor="#EEEEEE"><pre>

  Display the list of known ftp servers? [no] <b>yes</b>
  Getting the list from 192.128.5.191 (ftp.openbsd.org)... FAILED
  Failed to change directory.
  Server IP address or hostname? 
</pre></td></tr></table>

Toto je normální a očekávané chování během této pre-release části
cyklu.  Instalační program hledá FTP seznam na primárním FTP
server v adresáři, který není dostupný dokud nenastane

<a href="faq1.html#Next">release datum</a> a proto obdržíte výše uvedenou
zprávu.

<p>
Jednoduše použijte <a href="../../ftp.html">FTP mirror seznam</a> k nalezení
Vašeho oblíbeného FTP mirroru a manuálně zadejte jeho jméno když jste dotázáni.

<p>
<b>Poznámka: Toto by jste neměli vidět pokud instalujete <i>-release</i>
nebo z CD-ROM.</b>

<a name="blankfdisk"></a>
<h3>4.13.5 - Moje fdisk partition tabulka je poškozená nebo prázdná!</h3>

Příležitostně uživatel zjistí, že systém může fungovat, ale při vykonání
<tt>fdisk wd0</tt> vidí kompletně prázdnou (nebo občas nesmyslnou)
partition tabulku.
To je obvykle způsobeno vytvořením partition v 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
, která má offset nula sektorů místo
<a href="#trackoffset">offestu jedné stopy</a> jak má mít
(poznámka: předpokládá to <a href="../../i386.html">i386</a> nebo 
<a href="../../amd64.html">amd64</a> platformu.
Jiné platformy mají odlišné požadavky na offset, některé NEMAJÍ
offset).
Systém poté <a href="../faq14.html#Boot386">bootuje</a> pomocí PBR,
ne pomocí MBR.


<p>
I když tato konfigurace může fungovat, tak to může způsobit problém s
údržbou a mělo by to být opraveno.
Pro nápravu musí být file systémy na disku znovu vytvořeny od
začátku (pokud ale OPRAVDU víte co děláte, tak znova
vytvořit jen disklabel a MBR, čímž příjdete jen o první partition,
kterou pak můžete znovu vytvořit).

<a name="noflopcd"></a>
<h3>4.13.6 - Nemám disketovou nebo CD-ROM mechaniku v počítači</h3>
Některé počítače na kterých lidé chtějí používat OpenBSD nemají 
možnost použít klasickou instalaci OpenBSD pokud nemají disketovou 
nebo CD-ROM mechaniku. Buď byl počítat již takto navržen (např. 
mnoho laptopů a strojů založených na "flash" jako Soekris a ALIX 
systémy) nebo bootovací zařízení selhalo nebo bylo odebráno a 
je těžké jej nahradit. Zde jsou některé tipy a techniky jak OpenBSD 
nainstalovat na tyto systémy.

<ul>
<li>Síťový boot pomocí <a href="../faq6.html#PXE">PXE</a> (i386 nebo amd64) nebo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;sektion=8">diskless(8)</a>
(jiné platformy).

<li>Externí USB CD-ROM nebo USB disketa, pokud z nich váš počítač 
umí nabootovat.

<li>USB Flash disk nebo hard disk, opět pokud váš počítač umí bootovat z USB zařízení.
Připravte zařízení nebo jiný počítač jak je popsáno v 
<a href="../faq14.html#flashmemLive">FAQ 14</a>.
Nabootujte, ale vyberte bsd.rd jádro a poté instalujte jako normálně.
Také můžete mít sety před-nahrány na flash médiu.

<li> V nejhorším případě pokud nefunguje nic z předchozího, tak je 
většinou možné vytáhnout disk z cílového systému, použít vhodný 
adaptér pro instalaci do "normálního" počítače, nainstalovat OpenBSD 
a poté vrátit disk do cílového systému. OpenBSD poté krásně 
nabootuje na cílovém počítači, ale možná bude nutné upravit síťovou 
konfiguraci. Taky budete muset možná upravit <tt>/etc/fstab</tt> 
pokud jste (například) udělali instalaci pomocí USB->IDE/SATA 
adaptéru nebo váš cílový nebo instalační systém používá 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&amp;sektion=4">ahci(4)</a> a ostatní ne.
IDE a některé SATA disky se normálně detekují jako
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wd&amp;sektion=4">wd(4)</a>
zařízení, ale pokud jsou připojeny k USB adaptéru, tak se ukáží jako
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sd&amp;sektion=4">sd(4)</a>.
SATA disk připojený k 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&amp;sektion=4">pciide(4)</a>
rozhraní se ukáže jako wd(4), ale připojený k 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&amp;sektion=4">ahci(4)</a>
zařízení se ukáže jako sd(4) zařízení.
Ovšem jakmile opravíte <tt>/etc/fstab</tt> soubor, tak systém 
většinou nabootuje bez problémů.

</ul>

Pro všechny případy nezapomeňte, že počítač měl OS nainstalován i 
předtím a obvykle se počítalo s tim, že OS může být pře-instalován 
přímo na místě. Jak to bylo původně uděláno vám může poskytnout 
radu jak to udělat teď s OpenBSD.

<a name="shamismatch"></a>
<h3>4.13.7 - Při instalaci vidím, že SHA256 hash nesouhlasí!</h3>
Checksum kontroly jsou integrovány v instalačním kernelu pro souborové
sety, které jsou použity pro instalaci systému.

<p>
Aktuální <i>-release</i> souborové sety mají všechny souhlasit s jejich
uloženými checksumy.

<p>
<b>Občas <i>snapshoty</i> nemusí mít uloženy správné checksumy v 
instalačním kernelu.</b>
Tohle se stává z různých důvodů na straně serveru, kde probíhají buildy
a není to důvodem k panice pri použítí vývojových snapshotů.
Pokud z toho máte obavy, tak si počkejte na příští snapshot.


<a name="site"></a>
<h2>4.14 - Přizpůsobení instalačního procesu</h2>
<!-- XXXversion -->

<h3><tt>siteXX.tgz</tt> soubor</h3>
OpenBSD instalační/upgrade skripty umožňují výběr uživatelsky
vytvořených setů nazývaných "<tt>siteXX.tgz</tt>", kde XX znamená release
verzi (např. 48).  <tt>siteXX.tgz</tt> set je stejně jako ostatní

<a href="#FilesNeeded">sety</a> 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gzip&amp;sektion=1">gzip(1)</a>em
komprimovaný
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
archív zakořeněný v '/' a je rozbalován jako jiné sety s
volbami <tt>xzphf</tt>.  Tento set se instaluje jako poslední po
všech ostatních setech.

<p>
Tento set umožňuje uživateli přidat a/nebo přepsat soubory
instalované 'normalními' sety a upravit tak instalaci nebo
upgrade.

<p>
Můžete také vytvořit a použít hostname-specifické instalační sety, které jsou
pojmenovány <tt>siteXX-<i>&lt;hostname&gt;.tgz</i></tt>, například
"<tt>site48-puffy.tgz</tt>".
Toto umožňuje snadné přizpůsobení podle hostnames, upgrade nebo 
obnovení po nějáké katastrofě.


<p>
Některé příklady použití <tt>siteXX.tgz</tt> souboru:
<ul>
<li>Vytvořte siteXX.tgz soubor, který obsahuje všechny změny souborů, které
jste udělali od první instalace OpenBSD. Pak, když potřebujete obnovit
systém, tak jednoduše vyberete siteXX.tgz během re-instalace a všechny
Vaše změny jsou provedeny v nově nainstalovaném systému.

<li>Vytvořte sadu adresářů specifických podle počítače z nichž každý obsahuje
siteXX.tgz soubor, který obsahuje soubory specifické pro tyto počítače.
Instalace počítačů (např. s různými grafickými kartami) určité
kategorie může být udělána výběrem správného
siteXX.tgz souboru.

<li>Umístěte soubory, které pravidelně upravujete stejným nebo podobným způsobem
do siteXX.tgz souboru --
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8"
><tt>/etc/skel</tt></a> soubory,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5"
><tt>/etc/pf.conf</tt></a>, 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8"
><tt>/var/www/conf/httpd.conf</tt></a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&amp;sektion=8"
><tt>/etc/rc.conf.local</tt></a>,
atp. 

</ul>

<h3><tt>install.site</tt>/<tt>upgrade.site</tt> skripty</h3>
Jako poslední krok v instalačním/upgrade procesu se skripty dívají do
root adresáře nově instalovaného/upgradeovaného systému na
<tt>install.site</tt> nebo <tt>upgrade.site</tt> podle
aktuálního procesu a spouští tyto skripty v prostředí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=8">chroot</a>

vzhledem k instalovanému/upgradeovanému systémovému rootu.  Nezapomeňte,
upgrade se provádí z nabootovaného file systému, takže Váš cílový file systém
je aktuálně připojen do <tt>/mnt</tt>.
Ovšem díky chroot mohou být Vaše skripty napsány jakoby běželi
v "normálním" rootu Vašeho file systému.  Protože jsou tyto skripty
spouštěny poté, co jsou všechny soubory nainstalovány, tak již máte většinou k dispozici plně funkční systém (ovšem v single user módu) když vaše skripty běží. Nezapomeňte, že fungujete na minimálním 
jádru a ne všechny features jsou dostupné. A díky omezenému místu 
mohou věci, které fungují nyní přestat fungovat v budoucnu.

<p>
Nezapomeňte, že <tt>install.site</tt> skript má být v
<tt>siteXX.tgz souboru</tt> a <tt>upgrade.site</tt> skript má být
umístěn v root adresáři před upgrade nebo může být umístěn v
<tt>siteXX.tgz</tt> souboru.


<p>
Skripty mohou být použity k mnoha věcem:
<ul>
<li>K odstranění souborů po instalaci/upgrade, které nechcete mít
na systému.
<li> Smazání/upgrade/instalace
<a href="../faq15.html#PkgMgmt">balíčků</a> na instalovaném
systému (nemusí fungovat pro všechny balíčky!).
<li> K provedení <a href="../faq14.html#Backup">okamžitého backupu/archivace</a>
nového systému předtím než jej vystavíte zbytku světa.
<li>Použít
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rdate&amp;sektion=8">rdate(8)</a>

pro nastavení času systému.
</ul>

<p>
Kombinace <tt>siteXX.tgz</tt> a
<tt>install.site/upgrade.site</tt> souborů nabízí uživatelům
široké možnosti kustomizace bez nutnosti vytvářet jejich vlastní
upravené instalační sety.

<p>
Poznámka: pokud budete provádět instalaci z http serveru, tak budete
potřebovat přidat Váš <tt>site*.tgz</tt> soubor(y) do souboru
<tt>index.txt</tt> ve zdrojovém adresáři aby se ukazovali v seznamu
jako možnost k výběru při instalaci.
Toto není nutné pro FTP nebo jiné instalace.



<a name="Multiple"></a>
<h2>4.15 - Jak nainstaluji více podobných systémů?</h2>
Zde jsou některé nástroje, které můžete použít v případech, kdy chcete instalovat více podobných OpenBSD systémů najednou.

<h3><tt>siteXX.tgz</tt> a <tt>install/upgrade.site</tt> soubory</h3>
Podívejte se na <a href="#site">předchozí</a> část.

<h3>Obnovení z dump(8)</h3>

Na většině platforem boot média obsahují 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>
program, který může být použit k obnovení backupu udělaného pomocí 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>.
Takže můžete nabootovat z 
<a href="#MkFlop">floppy</a>, 
<a href="../orders.html">CD</a> nebo
<a href="#bsd.rd">bsd.rd</a> souboru, poté
<a href="../faq14.html#fdisk">fdisk</a>,
<a href="../faq14.html#disklabel">disklabel</a> a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore</a>
požadovanou konfiguraci z pásky nebo jiného média a nainstalovat
<a href="../faq14.html#InstBoot">boot blocks</a>. Více informací 
<a href="../faq14.html#Backup">zde</a>.

<h3>Klonování disků</h3>
Bohužel zde nejsou žádné klonovací programy, které mají povědomí o
FFS a uměli by udělat obraz pouze aktivního diskového prostoru.
Většina hlavních řešení zachází s OpenBSD partition jako
s "generic" partition a mohou udělat obraz celého disku. To
často splní Váš cíl, ale obvykle s velkým množstvím zbytečně zabraného
prostoru --  prázdná, 10G <tt>/home</tt> partition bude potřebovat 10G
místa v obrazu, i když v ní není ani jeden soubor.  Sice můžete
typicky nainstalovat obraz na větší disk, ale nebudete schopní přímo
použít volné místo a nebudete mít možnost nainstalovat obraz
na menší disk.

<p>
Pokud je to akceptovatelná situace, tak 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd</a>

příkaz udělá co potřebujete, umožní Vám kopírovat disk na jiný,
sektor po sektoru.  Toto nabízí stejnou funkčnost jako komerční
programy, ale bez poplatků.

<a name="getdmesg"></a>
<h2>4.16 - Jak získám dmesg(8) pro nahlášení instalačního problému?</h2>
Když <a href="../../report.html">nahlašujete problém</a>, tak je kriticky důležité
přiložit kompletní systémový
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>.
Nicméně většinou když tohle potřebujete, tak je to proto, že systém
nepracuje správně nebo nejde nainstalovat, takže nemusíte mít disk, síť
nebo jiné zdroje, které potřebujete pro zaslání dmesg na odpovídající
<a href="../../mail.html">mail list</a>.  Přesto jsou zde jiné možnosti:

<ul>
<li><b>Disketa:</b>  Boot disky a CD-ROM mají dostatek nástrojů
pro nahrání dmesg na MSDOS disketu pro čtení na jiném
počítači.  Vložte MSDOS formátovanou disketu do mechaniky a vykonejte
následující příkazy:

<pre>
     mount -t msdos /dev/fd0a /mnt
     dmesg >/mnt/dmesg.txt
     umount /mnt

</pre>
Pokud máte jiný OpenBSD systém, tak můžete také zapisovat na OpenBSD
kompatibilní disketu -- obvykle má boot disketa dostatek volného místa pro
uložení dmesg.  V tom případě vynechejte "<tt>-t msdos</tt>" z příkazu nahoře.

<p>
<li><b>Sériová konzole:</b>
Použití sériové konzole a zachycení výstupu na jiném počítači je často
nejlepší cesta k získání diagnostických informací - specificky pokud
pokud počítač vyvolá panic hned při bootu.
Stejně jako druhý počítač, tak i Vy budete potřebovat odpovídající sériový kabel
(často tzv. nulový modem) a program emulující terminál pro zachycení
výstupu obrazovky do souboru.

<p>
Obecné informace o nastavení sériové konzole jsou
<a href="../faq7.html#SerCon">jinde ve FAQ</a>;
pro získání logu instalace jsou následující příkazy
obvykle dostačující.

<p><b>i386</b>

<p>
V boot loader promptu zadejte


<p>
<blockquote>
<pre>
boot> <b>set tty com0</b>
</pre>
</blockquote>

<p>
To říká OpenBSD aby použil první sériový port (často nazývaný
COM1 nebo COMA v PC dokumentaci) jako sériovou konzoli.
Defaultní baud rychlost je 9600.

<p><b>Sparc/Sparc64</b>

<p>
Tyto počítače automaticky použijí sériovou konzoli, pokud jsou spuštěny
bez připojené klávesnice.
Pokud máte klávesnici a monitor připojené, tak stále můžete systému vnutit
použití sériové konzole s následující posloupností příkazů v
<tt>ok</tt> promptu.


<p>
<blockquote>
<pre>
ok <b>setenv input-device ttya</b>
ok <b>setenv output-device ttya</b>
ok <b>reset</b>
</pre>
</blockquote>

</ul>
<p>

<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq3.html">[Do sekce 3 - Začínáme s OpenBSD]</a>
<a href= "../faq5.html">[Do sekce 5 - Sestavení systému ze zdrojů]</a>
</font>

<p>
<hr>

<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt= "[back]"></a> 
<a href= "mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq4.html,v 1.305 ]<br>
$Translation: faq4.html,v 1.42 2010/11/04 16:17:04 bodie Exp $<br>
-->
$OpenBSD: faq4.html,v 1.38 2010/11/06 00:17:30 ajacoutot Exp $
</small>
</body>
</html>
