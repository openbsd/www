<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>13 - Multimedia</title>

<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD FAQ page">
<meta name="keywords" content="openbsd,faq">
<meta name="distribution" content="global">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">

<!--
Copyright (c) 2005, Steven Mestdagh <steven.mestdagh@esat.kuleuven.be>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
--></head>



<body bgcolor="#ffffff" text="#000000">

<a href="../index.html">
<img alt="[OpenBSD]" src="../../images/smalltitle.gif" border="0" height="30" width="141">    
</a>
<p>
<font color="#0000e0">
<a href="http://www.openbsd.org/faq/index.html">[FAQ Index]</a>
<a href="http://www.openbsd.org/faq/faq12.html">[Sekcja 12 - Pytania dotycz±ce poszczególnych platform]</a>
<a href="http://www.openbsd.org/faq/faq14.html">[Sekcja 14 - Konfiguracja Dysku]</a>
</font>

</p><h1><font color="#e00000">13 - Multimedia</font></h1><hr>

<h3>Spis tre¶ci</h3>
<ul>
<li><a href="#confaudio">13.1 - Jak ustawiæ urz±dzenie audio?</a>
</li><li><a href="#playaudio">13.2 - Odtwarzanie ró¿nych rodzajów audio</a>
</li><li><a href="#playCD">13.3 - Jak odtworzyæ audio CD w OpenBSD?</a>
</li><li><a href="#recordaudio">13.4 - Czy mogê u¿yæ OpenBSD do nagrywania d¼wiêku?</a>
</li><li><a href="#lossyaudio">13.5 - Opowiedz mi o kodowaniu Ogg Vorbis i MP3?</a>
</li><li><a href="#playDVD">13.6 - Jak odtwarzaæ video DVD w OpenBSD?</a>
</li><li><a href="#burnCD">13.7 - Jak wypalaæ p³yty CD i DVD?</a>
<ul>
  <li><a href="#burnIntro">13.7.1 - Wprowadzenie i podstawowe ustawienia</a>
  </li><li><a href="#writeCD">13.7.2 - Nagrywanie CD</a>
  </li><li><a href="#writeDVD">13.7.3 - Nagrywanie DVD</a>
</li></ul>
</li><li><a href="#convert">13.8 - Chcê mieæ pliki audio/video w formacie FOO.</a>
</li><li><a href="#streaming">13.9 - Czy mo¿na odtwarzaæ media strumieniowe w OpenBSD?</a>
<!--
<li><a href="#camera"     >13.xx - Can I use my digital camera under OpenBSD?</a>
<li><a href="#scanner"    >13.yy - How do I set up and use my scanner?</a>
-->
</li></ul>
<hr>

<a name="confaudio"></a>
<h2>13.1 - Jak ustawiæ urz±dzenie audio?</h2>

W OpenBSD urz±dzeniami audio s±: <tt>/dev/audio</tt>,
<tt>/dev/sound</tt>, <tt>/dev/audioctl</tt> i <tt>/dev/mixer</tt>.
Wprowadzenie do warstwy sterowników audio jest na tej
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=audio&amp;sektion=4">audio(4)</a>
stronie podrêcznika.
<p>
Wszystkie obs³ugiwane sterowniki audio s± zawarte w GENERYCZNYM kernelu,
wiêc nie trzeba dodatkowo konfigurowaæ czy instalowaæ sterowników.
Aby poznaæ dodatkowe opcje dla konkretnego chipsetu który posiadasz,
musisz dowiedzieæ siê jakim chipsetem dysponujesz. Listê obs³ugiwanych
chipów mo¿esz znale¼æ na stronie zgodno¶ci sprzêtowej dla twojej
<a href="../plat.html">platformy</a>.
W sytuacji gdy posiadasz ju¿ dzia³aj±ce OpenBSD, poszukaj sterownika d¼wiêki
w wyj¶ciu polecenia 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=1">dmesg(1)</a>,
i przeczytaj stronê manuala by poznaæ wiêcej informacji, jak opcje
i inne szczegó³y dotycz±ce sterownika.

Przyk³adowe wyj¶cie dla urz±dzenia audio w dmesg:

</p><blockquote><pre>auich0 at pci0 dev 31 function 5 "Intel 82801BA AC97" rev 0x04: irq 10, ICH2 AC97
ac97: codec id 0x41445360 (Analog Devices AD1885)
ac97: codec features headphone, Analog Devices Phat Stereo
audio0 at auich0
</pre></blockquote>

<p>
Mo¿esz przetestowaæ twoje urz±dzenie audio dzia³a poprawnie, wysy³aj±c
do niego plik audio (zazwyczaj z rozszerzeniem .au).
Je¿eli nie posiadasz pliku audio, mo¿esz tak¿e wys³aæ plik tekstowy
lub binarny:

</p><blockquote><pre>$ <strong>cat filename &gt; /dev/audio</strong>
</pre></blockquote>

Je¿eli us³yszysz cokolwiek (je¿eli nie jest to plik audio d¼wiêk mo¿e nie
byæ za dobry i mo¿e byæ za g³o¶ny), oznacza to ¿e twój chipset jest wspierany
przez OpenBSD oraz ¿e zosta³ rozpoznany i skonfigurowany podczas startu.

W przeciwnym wypadku jest kilka mo¿liwo¶ci:
<ul>
<li>Plik który wys³a³e¶ do urz±dzenia audio by³ za ma³y ¿eby¶ móg³ go
us³yszeæ. Spróbuj ponownie z plikiem co najmniej 10kB.
</li><li>
Chipset zosta³ rozpoznany i skonfigurowany poprawnie, ale d¼wiêk jest 
wyciszony i musi zostaæ w³±czony, patrz poni¿ej.
</li><li>
Chipset zosta³ rozpoznany ale nie skonfigurowany poprawnie.
Byæ mo¿e posiadasz star± kartê ISA, która musi byæ skonfigurowana
z innym adresem I/O lub IRQ aby unikn±æ konfliktów z innymi urz±dzeniami.
Mo¿esz w prosty sposób wypróbowaæ inne kombinacje korzystaj±c z 
<a href="http://www.openbsd.org/faq/faq5.html#BootConfig">User Kernel Configuration (UKC)</a>.
</li><li>Twoja karta/chipset nie jest w pe³ni wspierany.
</li></ul>

<p>
<b>Uwaga:</b>
Nie ka¿dy wariant i u¿yteczno¶æ ka¿dego chipsetu by³a testowana i odpluskwiana.

</p><p>
Aby dostosowaæ parametry urz±dzeñ audio, takie jak szybko¶æ odtwarzania, mo¿esz
wykorzystaæ
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=audioctl&amp;sektion=1">audioctl(1)</a>.
Do zmian g³o¶no¶ci i innych ustawieñ miksera, mo¿esz u¿yæ
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mixerctl&amp;sektion=1">mixerctl(1)</a>.
Obydwa narzêdzia dostarczane s± jako podstawowa czê¶æ systemu.

</p><p>
Dla przyk³adu, aby ustawiæ g³o¶no¶æ na lewym i prawym kanale na 200,
móg³by¶, przyk³adowo (zobacz Notatkê 2 poni¿ej), wydaæ

</p><blockquote><pre>$ <strong>mixerctl outputs.master=200,200</strong>
outputs.master: 255,255 -&gt; 207,207
</pre></blockquote>

Zauwa¿ ¿e warto¶æ ustawi³a siê na 207.
Powodem tego jest, ¿e moja karta d¼wiêkowa posiada kodek AC'97, który
u¿ywa tylko 5 bitów do kontroli g³o¶no¶ci, dostarczaj±c tylko 32 mo¿liwe
poziomu.
Oczywi¶cie inne urz±dzenia mog± mieæ inn± rozdzielczo¶æ.

<p>
Aby w³±czyæ (unmute) g³ówny kana³, móg³by¶ wykonaæ

</p><blockquote><pre>$ <strong>mixerctl outputs.master.mute=off</strong>
outputs.master.mute: on -&gt; off
</pre></blockquote>
<p>
Aby uczyniæ twoje zmiany trwa³ymi bêdziesz musia³ wyedytowaæ 
<i>/etc/mixerctl.conf</i>, dla przyk³adu:

</p><blockquote><pre>$ <strong>cat /etc/mixerctl.conf</strong>
outputs.master=200,200
outputs.master.mute=off
outputs.headphones=160,160
outputs.headphones.mute=off
</pre></blockquote>

<b>Notatka 1:</b>
Mo¿esz zobaczyæ wiêcej wyj¶æ ni¿ jest na twojej karcie d¼wiêkowej na p³ycie
g³ównej. Dzieje siê tak dlatego, ¿e chipsety d¼wiêki s± generalnie tañsze
w instalacji na p³ycie ni¿ wyprowadzenia wykorzystywane do pod³±czania
wyj¶æ, zatem nie ka¿da opcja w ka¿dym urz±dzeniu audio zostaje
wyprowadzona na ¶wiat zewnêtrzny.

<p>
<b>Notatka 2:</b>
Wyj¶cia twojego urz±dzenia d¼wiêkowego mog± byæ oznaczane inaczej.
Dla przyk³adu, mo¿esz nie posiadaæ "outputs.master" jak w powy¿szym
przyk³adzie, zamiast tego mo¿esz posiadaæ "outputs.output", lub co¶
jeszcze innego. To zale¿y od sterownika i mo¿esz bardzo ³atwo znale¼æ
w³a¶ciw± nazwê korzystaj±c z 

</p><blockquote><pre>$ <b>mixerctl -a</b>
</pre></blockquote>


<a name="playaudio"></a>
<h2>13.2 - Odtwarzanie ró¿nych rodzajów audio</h2>

<h3>D¼wiêk cyfrowy</h3>

<h4>Bezstratne formaty d¼wiêków (AU, PCM, WAV, FLAC, TTA)</h4>

Do odtwarzania niektórych bezstratnych formatów d¼wiêków nie potrzeba 
specjalnych programów, je¶li zawieraj± nieskompresowane cyfrowe próbki 
d¼wiêków w postaci ci±gów bajtów. Te formaty to miêdzy innymi Sun audio 
(AU), surowe (raw) pliki PCM (bez nag³ówków) i RIFF WAV.

<p>
Aby odtworzyæ taki plik, trzeba znaæ jego podstawowe parametry: sposób 
kodowania, liczba kana³ów, czêstotliwo¶æ próbkowania, liczba bitów na 
próbkê. Parametry te pokazuje program
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=file&amp;sektion=1">file(1)</a>

</p><blockquote><pre>$ <strong>file music.au</strong>
music.au:  Sun/NeXT audio data: 16-bit linear PCM, stereo, 44100 Hz
</pre></blockquote>

<blockquote><pre>$ <strong>file music.wav</strong>
music.wav: Microsoft RIFF, WAVE audio data, 16 bit, stereo 44100 Hz
</pre></blockquote>

O tych przyk³adowych plikach trzeba jeszcze wiedzieæ, ¿e ich kolejno¶æ 
zapisu bajtów to little-endian, za¶ sposób kwantyzacji jest liniowy ze znakiem.
Mo¿na to sprawdziæ programem
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hexdump&amp;sektion=1">hexdump(1)</a>.
Nie jest to mo¿liwe w przypadku plików bez nag³ówków (raw).

Parametry nale¿y ustawiæ programem
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=audioctl&amp;sektion=1">audioctl(1)</a>.

<blockquote><pre>play.encoding=slinear_le
play.rate=44100
play.channels=2
play.precision=16
</pre></blockquote>

Nastêpnie przekierowaæ plik d¼wiêkowy do urz±dzenia sound:

<blockquote><pre>$ <strong>cat music.au &gt; /dev/sound</strong>
</pre></blockquote>

Je¶li zosta³y ustawione odpowiednie parametry, spodziewany d¼wiêk bêdzie s³yszalny.

<p>
Uwaga: Aby parametry ustawione przez audioctl pozostawa³y niezmienione, nale¿y u¿ywaæ <tt>/dev/sound</tt>, a nie <tt>/dev/audio</tt>.

</p><p>
S± te¿ inne programy, dla przyk³adu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=aucat&amp;sektion=1">aucat(1)</a>,
i <tt>audio/waveplay</tt> w pakietach i portach.
Popularne programy typu XMMS równie¿ odtwarzaj± te pliki, a tak¿e pliki d¼wiêkowe w innych formatach.

</p><p>
S± te¿ formaty d¼wiêków u¿ywaj±ce kompresji bezstratnej.
Przyk³adami takich formatów s± Free Lossless Audio Codec (FLAC) i TTA.
Implementacja FLACa zosta³a sportowana dla OpenBSD, znajduje siê w
<tt>audio/flac</tt> w pakietach i portach.

</p><h4>Formaty d¼wiêku u¿ywaj±ce kompresji stratnej (Ogg Vorbis, MP3, WMA, AAC)</h4>

Metody kompresji stratnej s± czêsto u¿ywane do zapisu d¼wiêków innych plików z mediami.
Podczas tego procesu czê¶æ danych jest tracona, ale w ten sposób
Istot± tej kompresji jest odrzucenie czê¶ci danych podczas kompresji,
lecz w taki sposób by skompresowany rezultat by³ wci±¿ bardzo u¿yteczny i
posiada³ wystarczaj±c± jako¶æ do odtwarzania.
Zalet± tego typu technik z wysokim wspó³czynnikiem kompresji, jest ograniczenie
niezbêdnej przestrzeni dyskowej oraz wymagañ przepustowo¶ci.

<p>
Dobrym przyk³adem jest wolnu, otwarty i nieopatentowany format
<a href="http://www.vorbis.com/">Ogg Vorbis</a>.
Aby odtwarzaæ pliki Ogg Vorbis, mo¿esz skorzystaæ z narzêdzia ogg123,
które znajduje siê w pakiecie <tt>audio/vorbis-tools</tt>.
Przyk³adowo:

</p><blockquote><pre>$ <strong>ogg123 music.ogg</strong>

Audio Device:   Sun audio driver output

Playing: music.ogg
Ogg Vorbis stream: 2 channel, 44100 Hz
Time: 00:02.95 [02:21.45] of 02:24.40  (133.1 kbps)  Output Buffer  87.5%
</pre></blockquote>

Oczywi¶cie wtyczki dla formatu Ogg Vorbis istniej± dla ka¿dego innego
oprogramowania d¼wiêkowego.

<p>
Innym przyk³adem jest bardzo popularny kodowanie MPEG-1 Audio Layer 3 (MP3),
które jest, b±d¼ co b±d¼, objête zagadnieniami licencyjnymi i patentowymi.
Wiele narzêdzi odtwarza pliki MP3, po prostu zobacz zawarto¶æ sekcji
<tt>audio</tt> w systemie pakietów i portów i wybierz taki jaki ci pasuje.

</p><p>
Co z prawnie zastrze¿onym formatem Windows Media Audio (WMA)? 
Te pliki mog± byæ odtwarzane przy pomocy <tt>x11/mplayer</tt> 
który korzysta miedzy innymi z 
<a href="http://ffmpeg.sourceforge.net/">FFmpeg</a>.

</p><p>
Dobrym punktem wyj¶cia by dowiedzieæ siê wiêcej o ró¿nych formatach
audio jest artyku³ w Wikipedii:
<a href="http://en.wikipedia.org/wiki/Audio_file_format">Audio file formats</a>.

</p><h3>D¼wiêki syntetyczne</h3>

<h4>MIDI</h4>
Protokó³ Musical Instrument Digital Interface (MIDI) dostarcza
standaryzowanych oraz wydajnych metod by przedstawiæ wykonane muzycznie 
informacje jako elektroniczne dane. Pliki MIDI mog± byæ niezwykle ma³e 
w porównaniu z przyk³adowymi plikami audio, poniewa¿ zawieraj± tylko 
instrukcje niezbêdne syntetyzerowi do odtworzenia d¼wiêku.

<p>
Dwie powszechnie stosowane technologie w muzyce syntetycznej to:
</p><ul>
<li>Synteza Modulacji Czêstotliwo¶ciowej (Frequency Modulation - FM):
starsza metoda która aproksymuje numeryczn± reprezentacjê fali d¼wiêkowej
korzystaj±c z szeregu parametrów; generalnie s³abszej jako¶ci, niedroga
w implementacji i dlatego wykorzystywana w wielu kartach d¼wiêkowych.
</li><li>Synteza Wavetable: nowsza metoda wykorzystuj±ca ma³e cyfrowe nagrania
prawdziwych instrumentów; lepsza jako¶æ d¼wiêku, wymaga wbudowania pamiêci,
wykorzystywana tylko w bardziej kosztownych kartach d¼wiêkowych.
</li></ul>

<p>
Wiêkszo¶æ niezbêdnych informacji o MIDI w OpenBSD mo¿esz znale¼æ na stronie
manuala
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=midi&amp;sektion=4">midi(4)</a>.

</p><p>
Podstawowym narzêdziem do obs³ugi standardu MIDI jest
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=midiplay&amp;sektion=1">midiplay(1)</a>.
Aby uzyskaæ listê urz±dzeñ MIDI dostêpnych w twoim systemie, spróbuj:

</p><blockquote><pre>$ <strong>midiplay -l</strong>
0: SB MIDI UART
1: SB Yamaha OPL3
2: PC speaker
</pre></blockquote>

W tym przyk³adzie, widzimy wyj¶cie UART do którego mo¿na pod³±czyæ
zewnêtrzne urz±dzenie MIDI, syntezator Yamaha OPL3 FM, oraz stary
prosty g³o¶nik.

<p>
<b>Uwaga:</b>
Nie wszystkie karty d¼wiêkowe posiadaj± wbudowany syntezator MIDI, zatem mo¿esz
zobaczyæ tylko wyj¶cie UART oraz g³o¶nik PC.

</p><p>
Odtwarzanie standardowego pliku MIDI, w tym przypadku przez syntezator OPL3
jest tak proste jak:

</p><blockquote><pre>$ <strong>midiplay -d 1 file.mid</strong>
</pre></blockquote>

Zauwa¿ ¿e okre¶lili¶my urz±dzenie MIDI numer 1 jako parametr poniewa¿
urz±dzenie numer 0 jest wykorzystywane domy¶lnie.

<p>
Wiêcej informacji: <a href="http://www.harmony-central.com/MIDI/Doc/tutorial.html">Tutorial
on MIDI and Music Synthesis</a>

</p><h4>MOD</h4>

Modu³ Soundtracker jest binarnym formatem mieszaj±cym próbki audio
w ustalonej kolejno¶ci, pozwalaj±c odtwarzaæ ca³kiem d³ugie fragmenty
muzyki cyfrowej w rozs±dnie dobrej jako¶ci.

<p>
Najprostrz± metod± odtworzenia ulubionych plików MOD w OpenBSD jest
prawdopodobnie skorzystanie z XMMS-a, dostêpnego poprzez porty i pakiety.
Powiniene¶ zainstalowaæ subpakiet <tt>-mikmod</tt> pozwalaj±cy XMMS-owi
na korzystanie z biblioteki MikMod, obs³uguj±cej formaty MOD, S3M oraz XM.

</p><p>
Powiniene¶ tak¿e znale¼æ szereg tak zwanych "traskerów" w sekcji <tt>audio</tt>
kolekcji pakietów i portów, np. tracker, soundtracker.
Dziêki nim nie tylko bêdziesz móg³ odtwarzaæ ale tak¿e generowaæ swoje w³asne
modu³y.
Zauwa¿my jednak, ¿e nie ka¿dy format trackera jest obs³ugiwany przez narzêdzia
w drzewie portów.
Zawsze mile widziane jest 
<a href="http://www.openbsd.org/porting.html">dostarczenie portu</a>
obs³uguj±cego twój ulubiony format trackera.


<a name="playCD"></a>
</p><h2>13.3 - Jak odtwarzaæ audio CD w OpenBSD?</h2>

Chc±c odtwarzaæ p³yty CD audio korzystaj±c z analogowego wyj¶cia w twoim napêdzie
CD-ROM, mo¿esz
<ul>
<li>Skorzystaæ z wyj¶cia s³uchawkowego, zazwyczaj znajduj±cego siê na panelu frontowym napêdu.
<li>Pod³±cz wyj¶cie audio z tylnej strony napêdu do twojej karty d¼wiêkowej. Tak,
to jest dodatkowy kabel po kablach danych (SCSI/IDE) i zasilania.
</ul>

<p>
Mi³ym narzêdziem pracuj±cym w linii poleceñ jest
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cdio&amp;sektion=1">cdio(1)</a>,
w³±czone do systemu bazowego. Wywo³ane bez parametrów przejdzie w tryb 
interaktywny. Je¿eli chcesz odtworzyæ p³ytê CD, po prostu wpisz

</p><blockquote><pre>$ <strong>cdio play</strong>
</pre></blockquote>

<p>
Domy¶lnie spowoduje to czytanie pierwszego napêdu CD-ROM, <tt>cd0</tt>.
Zauwa¿, ¿e u¿ytkownik uruchamiaj±cy cdio musi mieæ uprawnienia do czytania
z urz±dzenia CD-ROM.
Jako, ¿e to urz±dzenie ma domy¶lnie grupê operator, jego uprawnienia mog±
byæ ustawione:

</p><blockquote><pre># <strong>chmod o+r /dev/rcd0c</strong>
</pre></blockquote>

<p>
Je¿eli pragniesz piêknego GUI, jest mnóstwo opartych o X11 odtwarzaczy CD
w kolekcji pakietów i portów.
Po prostu zobacz do sekcji <tt>audio</tt>.


<a name="recordaudio"></a>
</p><h2>13.4 - Czy mogê u¿yæ OpenBSD do nagrywania d¼wiêków?</h2>

Tak, mo¿esz to zrobiæ korzystaj±c z /dev/sound lub /dev/audio jako urz±dzeñ wej¶ciowych.
<p>
Najpierw, ustaw poprawne parametry nagrywania przy pomocy
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=audioctl&amp;sektion=1">audioctl(1)</a>,
np.

</p><blockquote><pre>record.encoding=mulaw
record.rate=8000
record.channels=1
record.precision=8
</pre></blockquote>

Tutaj korzystam z nierównomiernego kwantowania w algorytmie mu-law, z 
jednym kana³em i próbkowaniem 8000 Hz oraz 8-bitami na próbkê. Algorytmy 
mu-law i A-law s± szczególnie u¿yteczne podczas cyfrowego nagrywania 
mowy, poniewa¿ osi±gaj± wy¿sz± wydajno¶æ kodowania. Oznacza to, ¿e jako¶æ
pobranej próbki mowy, bêdzie lepsza dla ustalonej liczby bitów na próbkê,
lub wiêcej bitów bêdzie wymagane dla ustalonej jako¶ci.

<p>
Je¿eli zdecydujesz zaadoptowaæ powy¿sze warto¶ci (tylko te!), mo¿esz u¿yæ
urz±dzenie /dev/audio które u¿ywa ich domy¶lnie, zatem nie bêdziesz musia³
ustawiaæ ich bezpo¶rednio.

</p><p>
Nastêpnie upewnij siê, ¿e wybra³e¶ w³a¶ciwe urz±dzenie do nagrania oraz ¿e 
¼ród³o nie jest wyciszone.
Mo¿esz ustawiæ wymagane parametry korzystaj±c z 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mixerctl&amp;sektion=1">mixerctl(1)</a>.
Dla przyk³adu:

</p><blockquote><pre>inputs.mic.mute=on
inputs.mic.preamp=on
inputs.mic.source=mic0
record.source=mic
record.volume=255,255
record.volume.mute=off
record.mic=0
record.mic.mute=off
</pre></blockquote>

W tym przyk³adzie, nagrywa³em z mikrofonu.

W³±czone zosta³o wstêpne wzmocnienie, inaczej nagrany d¼wiêk mo¿e byæ do¶æ
cichy.

<p>
Do aktualnego zapisu, po prostu wykorzystaj
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cat&amp;sektion=1">cat(1)</a>
lub
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd(1)</a>:

</p><blockquote><pre>$ <strong>dd if=/dev/audio of=myvoice.raw</strong>
</pre></blockquote>

Naci¶nij [CTRL]-C by zakoñczyæ nagrywanie.
Wyj¶cie jest surow± sekwencj± bajtów.
D¼wiêk ten mo¿e byæ odtworzony jak wyja¶niono w 
<a href="#playaudio">Odtwarzanie ró¿nych rodzajów audio</a>.
Dla szybkiego testu, zak³adaj±c ¿e parametry audio s± ustawione w³a¶ciwie:

<blockquote><pre>$ <strong>dd if=myvoice.raw of=/dev/audio</strong>
</pre></blockquote>

<p>
Jeszcze raz, je¿eli ustawi³e¶ inne parametry kodowania, powiniene¶
korzystaæ z urz±dzenia /dev/sound.

Inny przyk³ad parametrów kodeka:
</p><blockquote><pre>record.encoding=slinear_le
record.rate=22050
record.channels=2
record.precision=8
</pre></blockquote>

Spowoduje to nagraniem PCM z oznaczonym liniowym (uniform) kwantowaniem,
zapisanym w uporz±dkowanym little-endian, z próbkowaniem 22050 Hz, stereo,
oraz 8-bitowym odwzorowaniem pojedynczej próbki
(2^8 = 256 poziomów kwantowania).

<p>
<b>Uwaga:</b>
Prawdopodobnie bêdziesz chcia³ skonwertowaæ ten zapis w surowym (headerless)
formacie na bardziej u¿yteczny w dalszym procesie.
Przeczytaj <a href="#convert">FAQ 13 - Konwertowanie</a>.


<a name="lossyaudio"></a>
</p><h2>13.5 - Powiedz mi o kodowaniu Ogg Vorbis i MP3?</h2>

O formatach tych by³a wzmianka w 
<a href="#playaudio">Odtwarzaniu ró¿nych formatów d¼wiêku</a>.
W tej sekcji podamy krótkie wprowadzenie o kodowaniu tych plików.
Je¿eli jeste¶ zainteresowany jak dzia³aj± te kodeki audio, wiêcej
do przeczytania znajdziesz poprzez artyku³y Wikipedii o 
<a href="http://en.wikipedia.org/wiki/Vorbis">Vorbis</a> oraz
<a href="http://en.wikipedia.org/wiki/MP3">MP3</a>.

<h3>Ogg Vorbis</h3>

Kodowanie raw, WAV lub AIFF do 
<a href="http://www.vorbis.com/">Ogg Vorbis</a> mo¿e byæ wykonane przy pomocy
narzêdzia <b>oggenc</b>, zawartego w pakiecie<tt>audio/vorbis-tools</tt>,
który jest dostêpny w OpenBSD poprzez system portów i pakietów.

<p>
Powiedzmy ¿e posiadasz kilka plików WAV, gotowych do kodowania, przyk³adowo
twój ulubiony album, zgrany w³a¶nie z CD.
Aby przekodowaæ te pliki korzystaj±c w przybli¿eniu z 192 kbps, mo¿esz wykorzystaæ
polecenie podobne do
</p><blockquote><pre>$ <strong>oggenc *.wav -b 192</strong>
</pre></blockquote>

Po skoñczeniu, otrzymasz zestaw plików .ogg w aktualnym katalogu.
Wiêcej rozbudowanych przyk³adów, podobnie jak opcji kodowania, znajdziesz
na stronie manuala do oggenc.

<h3>MPEG-1 Audio Layer 3 (MP3)</h3>

Je¿eli z jakiego¶ powodu chcesz korzystaæ z formatu MP3, mo¿esz u¿yæ
edukacyjnego narzêdzia
<a href="http://mp3dev.org/">"Lame ain't an MP3 encoder" (LAME)</a>,
do nauki o kodowaniu MP3.
Lame jest w³±czone do drzewa portów OpenBSD.
Z uwagi na patenty jakimi objête jest MP3, nie znajdziesz tego pakietu
<a href="http://www.openbsd.org/orders.html">na oficjalnych CD</a>.

<p>
Poni¿szy, prosty,  przyk³ad kodowania pliku WAV z szybko¶ci± 192kbps:
</p><blockquote><pre>$ <strong>lame -b 192 track01.wav track01.mp3</strong>
</pre></blockquote>

Po wiêcej opcji i szczegó³ów, zobacz stronê manuala dostarczan± wraz z lame.


<a name="playDVD"></a>
<h2>13.6 - Jak mogê odtwarzaæ p³yty video DVD w OpenBSD?</h2>

Obecnie OpenBSD wspiera media DVD poprzez system plików ISO 9660, który
jest tak¿e wykorzystywany w CD-ROM'ach.
<!-- XXXchange: UDF will be supported as of 3.8 -->
Nowy system 
<a href="http://www.osta.org/specs/">Universal Disk Format (UDF)</a>
nie jest obs³ugiwany.
Jakkolwiek, prawie wszystkie dyski DVD-Video oraz DVD-ROM korzystaj± z
formaty mostowego UDF, bêd±cego kombinacj± DVD MicroUDF (podsystem UDF 1.02)
oraz ISO 9660.
Ten pomost zapewnia zgodno¶æ wstecz dla systemów operacyjnych nie obs³uguj±cych
jeszcze UDF.

<p>
Poniewa¿ wiêkszo¶æ komputerów z napêdami DVD-ROM korzysta ze sprzêtowego
dekodowania, zalecane jest posiadaæ przynajmniej procesor Pentium II 350-MHz
lub równowa¿ny by otrzymaæ dobr± jako¶æ odtwarzania.

</p><p>
Niektóre popularne odtwarzacze DVD zosta³y sportowane do OpenBSD.
Na przyk³ad <a href="http://www.dtek.chalmers.se/groups/dvd/">ogle</a>
oraz <a href="http://www.mplayerhq.hu/">mplayer</a>.
Prosimy przeczytaj instrukcje instalacyjne dostarczane z tymi pakietami,
poniewa¿ narzêdzia te mog± wymagaæ pó¼niejszej konfiguracji.
W tych programach, mo¿liwe jest odtwarzanie DVD bezpo¶rednio
z dostêpnego urz±dzenia raw.
Oczywi¶cie jest tak¿e mo¿liwe wcze¶niejsze podmontowanie DVD korzystaj±c z
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_cd9660&amp;sektion=8">mount_cd9660(8)</a>,
oraz odtworzenie plików na tym lub innym zamontowanym systemie plików.

</p><p>
<b>Uwagi:</b>
</p><ul>
<li>Prawie wszystkie DVD które kupujesz s± zakodowane przy pomocy Content Scrambling
System (CSS).
Aby odtworzyæ te zakodowane DVD, mo¿esz skrzystaæ z biblioteki
<a href="http://www.videolan.org/libdvdcss/">libdvdcss</a>,
równie¿ dostêpnej poprzez porty i pakiety.
</li><li>Uwa¿aj na kod regionu jaki mo¿e byæ wprowadzony do twojego dysku(ów) DVD.
Nie powinno to byæ wiêkszym problemem kiedy odtwarzasz DVD na komputerze.
</li></ul>


<a name="burnCD"></a>
<h2>13.7 - Jak wypalaæ p³yty CD i DVD?</h2>

<a name="burnIntro"></a>
<h3>13.7.1 - Wprowadzenie i podstawowe ustawienia</h3>

Upewnij siê, ¿e twoja nagrywarka CD/DVD zosta³a rozpoznana i skonfigurowana przez j±dro.
Obs³ugiwana jest wiêkszo¶æ urz±dzeñ SCSI. Urz±dzenia IDE/ATAPI oraz USB s± obs³ugiwane 
poprzez emulacjê SCSI. £atwo znajdziesz twoje urz±dzenie w wydruku z programu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=1">dmesg(1)</a>.
Szukaj wierszy zaczynaj±cych siê od "cd", dla przyk³adu

<blockquote><pre>cd0 at scsibus0 targ 0 lun 0: &lt;TOSHIBA, CD-ROM XM-5702B, 
2826&gt; SCSI0 5/cdrom removable
cd1 at scsibus1 targ 4 lun 0: &lt;PLEXTOR, CD-R PX-R412C, 1.04&gt; 
SCSI2 5/cdrom removable
</pre></blockquote>

<h4>Ale <tt>cdrecord -scanbus</tt> nie dzia³a!</h4>

Zgadza siê. OpenBSD u¿ywa innej przestrzeni nazw urz±dzeñ ni¿ system operacyjny 
dla którego zosta³ napisany program cdrecord.
Dmesg powinien wypisaæ wszystkie skonfigurowane urz±dzenia.
Wszystkie urz±dzenia powinny byæ wypisane w wyj¶ciu dmesg, jak wspomniano powy¿ej.
Informacje których oczekujesz s± w³a¶nie tam.

<h4>Error: <tt>mount_cd9660: /dev/cd2c on /mnt/cdrom: No such file or directory</tt></h4>

Domy¶lnie instalator OpenBSD tworzy tylko dwa wêz³y dla urz±dzeñ cd,
<tt>cd0</tt> and <tt>cd1</tt>.
Aby zacz±æ korzystaæ z <tt>cd2</tt> musisz utworzyæ konieczny wêze³ 
urz±dzenia.
Zalecane jest u¿ycie do tego skryptu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=MAKEDEV&amp;sektion=8">MAKEDEV(8)</a>
(wybieraj±c w³a¶ciw± platformê):

<blockquote><pre># <strong>cd /dev</strong>
# <strong>./MAKEDEV cd2</strong>
</pre></blockquote>

W ten sposób bêdziemy mieli dostêp do nagrywarki CD/DVD poprzez urz±dzenie
znakowe <i>raw</i>, <b>nie</b> urz±dzenie <i>blokowe</i>.

<h4>Sprawdzanie dzia³ania nagrywarki CD/DVD</h4>

Zalecane jest sprawdzenie czy twoja nagrywarka CD/DVD dzia³a poprawnie.
W tym przyk³adzie, korzysta³ bêdê z nagrywarki CD/DVD na USB 2.0:

<blockquote><pre>cd2 at scsibus2 targ 1 lun 0: &lt;LITE-ON, DVDRW LDW-851S, GS0C&gt; SCSI0 5/cdrom removable
</pre></blockquote>

Spróbuj jej u¿yæ podmontowuj±c CD/DVD.
Je¿eli chcesz mo¿esz tak¿e sprawdziæ szybko¶æ transferu podczas kopiowania
danych na twardy dysk.
Polecenie
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=time&amp;sektion=1">time(1)</a>
bêdzie bardzo dobrym pomocnikiem.

<p>
Je¿eli co¶ pójdzie ¼le i otrzymasz b³êdy podczas tej fazy, rozs±dne jest
rozwi±zaæ ten problem i nie uruchamiaæ jeszcze zapisu CD/DVD.

</p><h3>Chcê teraz zapisywaæ na CD! Mo¿emy przej¶æ z tym dalej?</h3>

Zanim to zrobimy, dobrym pomys³em jest zapamiêtanie kilku porad:

<ul>
<li>Nie uruchamiaj ¿adnych procesów intensywnie korzystaj±cych z dysku podczas zapisu CD/DVD.
Ograniczy to transfer do twojej nagrywarki CD/DVD. Je¶li transfer spadnie poni¿ej
poziomu w którym nagrywarka oczekuje zbyt d³ugo, jej bufor zostanie opró¿niony.
To zjawisko okre¶lane jest jako "buffer underrun".
</li><li>Staraj siê zapobiegaæ wstrz±som podczas zapisu, poniewa¿ mo¿e to spowodowaæ
wytr±cenie promienia lasera ze ¶cie¿ki, co mo¿e prowadziæ do b³êdów zapisu.
</li><li>Nie ka¿da nagrywarka DVD obs³uguje ka¿dy format DVD, zobacz poni¿ej.
</li></ul>

<a name="writeCD"></a>
<h3>13.7.2 - Nagrywanie CD</h3>

<h4>Tworzenie CD-ROMów z danymi</h4>

Najpierw, bêdziesz musia³ stworzyæ system plików ISO 9660 który umie¶cisz na CD-ROMie.
Mo¿esz to zrobiæ korzystaj±c z narzêdzia
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mkhybrid&amp;sektion=1">mkhybrid(1)</a>,
dostarczanego z bazowym systemem.

<p>
Jako przyk³ad u¿ycia, powiedzmy ¿e chcê zachowaæ ¼ród³a kerneli OpenBSD
w obrazie ISO 9660:

</p><blockquote><pre>$ <strong>mkhybrid -R -o sys.iso /usr/src/sys</strong>

Using ALTQ_RMC.000;1 for  /usr/src/sys/altq/altq_rmclass_debug.h (altq_rmclass.h)
...
Using XFS_DEV-.000;1 for  /usr/src/sys/xfs/xfs_dev-common.c (xfs_dev-bsd.c)
 12.06% done, estimate finish Sun Mar 27 21:18:47 2005
 24.09% done, estimate finish Sun Mar 27 21:18:43 2005
...
 84.32% done, estimate finish Sun Mar 27 21:18:38 2005
 96.37% done, estimate finish Sun Mar 27 21:18:38 2005
Total translation table size: 0
Total rockridge attributes bytes: 0
Total directory bytes: 1822720
Path table size(bytes): 10674
Max brk space used 469000
41508 extents written (81 Mb)
</pre></blockquote>

<p>
Opcja <tt>-R</tt> mówi <tt>mkhybrid</tt> by utworzy³ rozszerzenie Rock Ridge
w tworzonym obrazie.
Rock Ridge Interchange Protocol zosta³ stworzony do obs³ugi POSIX-owej semantyki
systemu plików w systemie ISO 9660, takich jak d³u¿sze nazwy plików, prawa w³asno¶ci,
uprawnienia, dowi±zania plików, miêkkie dowi±zania, wêz³y urz±dzeñ, g³êbokie
struktury plików (wiêcej ni¿ 8 poziomów podkatalogów), itd.

</p><p>
Je¿eli chcesz by d³ugie nazwy na twojej p³ycie CD-ROM by³y czytane pod
systemami Windows lub DOS, powiniene¶ ododaæ flagê <tt>-J</tt> by w³±czyæ
obs³ugê rozszerzeñ Joliet w twoim obrazie ISO 9660.

</p><p>
Po utworzeniu systemu plików, mo¿esz go zweryfikowaæ
<a href="http://www.openbsd.org/faq/faq14.html#MountImage">podmontowujac utworzony obraz ISO 9660</a>.
Je¿eli wszystko jest dobrze, jeste¶ gotów by wypaliæ CD-R(W). 
Powszechnie wykorzystywanym pakietem jest <b>cdrecord</b>, dostarczany w 
zestawie cdrtools, dostêpnym poprzez system portów i pakietów OpenBSD.

</p><p>
Je¿eli korzystasz z mediów jednokrotnego zapisu jak CD-R, zawsze dobrym
pomys³em jest uruchomienie na sucho zanim nast±pi w³a¶ciwy zapis na CD-ROM-ie,
w nastêpstwie nie zmarnowanie ¿adnego dysku.

</p><blockquote><pre># <strong>cdrecord -v -dummy dev=/dev/rcd1c sys.iso</strong>
</pre></blockquote>

Je¶li posz³o dobrze, jeste¶ gotów do zapisu obrazu utworzonego w powy¿szym
przyk³adzie na czystym CD-R(W). Mo¿esz u¿yæ polecenia podobnego do:

<blockquote><pre># <strong>cdrecord -v dev=/dev/rcd1c sys.iso</strong>
</pre></blockquote>

Z powy¿ej podanymi opcjami, prosimy cdrecord-a by przeprowadzi³
gadatliwe wyj¶cie oraz u¿y³ drugiego urz±dzenia CD-ROM jako nagrywarki CD.
Zauwa¿ ¿e podali¶my <i>surowe</i> urz±dzenie do zapisu.

<p>
Chc±c sprawdziæ czy CD-ROM zosta³ nagrany poprawnie, mo¿esz go zamontowaæ
i sprawdziæ czy wszystko na nim jest.
Montuj±c system plików, powiniene¶ skorzystaæ z urz±dzenia <i>blokowego</i>
dla napêdu CD-ROM, który w tym wypadku pozostaje wci±¿ w nagrywarce CD:

</p><blockquote><pre># <strong>mount /dev/cd1c /mnt/cdrom</strong>
</pre></blockquote>


<h4>Tworzenie CD audio</h4>

Chc±c wypaliæ p³ytê audio CD, mo¿esz u¿yæ <b>cdrecord</b> z flag± <tt>-audio</tt>,
lub narzêdzia <a href="http://cdrdao.sourceforge.net/">cdrdao</a> 
do zapisu w trybie Disk-At-Once, i unikn±æ przerw miêdzy ¶cie¿kami audio.
Oba narzêdzia dostêpne s± w OpenBSD poprzez system portów i pakietów.

<p>
Jako przyk³ad, utworzymy kopiê zapasow± jednej z moich p³yt CD z muzyk±.
Wymaga to wykonania dwóch kroków:

</p><ol>
<li>Zgrania ¶cie¿ek audio z oryginalnego CD: mo¿esz do tego u¿yæ oprogramowania jak
<b>cdparanoia</b>, <b>cdda2wav</b> (w³±czonego do pakietu <tt>sysutils/cdrtools</tt>)
oraz <b>cdrdao</b>.

Przyk³adowo:
<blockquote><pre># <strong>cdrdao read-cd --device /dev/rcd0c cdtracks.toc</strong>
</pre></blockquote>
Polecenie to wyci±gnie seriê plików WAV z twojego pierwszego napêdu CD-ROM
na dysk, oraz przygotuje plik Table Of Contens (TOC).
</li><li>Zapisania ¶cie¿ek audio na czystym CD: jak wspomniano wcze¶niej mo¿esz u¿yæ
<b>cdrecord</b> lub <b>cdrdao</b>, np.
<blockquote><pre># <strong>cdrdao write --device /dev/rcd1c cdtracks.toc</strong>
</pre></blockquote>
Je¿eli chcesz mo¿esz wcze¶niej u¿yæ <tt>cdrdao simulate</tt>.
</li></ol>


<a name="writeDVD"></a>
<h3>13.7.3 - Zapis p³yt DVD</h3>

Powiniene¶ wiedzieæ kilka wa¿nych rzeczy o DVD zanim zaczniesz nagrywaæ
swoje w³asne p³yty DVD.

<p>
<b>Wa¿ne uwagi:</b>
</p><ul>
<li>Je¿eli naprawdê chcesz wiedzieæ wszystko o DVD, sugerujê by¶ przeczyta³
bardzo obszerny dokument
<a href="http://www.dvddemystified.com/dvdfaq.html">DVD FAQ</a>.
</li><li>Ta sekcja oparta jest na bardzo ograniczonych testach, z pewno¶ci±
nie testowali¶my ka¿dej mo¿liwej kombinacji medium i nagrywarki.
W szczególno¶ci nie by³o testowane DVD-RAM.
Prosimy daj <a href="mailto:faq@openbsd.org">nam znaæ</a> 
o twoich sukcesach i pora¿kach.
</li></ul>

<h4>Ró¿ne formaty DVD</h4>

Istnieje kilka ró¿nych formatów DVD. Powszechnie u¿ywane s± DVD-R,
DVD-RW, DVD+R, oraz DVD+RW (R oznacza zapisywalny raz, RW oznacza mo¿liwo¶æ ponownego
zapisu kilka tysiêcy razy).
S± to standardy mocno ze sob± rywalizuj±ce.

<p>
Zupe³nie inny format DVD-RAM, który zosta³ opracowany g³ównie jako
napêd danych i zawiera zaawansowane funkcje zapisu pakietowego, pozwala
na wykorzystanie go jako pewnego rodzaju optycznego dysku twardego. DVD-RAM
nie jest zalecany do u¿ytku video, poniewa¿ video jest zapisywane na dyski
w formacie niekompatybilnym z normalnymi odtwarzaczami DVD.

</p><p>
Wa¿n± rzecz± jest by korzystaæ z mediów które pasuj± do twojej nagrywarki DVD.
Je¶li oczekujesz zgodno¶ci z innymi odtwarzaczami DVD, uwa¿aj na to co robisz
i upewnij siê ¿e przeczyta³e¶
<a href="http://www.dvddemystified.com/dvdfaq.html#4.3.1">t± sekcjê</a>
w DVD FAQ.

</p><h4>Szybko¶æ zapisu DVD</h4>

Mo¿e okazaæ siê wartym uwagi, ¿e szybko¶ci okre¶laj±ce DVD ró¿ni± siê do 
szybko¶ci okre¶laj±cych CD-ROM. Poni¿sza tabela pokazuje pewien przegl±d:

<p>
<table border="1">
<tbody><tr align="center">
<td>Prêdko¶æ odczyt/zapis DVD</td>
<td>Szybko¶æ transferu (MB/s)</td>
<td>Odpowiednik prêdko¶ci odczyt/zapis w CD-R(W)</td>
</tr>
<tr align="center">
<td>1x</td>
<td>1.32</td>
<td>9x</td>
</tr>
<tr align="center">
<td>2x</td>
<td>2.64</td>
<td>18x</td>
</tr>
<tr align="center">
<td>4x</td>
<td>5.28</td>
<td>36x</td>
</tr>
<tr align="center">
<td>8x</td>
<td>10.57</td>
<td>72x</td>
</tr>
</tbody></table>

</p><p>
Jak mo¿emy zobaczyæ w powy¿szej tabeli, transfery s± relatywnie wysokie,
zatem powiniene¶ sprawdziæ czy twoja szyna (SCSI, (E)IDE/ATAPI, USB) jest
wystarczaj±co wydajna by obs³u¿yæ takie obci±¿enie.
Szczególnie w przypadku USB 1.0 oraz 1.1 które pracuj± z wolniejszymi transferami,
odpowiednio 1.5 Mbit/s oraz 12Mbit/s.
Oznacza to, ¿e USB 1.0 posiada maksymalna przepustowo¶æ 178.8 kByte/s, natomiast
USB 1.1 posiada maksymalna przepustowo¶æ 1.43 MB/s.
USB 2.0 jest znacznie szybsze: 480 Mbit/s lub 57.2 MB/s.
Generalnie, prêdko¶æ szyny SCSI lub (E)IDE/ATAPI powinna byæ wystarczaj±ca.

</p><h4>Zapis DVD</h4>

Generalnie, proces jest bardzo podobny do zapisu CD-R(W). Jednak¿e oprogramowanie
jest inne.
W tej chwili najlepsz± opcj± jest <b>growisofs</b> z pakietu
<tt>sysutils/dvd+rw-tools</tt>.
Narzêdzie to zapisuje obrazy ISO 9660 na medium DVD.
W dvd+rw-tools obs³ugiwane s± wszystkie formaty DVD.

<p>
W przypadku gdyby¶ chcia³ siê dowiedzieæ wiêcej o medium w twojej nagrywarce
DVD (dla przyk³adu, je¶li straci³e¶ etykietê z pude³ka, lub jeste¶ podobnie
jak ja ma³o zorganizowany), mo¿esz u¿yæ <b>dvd+rw-mediainfo</b>.

<!--blockquote><pre>
$ <strong>dvd+rw-mediainfo /dev/rcd2c</strong>
INQUIRY:                [LITE-ON ][DVDRW LDW-851S  ][GS0C]
GET [CURRENT] CONFIGURATION:
 Mounted Media:         1Ah, DVD+RW
 Current Write Speed:   4.0x1385=5540KB/s
 Write Speed #0:        4.0x1385=5540KB/s
 Write Speed #1:        2.4x1385=3324KB/s
GET [CURRENT] PERFORMANCE:
 Write Performance:     4.0x1385=5540KB/s@[0 -> 0]
 Speed Descriptor#0:    00/0 R@2.4x1385=3324KB/s W@4.0x1385=5540KB/s
 Speed Descriptor#1:    00/0 R@2.4x1385=3324KB/s W@2.4x1385=3324KB/s
READ DVD STRUCTURE[#0h]:
 Media Book Type:       92h, DVD+RW book [revision 2]
 Media ID:              SONY/S11
 Legacy lead-out at:    2295104*2KB=4700372992
READ DISC INFORMATION:
 Disc status:           blank
 Number of Sessions:    1
 State of Last Session: empty
 Number of Tracks:      1
READ TRACK INFORMATION[#1]:
 Track State:           blank
 Track Start Address:   0*2KB
 Free Blocks:           2295104*2KB
 Track Size:            2295104*2KB
READ CAPACITY:          1*2048=2048
</pre></blockquote-->

S± dwie opcje w zapisie DVD:
</p><ul>
<li>Pobranie ISO 9660 z twojego no¶nika, zapisanie obrazu na dysku twardym;
a nastêpnie zapisanie obrazu na DVD.
</li><li>Zapisanie obrazu ISO 9660 z twojego medium bezpo¶rednio na DVD.
</li></ul>

<p>
Utworzy³em wstêpny obraz ISO 9660 z modu³ów CVS OpenBSD
(src, XF4, ports oraz www) znajduj±cy siê w katalogu /cvs na moim dysku.
U¿y³em poni¿szego polecenia, które wyglada podobnie jak wykorzystane przeze
mnie do tworzenia obrazu DC-ROM.

</p><blockquote><pre>$ <strong>mkhybrid -R -o cvs.iso /cvs</strong>
</pre></blockquote>

Je¿eli chcesz sprawd¼ system plików ISO 9660 poprzez
<a href="http://www.openbsd.org/faq/faq14.html#MountImage">podmontowanie obrazu</a>.
Aby zapisaæ ten obraz (oko³o 2GB) na czystym no¶niku DVD, mo¿esz u¿yæ:

<blockquote><pre># <strong>growisofs -dvd-compat -Z /dev/rcd2c=cvs.iso</strong>
Executing 'builtin_dd if=cvs.iso of=/dev/rcd2c obs=32k seek=0'
/dev/rcd2c: pre-formatting blank DVD+RW...
/dev/rcd2c: "Current Write Speed" is 4.1x1385KBps.
  23822336/1545832448 ( 1.5%) @3.9x, remaining 5:19
  42172416/1545832448 ( 2.7%) @3.9x, remaining 5:20
  60522496/1545832448 ( 3.9%) @3.9x, remaining 4:54
...
1504706560/1545832448 (97.3%) @3.9x, remaining 0:07
1523318784/1545832448 (98.5%) @3.9x, remaining 0:04
1541898240/1545832448 (99.7%) @3.9x, remaining 0:00
/dev/rcd2c: flushing cache
/dev/rcd2c: writing lead-out
/dev/rcd2c: reloading tray
</pre></blockquote>

Opcja <tt>-Z</tt> przekazuje growisofs by zapisa³ sesjê inicjalizacyjn± na 
urz±dzeniu, co w moim przypadku oznacza moj± nagrywarkê DVD, pod³±czon± do cd2.
Flaga <tt>-dvd-compat</tt> zamyka dysk, co oznacza, ¿e ¿adna nowa sesja nie mo¿e
byæ pó¼niej dodana.
To powinno zapewniæ lepsz± zgodno¶æ z odtwarzaczami video DVD oraz niektórymi
starszymi jednostkami DVD-ROM.

<p>Zauwa¿ jak growisofs okre¶la prêdko¶æ zapisu, w tym przypadku 3.9x DVD,
czyli tyle ile mogliby¶my oczekiwaæ od kombinacji medium i nagrywarki, jak
pokaza³ dvd+rw-mediainfo.

</p><p>
Je¿eli nie powiadasz wystarczaj±cej ilo¶ci miejsca na dysku by przechowaæ obraz
ISO 9660, mo¿esz zapisaæ dane bezpo¶rednio na DVD. Najpierw spróbujmy zrobiæ
test na sucho, symuluj±cy tworzenie systemu plików.

</p><blockquote><pre># <strong>growisofs -dry-run -Z /dev/rcd2c -R /cvs</strong>
</pre></blockquote>

Gdy to siê powiedzie, po prostu opu¶æ opcjê -dry-run i zacznij zapis DVD.

<blockquote><pre># <strong>growisofs -Z /dev/rcd2c -R /cvs</strong>
</pre></blockquote>

Zauwa¿, ¿e w przypadku zapisu bezpo¶rednio na DVD, ,growisofs wywo³uje
mkisifs, z pakietu cdrtools od którego zale¿y dvd+rw-tools, a nie 
mkhybrid z systemu bazowego.

<p>
Istnieje mo¿liwo¶æ by dodaæ dane do istniej±cego DVD, korzystaj±c z 
opcji -M, która w³±cza now± sesjê do ju¿ istniej±cej:

</p><blockquote><pre># <strong>growisofs -M /dev/rcd2c -R /mydata</strong>
</pre></blockquote>

Po wiêcej informacji o growisofs, zobacz siê do strony manuala.

<p>
Gdy skoñczy³e¶ zapis DVD, zamontuj go i zobacz czy wszystko czego oczekiwa³e¶
w rzeczywisto¶ci na nim siê znajduje.

</p><h4>Dlaczego nie uzyskujê takiej prêdko¶ci zapisu jakiej oczekujê?</h4>

Zamiast pokazanego powy¿ej przyk³adu, móg³by¶ zobaczyæ co¶ takiego:

<blockquote><pre>   4784128/1545832448 ( 0.3%) @0.7x, remaining 26:50
   7929856/1545832448 ( 0.5%) @0.7x, remaining 29:05
  14123008/1545832448 ( 0.9%) @0.7x, remaining 27:06
...
</pre></blockquote>

co jest znacznie wolniejsze.

Oznacza to ze w jaki¶ sposób nie posiadasz wystarczaj±cej przepustowo¶ci
na szynie ba której podpiêta jest nagrywarka DVD.

W tym przypadku, nagrywarka USB DVD zosta³a podpiêta do komputera ze
sterownikiem
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ehci&amp;sektion=4">ehci(4)</a>,
u¿ywanym przez kontrolery USB 2.0, nie zainicjowanym poprawnie.
Jak zwykle, prosimy o dostarczanie ³atek i wyników testów.
Nagrywarka DVD skorzysta³a z wolniejszego interfejsu USB 1.1, co
poci±ga za sob± ograniczenie przepustowo¶ci.
Istotnie, USB 1.1 jest ograniczone do 12 Mbit/s, co oznacza 1.43 MB/s
lub 1.08x w terminologii prêdko¶ci DVD.
Nagrywarka DVD zmniejszy³a tempo, by zredukowaæ ryzyko opró¿nienia bufora.

<a name="convert"></a>
<h2>13.8 - Ale ja chce moje pliki w formacie FOO.</h2>

<h3>Konwertowanie pomiêdzy ró¿nymi formatami audio</h3>

Powiedzmy ¿e chcemy przeprowadziæ nagranie jak to opisano w
<a href="#recordaudio">FAQ 13 - Nagrywanie audio</a>.
To nagranie bêdzie przechowywane w surowym formacie.
Mo¿e byæ pomocne konwertowanie go, poniewa¿ format raw nie zawiera
nag³ówków oraz wymagane bêdzie podanie parametrów nagrania przy ka¿dym
odtworzeniu tego pliku.

<p>
Jednym z narzêdzi konwertuj±cych d¼wiêk jest <tt>audio/sox</tt>, dostêpny
przez porty i pakiety.
<b>sox</b> obs³uguje AIFF, AU, MP3, Ogg Vorbis, RIFF WAV oraz raw,
podobnie jak niektóre bardziej egzotyczne formaty audio.
Poni¿ej - przyk³ad konwersji naszego nagrania to formatu RIFF.

</p><blockquote><pre>$ <strong>sox -U -c 1 -r 8000 -b myvoice.raw myvoice.wav</strong>
</pre></blockquote>

Zauwa¿, ¿e podane parametry odpowiadaj± parametrom nagrania ustawionym
przed nagraniem.
To tylko przyk³ad. Do konwersji audio mo¿na wykorzystaæ wiêcej bibliotek
oraz oprogramowania.

<p>
<b>Uwaga:</b>
Nie jest zalecane konwertowanie pomiêdzy stratymi formatami.
Przyk³adowo, kodowania MP3 oraz Vorbis odrzucaj± inne czê¶ci oryginalnego
nagrania. Zatem, konwertuj±c plik MP3 do formatu Vorbis, rezultat bêdzie
prawdopodobnie gorszy ni¿ oryginalny MP3.

</p><h3>Konwertowanie pomiêdzy ró¿nymi formatami video</h3>

Wa¿ne jest by widzieæ bo¿nice pomiêdzy
<ul>
<li>pojemnikiem formatu pliku - popularne przyk³adu to
MP4, OGG, MPEG, MOV, AVI, ASF.
</li><li>kodekiem video  - dla przyk³adu MPEG-1, MPEG-2, zgodne z MPEG-4
(jak Xvid i DivX), FFmpeg, WMV, ... - przeczytaj
<a href="http://en.wikipedia.org/wiki/Video_codec">Wikipedia article
about video codecs</a> je¶li chcesz wiêcej informacji.
</li></ul>

W OpenBSD wsparcie dla MPEG oraz AVI jest obecnie prawie dojrza³y
Nie istniej± narzêdzia w drzewie portów które pozwalaj± na tworzenie
strumieni MP4.

<p>
Dwa popularne narzêdzia to <tt>multimedia/transcode</tt> oraz
<b>mencoder</b> (czê¶æ <tt>x11/mplayer</tt>).
U¿ywaj± lub potrafi± u¿ywaæ biblioteki <b>libavcodec</b> jako czê¶æ portu
<tt>graphics/ffmpeg</tt>, który generuje wyj¶cie w dobrej jako¶ci.
Mo¿esz tak¿e, oczywi¶cie, u¿yæ <b>ffmpeg</b> bezpo¶rednio.
Powinno byæ tak¿e mo¿liwe wykorzystanie kodeka XciD w 
<tt>multimedia/xvidcore</tt>.

</p><p>
Dokumentacja która jest dostarczana z tymi paczkami, w postaci manuali
lub stron HTML w <tt>/usr/local/share/doc</tt>, zawiera mnóstwo
przyk³adów, zatem jest WYSOCE zalecane przeczytanie tych dokumentów.


<a name="streaming"></a>
</p><h2>13.9 - Czy mo¿na odtwarzaæ strumieniowe audio/video w OpenBSD?</h2>

Tak, mo¿na.
Wiele strumieni audio i video bêdzie dzia³a³o dobrze, na ograniczonej liczbie
platform.
Na kilku z nich nie.

<p>
Nie oznacza to pe³nej, nadmiernie szczegó³owej odpowiedzi na posiadanie ka¿dego
mo¿liwego format strumieniowego dzia³aj±cego na ka¿dej architekturze.
Mo¿esz chcieæ wiedzieæ wiêcej na temat mediów strumieniowych zanim
z nimi zaczniesz.
Minimalnie przestarza³ym, lecz wci±¿ dobrym punktem wyj¶cia jest 
<a href="http://www.oreilly.com/catalog/sound/chapter/ch05.html">rozdzia³
o mediach strumieniowych</a> z ksi±¿ki wydawnictwa O'Reilly 
zatytu³owanej Designing Web Audio.

</p><p>
Pierwsz± rzecz± wymagaj±c± zrozumienia jest, ¿e istnieje wiele ró¿nych protoko³ów
strumieniowych.
<b>Protokó³</b> strumieniowy okre¶la jak strumienie bêd± wysy³ane przez sieæ.
Zosta³y zaprojektowane by efektywnie wysy³aæ d¼wiêk/obraz przez internet
w czasie rzeczywistym.
Przewa¿nie, protokó³ ten jest protoko³em aplikacji (warstwa 7), który
mo¿e korzystaæ z protoko³u transmisyjnego (warstwa 4) UDP lub TCP.
User Datagram Protocol (UDP) jest dobrze dostosowany do tego typu aplikacji,
poniewa¿ nie wymaga retransmisji pakietów lub innych pakietów kontrolnych.
Opracowano wiele specjalistycznych lecz prawnie chronionych protoko³ów, np.
Microsoft Media Services (MMS) czy te¿ Real Time Streaming Protocol (RTSP).
Jak zobaczymy, HTTP (korzystaj±cy z TCP) czasem jest równie¿ wykorzystywany,
nawet je¶li nie pozwala obs³ugiwaæ strumieni z jednostajnym bitrate jak w UDP,
RTSP czy MMS.

</p><p>
Dalej, mamy <b>format</b> strumienia, okre¶laj±cy jak d¼wiêk/obraz bêd± 
zorganizowane i bêd± odtwarzane.
Najczê¶ciej jest to MP3, Real Audio (RA, RM) oraz Windows Media (ASF),
wszystkie prawnie chronione.
Sporadycznie spotyka siê kodowanie w formacie Ogg Vorbis.

</p><p>
Jako przyk³ad, wyja¶nimy w kilku krokach jak s³uchaæ
<a href="http://www.radio1.be/">Radio 1</a>,
jednej z publicznych w Belgii rozg³o¶ni radiowych.
Wbudowywane w przegl±darki wtyczki nie s± dostêpne dla OpenBSD, zatem
opowie¶æ nie jest tak prosta jak "kliknij i graj".

</p><ul>
<li>Okre¶lanie formatu i protoko³u strumienia.<br>
Zazwyczaj jest to okre¶lone na stronie na której usi³ujesz odebraæ strumieñ.
W tym przypadku, pod±¿y³em za linkiem "Listen live" na stronie g³ównej,
gdzie dowiedzia³em siê ze mój system operacyjny nie jest obs³ugiwany.
Byli uprzejmi na tyle, by powiedzieæ mi, ¿e mogê s³uchaæ ich MP3 bez ich
wbudowanego odtwarzacza Flash.
Niezale¿nie od tego, pokazuje siê lista linków do narodowych stacji, pozwalaj±c 
mi na nastêpny krok.
Korzystam z przegl±darki z wbudowan± obs³ug± JavaScript.
</li><li>Okre¶lanie dok³adnego URL.<br>
Wiele linków na stronach do metaplików lub playlist (takich jak M3U, ASX, RAM),
zawiera informacje o aktualnej lokalizacji strumienia.
Po prostu zapisz taki plik a nastêpnie przeczytaj URL z niego.
W moim przyk³adzie by³o to

<blockquote><pre>$ <strong>ftp http://internetradio.vrt.be/dab/hoeluisteren/pc/help/gebruiksvoorwaarden/stream_11.m3U</strong>
$ <strong>cat stream_11.m3U</strong>
http://mp3.streampower.be/radio1-mid.mp3
http://mp3.streampower.be/radio1-low.mp3
http://mp3.streampower.be/radio1-high.mp3
</pre></blockquote>

Wygl±da na to ¿e mogê wybieraæ pomiêdzy nisk±, ¶redni± oraz wysok± jako¶ci± strumienia.
Inne strony mog± zawieraæ jaki¶ kod JavaScript do generowania adresu.
W tym przypadku, najlepszym pomys³em jest wykopaæ ¼ród³o HTML oraz skrypt
na który on wskazuje.
Istnieje spora szansa, ¿e uda ci siê zrekonstruowaæ stamt±d adres URL.

</li><li>Do odtwarzania strumieni najlepszym pomys³em wydaje siê <tt>x11/mplayer</tt>,
który jest dostêpny poprzez porty i pakiety.
Obs³uguje wiêkszo¶æ protoko³ów i formatów, oraz dzia³a na paltformach
amd64, i386, powerpc oraz sparc64.
S± tak¿e alternatywne rozwi±zania:
<b>ogg123</b> z <tt>audio/vorbis-tools</tt> (dla strumieni Ogg Vorbis),
<tt>audio/mpg123</tt> oraz <tt>audio/mpg321</tt> (dla strumieni MP3),
XMMS w <tt>audio/xmms</tt> oraz Videolan Client w <tt>x11/vlc</tt>.
Kontynuuj±c przyk³ad:

<blockquote><pre>$ <strong>mplayer http://mp3.streampower.be/radio1-mid.mp3</strong>
</pre></blockquote>

</li><li>Opcjonalnie, mo¿esz chcieæ wykonaæ to nieco pro¶ciej poprzez w³±czenie
aliasu do twojego pliku <tt>.profile</tt>:

<blockquote><pre>alias radio1='mplayer http://mp3.streampower.be/radio1-mid.mp3'
</pre></blockquote>

</li></ul>

<!--  
check out http://www.cbc.ca/listen/index.html
it has DivX streams over MMS as well as Ogg Vorbis streams over HTTP.
maybe a good example but also nearly an ideal case...
-->

Strumienie Windows Media (ASF) bêd± czêsto dzia³a³y, chocia¿ zawieraj± dane
w formacie obs³ugiwanym tylko poprzez port <tt>graphics/win32-codecs</tt>,
dzia³aj±cy tylko na i386 ('pkg_info win32-codecs' powie ci które kodeki).
Niektóre strumienie Real Audio mog± byæ odtworzone na i386 korzystaj±c z 
<b>mplayer</b> w po³±czeniu z portami <tt>graphics/win32codecs</tt> oraz 
<tt>emulators/redhat/base</tt> ports
(zobacz
<a href="http://marc.theaimsgroup.com/?t=107060510300001&amp;r=1&amp;w=2">ten w±tek</a> na grupie
dotycz±cej portów).


<!--
this would be interesting, but lack of hardware at the moment
<a name="camera"></a>
<h2>13.xx - Can I use my digital camera under OpenBSD?</h2>

<a name="scanner"></a>
<h2>13.yy - How do I set up and use my scanner?</h2>
-->

<p>
<font color="#0000e0">
<a href="http://www.openbsd.org/faq/index.html">[FAQ Index]</a>
<a href="http://www.openbsd.org/faq/faq12.html">[Sekcja 12 - Pytania dotycz±ce poszczególnych platform]</a>
<a href="http://www.openbsd.org/faq/faq14.html">[Sekcja 14 - Konfiguracja dysku]</a>
</font>

</p><p>
</p><hr>
<a href="http://www.openbsd.org/faq/index.html"><img src="faq13_files/back.gif" alt="[back]" border="0" height="24" width="24"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq13.html,v 1.92 ]<br>                                    
$Translation: faq13.html,v 1.12 2005/09/12 22:27:13 pl-team Exp $<br>               
-->
$OpenBSD: faq13.html,v 1.9 2005/09/13 17:29:36 saad Exp $
</small>

</body></html>
