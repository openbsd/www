<html>
<head>
<title>12.0 - F&uuml;r fortgeschrittene User</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998,1999 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<h2><font color=#e00000>12.0 - F&uuml;r fortgeschrittene User</font><hr></h2>
</p>

<p>
<ul><h3>Inhaltsverzeichnis</h3>
<li><a href="#12.1">12.1 - DMA Zugriff f&uuml;r IDE Festplatten erzwingen</a>
<li><a href= "../upgrade-minifaq.html">12.2 - Von verschiedenen Versionen von OpenBSD via CVS updaten.</a>
</ul>
</p> 
<hr>

<P>
Mit <i>fortgeschrittenen Usern</i> meinen wir Leute, die ein Unix-System administrieren k&ouml;nnen
und wissen, wie es funktioniert. Wenn du den Anweisungen in dieser Sektion folgst, ohne zu wissen, 
was du tust, kannst du deinem System Schaden zuf&uuml;gen!
<br>

<p>
<a name= "12.1">
<h2>12.1 - DMA Zugriff f&uuml;r IDE Festplatten erzwingen</h2>
</a>

<p>
Dem PCI IDE Code ist dein Chipset vielleicht nicht bekannt. Wenn das so ist, 
wirst du eine Meldung beim Booten bekommen, die etwa so aussieht:
<UL>
<PRE>
pciide0: DMA, (unused)
</PRE>
</UL>
Wenn du so eine Meldung erh&auml;ltst, kannst du versuchen, den DMA Modus mittels
'flags 0x0001' in deinem pciide Eintrag in deiner Kernel-Konfigurationsdatei zu erzwingen.
Das w&uuml;rde ungef&auml;hr so aussehen:
<UL><PRE>
pciide* at pci ? dev ? function ? flags 0x0001
</PRE></ul>
Wenn man das gemacht hat, wird der pciide Code versuchen, den DMA Modus zu benutzen,
unabh&auml;ngig davon, ob er weiss, wie er das mit deinem Chipsatz anstellen soll.
Wenn das funktioniert, und es dein System durch 'fsck' und die restliche Startsequenz 
schafft, ist es wahrscheinlich, dass das Ganze weiter so funktioniert. Wenn es nicht
klappt, und das System h&auml;ngt oder in 'panic' verf&auml;llt, kannst du den 
DMA-Modus schlicht und einfach nicht benutzten (solange keine Unterst&uuml;tzung 
f&uuml;r deinen Chipsatz hinzugef&uuml;gt wurde, nat&uuml;rlich).
Wenn du die volle Dokumentation f&uuml;r deinen Chipsatz findest, ist das ein guter 
Anfang f&uuml;r volle Unterst&uuml;tzung im PCI-IDE Code des Kernels. Du kannst 
auf der Website des Herstellers nachsehen, oder sie auch anrufen. Wenn dein
PCI-IDE Controller Teil deines Motherboards ist, finde heraus, wer der Hersteller
des Chipsatzes ist, und wende dich an sie!
<P>
Wenn du diese Meldung beim Booten bekommst, weisst du dass dein DMA aktiviert wurde:
<UL><PRE>
cd0(pciide0:1:0): using PIO mode 3, DMA mode 1 (using DMA data transfers)
</PRE></UL>
Das bedeutet, dass pciide0, channel 1, drive 0 (was hier ein ATAPI
CD-ROM ist) DMA Datentransfers benutzt.
</p>
<p>
Einige Hinweise:
</p>
<p>
DMA wird bei wdc* nicht unterst&uuml;tzt, solange nicht ein DMA Channel (drq) 
mit angegeben wird. Ich bin mir nicht sicher, was die "Standard" drqs f&uuml;r 
Festplatten Controller sind. Um sie zu aktivieren:
<pre>
wdc0	at isa? port 0x1f0 irq 14 flags 0x00
</pre>
Nicht-'Ultra DMA' f&uuml;hrt nicht zwangsl&auml;fig zu einer h&ouml;heren Bandbreite im
Vergleich zu PIO. Mit Sicherheit entlastet es aber die CPU erheblich.
</p>

<p>
<font color= "#0000e0">
<a href= "index.html">[Zur&uuml;ck zum Haupt-Index]</a>
<a href= "../faq11.html">[Zur Sektion 11.0 - Performance Tuning]</a>
<a href= "../faq13.html">[Zur Sektion 13.0 - IPsec]</a>
</font>
</p>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq12.html,v 1.25 ]
<br>
$Translation: faq12.html,v 1.3 2001/02/17 20:35:02 jufi Exp $
<br></small>
<small>$OpenBSD: faq12.html,v 1.3 2001/02/17 20:40:31 jufi Exp $</small>
</p>
</body>
</html>
