<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>15 - The OpenBSD packages and ports system</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>

<!--
Copyright (c) 2005, Steven Mestdagh <steven.mestdagh@esat.kuleuven.be>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor= "#ffffff" text= "#000000">

<!-- Translators: this is still a work in progress, don't spend time 
translating this yet -->


<a href="../index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="
0">
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq14.html">[To Section 14 - Disk Setup]</a>
</font>

<h1><font color="#e00000">15 - The OpenBSD packages and ports system</font></h1><hr>

<h3>Table of Contents</h3>
<ul>
<li><a href="#Intro"          >15.1 - Introduction</a>
<li><a href="#PkgMgmt"        >15.2 - Package management</a>
  <ul>
  <li><a href="#PkgHow"       >15.2.1 - How does it work?</a>
  <li><a href="#Easy"         >15.2.2 - Making things easy</a>
  <li><a href="#PkgFind"      >15.2.3 - Finding packages</a>
  <li><a href="#PkgInstall"   >15.2.4 - Installing new packages</a>
  <li><a href="#PkgList"      >15.2.5 - Listing installed packages</a>
  <li><a href="#PkgUpdate"    >15.2.6 - Updating installed packages</a>
  <li><a href="#PkgRemove"    >15.2.7 - Removing installed packages</a>
  <li><a href="#PkgSecurity"  >15.2.8 - Security updates (-stable packages)</a>
  <li><a href="#PkgPartial"   >15.2.9 - Incomplete package installation or
     removal</a>
  </ul>
<li><a href="#Ports"          >15.3 - Working with ports</a>
  <ul>
  <li><a href="#PortsHow"     >15.3.1 - How does it work?</a>
  <li><a href="#PortsFetch"   >15.3.2 - Fetching the ports tree</a>
  <li><a href="#PortsSearch"  >15.3.3 - Searching the ports tree</a>
  <li><a href="#PortsInstall" >15.3.4 - Straightforward installation:
     a simple example</a>
  <li><a href="#PortsClean"   >15.3.5 - Cleaning up after a build</a>
  <li><a href="#PortsDelete"  >15.3.6 - Uninstalling a port's package</a>
  <li><a href="#PortsFlavors" >15.3.7 - Using flavors and subpackages</a>
  <li><a href="#PortsConfig"  >15.3.8 - Additional configuration of the
     ports system</a>
  <li><a href="#PortsSecurity">15.3.9 - Security updates (-stable)</a>
  </ul>
<li><a href="#PkgFAQ"         >15.4 - FAQ</a>
  <ul>
  <li><a href="#NoFun"        >15.4.1 - I'm getting all kinds of crazy errors.
     I just can't seem to get this ports stuff working at all.</a>
  <li><a href="#Latest"       >15.4.2 - The latest version of my
     Top-Favorite-Software is not available!</a>
  <li><a href="#NoPkg"        >15.4.3 - Why is there no package for my
     Top-Favorite-Software?</a>
  <li><a href="#NoPort"       >15.4.4 - Why is there no port of my
     Top-Favorite-Software?</a>
  <li><a href="#NotInBase"    >15.4.5 - Why is my Top-Favorite-Software not
     part of the base system?</a>
  <li><a href="#PkgVsPorts"   >15.4.6 - What should I use: packages or
     ports?</a>
  <li><a href="#Knobs"        >15.4.7 - How do I tweak these ports to have
     maximum performance?</a>
  </ul>
<li><a href="#Problems"       >15.5 - Reporting problems</a>
<li><a href="#Helping"        >15.6 - Helping us</a>
</ul>

<a name="Intro"></a>
<h2>15.1 - Introduction</h2>

<p>
There are a lot of third party applications available which one might
want to use on an OpenBSD system.
To make this software easier to install and manage, plus to help it
comply with OpenBSD's policy and goals, the third party software is
<i>ported</i> to OpenBSD.
This porting effort can involve many different things.
Examples are: making the software use the standard OpenBSD directory
layout (e.g. configuration files go into <tt>/etc</tt>), conforming
to OpenBSD's shared library specifications, making the software more
secure whenever possible, etc.

<p>
The end result of the porting effort are ready-to-install binary
packages.
The aim of the package system is to keep track of which software gets
installed, so that it may at any time be updated or removed very easily.
This way, no unnecessary files are left behind, and users can keep their
systems clean.
The package system also helps insure nothing is deleted by accident,
causing software to stop functioning properly.
Another advantage is that <b>users rarely need to compile software from
source</b>, as packages have already been compiled and are available and
ready to be used on an OpenBSD system.
In minutes, a large number of packages can be fetched and installed,
with everything in the right place.


<a name="PkgMgmt"></a>
<h2>15.2 - Package Management</h2>

<a name="PkgHow"></a>
<h3>15.2.1 - How does it work?</h3>

<p>
Packages are the pre-compiled binaries of some of the most used
third party software.

Packages can be managed easily with the help of several utilities,
also referred to as the pkg* tools:
<ul> <!-- XXX add 3.8 tags here -->
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a> 
  - a utility for installing and upgrading software packages.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&amp;sektion=1">pkg_delete(1)</a>
  - a utility for deleting previously installed software packages.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1">pkg_info(1)</a>
  - a utility for displaying information about software packages.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_create&amp;sektion=1">pkg_create(1)</a> 
  - a utility for creating software packages.
</ul>

<p>
In order to run properly, an application X may require that
other applications Y and Z be installed.
Application X is said to be dependent on these other applications,
which is why Y and Z are called <i>dependencies</i> of X.
In turn, Y may require other applications P and Q, and Z may require
application R to function properly.
This way, a whole <i>dependency tree</i> is formed.

<p>
Packages look like simple <tt>.tgz</tt> bundles.
Basically they are just that, but there is one crucial difference:
they contain some extra <i>packing information</i>.
This information is used by
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;
format=html">pkg_add(1)</a>
for several purposes:

<ul>
<li>Different checks: has the package already been installed or does it
conflict with other installed packages or file names?
<li>Dependencies which are not yet present on the system, are
automatically fetched and installed, before proceeding with the
installation of the package.
<li>Information about the package(s) is recorded in a central
repository, by default located in <tt>/var/db/pkg/</tt>.
This will, among other things, prevent the dependencies of a package
from being deleted before the package itself has been deleted.
This helps ensure that an application cannot be accidentally broken
by a careless user.
</ul>


<a name="Easy"></a>
<h3>15.2.2 - Making things easy: PKG_PATH</h3>

<p>
You can make things really easy by using the <tt>PKG_PATH</tt>
environment variable.
Just point it to your favorite location, and pkg_add(1) will
automatically look there for any package you specify, <b>and</b>
also fetch and install the necessary dependencies of this package
automatically.

<p>
Example:
<blockquote><pre>
$ <b>export PKG_PATH=ftp://your.ftp.mirror/OpenBSD/3.8/packages/`machine -a`/</b>
</pre></blockquote>

<p>
Notice the use of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=machine&amp;sektion=1">machine(1)</a>
in the above command line.
This automatically substitutes your installed OpenBSD "application
architecture", which is usually, but not always, your platform name.
Of course, if you are using snapshots, you will replace "3.8" with
"snapshots".

<p>
As with the classic <tt>PATH</tt> variable, you can also specify
multiple locations, separated by colons.
If the first entry in <tt>PKG_PATH</tt> fails, the next one will be
tried, and so on, until the package is found.
If all entries fail, an error is produced.

<a name="PkgFind"></a>
<h3>15.2.3 - Finding packages</h3>

A large collection of pre-compiled packages is available for most common
architectures.
Just look for your package in one of these places:

<ul>
<li>On one of the three <a href="../orders.html">CD-ROMs</a>,
depending on your architecture.
The CD-ROMs carry only the most commonly used, freely distributable
packages for the most commonly used platforms.
<li>On the <a href=../ftp.html>FTP mirror servers</a>.
Packages are located in the <tt>/pub/OpenBSD/3.8/packages</tt> directory.
From there, packages are broken down depending on architecture.
<li>In the package lists on the OpenBSD website:
<ul>
<li><a href="../3.8_packages/">Packages for OpenBSD 3.8</a>
<li><a href="../3.7_packages/">Packages for OpenBSD 3.7</a>
<li><a href="../3.6_packages/">Packages for OpenBSD 3.6</a>
</ul>
</ul>

<p>
If you have the ports tree on your system, you can quickly find the
package you are looking for as explained in
<a href="#PortsSearch">Searching the ports tree</a>.

<p>
You will notice that certain packages are available in a few different
varieties, formally called <b>flavors</b>.
Others are pieces of the same application which may be installed separately.
They are called <b>subpackages</b>.
This will be detailed further in <a href="#PortsFlavors">Using flavors and
subpackages</a> but flavor basically means they are configured with
different options.
Currently, many packages have flavors that include database support,
support for systems without X, or network additions like SSL and IPv6.
Every flavor of a package will have a different suffix in its package
name.
For detailed information about package names, please refer to
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=packages-specs&amp;sektion=7">packages-specs(7)</a>.

<p>
<b>Note:</b>
Not all possible packages are necessarily available on the FTP
servers!
Some applications simply don't work on all architectures.
Some applications can not be distributed via FTP (or CDROM) for licensing
reasons.
There may also be many possible combinations of flavors of a port,
and the OpenBSD project just does not have the resources to build them all.
If you need a combination which is not available, you will have to build
the port from source.
For more information on how to do that, read
<a href="#PortsFlavors">Using flavors and subpackages</a> in the Ports
section of this document.


<a name="PkgInstall"></a>
<h3>15.2.4 - Installing new packages</h3>

To install packages, the utility
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a> 
is used.
If you have <a href="#Easy">made things easy</a> for yourself by setting
the <tt>PKG_PATH</tt> environment variable, you can just call pkg_add(1)
with the package name, as in the following basic example.

<blockquote><pre>
$ <b>sudo pkg_add -v screen-4.0.2</b>
parsing screen-4.0.2
installed /etc/screenrc from /usr/local/share/examples/screen/screenrc | 71%
screen-4.0.2: complete
</pre></blockquote>

<p>
In this example the <b>-v</b> flag was used to give a more verbose
output.
This option is not needed but it is helpful for debugging and was
used here to give a little more insight into what pkg_add(1) is actually
doing.
Notice the message mentioning <i>/etc/screenrc</i>.
Messages like this will be given to you whether or not you use the
<b>-v</b> flag.
Specifying multiple <b>-v</b> flags will produce even more
verbose output.

<p>
Let us now consider an example of a package which has dependencies:

<blockquote><pre>
$ <b>sudo pkg_add -v tin-1.6.2</b>
parsing tin-1.6.2
Dependencies for tin-1.6.2 resolve to: gettext-0.10.40p3, libiconv-1.9.2p1,
libutf8-0.7.3, pcre-4.5
(todo: libiconv-1.9.2p1,gettext-0.10.40p3,pcre-4.5,libutf8-0.7.3)
tin-1.6.2:parsing libiconv-1.9.2p1
tin-1.6.2:libiconv-1.9.2p1: complete                                         
tin-1.6.2:parsing gettext-0.10.40p3
Dependencies for gettext-0.10.40p3 resolve to: libiconv-1.9.2p1
tin-1.6.2:gettext-0.10.40p3: complete                                        
tin-1.6.2:parsing pcre-4.5
tin-1.6.2:pcre-4.5: complete                                                 
tin-1.6.2:parsing libutf8-0.7.3
tin-1.6.2:libutf8-0.7.3: complete                                            
tin-1.6.2: complete
</pre></blockquote>

Again we added the <b>-v</b> flag to see more of what is happening.
Upon investigating the packing information, dependencies are found and
they are installed first.
Somewhere in the middle you can see the gettext package being installed,
which depends on libiconv.
Before installing gettext, its packing information is examined and it
is verified whether libiconv has already been installed.

<p>
It is possible to specify multiple package names on one line, which
then all get installed at once, along with possible dependencies.

<p>
If for some reason you decide not to use <tt>PKG_PATH</tt>, it is also
possible to specify the absolute location of a package on the command line.
This absolute location may be a local path, or a URL referring to
FTP, HTTP, or SCP locations.
Let's consider installation via FTP in the next example:

<blockquote><pre>
$ <b>sudo pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/3.8/packages/`machine -a`/screen-4.0.2.tgz</b>
screen-4.0.2: complete
</pre></blockquote>

<p>
In this example the <b>-v</b> flag wasn't used, so only
needed messages are shown.
Notice that I entered the complete filename by adding a <b>.tgz</b> suffix.
You can also skip this suffix as in the previous examples since it is
auto-completed by pkg_add(1).

<p>
<b>Note:</b> Not all architectures have the same packages available.
Some ports do not work on certain architectures, and performance limits
the number of packages that can be built on others.

<p>
For safety, if you are installing a package which you had installed
earlier (or an older version of it) and removed, pkg_add(1) will
<b>not</b> overwrite configuration files which have been modified.
Instead, it will inform you about this as follows (only when using the
<b>-v</b> flag, however!):

<blockquote><pre>
$ <b>sudo pkg_add -v screen-4.0.2</b>
parsing screen-4.0.2
The existing file /etc/screenrc has NOT been changed**                 | 71%
It does NOT match the sample file /usr/local/share/examples/screen/screenrc
You may wish to update it manually
screen-4.0.2: complete
</pre></blockquote>

Sometimes you may encounter an error like the one in the following
example:

<blockquote><pre>
$ <b>sudo pkg_add xv-3.10ap3</b>
xv-3.10ap3:jpeg-6b: complete
xv-3.10ap3:png-1.2.8: complete
xv-3.10ap3:tiff-3.7.3: complete
Can't install xv-3.10ap3: lib not found X11.9.0
Even by looking in the dependency tree:
        tiff-3.7.3, jpeg-6bp2, png-1.2.8
Maybe it's in a dependent package, but not tagged with @lib ?
(check with pkg_info -K -L)
If you are still running 3.6 packages, update them.
</pre></blockquote>

There is pkg_add(1) nicely installing dependencies, when all of a sudden
it aborts the installation of xv.
This is another safety precaution which is available since OpenBSD 3.7.
The packing information bundled in the package includes information
about shared libraries that the package expects to be installed,
system libraries as well as third party libraries.
If one of the required libraries cannot be found, the package is not
installed because it would not function anyway.

<p>
To solve this type of conflict, you must find out what to install
in order to get the required libraries on your system.

<!--
insert a good algorithm here
-->

There are several things to check:
<ul>
<li>You may have older packages installed: an older version of the
required library is present.
In this case, upgrade these packages.
<li>Your system may be incomplete: you did not install one of the
file sets, which contains the required library.
Just <a href="faq4.html#AddFileSet">add the required file set.</a>
<li>Your system may be out of date: you have an older version of the
required library.
Boot the installer (as detailed in <a href="faq4.html">FAQ 4</a>),
and choose to (U)pgrade your complete system.
</ul>

<a name="PkgList"></a>
<h3>15.2.5 - Listing installed packages</h3>

You can see a list of installed packages by using the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1">pkg_info(1)</a>
utility.

<blockquote><pre>
$ <b>pkg_info</b>
aterm-0.4.2         color vt102 terminal emulator with transparency support
bzip2-1.0.3         block-sorting file compressor, unencumbered
fluxbox-0.9.13      window manager based on the original Blackbox code
gettext-0.10.40p3   GNU gettext
imlib2-1.1.2p0      image manipulation library
jpeg-6bp2           IJG's JPEG compression utilities
libiconv-1.9.2p1    character set conversion library
libltdl-1.5.18      GNU libtool system independent dlopen wrapper
libungif-4.1.0b1    tools and library routines for working with GIF images
libutf8-0.7.3       provides UTF-8 locale support
mutt-1.4.2ip0       tty-based e-mail client
ncftp-3.1.9         ftp replacement with advanced user interface
pcre-4.5            perl-compatible regular expression library
png-1.2.8           library for manipulating PNG images
screen-4.0.2        multi-screen window manager
tcsh-6.13.00        extended C-shell with many useful features
tiff-3.7.3          tools and library routines for working with TIFF images
tin-1.6.2           threaded NNTP and spool based UseNet newsreader
</pre></blockquote>

<p>
When given an installed package name (or location to the uninstalled
package), pkg_info(1) will show more detailed information about that
specific package.

<a name="PkgUpdate"></a>
<h3>15.2.6 - Updating installed packages</h3>

Since OpenBSD 3.7, it is possible to update existing packages by using
the <b>-r</b> (= replace) switch to
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>.
OpenBSD 3.8 introduces the <b>-u</b> switch to pkg_add(1).
It is the beginning of a true update mechanism, and will be extended in
future releases.
For now, it will only tell you the name of the new package.

<p>
Let's say I had an older version of unzip installed before upgrading this
box from OpenBSD 3.7 to 3.8.
The <b>-u</b> switch can be used to find out the new package name,
particularly the new version number, as follows:

<blockquote><pre>
$ <b>sudo pkg_add -u unzip</b>
Updating unzip-5.51 -> unzip-5.52
Update using pkg_add -r unzip-5.52
</pre></blockquote>

Now I can easily upgrade to the newer 3.8 package by just following the
above instruction and replacing the old package in one go:

<blockquote><pre>
$ <b>sudo pkg_add -r unzip-5.52</b>
unzip-5.52 (extracting): complete
unzip-5.51 (deleting): complete
unzip-5.52 (installing): complete
Clean shared items: complete
</pre></blockquote>

<p>
Invoking pkg_add(1) with the <b>-u</b> flag and no package name will just
examine all installed packages for updated versions.
When a package has dependencies, they are also examined for updates.

<p>
<b>Note:</b>
The <b>-u</b> switch relies on the <tt>PKG_PATH</tt> environment variable.
If it is not set, pkg_add(1) will not be able to find updates.

<p>
If you had a configuration file belonging to the old version, which
you modified, it will be left untouched by default.
You can, however, replace it with the default configuration file of
the new version, by calling pkg_add(1) with the <b>-c</b> flag.

<p>
The above is a handy way to quickly upgrade a package with a new version.
It works well in more than 99% of the cases.
Some very complicated software, however, will still require you to use
the old method of first removing the old package, then adding the new
package.
This is slightly inconvenient, as packages may trigger dependencies, and
you may have to remove a large subset of packages for an update.

<a name="PkgRemove"></a>
<h3>15.2.7 - Removing installed packages</h3>

<p>
To delete a package, simply take the proper name of the package as shown
by pkg_info(1) (see <a href="#PkgList">Listing installed packages</a>
above) and use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&amp;sektion=1">pkg_delete(1)</a>
to remove the package.
In the example below, the screen package is being removed.
Notice that on some occasions there are instructions of extra items
that need to be removed that pkg_delete(1) did not remove for you.
As with the pkg_add(1) utility, you can use the <b>-v</b> flag to
get more verbose output.

<blockquote><pre>
$ <b>sudo pkg_delete screen</b>
screen-4.0.2: complete
Clean shared items: complete
</pre></blockquote>

<p>
<b>Note:</b> Often, it is not necessary to specify the version numbers
and flavors with the package name, since pkg_delete(1) will usually be
able to find the full name by itself.
You need to specify the complete package name (in the example, that is
screen-4.0.2) only if ambiguity is possible due to multiple installed
packages with the specified name, in which case pkg_delete(1) cannot
know which package to delete.

<p>
For safety, pkg_delete(1) will not remove configuration files if they
have been modified.
Instead it will inform you about this as follows:

<blockquote><pre>
$ <b>sudo pkg_delete screen</b>
screen-4.0.2: complete
Clean shared items: complete 
--- screen-4.0.2 -------------------
You should also remove /etc/screenrc (which was modified)
</pre></blockquote>

<p>
If still you wish to have those configuration files removed automatically,
you can do so by using the <b>-c</b> flag.


<a name="PkgSecurity"></a>
<h3>15.2.8 - Security updates (-stable packages)</h3>

When serious bugs or security flaws are discovered in third party
software, they are fixed in the -stable branch of the ports tree,
and a selection of updated binary packages is made available.

<p>
Please refer to the
<a href="../pkg-stable.html">stable packages page</a> to find out about
updated packages and important updates to the -stable branch.
Note that updated packages are only available for the most widely
used platforms.
If updated packages are not available for your specific platform, you
will need to use the -stable branch of the ports tree and compile from
source.

<p>
If you want to receive security announcements related to software in
the packages and ports system, you can subscribe to the ports-security
<a href="../mail.html">mailing list</a>.

<p>
Package names are <b>always</b> changed in case of a package update,
to avoid any risk of confusion between a package from the release
and a bug-fixed package.
This name change may be a higher version number or, in case the version
number remains the same, a <b>pN</b> suffix is added, where <b>N+1</b>
represents the number of times this package has been patched.

<a name="PkgPartial"></a>
<h3>15.2.9 - Incomplete package installation or removal</h3>

In some odd cases, you may find that a package was not added or deleted
completely, because of conflicts with other files.
The incomplete installation is usually marked with "partial-" prepended
to the package name.
This can, for instance, happen when you coincidentally press CTRL+C
during installation:

<blockquote><pre>
$ <b>sudo pkg_add screen-4.0.2</b>
screen-4.0.2: complete                                                      7%
Adjusting md5 for /usr/local/info/screen.info-3 from 49fb3fe1cc3a3b0057518459811b6dac to 3b9c7811244fb9f8d83bb27d3a0f60d8
/usr/sbin/pkg_add: Installation of screen-4.0.2 failed , partial installation recorded as partial-screen-4.0.2
</pre></blockquote>

<font color="#FF0000">Also "borked" is used ....  when exactly ?</font>

<p>
It is always a good idea to remove borked and partial packages from your
system, and to fix potential problems that lead to this failure.
It is often an indication that you do not have a clean system with
everything installed from packages, but possibly packages mixed up with
other software installed straight from source.


<a name="Ports"></a>
<h2>15.3 - Working with Ports</h2>

As mentioned in the introduction, packages are compiled from the ports
tree.
In this section we will explain how the ports tree works, when you should
use it and how you can use it.

<a name="PortsHow"></a>
<h3>15.3.1 - How does it work?</h3>

The ports tree, a concept originally borrowed from
<a href="http://www.freebsd.org">FreeBSD</a>, is a set of Makefiles,
one for each third party application, for controlling

<ul>
<li>where and how to fetch the source of the software,
<li>which other software it depends upon,
<li>how to alter the sources (if necessary),
<li>how to configure and build it,
<li>how to test it (optional),
<li>how to install it.
</ul>

<p>
Apart from the Makefile, each port also contains at least the following:

<ul>
<li>a PLIST or packing list, which contains instructions for package
creation once the application has been built.
<li>a DESCR or description of the application
<li>a distfile, containing distribution file checksums and size.
</ul>

<p>
All this information is kept in a directory hierarchy under
<tt>/usr/ports</tt>.
This hierarchy contains three special subdirectories:
<ul>
<li><tt>distfiles/</tt> - where the ports system stores
software distribution sets after downloading.
<li><tt>infrastructure/</tt> - the main directory of the ports
infrastructure, containing all necessary scripts and makefiles.
<li><tt>packages/</tt> - contains all packages built by the ports system.
</ul>
The other subdirectories all form different application categories,
which contain the subdirectories of the actual ports.
Complex ports may be organized to an even deeper level, for example if
they have a core part and a set of extensions, or a stable and a snapshot
version of the application.
Every port directory must contain a <tt>pkg/</tt> subdirectory containing
packing list(s) and description file(s).
There may also be <tt>patches/</tt> and <tt>files/</tt> subdirectories,
for source patches and additional files, respectively.

<p>
When a user issues
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a>
in the subdirectory of a specific port, the system will recursively
walk its dependency tree, check whether the required dependencies are
installed, build and install any missing dependencies, and then
continue the build of the desired port.
All of the building happens inside the <i>working directory</i> that
the port creates.
This is either a subdirectory of the port's main directory, in which case
it is recognized by its prefix "w-", or a subdirectory of $WRKOBJDIR, if
the WRKOBJDIR variable has been set (see <a href="#PortsConfig">Additional
configuration of the ports system</a>).

<p>
<b>Note:</b> Ports are never directly installed on your system!
They use a <i>fake installation directory</i>.
Everything that gets installed there, is bundled together into a
package (which is stored in the <tt>packages/</tt> subdirectory of the
ports tree as mentioned earlier).
Installing a port really means: creating a package, and then
installing that package!

<p>
<b>More information</b> about the ports system may be found in these
manual pages:

<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&amp;sektion=7">ports(7)</a>
- describes the different stages (make targets) of port installation,
the use of flavors and subpackages and some other options.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bsd.port.mk&amp;sektion=5">bsd.port.mk(5)</a>
- in depth information about all the make targets, variables, the fake
(installation directory) framework, etc.
</ul>

<a name="PortsFetch"></a>
<h3>15.3.2 - Fetching the ports tree</h3>

Before continuing, you must read the section about NOT
<a href="#NoFun">mixing up your OpenBSD system and ports tree</a>.
Once you have decided which flavor of the ports tree you want, you can
get the ports tree from different sources.
The table below gives an overview of where you can find the different
flavors, and in which form.
An 'x' marks availability and '-' means it is not available through
that specific source.

<p>
<table border="1" align="center">
<tr align="center">
<td align="left">Source</td>
<td>Form</td>
<td colspan="4">Flavor</td>
</tr>
<tr align="center">
<td colspan="2"></td>
<td>-release</td>
<td>-stable</td>
<td>snapshots</td>
<td>-current</td>
</tr>
<tr align="center">
<td align="left"><a href="../orders.html">CD-ROM</a></td>
<td>.tar.gz</td>
<td>x</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr align="center">
<td align="left"><a href="../ftp.html">FTP mirrors</a></td>
<td>.tar.gz</td>
<td>x</td>
<td>-</td>
<td>x</td>
<td>-</td>
</tr>
<tr align="center">
<td align="left"><a href="../anoncvs.html">AnonCVS</a></td>
<td>cvs checkout</td>
<td>x</td>
<td>x</td>
<td>-</td>
<td>x</td>
</tr>
</table>

<p>
On the CD-ROM and FTP mirrors, look for a file named <tt>ports.tar.gz</tt>.
You want to untar this file in the <tt>/usr</tt> directory, which will
create <tt>/usr/ports</tt>, and all the directories under it.
For example:

<blockquote><pre>
$ <b>cd /tmp</b>
$ <b>ftp ftp://ftp.openbsd.org/pub/OpenBSD/3.8/ports.tar.gz</b>
$ <b>cd /usr</b>
$ <b>sudo tar xzf /tmp/ports.tar.gz</b>
</pre></blockquote>

<p>
The snapshots available on the FTP mirrors are generated daily from
the -current ports tree.
You will find the snapshots in the <tt>pub/OpenBSD/snapshots/</tt>
directory.
If you are using a snapshot of the ports tree, you should have
installed a matching snapshot of OpenBSD.
Make sure you keep your ports tree and your OpenBSD system in sync!

<p>
For more information about obtaining the ports tree via AnonCVS,
please read the <a href="../anoncvs.html">AnonCVS page</a> which
contains a list of available servers and a number of examples.


<a name="PortsSearch"></a>
<h3>15.3.3 - Searching the ports tree</h3>

Once you have the ports tree in place on your system, it becomes very
easy to search for software.
Just use <tt>make search key="searchkey"</tt>, as shown in the
following example.

<blockquote><pre>
$ <b>cd /usr/ports</b>
$ <b>make search key=fetchmail</b>
Port:   fetchmail-6.2.5.2
Path:   mail/fetchmail
Info:   mail retrieval utility for POP2, POP3, KPOP, IMAP and more
Maint:  Federico Schwindt &lt;fgsch@openbsd.org&gt;
Index:  mail
L-deps: iconv.2::converters/libiconv intl.1:gettext->=0.10.38:devel/gettext
B-deps: gettext->=0.10.38:devel/gettext
R-deps: gettext->=0.10.38:devel/gettext
Archs:  any
</pre></blockquote>

The search result gives a nice overview of each application that is
found: the port name, the path to the port, a one-line description, the
port's maintainer, keywords related to the port, library/build/runtime
dependencies, and architectures on which the port is known to work.


<a name="PortsInstall"></a>
<h3>15.3.4 - Straightforward installation: a simple example</h3>

For clarity's sake, let's consider a simple example: fetchmail.
This application depends on gettext, which depends on libiconv.
In turn, libiconv needs metaauto to build, metaauto will make autoconf-2.57
in this case, and autoconf needs help2man to build.
The last three packages are already present on the system: you will see them
listed as "found" straight away in the following output.
This is a realistic scenario if you regularly build ports, because these
tools are used by a lot of different software.

<blockquote><pre>
$ <b>cd /usr/ports/mail/fetchmail</b>
$ <b>sudo make install</b>
===&gt;  Checking files for fetchmail-6.2.5.2
&gt;&gt; fetchmail-6.2.5.2.tar.gz doesn't seem to exist on this system.
&gt;&gt; Attempting to fetch /usr/ports/distfiles/fetchmail-6.2.5.2.tar.gz from http://download.berlios.de/fetchmail/.
100% |**************************************************|  1247 KB    00:24    
&gt;&gt; Size matches for /usr/ports/distfiles/fetchmail-6.2.5.2.tar.gz
&gt;&gt; Checksum OK for fetchmail-6.2.5.2.tar.gz. (sha1)
===&gt;  fetchmail-6.2.5.2 depends on: gettext-&gt;=0.10.38 - not found
===&gt;  Verifying install for gettext-&gt;=0.10.38 in devel/gettext
===&gt;  Checking files for gettext-0.10.40p3
&gt;&gt; gettext-0.10.40.tar.gz doesn't seem to exist on this system.
&gt;&gt; Attempting to fetch /usr/ports/distfiles/gettext-0.10.40.tar.gz from ftp://ftp.gnu.org/gnu/gettext/.
100% |**************************************************|  1321 KB    00:11    
&gt;&gt; Size matches for /usr/ports/distfiles/gettext-0.10.40.tar.gz
&gt;&gt; Checksum OK for gettext-0.10.40.tar.gz. (sha1)
===&gt;  gettext-0.10.40p3 depends on: iconv.2 (libiconv-*) - iconv.2 missing...
===&gt;  Verifying install for iconv.2 (libiconv-*) in converters/libiconv
===&gt;  Checking files for libiconv-1.9.2p1
&gt;&gt; libiconv-1.9.2.tar.gz doesn't seem to exist on this system.
ttempting to fetch /usr/ports/distfiles/libiconv-1.9.2.tar.gz from ftp://ftp.gnu.org/gnu/libiconv/.
100% |**************************************************|  3828 KB    00:30    
&gt;&gt; Size matches for /usr/ports/distfiles/libiconv-1.9.2.tar.gz
&gt;&gt; Checksum OK for libiconv-1.9.2.tar.gz. (sha1)
===&gt;  libiconv-1.9.2p1 depends on: metaauto-0.5 - found
===&gt;  libiconv-1.9.2p1 depends on: autoconf-2.57 - found
===&gt;  Extracting for libiconv-1.9.2p1
===&gt;  Patching for libiconv-1.9.2p1
  [...snip...]
===&gt;  Configuring for libiconv-1.9.2p1
  [...snip...]
===&gt;  Building for libiconv-1.9.2p1
  [...snip...]
===&gt;  Faking installation for libiconv-1.9.2p1
  [...snip...]
===&gt;  Building package for libiconv-1.9.2p1
Switching to /usr/ports/converters/libiconv/pkg/PFRAG.shared
Link to /usr/ports/packages/i386/ftp/libiconv-1.9.2p1.tgz
Link to /usr/ports/packages/i386/cdrom/libiconv-1.9.2p1.tgz
===&gt;  Installing libiconv-1.9.2p1 from /usr/ports/packages/i386/all/libiconv-1.9.2p1.tgz
libiconv-1.9.2p1: complete                                                   
===&gt; Returning to build of gettext-0.10.40p3
===&gt;  gettext-0.10.40p3 depends on: iconv.2 (libiconv-*) - found
===&gt;  Extracting for gettext-0.10.40p3
===&gt;  Patching for gettext-0.10.40p3
===&gt;  Configuring for gettext-0.10.40p3
  [...snip...]
===&gt;  Building for gettext-0.10.40p3
  [...snip...]
===&gt;  Faking installation for gettext-0.10.40p3
  [...snip...]
===&gt;  Building package for gettext-0.10.40p3
Switching to /usr/ports/devel/gettext/pkg/PFRAG.shared
Link to /usr/ports/packages/i386/ftp/gettext-0.10.40p3.tgz
Link to /usr/ports/packages/i386/cdrom/gettext-0.10.40p3.tgz
===&gt;  gettext-0.10.40p3 depends on: libiconv-* - found
===&gt;  Installing gettext-0.10.40p3 from /usr/ports/packages/i386/all/gettext-0.10.40p3.tgz
gettext-0.10.40p3: complete                                                  
===&gt; Returning to build of fetchmail-6.2.5.2
===&gt;  fetchmail-6.2.5.2 depends on: gettext-&gt;=0.10.38 - found
===&gt;  fetchmail-6.2.5.2 depends on: iconv.2 (libiconv-*) - found
===&gt;  fetchmail-6.2.5.2 depends on: intl.1 (gettext-&gt;=0.10.38) - found
===&gt;  Extracting for fetchmail-6.2.5.2
===&gt;  Patching for fetchmail-6.2.5.2
===&gt;  Configuring for fetchmail-6.2.5.2
configure: loading site script /usr/ports/infrastructure/db/config.site
checking for a BSD-compatible install... /usr/bin/install -c -o root -g bin
checking whether build environment is sane... yes
checking for gawk... (cached) nawk
  [...snip...]
===&gt;  Building for fetchmail-6.2.5.2
  [...snip...]
===&gt;  Faking installation for fetchmail-6.2.5.2
  [...snip...]
===&gt;  Building package for fetchmail-6.2.5.2
Link to /usr/ports/packages/i386/ftp/fetchmail-6.2.5.2.tgz
Link to /usr/ports/packages/i386/cdrom/fetchmail-6.2.5.2.tgz
===&gt;  fetchmail-6.2.5.2 depends on: gettext-&gt;=0.10.38 - found
===&gt;  Installing fetchmail-6.2.5.2 from /usr/ports/packages/i386/all/fetchmail-6.2.5.2.tgz
fetchmail-6.2.5.2: complete
</pre></blockquote

<p>
As you can see, the ports system is doing many things automatically.
It will fetch, extract, and patch the source code, configure and build
(compile) the source, install the files into a fake directory, create
a package (corresponding to the packing list) and install this package
onto your system (usually under <tt>/usr/local/</tt>).
And it does this recursively <b>for all dependencies</b> of the port.
Just notice the
"<tt>===&gt; Verifying install for ...</tt>" and
"<tt>===&gt; Returning to build of ...</tt>" lines in the above output,
indicating the walk through the dependency tree.

<p>
If a previous version of the application you want to install, was
already installed on your system, you can use <tt><b>make
update</b></tt> instead of <tt><b>make install</b></tt>.
This will call pkg_add(1) with the <b>-r</b> flag.

<p>
<b>Note:</b>
Large applications will require a lot of system resources to build.
Good examples are compilers like GCC 4.0 or the Java 2 Software
Development Kit.
If you get "out of memory" type of errors when building such a port,
this usually has one of two causes:

<ul>
<li>Your resource limits are too restrictive.
Adjust them with ksh's ulimit or csh's limit command.
If that doesn't help, just become root before starting the build, or use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a>
with the <tt>-c</tt> flag to run the build with the resources limited
by the specified login class (refer to
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5">login.conf(5)</a>
for details about login classes).
<li>You simply don't have enough RAM in your machine.
</ul>


<a name="PortsClean"></a>
<h3>15.3.5 - Cleaning up after a build</h3>

You probably want to clean the port's default working directory after
you have built the package and installed it.

<blockquote><pre>
$ <b>sudo make clean</b>
===&gt;  Cleaning for fetchmail-6.2.5.2
</pre></blockquote>

In addition, you can also clean the working directories of all
dependencies of the port with this make target:

<blockquote><pre>
$ <b>sudo make clean-depends</b>
===&gt;  Cleaning for help2man-1.29
===&gt;  Cleaning for autoconf-2.57
===&gt;  Cleaning for metaauto-0.5
===&gt;  Cleaning for libiconv-1.9.2p1
===&gt;  Cleaning for gettext-0.10.40p3
===&gt;  Cleaning for fetchmail-6.2.5.2
</pre></blockquote>

If you wish to remove the source distribution set(s) of the port, you
would use

<blockquote><pre>
$ <b>sudo make distclean</b>
===&gt;  Cleaning for fetchmail-6.2.5.2
===&gt;  Dist cleaning for fetchmail-6.2.5.2
</pre></blockquote>

In case you have been compiling multiple flavors of the same port,
you can clear the working directories of all these flavors at once using

<blockquote><pre>
$ <b>sudo make clean=flavors</b>
</pre></blockquote>


<a name="PortsDelete"></a>
<h3>15.3.6 - Uninstalling a port's package</h3>

It is very easy to uninstall a port:

<blockquote><pre>
$ <b>sudo make uninstall</b>
===&gt; Deinstalling for fetchmail-6.2.5.2
fetchmail-6.2.5.2: complete
Clean shared items: complete
</pre></blockquote>

This will call pkg_delete(1) to have the corresponding package removed
from your system.
If desired, you can also uninstall and re-install a port's package by
using

<blockquote><pre>
$ <b>sudo make reinstall</b>
===&gt;  Cleaning for fetchmail-6.2.5.2
/usr/sbin/pkg_delete fetchmail-6.2.5.2
fetchmail-6.2.5.2: complete
Clean shared items: complete
===&gt;  Installing fetchmail-6.2.5.2 from /usr/ports/packages/i386/all/fetchmail-6.2.5.2.tgz
fetchmail-6.2.5.2: complete
</pre></blockquote>

If you would like to get rid of the package you just built, you can do so
as follows:

<blockquote><pre>
$ <b>sudo make clean=package</b>
===&gt;  Cleaning for fetchmail-6.2.5.2
rm -f /usr/ports/packages/i386/all/fetchmail-6.2.5.2.tgz
</pre></blockquote>

Use <tt>packages</tt> instead of <tt>package</tt> to also delete any
subpackages (see below).


<a name="PortsFlavors"></a>
<h3>15.3.7 - Using flavors and subpackages</h3>

Please do read the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&amp;sektion=7">ports(7)</a>
manual page, which gives a good overview of this topic.
There are two mechanisms to control the packaging of software according
to different needs.

<p>
The first mechanism is called <b>flavors</b>.
A flavor usually indicates a certain set of compilation options.
For instance, some applications have a "no_x11" flavor which can be used on
systems without X.
Some shells have a "static" flavor, which will build a statically linked
version.
There are ports which have different flavors for building them with
different graphical toolkits.
Other examples include: support for different database formats,
different networking options (SSL, IPv6, ...), different paper sizes, etc.

<p>
<b>Summary:</b>
Most likely you will use flavors when a package has not been made
available for the flavor you are looking for.
In this case you will specify the desired flavor and build the port
yourself.

<p>
Every flavor of a port will have its own working directory during building
and every flavor will be packaged into a correspondingly named package to
avoid any confusion.
To see the different flavors of a certain port, you would change to its
subdirectory and issue

<blockquote><pre>
$ <b>make show=FLAVORS</b>
</pre></blockquote>

<p>
The second mechanism is called <b>subpackages</b>.
A porter may decide to create subpackages for different pieces of the
same application, if they can be logically separated.
You will often see subpackages for the client part and the server part
of a program.
Sometimes extensive documentation is bundled in a separate subpackage
because it takes up quite some disk space.
Other examples are: extensive test suites which come with the software,
separate modules with support for different things, etc.

<p>
<b>Summary:</b>
You will use subpackages when you need only part of a certain
application, not the whole thing.
However, it is very likely that the subpackage you are looking for exists,
and is ready to be fetched and installed from your nearest FTP mirror.

<p>
To list the different subpackages available for a port, use

<blockquote><pre>
$ <b>make show=MULTI_PACKAGES</b>
</pre></blockquote>

It is possible to select which subpackage(s) to install from within the
ports tree.
After some tests, this procedure will just call
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1">pkg_add(1)</a>
to install the desired subpackage(s).

<blockquote><pre>
$ <b>sudo env SUBPACKAGE="-server" make install</b>
</pre></blockquote>

<p>
<b>Note:</b>
The subpackages mechanism only handles packages, it does not modify any
configuration options before building the port.
For that purpose you must use flavors.


<a name="PortsConfig"></a>
<h3>15.3.8 - Additional configuration of the ports system</h3>

<font color="#FF0000">please check this...</font>

<p>
Because the OpenBSD project does not have the resources to fully review
the source code of all software in the ports tree, it is safer to do all
building as a regular user, and perform only those steps that require
superuser privileges as root.

<p>
To start with, you can set the ownerships of the ports tree to your
username and group name:

<blockquote><pre>
# <b>chown -R myuser:mygroup /usr/ports</b>
</pre></blockquote>

You can use a separate directory structure for port building by
setting the WRKOBJDIR variable.
For example, you could add the following line to <tt>/etc/mk.conf</tt>

<blockquote><pre>
WRKOBJDIR=/usr/obj/ports
</pre></blockquote>

You can set up
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a>
which has already been used extensively in the above examples, and add
a line to <tt>/etc/mk.conf</tt> containing

<blockquote><pre>
SUDO=/usr/bin/sudo
</pre></blockquote>

This will make sure the system will ask for a password and perform
tasks requiring superuser permissions as root.
Examples are the <tt>fake</tt> and <tt>install</tt> make targets.

<p>
Obviously, if you set up your system this way, you do not need to explicitly
use sudo(8) in your commands anymore, as in the port building examples above.

<p>
Additionally you can set

<blockquote><pre>
USE_SYSTRACE=Yes
</pre></blockquote>

again in <tt>/etc/mk.conf</tt> (or in the port's Makefile ?).
This will make the ports system use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systrace&amp;sektion=1">systrace(1)</a>
to enforce the build procedure to stay inside allowed directories, and
prohibit writing in illegal places, thereby considerably reducing the risk
of a damaged system.


<a name="PortsSecurity"></a>
<h3>15.3.9 - Security updates</h3>

When serious bugs or security flaws are discovered in third party
software, they are fixed in the <b>-stable</b> branch of the ports tree.

<p>
This means all you need to do is make sure you check out the correct
branch of the ports tree, and build the desired software from it.
You can keep your tree up-to-date with CVS, and in addition subscribe
to the ports-security <a href="../mail.html">mailing list</a> to receive
security announcements related to software in the ports tree.

<p>
Of course, security updates reach the -current ports tree before being
taken up in the -stable branch.


<a name="PkgFAQ"></a>
<h2>15.4 - FAQ</h2>

<a name="NoFun"></a>
<h3>15.4.1 - I'm getting all kinds of crazy errors.
I just can't seem to get this ports stuff working at all.</h3>

<p>
It is very likely that you are using a system and ports tree which are
not in sync.

<p>
<i>Sorry?</i>
<ul>
<li>Read EVERYTHING about
<a href="faq5.html#Flavors">OpenBSD's Flavors</a>:
-release, -stable, and -current.
The short summary is as follows, but please do read the document
mentioned above to get an idea about which one it is you want to use.
<ul>
<li><a href="../orders.html">Release</a>: What is on the CD.
<li><a href="../stable.html">Stable</a>: Release, plus security and
  reliability enhancements.
<li><a href="current.html">Current</a>: The development version
  of OpenBSD.
</ul>       
<li>Do not check out a -current ports tree and expect it to work on
a -release or -stable system.
This is one of the most common errors and you will irritate people when
you ask for help about why "nothing seems to work!"
<li>Because this is important to get right, we will rephrase it once more.
If your system is -release, use the -release version of the ports tree.
If your system is -stable, you need the -stable version of the ports tree.
And finally, if you follow -current, you need both a -current system
and a -current ports tree.
If you use X11 as part of your system, it must also follow the
corresponding branch!
</ul>

<p>
Yes, this really does mean a wonderful new port will typically not
work on your "older" system -- even if that system was -current just a
few weeks ago.

<a name="Latest"></a>
<h3>15.4.2 - The latest version of my Top-Favorite-Software is not available!</h3>

If you are using a release or stable version of OpenBSD, you will not
find any package updates until the next release, or until security
issues occur which justify an update of the port in the -stable branch,
and of the corresponding package.

<p>
<b>WARNING: DO NOT mix versions of Ports and OpenBSD!</b>

<p>
Doing so will sooner or later (probably very soon, in fact) cause you
headaches trying to solve <a href="#NoFun">all kinds of errors</a>!

<p>
<i>But hey, I am all -current here!</i>

<p>
The ports collection is a volunteer project.
Sometimes the project simply doesn't have the developer resources to
keep everything up-to-date. 
Developers pretty much pick up what they consider interesting and can
test in their environment.
Your <a href="../goals.html#funding">donations</a> can make a difference
for testing ports on more platforms.

<p>
Some individual ports may lag behind the mainstream versions because
of this.
The ports collection may have a version back of a program from January
while a new version of the program has been released by its developers
in May three months ago.
Often this is a conscious decision; the new version may have problems
in it on OpenBSD that the maintainer is trying to solve, or that have
simply made the application worse than the old version: OpenBSD may
have different <a href="../goals.html">goals</a> than the mainstream
developers in other projects, which sometimes results in features and
design or implementation choices that are undesirable from OpenBSD
developers' point of view.
The update may also be postponed because the new version is not
considered a crucial update.

<p>
If you really need a new version of a port, you should ask the
maintainer of the port to update the port
(see <a href="#Problems">below</a> on how to find out who 
the maintainer is).
If you can <a href="#Helping">help</a> with this, all the better.


<a name="NoPkg"></a>
<h3>15.4.3 - Why is there no package for my Top-Favorite-Software?</h3>

There are several possible reasons for this:

<ul>
<li>On the OpenBSD <a href="../orders.html">CD-ROMs</a>, there is no space
to include every possible package for every possible platform.
Therefore only the most used packages are included on the CDs.
Additionally, some software can only be redistributed for free, this
means it cannot be included on the CDs.
If you cannot find a package on the CDs, try another source, such as
an FTP mirror.
<li>Some software must simply not be redistributed in binary package
form at all, according to its license.
Other software is encumbered by patents and can therefore not be
redistributed.
If your Top-Favorite-Software falls into this category, you will need
to use the port and compile from source.
<li>Obvious, but sometimes forgotten: there is
<a href="#NoPort">no port of your Top-Favorite-Software</a>.
You can verify this by <a href="#PortsSearch">searching the ports tree</a>.
If there is indeed no port of your Top-Favorite-Software, then you
are welcome to <a href="#Helping">help</a>.
</ul>

<a name="NoPort"></a>
<h3>15.4.4 - Why is there no port of my Top-Favorite-Software?</h3>

The ports collection is a volunteer project.
Active port development is done by a limited number of people, in their
spare time.
These people usually make new ports only for software they use directly
or are interested in.

<p>
You can <a href="#Helping">help</a>.
Consider writing your own port.
There is some documentation available on this:
<a href="../porting.html">Building an OpenBSD Port</a>.
Read it, and read it again.
Especially the part about <i>maintaining</i> your port.
Then try making a new port, and test it carefully and step by step.
If finally it works OK for you, submit it to the ports mailing list
at <a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.
Chances are good you will get some feedback and testing from other
people.
If the testing is successful, your port will be considered to be taken
up in the ports tree.


<a name="NotInBase"></a>
<h3>15.4.5 - Why is my Top-Favorite-Software not part of the base system?</h3>

Because OpenBSD is supposed to be a small stand-alone UNIX-like
operating system, we need to draw a line as to what to include.
Generally, for an application to be included in the base system:

<ul>
<li>It must meet the high quality standards, laid out in the
<a href="../goals.html">goals</a> of the OpenBSD project.
<li>Its license must not be too restrictive and must be compatible
with the BSD license.
<li>It must not be too large, in order to keep the size of the base
system acceptable.
</ul>

<p>
Further answers to this question are also found in
<a href="faq1.html#HowAbout">FAQ 1</a>.

<a name="PkgVsPorts"></a>
<h3>15.4.6 - What should I use: packages or ports?</h3>

In general, you are <b>highly advised</b> to use packages
over building an application from ports.
The OpenBSD ports team considers packages to be the goal of their
porting work, not the ports themselves.

<p>
Building a complex application from source is not trivial.
Not only must the application be compiled, but the tools used to
build it must be built as well.
Unfortunately, OpenBSD, the tools, and the application are all evolving,
and often, getting all the pieces working together is a challenge.
Once everything works, a revision in any of the pieces the next day
could render it broken.
Every <a href="faq1.html#Next">six months</a>, as a
<a href="faq5.html#Flavors">new release</a> of OpenBSD is made,
an effort is made to test the building of every port on every platform,
but during the development cycle it is likely that some ports will break.

<p>
In addition to having all the pieces work together, there is just the 
matter of time and resources required to compile some applications from
source.
A common example is <a href="http://www.cvsup.org/">CVSup</a>, a tool
commonly used to <a href="../cvsup.html">track the OpenBSD source tree</a>.
To install CVSup on a moderately fast system with a good Internet
connection may take only about ten seconds -- the time required
to download and unpack a single 779kB package file.
In contrast, building CVSup on the same machine from source is a huge
task, requiring many tools and bootstrapping a compiler, taking almost
half an hour on the same machine.
Other applications, such as <a href="http://www.mozilla.org">Mozilla</a>
or <a href="http://www.kde.org">KDE</a> may take hours and huge amounts
of disk space and RAM/swap to build.
Why go through this much time and effort, when the programs are already
compiled and sitting on your <a href="../orders.html">CD-ROM</a> or
<a href="../ftp.html">FTP mirror</a>, waiting to be used?

<p>
Of course, there are a few good reasons to use ports over packages
in some cases:

<ul>
<li>Distribution rules prohibit OpenBSD from distributing a package.  
<li>You wish to modify or debug the application or study its source code.
<li>You need a FLAVOR of a port that is not built by the OpenBSD ports
team.
<li>You wish to alter the directory layout (i.e. modifying PREFIX or
SYSCONFDIR)
</ul>

However, for most people and most applications, using packages is a far
easier, and is the recommended way of adding applications to OpenBSD.


<a name="Knobs"></a>
<h3>15.4.7 - How do I tweak these ports to have maximum performance?</h3>

OpenBSD is about stability and security.
Just like the GENERIC kernel is the default and the only supported kernel,
the ports team makes sure the ports work and are stable.
If you want to switch on all kinds of compiler options, you are on your own.
Please do not ask questions on the mailing lists such as why it does not
work, when you tried to switch on a few hidden knobs to make it work faster.
In general, all this tweaking is not necessary for more than 99% of users,
and it is very likely to be a complete waste of time, for you, the user, as
well as for the developers who read about your "problems" when in reality
there are none.


<a name="Problems"></a>
<h2>15.5 - Reporting problems</h2>

If you have trouble with an existing port, please send e-mail to the
port maintainer.
To see who is the maintainer of the port, type, for example:

<blockquote><pre>
$ cd /usr/ports/archivers/unzip
$ make show=MAINTAINER
</pre></blockquote>

<p>
Alternatively, if there is no maintainer, or you can't reach
him/her, send e-mail to the OpenBSD ports mailing list,
<a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.
Please do NOT use the misc@openbsd.org mailing list for questions
about ports.
<p>
In any case please provide:
<ul>
<li>The output of <tt>sysctl -n kern.version</tt>
<li>Your OpenBSD version, including any patches you may have applied.
<li>A complete description of the problem.
Don't be afraid to provide details.
Mention all the steps you followed before the problem occurred.
Is the problem reproducible?
The more information you provide, the more likely you will get help.
</ul>
For ports which do not build correctly, a complete build transcript is
almost always required.
You can use the portslogger script, found in
<tt>/usr/ports/infrastructure/build</tt>, for this.
A sample run of portslogger might be:

<blockquote><pre>
$ cd /usr/ports/archivers/unzip
$ su
# mkdir -p ~/portslogs
# make clean install 2>&amp;1 | /usr/ports/infrastructure/build/portslogger \
           ~/portslogs
</pre></blockquote>

After this, you should have a logfile of the build in your ~/portslogs
<!-- FIXME: actually this will be root's home dir!? 
-->
directory that you can send to the port maintainer.
Also, make sure you are not using any special options in your build,
for example in /etc/mk.conf.

<p>
Alternatively, you can
<ul>
<li>Use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=script&amp;sektion=1&amp;format=html">script(1)</a>
to create a complete build transcript.
Do not remove the configure information.
<li>Attach the output of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1&amp;format=html">pkg_info(1)</a>
if it seems even remotely relevant.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1&amp;format=html">gcc(1)</a>
internal compiler errors ask you to report the bug to the gcc
mailinglist.
It does save time if you follow their direction, and provide at least
the various files produced by <tt>gcc -save-temps</tt>.
</ul>


<a name="Helping"></a>
<h2>15.6 - Helping us</h2>

There are many ways you can help.
They are listed below, by increasing order of difficulty.

<ul>
<li><a href="#Problems">Report problems</a> as you experience them.
<li>You can systematically test ports and report breakages, or suggest
improvements.
Just have a look at the <a href="../porttest.html">Port Testing Guide</a>.
<li>Test the updates to ports which are posted to the ports mailing list.
<li>Send updates or patches to a port's maintainer, or to the ports
mailing list if the port has no maintainer.
Generally this is highly appreciated, unless your patches will cause
developers to waste time rather than save time.
<li>Create new ports.
If you are really eager and want to know everything about porting
applications to OpenBSD, a good starting point is
<a href="../porting.html">Building an OpenBSD Port</a>.
</ul>

<b>Note:</b> For all creation of new ports and subsequent testing, or
for testing port updates, you <b>must run a -current system!</b>
In general, this is not a desirable environment because of its
continuously evolving nature, so proceed only if you are sure about
committing yourself to following -current.

<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq14.html">[To Section 14 - Disk Setup]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: faq15.html,v 1.13 2005/09/28 01:14:34 nick Exp $</small>

</body>
</html>
