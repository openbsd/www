<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Konfiguration</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, Nick Holland <nick@openbsd.org>
Copyright (c) 2003, 2004, Joel Knight <enabled@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
<p>
[<a href="index.html">Inhalt</a>]
[<a href="macros.html">Weiter: Listen und Makros</a>]
<p>
<h1><font color="#e00000">PF: Konfiguration</font></h1>

<hr>

<h3>Inhalt</h3>
<ul>
<li><a href="#activate">Aktivierung</a>
<li><a href="#config">Konfiguration</a>
<li><a href="#control">Kontrolle</a>
</ul>

<hr>

<a name="activate"></a>
<h2>Aktivierung</h2>
Um den PF zu aktivieren und dafür zu sorgen, dass die Konfiguratiobnsdatei
während des Bootvorganges gelesen wird, füge die Zeile
<blockquote>
<tt>
pf=YES
</tt>
</blockquote>
zur Datei
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&amp;sektion=8&amp;manpath=OpenBSD+3.6"
>/etc/rc.conf.local</a> hinzu.
<p>
Ein Neustart des Systems lässt die Änderung wirksam werden.

<p>
Der PF kann auch mit 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
>pfctl(8)</a> aktiviert oder deaktiviert werden:

<blockquote>
<tt>
# pfctl -e<br>
# pfctl -d
</tt>
</blockquote>

<p>
Diese beiden Befehle aktivieren beziehungsweise deaktiviern zwar den PF,
laden aber keine Regeln. Sie müssen zusätzlich entweder vor
oder nach der Aktivierung geladen werden.

<a name="config"></a>
<h2>Konfiguration</h2>
<p>
Normalerweise liest der PF seine Konfiguration aus der Datei 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.6"
><tt>/etc/pf.conf</tt></a> während des Systemstartes wie in den
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8&amp;manpath=OpenBSD+3.6"
>rc scripten</a> vorgesehen. Die 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.6"
><tt>/etc/pf.conf</tt></a> ist eine Textdatei die von 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
>pfctl(8)</a> ausgelesen, interpretiert und anschliessend an
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.6"
>pf(4)</a> übergeben wird. Für bestimmte Anwendungszwecke
können weitere Regeln aus anderen Dateien nach dem Systemstart
hinzugeladen werden. Hier bietet der PF wie alle gut gestalteten Unix 
Programme eine grosse Flexibilität.

<p>
Die <tt>pf.conf</tt> Datei besteht aus sieben Teilen:
<ul>
<li><b><a href="macros.html">Makros:</a></b> Benutzedefinierte Variablen, die IP Adressen, 
Schnittstellennamen, usw. enthalten.
<li><b><a href="tables.html">Tabellen:</a></b> Eine Tabelle dient dazu, Listen von 
IP Adressen zu speichern.
<li><b><a href="options.html">Optionen:</a></b> Zahlreiche Möglichkeiten 
um zu steuern wie der PF arbeitet.
<li><b><a href="scrub.html">Scrub:</a></b> Paketaufbereitung zur Normalisierung oder 
zur Defragmentierung.
<li><b><a href="queueing.html">Queueing:</a></b> Stellt Bandbreitenkontrolle
und Paketpriorisierung zur Verfügung.
<li><b><a href="nat.html">Translation:</a></b> Regelt NAT und 
<a href="rdr.html">Paketweiterleitung</a>.
<li><b><a href="filter.html">Filter Regeln:</a></b> Erlauben das selektive
Filtern oder Blockieren von Paketen während sie eine der 
Schnittstellen passieren.
</ul>

<p>
Mit Ausnahme der Makros und Tabellen sollte jeder Teilbereich in dieser 
Reihenfolge in der Konfigurationsdatei erscheinen. Es ist je nach 
Anwendung aber nicht erforderlich das alle Teilbereiche vorkommen.

<p>
Leerzeilen innerhalb der Konfigurationsdatei werden ignoriert und Zeilen
die mit einem <tt>#</tt> beginnen als Kommentarzeilen behandelt.

<a name="control"></a>
<h2>Kontrolle</h2>
Nach dem Systemstart kann der PF mittels des Programmes <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
>pfctl(8)</a> verwaltet werden. Einige beispielhafte Befehle sind:

<pre>
     # pfctl -f /etc/pf.conf     <i>lädt the pf.conf Datei</i>
     # pfctl -nf /etc/pf.conf    <i>analysiert die Datei, aber läd sie nicht</i>
     # pfctl -Nf /etc/pf.conf    <i>läd nur die NAT Regeln der Datei</i>
     # pfctl -Rf /etc/pf.conf    <i>läd nur die Filter Regeln der Datei</i>

     # pfctl -sn                 <i>Zeigt die aktuellen NAT Regeln</i> 
     # pfctl -sr                 <i>Zeigt die aktuellen Filter Regeln</i>
     # pfctl -ss                 <i>Zeigt die aktuelle Status Tabelle</i>
     # pfctl -si                 <i>Zeigt Filter Statistiken und Zähler</i>
     # pfctl -sa                 <i>Zeigt ALLES was gezeigt werden kann</i>
</pre>

<p>
Für ein vollständige Liste von Befehlen sei auf die <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
>pfctl(8)</a> Man Page verwiesen.

<p>
[<a href="index.html">Inhalt</a>]
[<a href="macros.html">Weiter: Listen und Makros</a>]

<p>
<hr>
<a href="../../de/index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: config.html,v 1.15 ]
<br>
$Translation: config.html,v 1.7 2004/11/04 16:56:41 jufi Exp $
<br>
</small>
<small>$OpenBSD: config.html,v 1.6 2004/11/04 17:18:08 jufi Exp $</small>
</body>
</html> 
