<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Come&ccedil;ando</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD FAQ page">
<meta name="keywords" content="openbsd,faq,pf">
<meta name="distribution" content="global">
</head>

<!--
Copyright (c) 2003, Nick Holland <nick@openbsd.org>
Copyright (c) 2003, 2004, Joel Knight <enabled@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../pt/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="index.html">Conte&uacute;do</a>]
[<a href="macros.html">Pr&oacute;ximo: Listas e Macros</a>]

<p>
<h1><font color="#e00000">PF: Come&ccedil;ando</font></h1>

<hr>

<h3>Conte&uacute;do</h3>
<ul>
<li><a href="#activate">Ativa&ccedil;&atilde;o</a>
<li><a href="#config">Configura&ccedil;&atilde;o</a>
<li><a href="#control">Controle</a>
</ul>

<hr>

<a name="activate"></a>
<h2>Ativa&ccedil;&atilde;o</h2>
Para ativar o PF e faz&ecirc;-lo ler seu arquivo de configura&ccedil;&atilde;o no boot, adicione a linha
<blockquote>
<tt>
pf=YES
</tt>
</blockquote>
ao arquivo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&amp;sektion=8&amp;manpath=OpenBSD+3.6">/etc/rc.conf.local</a>.

<p>
Reinicie o sistema para ativar as altera&ccedil;&otilde;es.

<p>
Voc&ecirc; tamb&eacute;m pode ativar e desativar o PF usando o programa
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
>pfctl(8)</a>:

<blockquote>
<tt>
# pfctl -e<br>
# pfctl -d
</tt>
</blockquote>

<p>
para habilitar e desabilitar, respectivamente.
Perceba que isso apenas habilita ou desabilita o PF, na verdade ele 
ainda n&atilde;o carregou suas regras.  Elas devem ser carregadas separadamente, 
o que pode ser feito antes ou depois do PF estar habilitado.


<a name="config"></a>
<h2>Configura&ccedil;&atilde;o</h2>
<p>
O PF l&ecirc; sua configura&ccedil;&atilde;o de regras do arquivo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.6"><tt>/etc/pf.conf</tt></a> no hora do boot,
conforme a sequ&ecirc;ncia dos 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8&amp;manpath=OpenBSD+3.6"
>scripts rc</a>.  Embora o arquivo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.6"><tt>/etc/pf.conf</tt></a> seja o arquivo padr&atilde;o carregado 
pelos scripts rc do sistema, &eacute; apenas um arquivo texto carregado e 
interpretado pelo 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
>pfctl(8)</a> e inserido no 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.6"
>pf(4)</a>.  Para algumas aplica&ccedil;&otilde;es, outras regras devem ser 
carrregadas de outros arquivos ap&oacute;s o boot.  Assim como toda 
aplica&ccedil;&atilde;o Unix bem projetada, PF oferece grande flexibilidade.

<p>
O arquivo <tt>pf.conf</tt> tem sete partes:
<ul>
<li><b><a href="macros.html">Macros:</a></b> Vari&aacute;veis definidas pelo usu&aacute;rio, que 
podem armazenar endere&ccedil;os IP, nomes de interface, etc.
<li><b><a href="tables.html">Tabelas:</a></b> Uma estrutura usada para armazenar
listas de endere&ccedil;os IP.
<li><b><a href="options.html">Op&ccedil;&otilde;es:</a></b> V&aacute;rias op&ccedil;&otilde;es 
de controle do funcionamento do PF.
<li><b><a href="scrub.html">Scrub:</a></b> Reprocessamento de pacotes 
para normaliza&ccedil;&atilde;o e desfragmenta&ccedil;&atilde;o.
<li><b><a href="queueing.html">Filas:</a></b> Fornece controle 
de banda e prioriza&ccedil;&atilde;o de pacotes.
<li><b><a href="nat.html">Tradu&ccedil;&atilde;o:</a></b> Controla NAT 
(Network Address Translation) e
<a href="rdr.html">redirecionamento de pacotes</a>.
<li><b><a href="filter.html">Regras de Filtragem:</a></b> Permite selecionar pacotes para 
filtragem ou bloquea-los conforme chegam nas interfaces.
</ul>

<p>
Com excess&atilde;o de macros e tabelas, cada se&ccedil;&atilde;o deve 
aparecer nesta ordem no arquivo de configura&ccedil;&atilde;o, contudo
nem todas se&ccedil;&otilde;es precisam existir para determinadas aplica&ccedil;&otilde;es.

<p>
Linhas em branco s&atilde;o ignoradas, e linhas come&ccedil;ando com <tt>#</tt> 
s&atilde;o tratadas como coment&aacute;rios.

<a name="control"></a>
<h2>Controle</h2>
Ap&oacute;s o boot, a opera&ccedil;&atilde;o do PF pode ser feita usando o programa 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
>pfctl(8)</a>.  Alguns exemplos de comandos:

<pre>     
     # pfctl -f /etc/pf.conf     <i>Carrega o arquivo pf.conf</i>
     # pfctl -nf /etc/pf.conf    <i>Analisa o arquivo, mas n&atilde;o o carrega</i>
     # pfctl -Nf /etc/pf.conf    <i>Carrega apenas as regras NAT do arquivo</i>
     # pfctl -Rf /etc/pf.conf    <i>Carrega apenas as regras de filtragem do arquivo</i>

     # pfctl -sn                 <i>Mostra as regras de NAT</i> 
     # pfctl -sr                 <i>Mostra as regras de filtragem</i>
     # pfctl -ss                 <i>Mostra a tabela de estado das conex&otilde;es</i>
     # pfctl -si                 <i>Mostra status de filtragem e contadores</i>
     # pfctl -sa                 <i>Mostra TUDO o que pode ser mostrado</i>
</pre>

<p>
Para uma lista completa dos comandos, por favor consulte
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.6"
>p&aacute;gina de manual do pfctl(8)</a>.

<p>
[<a href="index.html">Conte&uacute;do</a>]
[<a href="macros.html">Pr&oacute;ximo: Listas e Macros</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[voltar]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: config.html,v 1.16 ]<br>                                                      
$Translation: config.html,v 1.1 2005/01/04 17:09:07 dsantos Exp $<br>                 
$OpenBSD: config.html,v 1.1 2005/01/06 20:03:30 jufi Exp $ 
</small>

</body>
</html>
