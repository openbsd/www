<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF : Principes de Base</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, 2004 Joel Knight <enabled@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
<p>
[<a href="index.html">Index</a>]
[<a href="macros.html">Suivant : Listes et Macros</a>]

<p>
<h1><font color="#e00000">PF : Principes de Base</font></h1>

<hr>

<h3>Table des Mati&egrave;res</h3>
<ul>
<li><a href="#activate">Activation</a>
<li><a href="#config">Configuration</a>
<li><a href="#control">Contr&ocirc;le</a>
</ul>

<hr>

<a name="activate"></a>
<h2>Activation</h2>
Pour activer PF,
&eacute;ditez le fichier
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8&amp;manpath=OpenBSD+3.5"><tt>/etc/rc.conf</tt></a>
et modifiez la ligne PF comme suit :

<blockquote>
<tt>
pf=YES
</tt>
</blockquote>

<p>
Red&eacute;marrez votre syst&egrave;me pour que les modifications soient
prises en compte.

<p>
Vous pouvez aussi activer et d&eacute;sactiver PF en utilisant le
programme
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.5">pfctl(8)</a> :

<blockquote>
<tt>
# pfctl -e<br>
# pfctl -d
</tt>
</blockquote>

<p>
La premi&egrave;re commande active PF (l'option "-e" correspond &agrave;
"enable"). La seconde commande d&eacute;sactive PF (l'option "-d"
correspond &agrave; "disable"). Ces commandes ne causent pas le
chargement d'une base de r&egrave;gles. Cette derni&egrave;re doit
&ecirc;tre charg&eacute;e s&eacute;paremment avant ou apr&egrave;s
l'activation de PF.


<a name="config"></a>
<h2>Configuration</h2>
<p>
PF lit les r&egrave;gles de configuration &agrave; partir du fichier
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.5"><tt>/etc/pf.conf</tt></a>
au d&eacute;marrage de la machine. Ces r&egrave;gles sont
charg&eacute;es au d&eacute;marrage par les
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8&amp;manpath=OpenBSD+3.5">scripts rc</a>.  
Il est &agrave; noter que
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.5"><tt>/etc/pf.conf</tt></a>
est le fichier par d&eacute;faut charg&eacute; par ces scripts. C'est un
fichier texte charg&eacute; et interpr&eacute;t&eacute; par
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.5">pfctl(8)</a>
puis ins&eacute;r&eacute; dans
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4&amp;manpath=OpenBSD+3.5">pf(4)</a>.
Pour certaines applications, d'autres bases de r&egrave;gles peuvent
&ecirc;tre charg&eacute;es &agrave; partir de fichiers diff&eacute;rents
durant la phase de d&eacute;marrage. Comme n'importe quelle application
Unix bien con&ccedil;ue, PF offre une grande flexibilit&eacute;.

<p>
Le fichier <tt>pf.conf</tt> est compos&eacute; de sept parties :
<ul>
<li><b><a href="macros.html">Macros :</a></b> Variables
d&eacute;finies par l'utilisateur pouvant contenir des adresses IP, des
noms d'interfaces, etc.
<li><b><a href="tables.html">Tables :</a></b> Structures
con&ccedil;ues pour contenir des listes d'adresses IP.
<li><b><a href="options.html">Options :</a></b> Diverses options pour
contr&ocirc;ler le fonctionnement de PF.
<li><b><a href="scrub.html">Scrub :</a></b> Retraitement des paquets
pour les normaliser et les d&eacute;fragmenter.
<li><b><a href="../queueing.html">Gestion de La Bande Passante :</a></b>
G&egrave;re la bande passante et la priorit&eacute; des paquets.
<li><b><a href="nat.html">Traduction ("Translation") :</a></b>
Contr&ocirc;le la Traduction d'Adresses IP et <a href="rdr.html">la
redirection de paquets</a>.
<li><b><a href="filter.html">R&egrave;gles de Filtrage :</a></b>
Permet le filtrage s&eacute;l&eacute;ctif ou le bloquage des paquets
lors de leur travers&eacute;e de n'importe quelle interface.
</ul>

<p>
A l'exception des macros et des tables, chaque section doit
appara&icirc;tre dans l'ordre pr&eacute;cit&eacute; dans le fichier de
configuration. Cependant toutes les sections ne sont pas obligatoires.

<p>
Les lignes vides sont ignor&eacute;es et les lignes commen&ccedil;ant par 
<tt>#</tt> sont consid&eacute;r&eacute;es comme des commentaires.

<a name="control"></a>
<h2>Contr&ocirc;le</h2>
Apr&egrave;s le d&eacute;marrage, PF peut &ecirc;tre
contr&ocirc;l&eacute; gr&acirc;ce au programme
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.5">pfctl(8)</a>.  Voici des exemples de commandes :

<pre>
     # pfctl -f /etc/pf.conf     <i>Charge le fichier pf.conf</i>
     # pfctl -nf /etc/pf.conf    <i>Analyse le fichier mais ne le charge pas</i>
     # pfctl -Nf /etc/pf.conf    <i>Charge uniquement les r&egrave;gles NAT &agrave; partir du fichier</i>
     # pfctl -Rf /etc/pf.conf    <i>Charge uniquement les r&egrave;gles de filtrage &agrave; partir du fichier</i>

     # pfctl -sn                 <i>Affiche les r&egrave;gles NAT actuelles</i> 
     # pfctl -sr                 <i>Affiche les r&egrave;gles de filtrage actuelles</i>
     # pfctl -ss                 <i>Affiche la table d'&eacute;tat actuelle</i>
     # pfctl -si                 <i>Affiche les statistiques et les compteurs de filtrage</i>
     # pfctl -sa                 <i>Affiche TOUT ce qu'on est capable d'afficher</i>
</pre>

<p>
Pour une liste compl&egrave;te de commandes, veuillez lire la
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.5">page du manuel pfctl(8)</a>.

<p>
[<a href="index.html">Index</a>]
[<a href="macros.html">Suivant : Listes et Macros</a>]

<p>
<hr>
<a href="index.html"><img alt="[back]" border="0" height="24" src="../../../images/back.gif" width="24"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: config.html,v 1.12 ]<br>
$Translation: config.html,v 1.9 2004/10/06 17:17:44 saad Exp $<br>
$OpenBSD: config.html,v 1.8 2004/10/07 10:24:20 jufi Exp $
</small>

</body>
</html> 
