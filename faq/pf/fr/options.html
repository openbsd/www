<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF : Options de Fonctionnement</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, 2004 Joel Knight <enabled@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
<p>
[<a href="shortcuts.html">Précédent : Raccourcis pour La
Création des Jeux de Règles</a>]
[<a href="index.html">Index</a>]
[<a href="scrub.html">Suivant : Scrub (Normalisation de Paquets)</a>]

<p>
<h1><font color="#e00000">PF : Options de Fonctionnement</font></h1>

<hr>

<p>
Des options sont utilisées pour contrôler le fonctionnement
de PF. Celles-ci sont spécifiées dans le fichier
<tt>pf.conf</tt> en utilisant la directive <tt>set</tt>.

<a name="block-policy"></a>
<p>
<dl>
<dt><b><tt>set block-policy</tt></b><br>
<dd>Paramètre le comportement pour par défaut des
    règles de <a href="filter.html">filtrage</a> qui ont pour
    effet de bloquer les paquets (mot-clé "block").
<ul>
<li><tt>drop</tt> - Le paquet est détruit sans aucune
    notification.
<li><tt>return</tt> - un paquet TCP RST est renvoyé pour les
    paquets TCP et un paquet ICMP Unreachable est renvoyé pour
    tous les autres.
</ul>
<dd>Il est à noter que les règles de filtrage
    individuelles peuvent avoir leur propre réponse.
</dl>

<a name="debug"></a>
<p>
<dl>
<dt><b><tt>set debug</tt></b>
<dd>Permet de paramétrer le niveau de débogage de pf.
<ul>
<li><tt>none</tt> - aucun message de débogage n'est
    affiché.
<li><tt>urgent</tt> - messages de débogage
    générés pour les erreurs sérieuses.
    C'est la valeur par défaut.
<li><tt>misc</tt> - messages de débogage
    générés pour des erreurs diverses (par exemple
    pour voir le status du sous-système scrub et pour les
    échecs de création d'état).
<li><tt>loud</tt> - messages de débogage
    générés dans des conditions courantes (par
    exemple pour voir le status de l'analyseur passif de signatures OS).
</ul>
</dl>

<a name="fingerprints"></a>
<p>
<dl>
<dt><b><tt>set fingerprints <i>file</i></tt></b>
<dd>Permet de paramétrer le fichier à partir duquel seront chargées les
    signatures de systèmes d'exploitation. Utilisé avec <a
    href="filter.html#osfp">l'analyse passive de l'empreinte des OS</a>.
    La valeur par défaut est <tt>/etc/pf.os</tt>.
</dl>

<a name="limit"></a>
<p>
<dl>
<dt><b><tt>set limit</tt></b>
<dd><tt>frags</tt> - nombre maximal d'entrées dans la zone mémoire
    utilisée pour le réassemblage de paquets (règles <a
    href="scrub.html">scrub</a>). La valeur par défaut est 5000.
<dd><tt>src-nodes</tt> - nombre maximal des entrées dans la zone mémoire
    utilisée pour assurer un suivi des adresses IP sources (généré par
    les options <tt>sticky-address</tt> et <tt>source-track</tt>). La
    valeur par défaut est 10000.
<dd><tt>states</tt> - nombre maximal d'entrées dans la zone mémoire
    utilisée pour les entrées de la table d'état (règles de <a
    href="filter.html">filtrage</a> qui contiennent le mot-clé). La
    valeur par défaut est 10000.
</dl>

<a name="loginterface"></a>
<p>
<dl>
<dt><b><tt>set loginterface <i>int</i></tt></b><br>
<dd>Paramètre l'interface pour laquelle PF devra récupérer des
    statistiques telles que le nombre d'octets entrants/sortant les
    paquets acceptés/bloqués. Les statistiques ne peuvent être
    récupérées que pour <tt>une</tt> interface à la fois. Il est à noter
    que les indicateurs <tt>match</tt>, <tt>bad-offset</tt>, etc., et
    les indicateurs de la table d'état sont enregistrés que
    <tt>loginterface</tt> soit positionnée ou pas.
</dl>

<a name="optimization"></a>
<p>
<dl>
<dt><b><tt>set optimization</tt></b><br>
<dd>Optimise PF pour l'un de ces environnements réseau :
<ul>
<li><tt>normal</tt> - convient à pratiquement tous les
    réseaux. Valeur par défaut.
<li><tt>high-latency</tt> - réseaux à haute latence tels
    que les réseaux à connexion satellite.
<li><tt>aggressive</tt> - les connexions expirent plus rapidement de la
    table d'état. Les pré-requis mémoire sont ainsi
    fortement réduits sur un pare-feu particulièrement
    chargé au risque de terminer des connexions inactives trop
    rapidement.
<li><tt>conservative</tt> - paramétrage extrêmement
    conservateur. Contrairement à <tt>aggressive</tt>, ce
    paramétrage évite de terminer les connexions inactives
    ce qui se traduit par une plus grande utilisation mémoire et
    une utilisation du processeur un peu plus soutenue.
</ul>
</dl>

<a name="state-policy"></a>
<p>
<dl>
<dt><b><tt>set state-policy</tt></b>
<dd>Permet de paramétrer le comportement de PF vis-à-vis
    de la préservation de l'état des connexions. Ce
    comportement peut être contourné au niveau de chaque
    règle. Pour plus de détails, consultez la section de
    la FAQ intitulée
    <a href="filter.html#state">Préservation de l'État</a>.
<ul>
<li><tt>if-bound</tt> - les états sont liés à
    l'interface sur lesquels ils ont été
    créés. Si le trafic correspond à une
    entrée de la table d'état mais qu'il ne traverse pas
    l'interface sur laquelle l'état a été
    enregistré, cette correspondance est rejetée. Le
    paquet doit alors correspondre à une règle de filtrage
    sinon il sera détruit/rejeté tout simplement.
<li><tt>group-bound</tt> - même comportement que <tt>if-bound</tt>
    mis à part que les paquets sont autorisés à
    travers des interfaces du même groupe, par exemple toutes les
    interfaces <tt>ppp</tt> etc.
<li><tt>floating</tt> - les états peuvent correspondrent à
    des paquets sur n'importe quelle interface. Peu importe l'interface
    qu'il traverse, un paquet sera accepté tant qu'il correspond
    à une entrée dans la table d'état. C'est la
    valeur par <b>défaut</b>.
</ul>
</dl>

<a name="timeout"></a>
<p>
<dl>
<dt><b><tt>set timeout</tt></b>
<dd><tt>interval</tt> - nombre de secondes entre les purges
    d'états expirés et de fragments de paquets.
<dd><tt>frag</tt> - nombre de secondes avant qu'un fragment non
    assemblé n'expire.
</dl>

<p>
Exemple :
<p>
<table border=0 width="650">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
set timeout interval 10
set timeout frag 30
set limit { frags 5000, states 2500 }
set optimization high-latency
set block-policy return
set loginterface dc0
set fingerprints /etc/pf.os.test
set state-policy if-bound
</pre>
</td></tr>
</table>


<p>
[<a href="shortcuts.html">Précédent : Raccourcis pour La
Création des Jeux de Règles</a>] [<a
href="index.html">Index</a>] [<a href="scrub.html">Suivant : Scrub
(Normalisation de Paquets)</a>]

<p>
<hr>
<a href="index.html"><img alt="[back]" border="0" height="24" src="../../../images/back.gif" width="24"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: options.html,v 1.9 ]<br>
$Translation: options.html,v 1.7 2004/11/03 15:36:53 saad Exp $<br>
$OpenBSD: options.html,v 1.7 2004/11/03 21:01:25 saad Exp $
</small>

</body>
</html> 
