<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Runtime Options</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, 2004 Joel Knight <enabled@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
[<a href="shortcuts.html">Previous: Shortcuts For Creating Rulesets</a>]
[<a href="index.html">Contents</a>]
[<a href="scrub.html">Next: Scrub (Packet Normalization</a>]

<p>
<h1><font color="#e00000">PF: Runtime Options</font></h1>

<hr>

<p>
Options are used to control PF's operation. Options are specified in
<tt>pf.conf</tt> using the <tt>set</tt> directive.

<a name="block-policy"></a>
<p>
<dl>
<dt><b><tt>set block-policy</tt></b><br>
<dd>Sets the default behavior for <a href="filter.html">filter</a> rules
that specify the <tt>block</tt> action.
<ul>
<li><tt>drop</tt> - packet is silently dropped.
<li><tt>return</tt> - a TCP RST packet is returned for blocked TCP
packets and an ICMP Unreachable packet is returned for all others.
</ul>
<dd>Note that individual filter rules can override the default response.
</dl>

<a name="debug"></a>
<p>
<dl>
<dt><b><tt>set debug</tt></b>
<dd>Set pf's debugging level.
<ul>
<li><tt>none</tt> - no debugging messages are shown.
<li><tt>urgent</tt> - debug messages generated for serious errors.
This is the default.
<li><tt>misc</tt> - debug messages generated for various errors (e.g.,
to see status from the packet normalizer/scrubber and for state creation
failures).
<li><tt>loud</tt> - debug messages generated for common conditions
(e.g., to see status from the passive OS fingerprinter).
</ul>
</dl>

<a name="fingerprints"></a>
<p>
<dl>
<dt><b><tt>set fingerprints <i>file</i></tt></b>
<dd>Sets the file to load operating system fingerprints from. For use
with passive OS fingerprinting. The default is <tt>/etc/pf.os</tt>.
</dl>

<a name="limit"></a>
<p>
<dl>
<dt><b><tt>set limit</tt></b>
<dd><tt>frags</tt> - maximum number of entries in the memory pool used
for packet reassembly (<a href="scrub.html">scrub</a> rules). Default
is 5000.
<dd><tt>src-nodes</tt> - maximum number of entries in the memory pool
used for tracking source IP addresses (generated by the 
<tt>sticky-address</tt> and <tt>source-track</tt> options).
Default is 10000.
<dd><tt>states</tt> - maximum number of entries in the memory pool used
for state table entries (<a href="filter.html">filter</a> rules that
specify <tt>keep state</tt>). Default is 10000.
</dl>

<a name="loginterface"></a>
<p>
<dl>
<dt><b><tt>set loginterface <i>int</i></tt></b><br>
<dd>Sets the interface for which PF should gather statistics such as bytes
in/out and packets passed/blocked. Statistics can only be
gathered for <i>one</i> interface at a time. Note that the
<tt>match</tt>, <tt>bad-offset</tt>, etc., counters and the state table
counters are recorded regardless of whether <tt>loginterface</tt> is set
or not.
</dl>

<a name="optimization"></a>
<p>
<dl>
<dt><b><tt>set optimization</tt></b><br>
<dd>Optimize PF for one of the following network environments:
<ul>
<li><tt>normal</tt> - suitable for almost all networks. This is the
default.
<li><tt>high-latency</tt> - high latency networks such as satellite
connections.
<li><tt>aggressive</tt> - aggressively expires connections from the state
table. This can greatly reduce the memory requirements on a busy
firewall at the risk of dropping idle connections early.
<li><tt>conservative</tt> - extremely conservative settings. This avoids
dropping idle connections at the expense of greater memory utilization
and slightly increased processor utilization.
</ul>
</dl>

<a name="state-policy"></a>
<p>
<dl>
<dt><b><tt>set state-policy</tt></b>
<dd>Sets PF's behavior when it comes to 
keeping state.
This behavior can be overridden on a per rule basis.
See <a href="filter.html#state">Keeping State</a>.
<ul>
<li><tt>if-bound</tt> - states are bound to the interface they're
created on. 
If traffic matches a state table entry but is not crossing the interface
recorded in that state entry, the match is rejected. 
The packet must then match a filter rule or will be dropped/rejected
altogether.
<li><tt>group-bound</tt> - same behavior as <tt>if-bound</tt> except 
packets are allowed to cross interfaces in the same group, i.e., all
<tt>ppp</tt> interfaces, etc.
<li><tt>floating</tt> - states can match packets on any interface.
As long as the packet matches a state entry it does not matter what
interface it's crossing, it will pass. 
This is the <b>default</b>.
</ul>
</dl>

<a name="timeout"></a>
<p>
<dl>
<dt><b><tt>set timeout</tt></b>
<dd><tt>interval</tt> - seconds between purges of expired states and
packet fragments.
<dd><tt>frag</tt> - seconds before an unassembled fragment is expired.
</dl>

<p>
Example:
<p>
<table border=0 width="650">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
set timeout interval 10
set timeout frag 30
set limit { frags 5000, states 2500 }
set optimization high-latency
set block-policy return
set loginterface dc0
set fingerprints /etc/pf.os.test
set state-policy if-bound
</pre>
</td></tr>
</table>


<p>
[<a href="shortcuts.html">Previous: Shortcuts For Creating Rulesets</a>]
[<a href="index.html">Contents</a>]
[<a href="scrub.html">Next: Scrub (Packet Normalization</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../images/back.gif" border="0" alt="[back]"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: options.html,v 1.8 2004/05/07 01:55:23 nick Exp $</small>

</body>
</html> 
