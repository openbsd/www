<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD/hppa</title>
<link rev=made href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Language" content="de">
<meta name="description" content="Die OpenBSD/hppa Seite">
<meta name="keywords" content="openbsd,hppa">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">
<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>

<h2><font color="#e00000">hppa</font></h2>
<hr>

<h3><font color="#0000e0"><strong>Status und Geschichte:</strong></font></h3>
Systeme booten in multi-user und volle Snapshots werden periodisch
zur Verfügung gestellt.
Es sind mehrere Projekte im Gange, um SCSI Controller und 
Eingabegerälte besser zu unterstützen, damit man 
Stabilitätsprobleme vermeidet.
<p>
Dieses Projekt wurde in den Tagen gestartet, als die einzigen Open Source
Betriebssysteme für HP PA-RISC Computer 
<a href="http://www.cs.utah.edu/projects/flux/lites/html">Lites</a> und
<a href="http://www.mklinux.org">MkLinux</a> waren.
Diese zwei Quellen boten eine Menge an Informationen und Code für 
einen ersten Anfang des OpenBSD/hppa portes.
Das <a href="http://www.cs.utah.edu/~mike/hpbsd/hpbsd.html">HPBSD</a>
ist mit propietärem HP Code und USL Lizensierung belastet und ist 
daher nicht allgemein und öffentlich erhältlich.
Einer der direkten Vorteile von vorhergehenden Porting-Versuchen
(neben dem eigentlichen Code natürlich ;) ist die Unterstützung 
für HP PA-RISC in GCC und binutils, was den schnellen Aufbau der 
cross-tools Umgebung für die Entwicklung möglich machte.
<p>
Später entschied sich HP dazu, einen
<a href="http://www.parisc-linux.org/">Linux</a> port auf PA-RISC
Maschinen zu unterstützen, was in der Herausgabe von proprietärer Dokumentation
resultierte, wobei aber eine andere Klasse von 9000er Systemen als Zielplatform 
anvisiert wurde.
<p>

<h3><font color="#0000e0"><strong>Unterstützte Hardware:</strong></font></h3>

<ul>
<li>CPUs (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=4&amp;arch=hppa">intro</a> und (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cpu&amp;sektion=4&amp;arch=hppa">cpu</a>)):
       <ul>
       <li>PA7000-basierend: 705, 710, 720, 730, 750 (momentan in Entwicklung)
       <li>PA7100-basierend: 715/33, 715/50, 715/75, 725/50, 725/75, 735/100, 755/100
       <li>PA7100LC-basierend: 712, 715/64, 715/80, 715/100, 715/100XC, 725/64, 725/100
       <li>PA7150-basierend: 735/125, 755/125
       <li>PA7200-basierend: J200, J210, J210XC
       </ul>
<li>bus/IO Controller:
       <ul>
       <li> GSC (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gsc&amp;sektion=4&amp;arch=hppa">gsc</a>): LASI (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lasi&amp;sektion=4&amp;arch=hppa">lasi</a>), ASP (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=asp&amp;sektion=4&amp;arch=hppa">asp</a>)
       </ul>
<li>SCSI Controller (momentan in Entwicklung):
       <ul>
       <li>NCR53C710 SCSI I/O Prozessoren (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4">osiop</a>)
       <li>NCR53C720 SCSI I/O Prozessoren (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=siop&amp;sektion=4">siop</a>)
       </ul>
<li>SGC/GSC Grafik (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sti&amp;sektion=4">sti</a>):
       <ul>
       <li>Artist (wie in 712)
       <li>CRX-8, CRX-24, HCRX-8, HCRX-24
       </ul>
<li>RS-232 Gerälte:
       <ul>
       <li>On-board ns16550 oder ähnlich (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=com&amp;sektion=4">com</a>)
       </ul>
<li>Eingabegeräte(momentan in Entwicklung):
       <ul>
       <li>PS/2 Tastatur und Maus
       <li>HIL Tastatur und Maus
       </ul>
</ul>
Systeme, die möglicherweise funktionieren:  
<ul>
<li>PA2.0 Systeme (im 32-bit Modus);
<li>HP 9000 834, 835, 836, 844, 845, 846;
<li>HP 9000 E23, E25, E35, E45, E55;
<li>HP 3000 908, 918, 928, 938;
<li>Hitachi VQ200, VQ210 und einige andere nicht-HP Workstations;
<li>Precision Book von RDI Computer Corporation (naja, unwahrscheinlich)
<li>HP VME und VXI Single Board Systeme (benötigt zumindest VME)
</ul>
<br>
Hardware wird für dieses Projekt benötigt,
siehe die <a href="want.html">"Wanted List"</a>
(kontakte <a href="mailto:mickey@openbsd.org">mickey</a>).

<h3><font color="#0000e0"><strong>Dokumentation</strong></font></h3>

<small>(Das meiste wurde von HP für das 
<a href="http://www.parisc-linux.org/">Linux/parisc</a> Projekt veröffentlicht)<BR>
(die Dokumente sind in Englischer Sprache geschrieben)</small>:
<ol type=1>
<li>HP PA-RISC CPUs
       <ol type=a>
<li><a href="http://ftp.parisc-linux.org/docs/PCXL_ers.ps">PA7100LC CPU ERS</a>
<li><a href="http://ftp.parisc-linux.org/docs/pcxl2_ers.ps">PA7300LC CPU ERS</a>
       </ol>
<li><b>Processor Dependent Code/I/O Dependent Code Interface</b><br> <small>(ausgesuchte Kapitel aus der "PA-RISC I/O Architecture Specification")</small>
       <ol type=a>
<li><a href="http://ftp.parisc-linux.org/docs/pdc32.pdf">PDC 1.1</a>
<li><a href="http://ftp.parisc-linux.org/docs/iodc.pdf">IODC 1.1</a>
<li><a href="http://ftp.parisc-linux.org/docs/ver_nums.pdf">Version and Identification Number Allocation</a>
<li><a href="http://ftp.parisc-linux.org/docs/data_formats.pdf">Memory Data Formats 2.0</a>
<li><a href="http://ftp.parisc-linux.org/docs/pdc.pdf">PDC Procedures 2.0</a>
<li><a href="http://ftp.parisc-linux.org/docs/pdce.pdf">PDC Entry Points 2.0</a>
<li><a href="http://ftp.parisc-linux.org/docs/os_interface.pdf">OS Interface 2.0</a>
       </ol>
<li><b>Bus controllers/bridges/adaptors</b>
       <ol type=a>
<li><a href="http://ftp.parisc-linux.org/docs/hardball_ers.pdf">ASP</a>
<li><a href="http://ftp.parisc-linux.org/docs/lasi_ers.ps">LASI Core Bus Adapter (einschließlich LAN, SCSI, serieller und lpt Kontroller)</a>
<li><a href="http://ftp.parisc-linux.org/docs/dino_ers.ps">Dino PCI bridge</a>,
und <a href="http://ftp.parisc-linux.org/docs/Dino_3_1_Errata.html">Errata</a>
<li><a href="http://ftp.parisc-linux.org/docs/elroy_ers.ps">Elroy ERS (Für Open Source editiert)</a>
<li>Astro <a href="http://ftp.parisc-linux.org/docs/astro_intro.ps">Overview</a>, <a href="http://ftp.parisc-linux.org/docs/astro_errors.ps">Error handling</a>,<a href="http://puffin.external.hp.com/docs/astro_ioc.ps">R2I Operations</a>, <a href="http://puffin.external.hp.com/docs/astro_regmap.ps">Registers Map</a>, <a href="http://puffin.external.hp.com/docs/astro_runway.ps">Runway Interface</a>, <a href="http://puffin.external.hp.com/docs/astro_sysmap.ps">System Mamory Map</a>
 
       </ol>

<li><a href="http://ftp.parisc-linux.org/docs/sti.pdf">Stinger graphics</a>
<li><a href="http://www.lsilogic.com/techlib/techdocs/old_storage/770_2_0.pdf">NCR 53C700/710/720 SCSI I/O Processors</a>
    <small>(Das Dokument beschreibt eigentlich  den 770, der aber kompatibel sein soll)</small>
<li>Intel <a href="http://developer.intel.com/design/network/datashts/290219.htm">i82596DX/SX</a> und <a href="http://developer.intel.com/design/network/datashts/290218.htm">i82596CA</a> Ethernet Controller
</ol>
Mehr Informaionen gibts es bei <a href="http://www.openpa.net/">OpenPA</a>.

<hr>

<h3><font color="#0000e0"><strong>Cross-Tools erzeugen</strong></font></h3>
<pre>
cd /usr/src
sudo make TARGET=hppa cross-tools
</pre>
<p>
Die Erstellung der cross-tools könnte auf libc-Ebene versagen,
was aber in Ordnung ist, da die libc Unterstützung noch nicht fertig ist.
</p>
<a name="boot_lif"></a>
<h4>Erzeugen der boot.lif Datei mit Hilfe der cross-tools:</h4>
<p>
<pre>
cd /sys/arch/hppa/stand
make obj
set cross=(/usr/cross/hppa/usr/bin)
make MACHINE=hppa MACHINE_ARCH=hppa \
       "AS=$cross/as" "CC=$cross/cc" "CXX=$cross/c++" \
	"CPP=$cross/cpp" "LD=$cross/ld" \
	"AR=$cross/ar" "STRIP=$cross/strip" \
	"LORDER=$cross/lorder" "NM=$cross/nm" \
	"RANLIB=$cross/ranlib" "SIZE=$cross/size"
</pre>
<p>
Dann hat man im obj-Verzeichniss eine <a href="http://hppa.lucifier.net/#boot_lif"><em>boot.lif</em></a>
Datei zum booten.
Dieses Image kann ein <em>diskless</em> kernel image enthalten, wenn eines in
 <em>sys/arch/hppa/compile/SHEPHERD_PIE/bsd</em> enthalten war.
<br>
Der Kernel cross-build Prozess ist dem für das Booten ähnlich, konsultiere einfach
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;apropos=0&amp;sektion=0
&amp;manpath=OpenBSD+Current&amp;format=html">config(8)</a>
und
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;format=html">options(8)</a>
für die Kernel build Optionen und Konfigurationen.
</p>
<hr>
Um die <a href="http://hppa.lucifier.net/#boot_lif">boot.lif</a> Dateien zu benutzen,
musst du deinen Server vorbereiten und deine Maschine anweisen, über das Netzwerk zu booten:
<ol>
  <li>Server setup
    <ul>
    <li> Für ältere  Maschinen (705, 7[1235]0, alte 715) muss
       <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;format=html">rbootd</a> eingeschaltet und gestartet werden.<br>
      <ul>
      <li><b>/etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rbootd&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;format=html">rbootd</a>.conf</b>
	enthält eine einzelne Zeile pro Maschine, die du eingegeben hast, um vom Server zu booten.
	Jede Zeile enthält die Ethernet Adresse der hppa-Client Maschine und
	den Namen der Datei, die vom tftp Server geladen werden soll. Z.B.: 
	<pre>
	8:0:9:70:c4:11    <a href="#boot_lif">boot.lif</a>    # 9000/720
	8:0:9:19:fb:a0    <a href="#boot_lif">boot.lif</a>    # 9000/725
	</pre>
      </li>
      </ul>
    </li>
    <li>Neuere Maschinen (712, neue 715, 725) suchen nicht nach einem rbootd-Server, sondern benötigen ein
	<b>bootp</b> Setup.<br>
      <ul>
      <li><b>/etc/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bootptab&amp;apropos=0&amp;sektion=5&amp;manpath=OpenBSD+Current&amp;format=html">bootptab</a></b> enthalten einen Informationsblock für jede Maschine.  Zum Beispiel:
       <pre>
       # 9000/715
       boron:\
               ha=0800095f5a6e:\
               bf=boot.lif:\
               hd=:\
               ht=ethernet:\
               ip=10.0.1.143:\
               rp=/usr/local/exports/boron/root:\
               sm=255.255.255.0:\
               td=/tftpboot:
       </pre>
      </li>
       <li>
       Erzeuge das Verzeichnis /tftpboot und packe die Datei <a href="#boot_lif">boot.lif</a> hinein.<br> 
       </li>
       <li>
       Schreibe einen Eintrag für deine hppa in die <b>/etc/ethers</b> Datei:<br> 
       <pre>
       08:00:09:5f:5a:6e       boron
       </pre>  
       </li>
       <li>
       Schreibe einen Eintrag für 'boron' in die <b>/etc/hosts</b> Datei:<br> 
       <pre>
       10.0.0.143       boron
       </pre>  
       </li>
       <li>
       Erzeuge das Verzeichnis /usr/local/exports/boron/root und plaziere die Dateien 
	<a href="http://hppa.lucifier.net/root/dev/MAKEDEV">/dev/MAKEDEV</a>,
        <a href="http://hppa.lucifier.net/root/sbin/init">/sbin/init</a>, <a href="http://hppa.lucifier.net/root/bin/ksh">/bin/ksh</a>             
        an ihre relativen Plätze. 
       </li>
       <li>
       Schreibe einen Eintrag in <b>/etc/exports</b>, so dass das root Verzeichnis zum Client exportiert wird:
       <pre>
       /usr/local/exports/boron/root boron
       </pre>  
       </li>
       <li>
       Denk daran, dass du <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bootpd&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">bootpd</a>
        und <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftpd&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">tftpd</a>
	in /etc/inetd.conf einschalten musst, und dann noch <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">inetd</a> neustarten musst.
      </li>
       <li>
       Vergiss auch nicht <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nfsd&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">nfs_server</a>
       und <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rarpd&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">rarpd</a> 
       in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">/etc/rc.conf</a> zu aktivieren.
       </li>
       </ul>
    </li>
    <li>Weitere Informationen über das Server Setup für Netzwerk Booten im allgemeinen gibt es hier: <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;format=html">diskless(8)</a>.</li>
    </ul>
  <li>Client Netzwerk Boot
  <ul>
    <li>BOOT_ADMIN<br>
	um zum BOOT_ADMIN Prompt zu gelangen, musst du die <em>&lt;esc&gt;</em> Taste drücken, sobald
	die Maschine gestartet wird. Wenn sie anfängt, nach bootbaren Geräten zu suchen, tippe 'a' um
	zum 'BOOT_ADMIN' Prompt zu gelangen.
    </li>
    <li>network boot command <br>
	Einmal am 'BOOT_ADMIN' Prompt angelangt, tippe:
<pre>
	BOOT_ADMIN> boot lan isl
</pre>
	... und du bist auf dem Weg boot.lif zu booten!
    </li>
</ul>
</ol>
<hr>
<a href="plat.html"><img height=24 width=24 src="../back.gif" border=0 alt=OpenBSD></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: hppa.html,v 1.70 ]
<br>
$Translation: hppa.html,v 1.39 2004/11/04 15:10:32 jufi Exp $
<br>
</small>
<small>$OpenBSD: hppa.html,v 1.37 2004/11/04 15:48:53 jufi Exp $</small>
</body>
</html>
