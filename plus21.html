<!doctype html>
<html lang=en id=plus>
<meta charset=utf-8>
<title>OpenBSD 2.1 Changelog</title>
<meta name="description" content="OpenBSD 2.1 changes">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/plus21.html">
<style>
strong {
	color: var(--red);
}

h3 {
	color: var(--blue);
}

p strong {
	font-weight: normal;
}
</style>

<h2 id=OpenBSD>
<a href="index.html">
<i>Open</i><b>BSD</b></a>
2.1 Changelog
</h2>
<hr>

<p>
This is a partial list of the major machine independent changes
(i.e., these are the changes people ask about most often).  Machine
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href=plat.html>platforms</a> if you
are interested in further port-specific details.  Many ports
have had architecture-specific enhancements relative to NetBSD,
but when they do not they certainly have plenty of platform-independent
changes, starting with those listed below..

<p>
Note: <strong>Problems for which patches exist are marked in red</strong>.

<p>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<a href="plus37.html">3.7</a>,
<br>
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>,
<a href="plus52.html">5.2</a>,
<a href="plus53.html">5.3</a>,
<a href="plus54.html">5.4</a>,
<br>
<a href="plus55.html">5.5</a>,
<a href="plus56.html">5.6</a>,
<a href="plus57.html">5.7</a>,
<a href="plus58.html">5.8</a>,
<a href="plus59.html">5.9</a>,
<a href="plus60.html">6.0</a>,
<a href="plus61.html">6.1</a>,
<a href="plus62.html">6.2</a>,
<a href="plus63.html">6.3</a>,
<a href="plus64.html">6.4</a>,
<a href="plus65.html">6.5</a>,
<a href="plus66.html">6.6</a>,
<a href="plus67.html">6.7</a>,
<a href="plus68.html">6.8</a>,
<a href="plus69.html">6.9</a>,
<a href="plus70.html">7.0</a>,
<a href="plus71.html">7.1</a>,
<br>
<a href="plus72.html">7.2</a>,
<a href="plus73.html">7.3</a>,
<a href="plus74.html">7.4</a>,
<a href="plus75.html">7.5</a>,
<a href="plus76.html">7.6</a>,
<a href="plus77.html">7.7</a>,
<a href="plus.html">current</a>.
<br>

<p>
<h3>Changes made between OpenBSD 2.0 and 2.1</h3>
<p>

<ul>
<li>Fix keyboard and delay timing in i386 bootfloppy bootblocks. Whee!
<li>Added gzip and cdrom support to the sparc and alpha bootblocks.
<li>Support crunch on arc (for bootable installs).
<li>Repaired install stuff for most architectures significantly, improving ftp/http installs, single bootable install floppies, and in some cases CDROM booting.  Most floppies contain vi, too.
<li>The vnd(4) device has a new safer mode of operation called svnd where you can trust a disk-image right after it's unmounted, i.e. cache-coherency.
<li>sleep(3) and usleep(3) now call nanosleep(2) for significantly less overhead.
<li>GNU Groff 1.10 with (improved) Makefile wrapper.
<li>A bit more man page cleanup starting to happen...
<li>Split rc.local, creating rc.securelevel. (Securelevels look like a worse and worse idea every month.)
<li>newfs_msdos(8) can has enough brains to find the partition size itself.
<li>Significantly improved the unpredictability of the DNS packet id's in the resolver and named.
<li>libpthread works on the m68k.
<li>Support for PCI NE2000 clones.
<li>Some more userland 64 bit fixes.
<li>Unify naming of architecture names between gcc &amp; binutils.
<li>Signal handling fix to crontab(1).
<li>Various fixes to the YP utilities.
<li>Support extended partitions in fdisk(8).
<li>Support /etc/rc.shutdown from halt(8).
<li>PCI aic7860 scsi support improved.
<li>Support .group entries in /etc/passwd.conf
<li>Repair some bugs in mail(1), especially regarding signal handling.
<li>Always skip the first 8KB of all swap partitions (hint: disklabels &amp; bootblocks)
<li>The df(1) utility now has a human-readable "-h" option.
<li>For the first time ever, an obj@ populated /usr/src tree compiles cleanly when mounted read-only.
<li>Various man page fixes.
<li>NAT now gets started from /etc/netstart.
<li>Fix AFS string-to-key handling in kerberos.
<li>Correct DEV_BSIZE and lp->d_secsize confusion throughout the source tree. CD9660 is much happier now.
<li>Use in_addr_t and in_port_t all over the place.
<li>For config(8), if any kernel options get added/deleted/changed since the previous commit, warn that the compile tree needs 'make clean'.
<li>Make real i386 CPUs work again. In case no one noticed, they didn't work for about 5 months.  The bug was very hard to find...
<li>Once again, really correct the various source routing pieces of the userland source tree.
<li>A whole bunch of 64 bit fixes in the source tree (hint: alpha).
<li>Fix patch to honour Index lines better.
<li>Solve a few resolver problems after the recent 4.9.5-P1 integration, not all our fault.
<li>Use 10 X characters in many remaining mktemp() calls which are hard to excise.
<li>getnetent() and friends now work a lot more like gethostent().
<li>More buffer overflows, but none in sensitive programs.
<li>Fixed some more mktemp races (sigh, will this ever end!)
<li>Add support for YP v1 to ypserv.
<li>Add md5 &amp; blowfish passwd support to adduser(8).
<li>Numerous more pax/tar fixes.
<li>Add ./.message support to ftpd
<li>16 partition support for the alpha port.
<li>cvs 1.9.6
<li>64 bit clean in.rarpd.
<li>Change mail.local -H behaviour slightly, and convince mail(1) to use it for correct locking!
<li>New termcap and terminfo database files.
<li>Be more careful about modes of lost+found directories.
<li>Implement NOFILE_MAX--hard limit on max descriptors per process.
<li>gcc no longer defines -D__NetBSD__, only -D__OpenBSD__ now!
<li>sysctl kern.osrevision gives OpenBSD date.
<li>A few ypbind fixes.
<li>Fixes to fts(3).
<li>ddb improvements for 64 bit machines.
<li>The NE2000 if_ed driver now works on the alpha, too.
<li>Various atm fixes.
<li>Support for "secure" YP password maps.
<li>Substantial changes and fixes to the scsi scanner support.
<li>noaccesstime option for filesystems (saves batteries on laptops)
<li>Bye bye tahoe bits.
<li>pccon(1) to control the pccons driver.
<li>Merged changes from at 2.9 into our own at.
<li>Fix pcmcia on the i386.
<li>ipsecadm as an initial cut at controlling IPSEC sessions.
<li>Various fixes to the fsck tools.
<li>Let fsck and fsirand automatically work on very large filesystems.
<li>Numerous improvements to pax, including full support for cpio and a lot of fixes to tar mode.
<li>Import of libwrap and tcpd (tcp wrappers).
<li>Import of the mvme88k kernel port.
<li>Add support for FreeBSD md5 to /etc/passwd.conf.
<li>BIND 4.9.5-P1.
<li>deroff(1) 1.0 from Debian (a Linux).
<li>settimeofday(2) won't roll back the date if securelevel &gt; 0 (from lite2).
<li>newfs(8) now has an inline fsirand(8) with no noticable speed decrease.
<li>Replace which(1) with a C program.
<li>libg++ pulls in libcurses automatically.
<li>Fix weak symbol support in ld.
<li>cvs 1.9.2
<li>IPSEC package from John Ioannidis and Angelos D. Keromytis.
<li>Working kadmind for kerberosIV.
<li>Add support for /etc/passwd.conf which controls the format and strength of passwd entries for the next time a user changes their password. These options can be set per-user.
<li>New scalable BLOWFISH-based crypt algorithm for passwd file entries. It uses a very large strong-random 'salt' and the number of rotor runs is configurable.  Hence if you have faster machines you can slow the crypt routine down and make harder keys.
<li>fix some more memory and file descriptor leaks in libc/rpc
<li>Fix so that stack limits which are not a multiple of the pagesize work.
<li>Fix a few netinet kernel crash problems.
<li>Fix pax &amp; tar to be POSIX compliant.
<li>add RPC service name generation to netstat -a
<li>Make dd(1) work fine with our 64-bit off_t types, now you can copy very large disks using it.
<li>Improved NFS filehandle creation.
<li>Use lots more XXXX characters in calls to the few remaining mktemp() calls in the source tree. This cuts out a whole class of races.
<li>IPF 3.1.7 which includes fully working NAT support (ie. IP masquerading).
<li>The <a href="hp300.html">hp300</a> joins many other ports in supporting 16 disk partitions.
<li>Have libc/rpc save you from yourself if you do enable source routing.
<li>Change mktemp(3) and family to generate more random filenames, yet still as collision free as possible.
<li>Merge new ftp(1) changes from NetBSD.
<li>Add cdev and partition support to the ramdisk driver.
<li>New wgrisc port for Willowglen embedded r3081-based machine with ISA slots.
<li>Support for gzip'd kernels in some bootblocks.
<li>Be more careful if some fool decides to enable source routing ;-)
<li>Added RFC-1812 ICMP unreachable codes to ip_icmp.h, traceroute, and ping.
<li>/sbin/dump -a saves you from needing to deal with finicky tape length options (from FreeBSD)
<li>config.old(8) has been removed from the tree, as the <a href="hp300.html"> hp300</a> port switches to config(8).
<li>A SA_SIGINFO implementation for sigaction() and signal handlers.  This is a small part of POSIX 1003.1b and permits the signal handler to figure out the exact cause of a signal; such as fault address information for SIGSEGV or more detailed information for SIGFPE.
<li>The <a href="alpha.html">Alpha</a> port and all its utilities now compiles using in-tree versions of all tools.  Yipee!
<li>amd (the automounter) is now 64-bit and working on the alpha.
<li>Changed netinet IP_HDRINCL option to require ip_len and ip_off in network byte order. This is a compatibility/portability fix and we expect other BSD systems to eventually follow suit.
<li>Bug fixed that prevented bufpages/nbuf &gt; 1 setups.  This allows large buffer caches even when available kvm space is low, like for i386 &amp; sparc.
<li>Some ypbind(8) tightening up, includes a method to specify a list of valid servers
<li>Completely in-tree <a href="powerpc.html">PowerPC</a> port for non-Apple hardware.  This port requires nothing outside the in-tree development environment to build (except mkisofs for building distributions).
<li>A working fsirand.
<li>More kerberosIV security patches.
<li>Repair many uses of the SIOCGIFCONF code for machines with an outrageous number of network interfaces.
<li>pax in tar mode will understand multiple -v options to generate ls-like output.
<li>Prevent stat() from disclosing inode generation numbers to non-root userland.
<li>various adjtime() corrections inside the kernel.
<li>No buffer lengths in fmt(1).
<li>Support lchown(2) in dump(8), cp(1), pax(1), cpio(1), chown(8), and restore(8).
<li>New gnu cpio 2.4.2
<li>Added lchown(2) for compatibility with SVR4 implementations.
<li>Sendmail upgraded to version 8.8.5.
<li>Upgrade of awk(1), integration of BSD tsort(1), getopt fixes.
<li>Support for the <a href="hp300.html">hp300</a> added.
<li>Fix a fairly nasty security hole in all of the games.
<li>new aucat command.
<li>libcrypt goes away. We do not need this stub library anymore. Do not link against it on OpenBSD, all the pieces you need are in libc.
<li>ppp 2.3b3
<li>Permit building of kernels without a.out support.
<li>Properly use _POSIX_SAVED_IDS throughout the source tree.
<li>Import of the powerpc port.
<li>Change the games to be run setgid games, not setuid games.  This closes a whole slew of fascinating security holes.
<li>Add disklabels to the vnd device driver.
<li>Properly split fsck, mount, and newfs into multiple pieces.  Use disklabel information if it is available.
<li>Permit NFS attribute cache to be configured on a per-mount basis.
<li>Add XCASE/IUCLC/OLCUC/OCRNL/ONOCR/ONLRET tty subsystem flags for backwards compatibility.
<li>Repair some more KerberosIV buffer overflows.  Hard to believe this is supposed to be security software.
<li>f77 0.5.19
<li>texinfo 3.9
<li>sendmail 8.8.4
<li>Fix a few setgroups() related security holes.
<li>Add NetBSD's "route show" implementation, and at the same time fix the new buffer overflows that this provided.
<li>Fix information gathering attack in ping(8).
<li>tcpdump 3.3
<li>If disklabel reading code discovers an ISOFS filesystem underlying, spoof a nice disklabel (enough to fool mountroot).
<li>At boottime, have (*mountroot)() look at the root device's disklabel to determine which filesystem type is to be mounted.
<li>Add disklabels to the floppy device drivers.
<li>Multiple updates for GNU software
<li>Hundreds of little fixes all over the place.
<li>Some YP and bootparamd security changes.
<li>Add FreeBSD md5 diffs to mtree(8).  This can be used to implement a tripwire-like system.
<li>GNU gdb works on the mips-based platforms.
<li>Imported FreeBSD's calendar.
<li>Increased compatibility in the pccons driver with BSDi features.
<li>Added -C option to pax/tar. Also made -z support compressed files too.
<li>Prevent generic users from mounting filesystems by default.
<li>Use pdksh as our /bin/sh.  This provides excellent POSIX compliance.
<li>Numerous small security fixes again...
<li>com driver is now bus-independent.
<li>lpt driver is now bus-independent.
<li>The Arc port family has a new member: The rPC44 works!
<li>New bsd.*.mk feature: DEBUG=-g.  Try it, you'll like it.
<li>pdksh version is now 5.2.11
<li>Make login get more consistently upset about failed logins, and tell user about these failures at the next successful login.
<li>Memory leak paranoia in cron.
<li>Numerous more difficult-to-exploit-but-possible-if-someone-really-wanted-to buffer overflows found in system utilities..
<li>Various repairs to the scsi scanner support.
<li>Import of ctm.
<li>Integration of the pmax port.
<li>Beware $HOME overflows throughout the source tree.
<li>OLF binary type added.  This is like ELF, but includes an OS-dependent tag. elf2olf(1) converts an elf binary to a tagged OLF binary which the kernel can recognize correctly.
<li>In numerous utilities: prefer $LOGNAME, but also accept $USER.
<li>The NIST suite showed numerous errors in libraries and the kernel. Only a few small errors remain now, mostly regarding serial ports.
<li>More ftpd raging paranoia security fixes.
<li>Numerous fixes to the lpr suite, including security.
<li>Crank kvm space on the i386 port, also limit buffer cache usage so that 512MB machines may work (untested :-)
<li>GPL i387 emulator added.
<li>Skey revamped into full OTP (RFC1938) support, including sha1 and md5 support.
<li>Add stack tracebacks to Arc port's kernel debugger.
<li>The /dev/*random devices are now default on all architectures.
<li>A number of security fixes to the way coredumping works.
<li>upgrade to CVS version 1.9.
<li>The NIST Posix test suite became free. As a result we have been correcting numerous problems in the source tree, and expect to be completely POSIX compliant very soon.
</ul>
