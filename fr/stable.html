<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Maintenir son système à niveau par rapport à -stable</title>
<link rev=made href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="stable">
<meta name="keywords" content="openbsd,anoncvs,updates,stable">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2007 by OpenBSD.">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="index.html">
<img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0">
</a>

<p>
<h1><font color="#e00000">Maintenir son système à niveau par rapport à
<i>-stable</i> (la branche des "correctifs")</font></h1>
<hr>

<h3>Table des matières</h3>
<p>
<ul>
<li><a href="#whatis">Qu'est-ce que la branche <i>-stable</i> ? (branche
    des correctifs)</a>
<li><a href="#getting">Obtenir le code source de la branche
    <i>-stable</i></a>
<li><a href="#building">Construire depuis la branche <i>-stable</i></a>
</ul>
<hr>

<a name="whatis"></a>
<h3><font color="#0000e0">Qu'est-ce que la branche <i>-stable</i>
    ? (branche des correctifs)</font></h3>

<p>
En commençant avec 2.7, OpenBSD fournit un arbre des sources contenant
des correctifs importants (ceux de <a href="errata.html">errata</a> par
exemple, ainsi que d'autres plus évidents et simples ne nécessitant pas
d'errata) accessible via <a href="anoncvs.html">CVS</a> en outre des
sources courantes (<i>-current</i>). Ainsi l'utilisateur peut choisir
parmi trois options :<p>
<ul>
<li>Rester avec la dernière version et appliquer les correctifs à la
    main.
<li>Utiliser la <b>branche stable</b> qui intègre ces correctifs ainsi
    que d'autres.
<li>Utiliser la <b>branche courante</b> pour toutes les dernières
    améliorations.
</ul>
<p>
<!-- Le <a href="../plus.html">Changelog Quotidien</a> détaille quels
correctifs "post-release" ont été appliqués à la branche stable.-->
En principe, toutes les <a href="errata.html">errata</a> seront
appliquées à la branche stable dans les 48 heures ou lorsqu'une errata
est publiée. D'autres correctifs "post-release" peuvent être également
appliqués, mais néanmoins sujets à certaines conditions :
<ul>
<li>Les correctifs doivent être simples, courts, et surtout 100%
         corrects.
<li>Les errata sont faites concernant des bogues affectant un grand
    nombre de personnes. D'autres correctifs peuvent être appliqués à la
    branche stable s'ils affectent certaines personnes de façons
    importantes.
<li>Ne demandez pas qu'une quantité importante de sous-systèmes ou de
    correctifs soient appliqués. Maintenir l'arbre des correctifs
    requiert énormement d'efforts qui pourraient être passés à rendre
    notre prochaine version encore meilleure.
<li>Les nouveautés ou modifications apportées aux fonctionnalités, au
    support matériel ou aux APIs <i>ne</i> seront pas importées. De
    manière générale, si un élément requiert une modification de la page
    du manuel, il NE sera pas intégré à la branche des correctifs.
<li>Il existe néanmoins une exception aux conditions ci-dessus. En
    effet, les nouvelles versions d'OpenSSH seront appliquées à la
    branche stable.
</ul>
<p>

Il est important de noter que le nom <i>-stable</i> fait référence
UNIQUEMENT à l'API et non à la fiabilité globale du système étant donné
que le fonctionnement d'OpenBSD ne change pas.
En fait, si les choses se passent comme souhaité, <i>-current</i>, la
dernière <a href="../faq/fr/faq5.html#Flavors">saveur</a> en date sur le
chemin pour devenir la prochaine <i>-release</i> d'OpenBSD, apportera
durant son évolution des améliorations en termes de fiabilité, sécurité
et qualité globale par rapport aux versions <i>-release</i> et
<i>-stable</i> la précédant.

<a name="getting"></a>
<h3><font color="#0000e0">Obternir le code source de la branche <i>
    -stable</i></font></h3>

<p>
Pour obtenir une branche stable pour une certaine version d'OpenBSD,
vous pouvez mettre à jour un arbre des sources pré-existant (depuis <a
href="ftp.html">FTP</a> ou du <a href="../orders.html">CD</a>) ou
vous pouvez également prendre l'arbre des sources tout frais depuis un
serveur <a href="anoncvs.html">AnonCVS</a>. Les instructions pour
télécharger la branche stable et rester à jour sont décrites dans la
section
<b>Débuter avec le CVS anonyme</b> de la 
<a href="anoncvs.html#starting">documentation AnonCVS</a>. 
Notez que les branches stable n'aide pas dans la mise à jour d'une
version d'OpenBSD vers une autre, par exemple de 3.9 à
4.0. Elles ne fournissent qu'un moyen pour rester à jour avec 
les correctifs pour une version donnée.

<p>
Ne tentez pas de passer d'une version d'OpenBSD à une autre à partir des
sources. Veuillez consulter le <a href="../faq/fr/upgrade40.html">guide de
mise à jour</a> pour plus de détails.
Notez que vous ne pouvez pas revenir en arrière, de -current vers
-stable à cause des problèmes de versions des bibliothèques ainsi que
d'autres modifications.

<a name="building"></a>
<h3><font color="#0000e0">Construire depuis la branche <i>-stable</i></font></h3>
Tous les détails nécessaires pour la construction à partir du code
source sont disponibles dans <a href="../faq/fr/faq5.html">FAQ 5 -
Construire le Système à partir des Sources</a>.
Les paragraphes ci-après en sont un résumé simplifié.

<p>
Une fois l'arbre des sources obtenu via <a
href="anoncvs.html">anoncvs</a>, vous devez reconstruire votre système.
Pour ce faire, voici les étapes à suivre :

<ul>
 <li>Reconstruire le kernel
 <li>Redémarrer avec le nouveau kernel
 <li>Reconstruire les binaires
</ul>

<h4><font color="#0000e0">Reconstruire le kernel</font></h4>

<p>
Pour reconstruire le kernel par défaut de la branche stable :
<blockquote><pre>
# <strong>cd /usr/src/sys/arch/i386/conf</strong>
# <strong>/usr/sbin/config GENERIC</strong>
# <strong>cd /usr/src/sys/arch/i386/compile/GENERIC</strong>
# <strong>make clean &amp;&amp; make depend &amp;&amp; make</strong>
</pre></blockquote>

<p>
Remplacez <i>i386</i> par votre architecture, par exemple :  
<i>sparc</i>, <i>alpha</i>, etc.

<h4><font color="#0000e0">Redémarrer avec le nouveau kernel</font></h4>

<p>
Pour redémarrer avec le kernel nouvellement compilé :
<blockquote><pre>
# <strong>cd /usr/src/sys/arch/i386/compile/GENERIC</strong>
# <strong>make install</strong>          <i>(Installez le nouveau noyau de façon sûre)</i>
# <strong>reboot</strong>
</pre></blockquote>

<p>
Comme ci-dessus, substituez <i>i386</i> par votre architecture. Si votre
système rencontre des problèmes lors du démarrage du nouveau kernel,
vous pouvez aisément redémarrer sur votre ancien kernel, maintenant
appelé <i>obsd</i>.

<h4><font color="#0000e0">Reconstruire les binaires</font></h4>

<p> Pour reconstruire les binaires systèmes :
<blockquote><pre>
# <strong>rm -r /usr/obj/*</strong>
# <strong>cd /usr/src</strong>
# <strong>make obj</strong>
# <strong>cd /usr/src/etc &amp;&amp; env DESTDIR=/ make distrib-dirs</strong>
# <strong>cd /usr/src</strong>
# <strong>make build</strong>
</pre></blockquote>

<p>Ceci va prendre du temps...

<p>
Si vous souhaitez maintenir plusieurs machines en <i>-stable</i>, vous
pouvez créer une <a href="../faq/fr/faq5.html#Release">révision</a>
contenant les <a href="../faq/fr/faq4.html#FilesNeeded">paquetages de
fichiers</a> d'installation standards. Ces paquetages pourront alors
être rapidement et facilement installés sur n'importe quelle machine de
même <a href="plat.html">plate-forme</a>.

<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif" 
border="0" alt="OpenBSD"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>
<!--
Originally [OpenBSD: stable.html,v 1.24 ]<br>
$Translation: stable.html,v 1.24 2007/01/08 14:15:49 ajacoutot Exp $<br>
-->
$OpenBSD: stable.html,v 1.21 2007/01/08 14:53:37 jufi Exp $
</small>
</body>
</html>
