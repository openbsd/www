<!DOCTYPE HTML PUBLIC  "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>OpenBSD/mvme88k</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/mvme88k page">
<meta name="keywords" content="openbsd,mvme88k">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2004 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">
<a href="index.html"><img alt="[OpenBSD]" height="30" width="141"
src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD/mvme88k</font></h2>

<hr>

<p>
OpenBSD/mvme88k est un effort pour porter OpenBSD sur les systèmes
utilisant la famille de cartes VME à base de Motorola 881x0.

<p>
Le mainteneur actuel de ce port est Miodrag Vallat
(<a href="mailto:miod@openbsd.org">miod@openbsd.org</a>), avec l'aide de
Steve Murphree. Si d'autres personnes souhaitent contribuer, elles sont
bien entendu les bienvenues !

<a href="#toc"></a>
<h3><font color="#0000e0"><i>Table des matières</i></font></h3>
<p>
<ul>
  <li><a href="#history">Historique du port</a> 
  <li><a href="#status">Etat actuel</a> 
  <li><a href="#projects">Projets</a>
  <li><a href="#hardware">Matériel supporté</a>
  <li><a href="#install">Obtenir et installer OpenBSD/mvme88k</a> 
  <li><a href="#details">Détails matériels</a>
</ul>

<hr>
<a name="history"></a>
<h3><font color="#0000e0"><strong>Historique :</strong></font></h3>

<p> 
Le processeur Motorola 88k est, dit-on, le meilleur processeur RISC
jamais conçu. L'alliance de sa simplicité et de son élégance font du
mvme88k une plate-forme robuste et agréable.

<p> 
Nivas Madhur débuta le port initial mvme88k pour la carte MVME187, mais
il a depuis changé d'employeur. Le port fût intégré à l'arborescence
OpenBSD par Dale Rahn mais il n'avait pas assez de temps pour travailler
dessus. Steve Murphree, Jr. acheva finalement le portage en Novembre
1998.

<p>
Malheureusement, une mise à jour du compilateur à l'époque de gcc 2.8.1
vers egcs a révélé plusieurs problèmes dans le support mvme88k de gcc.
Ces problèmes ne pouvaient pas être corrigés à temps pour la sortie
d'OpenBSD 2.5.

<p>
L'absence de "toolchain" dans l'arborescence n'a pas empêché les travaux
sur ce port, et beaucoup de modifications ont été effectuées à la base
de code, telles qu' un système d'autoconfiguration amélioré, un pilote
pour le SCSI intégré, un support du bus VME grandement amélioré, une
procédure d'installation fonctionnant et créant correctement un bloc VID
Motorola sur les disques et le support du MVME188 ainsi qu'un meilleur
support du MVME197.

<p>
Durant l'été 2003, un effort pour corriger le "toolchain" a fini par
produire un compilateur gcc 2.95 fonctionnel, et a permis au port d'être
à nouveau indépendant. Avec l'aide de Mark Kettenis, les efforts sur le
"toolchain" ont produit binutils et gdb fonctionnels à la fin mai 2004.

<hr>
<a name="status"></a>
<h3><font color="#0000e0"><strong>Etat actuel :</strong></font></h3>

<p> 
A l'heure actuelle, seules les cartes MVME187 et MVME188, ainsi que les
cartes de conception similaire démarrent en mode multi- utilisateurs,
supportant la plupart des périphériques intégrés. Il reste encore
quelques problèmes; ces derniers différent selon votre matériel.

<hr>
<a name="projects"></a>
<h3><font color="#0000e0"><strong>Projets (sans ordre particulier):
</strong></font></h3>

<p>
<ul>
  <li>Corriger les bogues restants de génération de code mvme88k dans
      gcc lorsque l'optimisation -02 est utilisée
  <li>Support de la MVME197.
  <li>Travailler sur les cartes périphériques non supportées (MVME327,
      MVME374...)
  <li>Ecrire du code pour le nouveau binutils (et gdb) et passer à ELF
      et, plus tard, aux bibliothèques partagées
</ul>

<hr>
<a name="hardware"></a>
<h3><font color="#0000e0"><strong>Matériel supporté
    :</strong></font></h3>

<p>
<h4>Cartes processeur supportées</h4>

<p>
<ul>
<li><strong>MVME187</strong><br>
Une version uni-processeur 88100 des cartes <a
href="mvme68k.html">mvme68k</a> MVME167 et MVME177. Contient deux CMMUs
88200 avec un cache de 16KB chacun, SRAM, et des contrôleurs intégrés
ethernet et SCSI ainsi que quatre ports série et un port parallèle.<br>
<li><strong>MVME188 et MVME188A</strong><br>
Contrairement aux autres cartes processeur MVME, cette carte n'a aucun
périphérique intégré; elle sert seulement de récipient à un a
<i>HYPERmodule</i> qui fournit un, deux, ou quatre processeurs 88110, et
deux ou quatre CMMUs 88200 (cache de 16KB) ou 88204 (cache de 64KB) par
processeur.<br>
Toutes les combinaisons de HYPERmodules sont supportées. Cependant le
M88200 1P128 et le 1P512 n'ont pas été testés.<br> Des cartes externes
spécifiques à la famille MVME188 fournissent la mémoire et les ports
série.
</ul>

<p>
Ce port fonctionne aussi bien sur des systèmes Motorola complets variés
(<strong>M8120</strong>, les <strong>series 900</strong> à base de
MVME187, etc) que sur le <strong>Triton Dolphin System 100</strong> à
base de MVME187.

<p>
<h4>Périphériques intégrés supportés</h4> 

<p>
<ul>
<li><strong>MVME187</strong> 
    <ul>
    <li>Ports série Cirrus Logic CL2400 (tty00-
        tty03/tty07<i>[M8120]</i>) (cl)
    <li>Interface Ethernet Intel 82596CA
	(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ie&amp;sektion=4&amp;arch=mvme88k">ie</a>)
    <li>Contrôleur SCSI NCR53c710
	(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=osiop&amp;sektion=4&amp;arch=mvme88k">osiop</a>)
    <li>128KB SRAM (/dev/sram0)
    <li>8KB NVRAM (/dev/nvram0)
    </ul>
</li>
<li><strong>MVME188</strong>
    <ul>
    <li>Ports série sur carte <i>SYSCON</i> (ttya-ttyb) (dart)
    <li>2KB NVRAM (/dev/nvram0)
    </ul>
</li>
</ul>

<p>
<h4>Cartes VME supportées</h4>

<p>
<ul>
  <li>Contrôleur SCSI Hautes Performances <strong>MVME328</strong>
    (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vs&amp;sektion=4&amp;arch=mvme88k">vs</a>)
  <li>Contrôleur E/S Série Hautes Performances <strong>MVME332</strong>
      (8 ports série, 1 port parallèle) (vx)
  <li>Contrôleur Ethernet <strong>MVME376</strong>
    (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=le&amp;sektion=4&amp;arch=mvme88k">le</a>)
</ul>

<p>
<h4>Cartes processeur non supportées</h4>

<p>
Ces cartes ne sont pas supportées à l'heure actuelle. Cependant,
l'arborescence contient du code pour certaines d'entre elles. Ce code
est actuellement en déboguage.
<ul>
<li><strong>MVME180 <i>``Angelfire''</i> et MVME181</strong><br>
Une carte d'entrée de gamme à coût faible, contenant un seul processeur
88100, deux CMMUs 88200 et deux ports série intégrés.
<li><strong>MVME197LE</strong><br>
Une conception entrée de gamme similaire à la MVME187 mais basée sur le
processeur 88110 avec MMU intégrée et contrôleur cache.
<li><strong>MVME197SP et MVME197DP</strong><br> 
Versions améliorées de la MVME197LE avec un ou deux processeurs 88110 et
un contrôleur de cache externe 88410 par processeur
</ul>

<hr>
<a name="install"></a>
<h3><font color="#0000e0">
<strong>Obtenir et installer OpenBSD/mvme88k :</strong>
</font></h3>

<p>
La dernière version disponible d'OpenBSD/mvme88k est
<a href="36.html">OpenBSD 3.6</a>. 
Voici les
<a href="ftp://ftp.OpenBSD.org/pub/OpenBSD/3.6/mvme88k/INSTALL.mvme88k">
instructions d'installation d'OpenBSD/mvme88k 3.6</a>.

<p>
mais cette version ne bénéficie d'aucun support. Il est vivement
recommandé d'utiliser un snapshot récent.<br>
De temps à autre, des snapshots sont mis à disposition, à
<a href="ftp://ftp.OpenBSD.org/pub/OpenBSD/snapshots/mvme88k">cet endroit</a>
ainsi que sur quelques
<a href="ftp.html">miroirs</a>.
Et voici les
<a href="ftp://ftp.OpenBSD.org/pub/OpenBSD/snapshots/mvme88k/INSTALL.mvme88k">
instructions d'installation des snapshots OpenBSD/mvme88k
</a>.

<hr>
<a name="details"></a>
<h3><font color="#0000e0"><strong>Détails matériels
    :</strong></font></h3>

<p> 
Le matériel VME est assez rare sur le marché aujourd'hui, et le matériel
basé sur le Motorola 881x0 est encore plus rare. Cette section a été
créée pour satisfaire la curiosité justifiée concernant le matériel
mvme88k.

<p>
Paul Weissman est entrain de réunir des références exhaustives pour le
processeur m88k et les conceptions diverses et variées basées sur ce
processeur. Le fruit de son travail se trouve sur <a
href="http://badabada.org/">badabada</a>.

<a name="pics"></a>
<p>
Images d'un chassis Motorola 900 modulaire, avec une carte processeur
MVME187 à 33MHz, 32MB de RAM, 4 cartes série MVME332XT , et un lecteur
de bandes QIC de 250MB.
<ul>
<li><a href="../images/mvme187-1.jpg">MVME187 Series 900 (vue avant)</a>
<li><a href="../images/mvme187-2.jpg">MVME187 Series 900 (vue arrière)</a>
<li><a href="../images/mvme187-3.jpg">MVME187 Series 900 (vue arrière avec un
   terminal)</a>
<li><a href="../images/mvme187-4.jpg">MVME187 Series 900 (rear view close up)</a>
<li><a href="../images/mvme188-2.jpg">MVME188 Dual proc board</a>
</ul>

<p>
voici un message de démarrage d'un système MVME187.
<pre>
MVME187 board configuration #A: 1 CPUs 2 CMMUs
CPU0 is attached with 2 MC88200 CMMUs
CPU0 is master CPU
[ using 164336 bytes of bsd a.out symbol table ]
Copyright (c) 1982, 1986, 1989, 1991, 1993
        The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-2003 OpenBSD. All rights reserved.  http://www.OpenBSD.org

OpenBSD 3.4-current (GENERIC) #339: Thu Dec 25 20:53:33 GMT 2003
    miod@ramade.gentiane.org:/usr/src/sys/arch/mvme88k/compile/GENERIC
real mem  = 33554432
avail mem = 28024832 (6842 pages)
using 435 buffers containing 1781760 bytes of memory
mainbus0 (root): Motorola MVME187, 25MHz
cpu0: M88100 rev 0x3, 2 CMMU
cpu0: M88200 (16K) rev 0x9, global Icache, M88200 (16K) rev 0x9, global Dcache
bugtty0 at mainbus0 addr 0xfff45000: fallback console
pcctwo0 at mainbus0 addr 0xfff00000: rev 0
clock0 at pcctwo0 ipl 5
memc0 at pcctwo0 offset 0x43000: MEMC040 rev 1
nvram0 at pcctwo0 offset 0xc0000: MK48T08 len 8192
cl0 at pcctwo0 offset 0x45000 ipl 3 console 
ssh0 at pcctwo0 offset 0x47000 ipl 2: version 0 target 7
scsibus0 at ssh0: 8 targets
vme0 at pcctwo0 offset 0x40000: vector base 0x80, system controller
vme0: using BUG parameters
vme0: 1phys 0x02000000-0xefff0000 to VME 0x02000000-0xefff0000
vme0: 2phys 0xff000000-0xff7f0000 to VME 0xff000000-0xff7f0000
vme0: 3phys 0x00000000-0x00000000 to VME 0x00000000-0x00000000
vme0: 4phys 0x00000000-0x00000000 to VME 0x00000000-0x00000000
vme0: vme to cpu irq level 1:1
vmes0 at vme0
vx0 at vmes0 addr 0xff780000 vaddr 0x3ad0000 vec 0x80 ipl 3
vx0: created channel 1
vs0 at vmes0 addr 0xffff9000 vaddr 0x3ae0000 vec 0x81 ipl 2: target 7
scsibus1 at vs0: 8 targets
sd0 at scsibus1 targ 0 lun 0: &lt;COMPAQPC, DCAS-32160, S6CA&gt; SCSI2 0/direct fixed
sd0: 2006MB, 8188 cyl, 3 head, 167 sec, 512 bytes/sec, 4110000 sec total
vmel0 at vme0
ie0 at pcctwo0 offset 0x46000 ipl 1: address 08:00:3e:21:07:25
boot device: sd0
root on sd0a
rootdev=0x400 rrootdev=0x800 rawdev=0x802
Automatic boot in progress: starting file system checks.
/dev/rsd0a: file system is clean; not checking
/dev/rsd0d: file system is clean; not checking
/dev/rsd0e: file system is clean; not checking
/dev/rsd0f: file system is clean; not checking
/dev/rsd0g: file system is clean; not checking
/dev/rsd0h: file system is clean; not checking
/dev/rsd0i: file system is clean; not checking
setting tty flags
ddb.console: 0 -&gt; 1
kern.splassert: 0 -&gt; 2
starting network
add net default: gateway odyssee
starting system logger
starting rpc daemons: portmap ypbind rdate timed.
savecore: no core dump
checking quotas: done.
building ps databases: kvm dev.
clearing /tmp
starting pre-securelevel daemons:.
setting kernel security level: kern.securelevel: 0 -&gt; 1
preserving editor files
creating runtime link editor directory cache.
starting network daemons: sendmail inetd sshd.
starting local daemons:.
standard daemons: cron.
Sat Jan  3 22:58:54 GMT 2004

OpenBSD/mvme88k (ramade.gentiane.org) (console)

login:  
</pre>

<hr>
<a href="plat.html">
<img height="24" width="24" src="../back.gif" border="0" alt="Supported platforms">
</a> 
<br>
<small><a href="mailto:www@openbsd.org">www@openbsd.org</a></small>
<br>
<small>
Originally [OpenBSD: mvme88k.html,v 1.59 ]<br>
$Translation: mvme88k.html,v 1.26 2004/11/03 20:13:45 saad Exp $<br>
$OpenBSD: mvme88k.html,v 1.22 2004/11/03 21:01:23 saad Exp $
</small>

</body>
</html>
