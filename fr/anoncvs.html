<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD AnonCVS</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="description" content="How to get OpenBSD updates via Internet using Anonymous CVS">
<meta name="keywords" content="openbsd,anoncvs,updates">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2002 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Anonymous CVS</font></h2>

<h3>Table des mati&egrave;res</h3>

<ul>
<li><a href="#anoncvs">Qu'est ce que le CVS anonyme ?</a>
<li><a href="#CVS">Qu'est ce que CVS ?</a>
<li><a href="#starting">D&eacute;buter avec le CVS anonyme</a>
<li><a href="#using">Utiliser CVS(1) pour obtenir et mettre &agrave; jour les sources</a>
<li><a href="#CVSROOT">Serveurs CVS anonymes disponibles</a>
<li><a href="#CRYPTO">Obtenir les sources de la crypto par CVS(1)</a>
<li><a href="#EXAMPLE">Exemples d'usages de CVS(1)</a>
<li><a href="#WHICH">Utiliser rsh(1) ou ssh(1) ?</a>
<li><a href="#SUP">Faire un miroir du CVS avec sup(1)</a>
<li><a href="#MIRROR">Mettre en place un miroir anoncvs</a>
</ul>

<hr>

<h3><a name="anoncvs"><font color="#0000e0">Qu'est ce que le CVS anonyme ?</font></a></h3>

<p>
Le CVS anonyme est une m&eacute;thode qui permet de garder &agrave; jour votre copie
locale des sources d'OpenBSD. En plus de suivre les derni&egrave;res
nouveaut&eacute;s du d&eacute;veloppement, il est aussi possible de suivre les
correctifs et les errata d'une version.
</p>

<p>
L'avantage majeur du CVS anonyme sur les autres techniques de mise &agrave;
jour est que cela fonctionne directement &agrave; partir d'un serveur central
o&ugrave; r&eacute;side le code source ou d'un miroir. Cela vous permet d'avoir acc&egrave;s &agrave;
toutes les commandes de CVS pour int&eacute;grer et mettre &agrave; jour vos
changements avec d'autres changements dans les sources, d'effectuer
des diffs, de voir l'historique des changements et plein d'autres
types de requ&ecirc;tes.  </p>

<p>
Le projet OpenBSD a actuellement cinq branches principales :
</p>

<ul>
  <li><b>src</b> - Contient tout le code source pour le syst&egrave;me d'exploitation OpenBSD.
  <li><b>ports</b> - Contient les <a href="ports.html">ports OpenBSD</a>.
  <li><b>www</b> - Contient les pages web OpenBSD. (dont celle-ci).
  <li><b>X11</b> - Contient l'adaptation OpenBSD du logiciel
      <a href="http://www.XFree86.org/">XFree86-3</a>.
  <li><b>XF4</b> - Contient l'adaptation OpenBSD du logiciel 
      <a href="http://www.XFree86.org/">XFree86-4</a>.
</ul>

<p>
Pour r&eacute;sumer, la force du CVS anonyme est que c'est un syst&egrave;me de
contr&ocirc;le du code source "tol&eacute;rant". Il <strong>respecte</strong> les
changements que vous avez effectu&eacute;s dans vos sources et fait les
<strong>"meilleurs efforts"</strong> pour mettre &agrave; jour votre
arborescence des sources, plut&ocirc;t que de vous faire une liste de
probl&egrave;mes &eacute;sot&eacute;riques &agrave; r&eacute;soudre avant de pouvoir continuer.
</p>

<h3><a name="CVS"><font color="#0000e0">Qu'est ce que CVS ? </font></a></h3>

<p>
<a href="why-cvs.html">
CVS est le syst&egrave;me de contr&ocirc;le du code source utilis&eacute; pour g&eacute;rer les
sources d'OpenBSD.</a> Il met en oeuvre un "d&eacute;p&ocirc;t" central pour tout
le source officiellement disponible tout en permettant aux
d&eacute;veloppeurs de maintenir des copies locales du code source avec leurs
changements personnels. Les d&eacute;veloppeurs avec un "<b>acc&egrave;s en
&eacute;criture</b>" peuvent soumettre des changements directement dans les
sources d'OpenBSD, tandis que les utilisateurs du CVS anonyme ont un
"<b>acc&egrave;s en lecture</b>" et peuvent garder leurs copies des sources &agrave;
jour et &eacute;mettre des requ&ecirc;tes vers le serveur.
</p>

<p>
La grande force de CVS est sa capacit&eacute; &agrave; effectuer une int&eacute;gration
intelligente des changements venant du serveur central contenant les
sources avec les changements que vous avez effectu&eacute;s dans votre copie
locale. Cela signifie que si vous faites des changements &agrave; un module
et que vous effectuez une mise &agrave; jour, vos changements ne seront pas
d&eacute;truits. CVS fait en sorte d'int&eacute;grer les changements dans les
sources avec les changements que vous avez effectu&eacute;s.
</p>

<p>
Au cas o&ugrave; les changements ne peuvent pas &ecirc;tre compl&egrave;tement int&eacute;gr&eacute;s,
CVS fournit une "chute en douceur", dans le sens qu'il vous fournit
des changements annot&eacute;s &agrave; votre copie locale en pr&eacute;servant celle-ci et
continue de mettre &agrave; jour les autres sources comme demand&eacute;.
</p>

<h3><a name="starting"><font color="#0000e0">D&eacute;buter avec le CVS anonyme </font></a></h3>

<p>
La derni&egrave;re version de CVS est disponible chez <a
href="http://www.cvshome.org/">Cyclic</a>. Les versions plus
anciennes que 1.6 ne sont pas recommand&eacute;es et pourraient ne pas
fonctionner. Si vous avez d&eacute;j&agrave; OpenBSD d'install&eacute;, CVS est inclus.
</p>

<p>
Les personnes qui poss&egrave;dent un CD d'OpenBSD y ont sans doute vu des
r&eacute;pertoires <i>CVS/</i>. La raison est que sur le CD se trouve une version
du module <b>src</b> d'OpenBSD utilisable pour faire des mises &agrave;
jour depuis un serveur CVS anonyme. Utiliser cette arborescence est
beaucoup plus rapide que de r&eacute;cup&eacute;rer compl&egrave;tement les sources
d'OpenBSD. Il y a deux mani&egrave;res d'utiliser le CD :
</p>

<ul>
<li>Pour copier l'arborescence CVS depuis le CD vers <i>/usr/src</i>
(en supposant que le CD est mont&eacute; sur /mnt):
<pre>
	# <b>cd /mnt; pax -rw CVS Makefile [a-z]* /usr/src</b>
</pre>
<li>Utiliser un "union mount" (voir <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_union&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">mount_union(8)</a>)
avec le CD mont&eacute; dans un r&eacute;pertoire autoris&eacute; en &eacute;criture. (Ne peut
&ecirc;tre utilis&eacute; que si vous compilez depuis l'arborescence des sources)
<pre>
	# <b>mount -t union -o -b /mnt /usr/src</b>
</pre>
</ul>

<p>
Pour ceux qui n'ont pas de CD sous la main, vous pouvez utiliser <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">cvs(1)</a>
pour r&eacute;cup&eacute;rer les sources. C'est d&eacute;crit dans la <a
href="#using">section suivante</a>.
</p>

<p>
Apr&egrave;s &ccedil;a, <i>/usr/src</i> sera un r&eacute;pertoire o&ugrave; les commandes <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">cvs(1)</a>
fonctionneront correctement.
</p>

<h3><a name="using"><font color="#0000e0">Utiliser CVS pour r&eacute;cup&eacute;rer et mettre
&agrave; jour son arbre source</font></a></h3>

<p>
CVS a &eacute;t&eacute; mis au point dans le but d'&ecirc;tre un moyen simple de r&eacute;cup&eacute;rer
et de mettre &agrave; jour vos sources. Vous devez tout d'abord d&eacute;cider si
vous voulez suivre la branche <i>current</i> ou une branche de
correctifs (patch). L'arborescence current poss&egrave;de tous les derniers
changements et la branche correctifs contient une version d'OpenBSD
avec tous les correctifs de l'<a href="errata.html">errata</a>
appliqu&eacute;s. Pour une d&eacute;finition de <i>current</i>, se reporter &agrave; la
<a href="../faq/upgrade-minifaq.html#1.1">mini foire aux questions sur la mise &agrave;
jour</a>.

<p>Une fois que vous avez d&eacute;cid&eacute; quelle est la branche que vous voulez
suivre, vous devez s&eacute;lectionner le serveur de CVS anonyme que vous
allez utiliser. Une liste de ces serveurs est disponible <a
href="#CVSROOT">ci-dessous</a>. Remarquez tout de m&ecirc;me qu'il existe
trois possibilit&eacute;s pour acc&eacute;der &agrave; ces serveurs.
</p>

<dl>
<dt><b>ssh</b> - Secure Shell peut &ecirc;tre utilis&eacute; pour acc&eacute;der aux
serveurs de CVS anonymes. C'est la mani&egrave;re <em>recommand&eacute;e</em> de faire
les choses, &agrave; cause du chiffrement. Depuis OpenBSD 2.6, OpenSSH est
inclus dans la distribution standard.  
<dt><b>rsh</b> - Remote Shell peut &ecirc;tre utilis&eacute; avec certains serveurs
pour les utilisateurs qui n'ont pas acc&egrave;s &agrave; <a
href="http://www.openssh.com">ssh</a> 
<dt><b>pserver</b> - pserver est avant tout utile pour les
utilisateurs qui se trouvent derri&egrave;re des pares-feu qui bloqueraient
les deux autres types de connexion.
</dl>

<p>
<b>REMARQUE :</b>  Pour les utilisateurs qui souhaitent utiliser rsh,
il faut d'abord d&eacute;finir la variable <var>CVS_RSH</var> &agrave; rsh.

<ul>
<li> Pour les shells Korn/Bourne :
<pre>
	$ <b>export CVS_RSH=/usr/bin/rsh</b>
</pre>
<li> Pour les shells csh/tcsh : 
<pre>
	% <b>setenv CVS_RSH /usr/bin/rsh</b>
</pre>
</ul>

<p>
Une fois que vous avez choisi le <a href="#CVSROOT">serveur de CVS
anonyme</a> que vous allez utiliser, et quelle m&eacute;thode vous allez
utiliser, vous pouvez d&eacute;marrer. Pour ceux qui aurait le CD, vous
pouvez d&eacute;marrer avec la version du CVS qui se trouve sur le CD avec
les m&eacute;thodes d&eacute;crites <a href="#starting">ci-dessus</a> pour installer
les sources sur votre syst&egrave;me. Si vous n'avez pas le CD sous la main,
utilisez la m&eacute;thode ci-dessous pour r&eacute;cup&eacute;rer les sources. Cette
m&eacute;thode place l'arborescence des sources d'OpenBSD dans
<i>/usr/src</i>.
</p>

<pre>
	# <b>cd /usr; cvs checkout -P src</b>
</pre>

<p>
La m&eacute;thode ci-dessus va r&eacute;cup&eacute;rer (checkout) l'arborescence
<i>current</i> des sources. Beaucoup d'entre vous d&eacute;sirerons s&ucirc;rement
la branche correctifs (patch) des sources. Pour r&eacute;cup&eacute;rer une branche
patch, vous devez le sp&eacute;cifier avec votre commande (tag). Exemple :
</p>

<pre>
	# <b>cd /usr; cvs checkout -P -rOPENBSD_3_4 src</b>
</pre>
<p> Ou OPENBSD_3_3 pour 3.3, etc... 
<p> Actuellement, seul le tag OPENBSD_3_4 contient les sources et les erratas 
  sur les sources d&eacute;j&agrave; appliqu&eacute;s. 
<h3><a name="CVSROOT"><font color="#0000e0">Serveurs CVS anonymes disponibles</font></a></h3>

<p>
Il existe deux niveaux d'acc&egrave;s &agrave; l'arborescence des sources :

<dl>
<dt><strong>Acc&egrave;s en lecture-&eacute;criture pour les d&eacute;veloppeurs :</strong>
<dd>Les d&eacute;veloppeurs qui ont besoin de soumettre des changements &agrave;
l'arborescence des sources doivent avoir un compte sur les machines
OpenBSD. Obtenir cet acc&egrave;s sera le r&eacute;sultat tout naturel du travail
effectu&eacute; sur les sources avec d'autres d&eacute;veloppeurs OpenBSD. Si
quelqu'un fait du bon travail et montre qu'il peut travailler avec
l'&eacute;quipe, il obtiendra un compte.
</dl>

<dl>
<dt><strong>Acc&egrave;s en lecture seule pour tout le monde :</strong>
<dd>N'importe qui peut acc&eacute;der au CVS en lecture seule. Ces copies du
CVS en lecture-&eacute;criture sont r&eacute;alis&eacute;es relativement souvent. Pour en
utiliser un, il vous faudra d&eacute;finir votre variable d'environnement
<var>CVSROOT</var> avec l'une des valeurs suivantes :
<p>
<em>Voyez la remarque ci-dessous en ce qui concerne l'utilisation de <a
href=#WHICH">ssh ou rsh !</a></em>
<p>
    <ul>
      <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs1.usa.openbsd.org:/cvs</strong><br>
        Aussi connu comme <strong>anoncvs@anoncvs4.usa.openbsd.org</strong>.<br>
        situ&eacute; &agrave; Redwood City, Californie, ouest des USA.<br>
        maintenu par <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
        protocoles : rsh, ssh, ssh port 2022, pserver.<br>
        mis &agrave; jour toutes les 4 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs.usa.openbsd.org:/cvs</strong><br>
        Aussi connu comme <strong>anoncvs3.usa.openbsd.org</strong>.<br>
        situ&eacute; &agrave; l'Universit&eacute; du Colorado, Boulder, ouest des USA.<br>
        maintenu par <a href="mailto:Todd.Miller@cs.colorado.edu">Todd Miller</a>.<br>
        protocoles : rsh, ssh, ssh port 2022, pserver.<br>
        mis &agrave; jour toutes les 3 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs5.usa.openbsd.org:/cvs</strong><br>
        Aussi connu comme <strong>squid.nas.nasa.gov</strong>.<br>
        situ&eacute; au Centre de recherches Ames, Moffett Field, Californie, USA.<br>
        maintenu par <a href="mailto:allison@mail.arc.nasa.gov">Tyler Allison</a>.<br>
        protocoles : seulement ssh.<br>
        mis &agrave; jour toutes les 3 heures.<br>
      <li><strong>CVSROOT=anoncvs@mirror.arc.nasa.gov:/cvs</strong><br>
        situ&eacute; au Centre de recherches Ames, Moffett Field, Californie, USA.<br>
        maintenu par <a href="mailto:allison@mail.arc.nasa.gov">Tyler Allison</a>.<br>
        protocoles : seulement ssh.<br>
        mis &agrave; jour toutes les 3 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs6.usa.openbsd.org:/cvs</strong><br>
        Aussi connu comme <strong>openbsd.citi.umich.edu</strong>.<br>
        situ&eacute; &agrave; l'Universit&eacute; du Michigan, centre des USA.<br>
        maintenu par <a href="mailto:rees@umich.edu">Jim Rees</a>.<br>
        protocoles : ssh, ssh port 2022.<br>
        mis &agrave; jour toutes les 12 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs1.ca.openbsd.org:/cvs</strong><br>
        Aussi connu comme <strong>anoncvs.ca.openbsd.org</strong>, <strong>openbsd.sunsite.ualberta.ca</strong><br>
        situ&eacute; &agrave; Edmonton, Alberta, Canada.<br>
        maintenu par <A HREF="mailto:beck@ualberta.ca">Bob Beck</A>.<br>
        protocoles : ssh, rsh, ssh port 2022, pserver<br>
        mis &agrave; jour toutes les 2 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs.comstyle.com:/cvs</strong><br>
        Aussi connu comme <strong>openbsd.comstyle.com</strong><br>
        situ&eacute; &agrave; Toronto, Ontario, Canada.<br>
        maintenu par <A HREF="mailto:brad@comstyle.com">Brad Smith</A>.<br>
        protocoles : ssh, ssh port 2022 
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs.tw.openbsd.org:/cvs</strong><br>
        Aussi connu comme <strong>OpenBSD.csie.NCTU.edu.tw</strong>.<br>
        situ&eacute; &agrave; Taipei, Taiwan.<br>
        maintenu par <a href="mailto:lkchu@OpenBSD.csie.NCTU.edu.tw">Liang-Kai 
        Chu</a>.<br>
        protocoles : rsh, ssh, ssh port 2022.<br>
        mis &agrave; jour toutes les 12 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs.no.openbsd.org:/cvs</strong><br>
        Aussi connu comme <strong>cvs.inet.no</strong>.<br>
        situ&eacute; en Norv&egrave;ge<br>
        maintenu par <a href="mailto:cvsadmin@inet.no">Michael Shuldman</a>.<br>
        protocoles : rsh, ssh, ssh port 2022.<br>
        mis &agrave; jour toutes les 4 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs.se.openbsd.org:/cvs</strong><br>
        Aussi connu comme <strong>anoncvs.stacken.kth.se</strong>.<br>
        situ&eacute; en Su&egrave;de.<br>
        maintenu par <a href="mailto:anoncvs@stacken.kth.se">Magnus Holmberg</a>.<br>
        protocoles : rsh, ssh, ssh port 2022.<br>
        mis &agrave; jour toutes les 3 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs.be.openbsd.org:/cvs</strong><br>
        Aussi connu comme <strong>badlands.rug.ac.be</strong>.<br>
        situ&eacute; en Belgique.<br>
        maintenu par <a href="mailto:wvdputte@reptile.rug.ac.be">Wim Vandeputte</a>.<br>
        protocoles : ssh, ssh port 2022.<br>
        mis &agrave; jour toutes les 3 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs.nl.openbsd.org:/cvs</strong><br>
        situ&eacute; &agrave; Amsterdam, aux Pays-Bas.<br>
        maintenu par <a href="mailto:nick@calyx.net">Nick Merrill</a> et <a href="mailto:alex@calyx.nl">Alexander 
        Grendel</a>.<br>
        protocoles : ssh.<br>
        mis &agrave; jour toutes les 3 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs.jp.openbsd.org:/cvs</strong><br>
        Aussi connu comme <strong>kankoromochi.econ.nagasaki-u.ac.jp</strong>.<br>
        situ&eacute; &agrave; l'Universit&eacute; de Nagasaki, Facult&eacute; d'Economie, Japon.<br>
        maintenu par <a href="mailto:sigh@net.nagasaki-u.ac.jp">SUZUKI Hitoshi</a>.<br>
        protocoles : ssh, pserver.<br>
        mis &agrave; jour toutes les 3 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs.cz.openbsd.org:/cvs</strong><br>
        Aussi connu comme <strong>com-os2.ms.mff.cuni.cz</strong>.<br>
        situ&eacute; &agrave; la Facult&eacute; de Maths &amp; Physique, Universit&eacute; Charles, Prague, 
        R&eacute;publique Tch&egrave;que.<br>
        maintenu par <a href="mailto:galambos@com-os2.ms.mff.cuni.cz">Leo Galambos</a>.<br>
        protocoles : ssh, ssh port 2022.<br>
        mis &agrave; jour toutes les 3 heures. 
        <p> 
      <li><strong>CVSROOT :pserver:anoncvs@cvs.bsdfr.org:/cvs</strong><br>
        situ&eacute; en France<br>
        maintenu par : <A HREF="mailto:jch@oleane.net">Jean-Claude Christophe</A><br>
        protocole : pserver<br>
        mis &agrave; jour toutes les 24 heures<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs.de.openbsd.org:/cvs</strong><br>
        Machine aussi connue comme <strong>grappa.unix-ag.uni-kl.de</strong>.<br>
        Situ&eacute; &agrave; l'universit&eacute; de Kaiserslautern, Allemagne<br>
        maintenu par <A HREF="mailto:naddy@openbsd.org">Christian Weisgerber</A>.<br> 
        protocoles : ssh, ssh port 2022, pserver<br>
        mis &agrave; jour toutes les 6 heures depuis anoncvs.usa.openbsd.org.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@exokernel.lcs.mit.edu:/cvs</strong><br>
        situ&eacute; au M.I.T, est des USA.<br>
        maintenu par ????<br>
        protocoles : ssh, ???<br>
        mis &agrave; jour toutes les ? heures<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@stl-isaas.ey.com:/cvs</strong><br>
        situ&eacute; &agrave; St. Louis, MO, est des USA<br>
        maintenu par <A HREF="mailto:aaron11@sprynet.com">Aaron Miller</A>.<br>
        protocoles : ssh, ssh port 2022, pserver<br>
        mis &agrave; jour toutes les 3 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@openbsd.groupbsd.org:/cvs</strong><br>
        situ&eacute; &agrave; Hillsborough NC, Est des USA<br>
        maintenu par <A HREF="mailto:randy@openbsd.org">Randy Lewis</A> et <A HREF="mailto:jason@openbsd.org">Jason 
        Wright</A>.<br>
        protocoles : ssh, pserver<br>
        mis &agrave; jour toutes les 4 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs.mx.openbsd.org:/cvs</strong><br>
        Situ&eacute; sur le Campus Iztacala, Universidad Aut&oacute;noma de M&eacute;xico<br>
        maintenu par <A HREF="mailto:jcortes@openbsd.org.mx">Jorge A. Cort&eacute;s</A>.<br>
        protocoles : ssh<br>
        mis &agrave; jour toutes les 3 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs.pl.openbsd.org:/cvs</strong><br>
        Aussi connu comme <strong>anoncvs1.pl.openbsd.org</strong>, <strong>incredible.bmtmc.gda.pl</strong><br>
        Situ&eacute; &agrave; BMT Maritime Consultants, Gdansk, Pologne<br>
        maintenu par <A HREF="mailto:detergent@incredible.bmtmc.gda.pl">Adam Naguszewski</A>.<br>
        protocoles : ssh, pserver<br>
        mis &agrave; jour toutes les 3 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@rt.fm:/cvs</strong><br>
        Situ&eacute; &agrave; Lake in the Hills, Illinois, USA<br>
        maintenu par <A HREF="mailto:jcs@rt.fm"> Joshua Stein</A>.<br>
        protocoles : ssh<br>
        mis &agrave; jour toutes les 3 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@shellhung.org:/cvs</strong><br>
        Situ&eacute; &agrave; Hong Kong, Chine<br>
        maintenu par <A HREF="mailto:shell@shellhung.org"> Shell Hung</A>.<br>
        protocoles : pserver, ssh<br>
        mis &agrave; jour toutes les 3 heures.
        <p> 
      <li><strong>CVSROOT=anoncvs@cvs.openbsd.cz:/cvs</strong><br>
        Situ&eacute; &agrave; Prague, R&eacute;publique Tch&egrave;que<br>
        maintenu par <A HREF="mailto:vlada@openbsd.cz">Vladimir Kotal</A>.<br>
        protocoles : ssh, pserver.<br>
        mise &agrave; jour toutes les 4 heures.<br>
        <p> 
      <li><strong>CVSROOT=anoncvs@anoncvs.openbsd.org.ua:/cvs</strong><br>
        Situ&eacute; &agrave; Kiev, Ukraine<br>
        maintenu par <A HREF="mailto:hunter@dg.net.ua">Sergey Smitienko</A>.<br>
        protocoles : ssh<br>
        mise &agrave; jour toutes les 6 heures.<br>
        <p> 
		<li><strong>CVSROOT=anoncvs@anoncvs2.openbsd.org.ua:/cvs</strong><br>
        Situ&eacute; &agrave; Kiev, Ukraine<br>
        maintainu par <A HREF="mailto:violent@death.kiev.ua">Igor Grabin</A>. 
        Joignable uniquement &agrave; partir d'Ukraine.<br>
        protocoles : pserver<br>
        mise &agrave; jour toutes les 6 heures.<br>
        <p>
      <li><strong>CVSROOT=openbsd@openbsd.bug.it:/cvs</strong><br>
        Situ&eacute; &agrave; Mod&egrave;ne, Italie<br>
        maintenu par <A HREF="mailto:jwk@bug.it">Giacomo Cariello</A>.<br>
        protocoles : ssh, password "openbsd"<br>
        mise &agrave; jour toutes les 6 heures.
      <p>
      <li><strong>CVSROOT=anoncvs@anoncvs.openbsd.lt:/cvs</strong><br>
        Aussi connu comme <strong>anoncvs.studentas.lt</strong><br>
        Situ&eacute; &agrave; LITNET NOC, Academical and Research Network, Kaunas, 
        Lituanie.<br>
        maintainu par <a href="mailto:helpas@aic.lt">Donatas Budvytis</a>.<br>
        protocoles : ssh<br>
        mise &agrave; jour toutes les 3 heures &agrave; partir de anoncvs.usa.openbsd.org.<br>	
      <p>
      <li><strong>CVSROOT=anoncvs@openbsd.informatik.uni-erlangen.de:/cvs</strong><br>
        Situ&eacute; &agrave; l'Universit&eacute; d'Erlangen-Nuremberg, Allemagne<br> maintenu par <a
        href="mailto:Alexander.Gernler@informatik.stud.uni-erlangen.de">Alexander von Gernler</a>.<br>
        protocoles : ssh, ssh port 2022, pserver<br>
        mise &agrave; jour toutes les 6 heures &agrave; partir de cvsup.uk.openbsd.org.<br>
      <p>
      <li><strong>CVSROOT=anoncvs@mirror.osn.de:/cvs</strong><br>
        Situ&eacute; &agrave; N&uuml;rnberg, Allemagne<br>
        maintenu par <a href="mailto:aw@osn.de">Armin Wolfermann</a>.<br>
        protocoles: ssh<br>
        mise &agrave; jour toutes les 4 heures.<br>
      <p>
      <li><strong>CVSROOT=anoncvs@openbsd.chem.uw.edu.pl:/cvs</strong><br>
        Situ&eacute; &agrave; Varsovie, Pologne<br>
        maintenu par <a href="mailto:admin@chem.uw.edu.pl">Piotr Klein</a>.<br>
        protocoles: ssh<br>
        mise &agrave; jour toutes les 3 heures.<br>
</ul>


<p>
<em>Remarque :</em>, Si votre serveur est list&eacute; ici avec des
informations inexactes, veuillez contacter <A
HREF="mailto:beck@openbsd.org"><tt>beck@openbsd.org</tt></A>
</p>

<p>
Vous pouvez utiliser <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&amp;sektion=8&amp;format=html">traceroute(8)</a>
pour trouver le serveur le plus proche de vous.  Les probl&egrave;mes avec un
serveur doivent &ecirc;tre adress&eacute;s directement au <b>mainteneur</b> du
serveur en question.  </dl></p>

<h3><a name="CRYPTO"><font color="#0000e0">Obtenir les sources crypto par cvs(1)</font></a></h3>

<p>
<strong>REMARQUE IMPORTANTE :</strong>
Il existe quelques remarques au sujet des logiciels cryptographiques que tout le monde doit conna&icirc;tre :
<ul>
<li>Les sources d'OpenBSD viennent du Canada.  
Comme <a
href="http://www.efc.ca/pages/doc/crypto-export.html">recherch&eacute;
par un Canadien</a> et comme d&eacute;crit dans la <a
href="http://axion.physics.ubc.ca/ECL.html">liste de contr&ocirc;le des
exportations du Canada</a>, il est l&eacute;gal d'exporter les logiciels de
crypto depuis le Canada vers le reste du monde.
<p>
<li>Cependant, si vous &ecirc;tes en dehors des USA et du Canada, vous ne
devez pas r&eacute;cup&eacute;rer les parties cryptographiques des sources d'OpenBSD
depuis un serveur anoncvs situ&eacute; aux USA. Les fichiers en question sont
:
<ul>
<li>src/kerberosIV/*
<li>src/kerberosV/*
<li>src/lib/libdes/*
<li>src/lib/libc/crypt/crypt.c
<li>src/lib/libc/crypt/morecrypt.c
<li>src/sys/crypto
<li>src/sys/netinet
<li>src/usr.sbin/afs/src/rxkad/*
<li>XF4/xc-mit/lib/Xdmcp/Wraphelp.c
<li>XF4/xc-old/lib/Xdmcp/Wraphelp.c
<li>XF4/xc/lib/Xdmcp/Wraphelp.c
</ul>
A cause de la loi am&eacute;ricaine sur l'exportation des armes (ITAR), les
logiciels de crypto ne peuvent &ecirc;tre export&eacute;s qu'au Canada depuis les
USA.
<p>
<li>Le projet OpenBSD cherche plus de serveurs anoncvs, veuillez lire plus bas
pour savoir comment faire.
</ul>

<h3><a name="EXAMPLE"><font color="#0000e0">Exemples d'utilisation de cvs(1)</font></a></h3>

<p>
AVERTISSEMENT : si vous souhaitez mettre &agrave; jour une branche (telle qu'une
branche de correctifs) vers <i>current</i>, vous devez ajouter l'option
<code>-A</code> &agrave; la commande cvs mais autrement, cette option est inutile.
D'anciennes versions de la documentation OpenBSD recommandait l'usage de cette
option dans de nombreux exemples. Nous ne la recommandons plus, sauf lorsqu'elle
est absolument n&eacute;cessaire.

<p>
Un exemple d'utilisation d'un serveur anoncvs pourrait &ecirc;tre :
<pre>
% <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cd /tmp</strong>
% <strong>cvs get src/sys/arch/sparc</strong>
    [copie les fichiers depuis le serveur sur la machine]
% <strong>cvs log src/sys/arch/sparc/sparc/locore.s</strong>
    [montre le journal des commit pour le fichier donn&eacute;]
% <strong>cvs diff -bc -r1.1 -r1.5 src/sys/arch/sparc/sparc/locore.s</strong>
    [Montre les changements entre les versions 1.1 et 1.5]
</pre>

<p>
<a name="pserver">Pour pouvoir utiliser cvs avec ``pserver'' (une
connexion TCP directe plut&ocirc;t que l'utilisation de ssh ou rsh) vous devez
vous connecter :</a>

<pre>
% <strong>setenv CVSROOT :pserver:anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cvs login</strong>
(Connexion &agrave; anoncvs@anoncvs1.ca.openbsd.org)
CVS password: <strong>anoncvs</strong>
    [Cela &eacute;crit une ligne dans ~/.cvspass (le nom de fichier est &eacute;cras&eacute; par CVS_PASSFILE).]
    [Une ligne d'exemple de mon ~/.cvspass apr&egrave;s avoir tap&eacute; 'blah'           ]
    [password is:                                                            ]
    [:pserver:anoncvs@anoncvs5.usa.openbsd.org:/cvs Au'yc                    ]
    [...apr&egrave;s s'&ecirc;tre connect&eacute; une fois, le CVSROOT ci-dessus fonctionnera    ]
% <strong>cvs get ksrc-i386 ksrc-common</strong>
    [Vous permet de ne r&eacute;cup&eacute;rer QUE ce qui est n&eacute;cessaire pour cr&eacute;er un noyau i386 ]
</pre>

<p>
Voici comment quelqu'un qui utilise anoncvs met &agrave; jour son
arborescence des sources : 
<ul><li>Tout d'abord il faut commencer par r&eacute;cup&eacute;rer une arborescence
initiale : 

<p> (Si vous suivez <i>current</i>):
<pre>
        # <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
        # <strong>cd /usr</strong>
        # <strong>cvs -q get -P src</strong>
</pre>

    <p> (Si vous suivez la branche des correctifs pour 3.4) : 
    <pre>
        # <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
        # <strong>cd /usr</strong>
        # <strong>cvs -q get -rOPENBSD_3_4 -P src</strong>
</pre>


<li> Ensuite, pour mettre &agrave; jour cette arborescence :
<p> (Si vous suivez <i>current</i>):
<pre>
        # <strong>cd /usr/src</strong>
        # <strong>cvs -q up -Pd</strong>
</pre>

    <p> (Si vous suivez la branche des correctifs pour 3.4) : 
    <pre>
        # <strong>cd /usr/src</strong>
        # <strong>cvs -q up -rOPENBSD_3_4 -Pd</strong>
</pre>

À chaque fois que vous lancerez ceci, cela synchronisera votre
arborescence /usr/src. Cela ne d&eacute;truira aucun de vos changements
locaux, mais tentera d'y int&eacute;grer les changements. Si vous utilisez
les r&eacute;pertoires obj (pas les liens symboliques obj), vous pouvez
passer l'option "-I obj" sur la ligne de commande, qui permettra
d'&eacute;viter que cvs n'&eacute;mette un avertissement au sujet de tous les
r&eacute;pertoires obj qu'il va rencontrer et qui ne se situent pas sur le
serveur.

<p>
<li> REMARQUE : si vous mettez &agrave; jour vos sources depuis un serveur
autre que celui &agrave; partir duquel vous avez r&eacute;cup&eacute;r&eacute; les sources (ou depuis le CD),
vous <strong>devez</strong> ajouter l'option <em>-d $CVSROOT</em> &agrave; la commande
cvs.  
<pre>
        # <strong>cd /usr/src</strong>
        # <strong>cvs -d $CVSROOT -q up -Pd</strong>
</pre>


</ul>

<p>
Pour <a name="ports">utiliser</a> les <a href=ports.html>ports</a>,
il faut proc&eacute;der de la m&ecirc;me fa&ccedil;on qu'avec src : 
<ul>
  <li> 
    <p> (Si vous suivez <i>current</i>) : 
    <pre>
        # <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
        # <strong>cd /usr</strong>
        # <strong>cvs -q get -P ports</strong>
</pre>
  
  <p> (Si vous suivez la branche des correctifs pour 3.4) : 
  <pre>
        # <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
        # <strong>cd /usr</strong>
        # <strong>cvs -q get -rOPENBSD_3_4 -P ports</strong>
</pre>
  <li> Ensuite, pour mettre &agrave; jour l'arborescence : 
    <p> (Si vous suivez <i>current</i>) : 
    <pre>
        # <strong>cd /usr</strong>
        # <strong>cvs -q up -Pd ports</strong>
</pre>
    <p> (Si vous suivez la branche des correctifs pour 3.4) : 
    <pre>
        # <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
        # <strong>cvs -q up -rOPENBSD_3_4 -P ports</strong>
</pre>
  </ul>

Dans l'exemple pr&eacute;c&eacute;dent, <i>-q</i> est optionnel, et n'est l&agrave; que
pour minimiser la sortie cvs. Pour ceux qui aime avoir des &eacute;crans bien
pleins, il peut &ecirc;tre enlev&eacute;.

<p>
ou pour faire un diff sur un module corrig&eacute; en local (ici <i>cd.c</i>)
&agrave; inclure avec un rapport de bug : 
<pre>
        # <strong>cd /usr</strong>
        # <strong>cvs diff -u src/sys/scsi/cd.c &gt; /tmp/patch</strong>
</pre>
</p>

<p>
La page du manuel <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">CVS(1)</a>
(inclue avec les sources de CVS) a beaucoup plus d'informations sur la
mani&egrave;re d'utiliser CVS.

<h4>Arborescence des sources X11</h4>

<p> Les miroirs anoncvs comportent aussi l'arborescence des sources X11 (XFree86). 
  Vous pouvez adapter les recettes ci-dessus pour mettre &agrave; jour votre arborescence 
  des source XFree86 depuis le troisi&egrave;me CD. Vous pouvez copier ou t&eacute;l&eacute;charger 
  l'arbre des sources XFree86 3 avec le module cvs X11, cependant le module contenant 
  les sources XFree86 4 est XF4. Il y a deux fa&ccedil;ons de r&eacute;cup&eacute;rer les sources XF4 
  dans <i>/usr/XF4</i> : 
<ul>
<li>Copier l'arborescence depuis le CD (en supposant que le deuxi&egrave;me CD
est mont&eacute; sur /mnt) :
<pre>
        # <strong>cd /mnt; cp -Rp XF4 /usr</strong>
</pre>
<li>utiliser un union mount avec le CD mont&eacute; dans un r&eacute;pertoire en &eacute;criture.
<pre>
        # <strong>mount -t union -o -b /mnt/XF4 /usr/XF4</strong>
</pre>
</ul>

Apr&egrave;s &ccedil;a, <i>/usr/X11</i> sera pr&egrave;s &agrave; &ecirc;tre utilis&eacute; par cvs. Vous
pouvez par exemple le mettre &agrave; jour avec les sources -current (en
supposant que vous avez d&eacute;j&agrave; pr&eacute;d&eacute;finit la variable d'environnement
<var>CVSROOT</var>) :

<pre>
        # <strong>cd /usr/XF4</strong>
        # <strong>cvs -q update -Pd</strong>
</pre>

<p>
<strong>Avertissement :</strong> Quand vous utilisez cvs il vous
faudra prendre garde que votre r&eacute;pertoire courant est soit la racine
de l'arborescence des ports ou une autre place telle que
/tmp. Quelques commandes telles que "get" peuvent cr&eacute;er une
sous-arborescence arbitrairement dans le r&eacute;pertoire courant, et chaque
mise &agrave; jour successive ira mettre &agrave; jour cette sous-arborescence.

<p>
Le serveur anoncvs donne une chance aux apprentis d&eacute;veloppeurs
d'apprendre les op&eacute;rations cvs et de devenir ainsi impliqu&eacute; dans le
d&eacute;veloppement des sources avant d'obtenir un acc&egrave;s "commit". De plus,
les gens fournissant des correctifs peuvent les cr&eacute;er avec des diffs
relatifs &agrave; l'arborescence CVS, ce qui facilitera l'int&eacute;gration.

<h3><a name="WHICH"><font color="#0000e0">Utiliser rsh(1) ou ssh(1)?</font></a></h3>

<p>
Par d&eacute;faut, le client CVS utilise ssh ("secure shell":
<a href="http://www.openssh.com/">OpenSSH</a>) pour dialoguer avec le serveur
CVS.

<p>
De nombreux sites CVS ne supportent plus rsh pour des raisons de s&eacute;curit&eacute;. Des
probl&egrave;mes locaux tels que des pare-feux ou des &eacute;mulateurs de protocole
imparfaits tels que slirp peuvent aussi r&eacute;duire l'utilisation de rsh. Cependant,
si vous souhaitez utiliser rsh, vous devez r&eacute;gler la variable d'environnement 
<var>CVS_RSH</var> pour qu'elle pointe sur rsh (typiquement,
<strong>/usr/bin/rsh</strong>).

<p>
Si la politique locale emp&ecirc;che les connexions sortantes vers le port par d&eacute;faut
de ssh (22), le port 2022 peut &ecirc;tre utilis&eacute; &agrave; la place. Notez cependant que tous
les serveurs anoncvs n'acceptent pas les connexions sur ce port. De plus, la
plupart des serveurs anoncvs n'acceptent plus le chiffrement
<strong>nul</strong>, puisqu'il est d&eacute;sactiv&eacute; dans les versions r&eacute;centes de ssh
pour raison de s&eacute;curit&eacute;. De plus, ne soyez pas tent&eacute;s d'activer la compression :
CVS compresse d&eacute;j&agrave;.

<p>
Vous pouvez sp&eacute;cifier quelque chose comme ce qui suit dans le fichier de
configuration
<strong>$HOME/.ssh/config</strong> pour &eacute;viter les &eacute;cueils et restrictions 
mentionn&eacute;es ci-dessus : 
<pre>
        Host anoncvs.ca.openbsd.org
            Compression no
            Port 2022
</pre>

<p>
CVS est un peu "bavard" au d&eacute;marrage, pour &eacute;viter ceci, il peut &ecirc;tre
utile de d&eacute;finir ceci :

<pre>
<strong>setenv CVS_CLIENT_PORT -1</strong>
</pre>

<p>
<h3><a name="SUP"><font color="#0000e0">Faire un miroir du CVS avec sup(1)</font></a></h3>

<p>
Les utilisateurs qui veulent faire un miroir de l'arborescence CVS
d'OpenBSD peuvent le faire depuis
<em>anoncvs.usa.openbsd.org</em> ou <em>anoncvs1.usa.openbsd.org</em> 
(ce sont des machines diff&eacute;rentes). Remarquez qu'il s'agit de
l'arborescence cvs, et <b>pas</b> de l'arborescence des sources. C'est
utile uniquement si vous voulez faire des op&eacute;rations cvs de fa&ccedil;on
rapide (diff, annotation, etc...) ou si vous avez de multiples
arborescences de sources et que vous voulez ne transf&eacute;rer les donn&eacute;es
qu'une seule fois (vous pouvez ensuite r&eacute;cup&eacute;rer une arborescence des
sources &agrave; partir de votre miroir cvs local).
<p>
Un exemple de fichier sup pourrait &ecirc;tre :
<pre>
        cvs host=anoncvs.usa.openbsd.org hostbase=/ base=/home delete
</pre>
<p>
qui va cr&eacute;er un miroir de l'arborescence des ports dans /home/cvs
avec les fichiers de donn&eacute;es sup dans /home/cvs. L'arborescence du CVS
OpenBSD fait actuellement une taille de 1.7 GB.

<h3><a name="MIRROR"><font color="#0000e0">Mettre en place un miroir anoncvs </font></a></h3>

<p> Si vous souhaitez &ecirc;tre un site miroir anoncvs, contacter le <a
href="mailto:sup@openbsd.org">mainteneur</a> anoncvs. Les miroirs Anoncvs n&eacute;cessite 
  1,7 Go de disque et peuvent utiliser jusqu'&agrave; 32 Mo de swap par utilisateur anoncvs 
  (en supposant que l'utilisateur fasse une op&eacute;ration d'envergure, de plus petites 
  op&eacute;rations n&eacute;cessiteront moins de ressources, mais dans tous les cas, anoncvs 
  utilise beaucoup plus de ressources que sup ou ftp). De telles machines anoncvs 
  se doivent d'avoir une excellente connexion r&eacute;seau pour la zone qu'elles ont 
  l'intention de servir. Un <a href="../anoncvs.shar">document</a> qui d&eacute;crit 
  comment mettre en place les serveurs anoncvs est disponible. 
<h3><font color=#0000e0>Remarques finales </font></h3> Apr&egrave;s avoir
mis &agrave; jour l'arborescence des sources, vous pouvez lire les
commentaire en haut de <KBD>/usr/src/Makefile</KBD> avant d'essayer de
compiler. De plus vous devez construire un nouveau noyau
<strong>avant</strong> de faire un <KBD>make build</KBD> si
possible. Dans certains cas, il est indispensable de reconstruire et
installer l'utilitaire <KBD>config</KBD> avant de reconstruire le
noyau. Si <KBD>config GENERIC</KBD> ne fonctionne pas, c'en est
probablement la cause.
<p>
Il est important de noter que mettre &agrave; jour d'une version d'OpenBSD
vers une arborescence courante (current) est difficile &agrave; cause des
d&eacute;pendances qui ne sont pas toujours &eacute;videntes. Il est donc conseill&eacute;
d'installer tout d'abord le dernier snapshot avant de tenter de
recompiler les sources.

<hr>
<a href="index.html"><img height=24 width=24 src="../back.gif" border=0 alt=OpenBSD></a> 
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: anoncvs.html,v 1.191 ]<br>
$Translation: anoncvs.html,v 1.48 2003/12/11 21:28:22 saad Exp $<br>
$OpenBSD: anoncvs.html,v 1.37 2003/12/13 13:38:33 jufi Exp $
</small>

</body>
</html>
