<!doctype html>
<html lang=en id=plus>
<meta charset=utf-8>
<title>OpenBSD -current Changelog</title>
<meta name="description" content="OpenBSD -current changes">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/plus.html">
<style>
strong {
	color: var(--red);
	font-weight: normal;
}

h3 {
	color: var(--blue);
}
</style>

<h2 id=OpenBSD>
<a href="index.html">
<i>Open</i><b>BSD</b></a>
-current Changelog
</h2>
<hr>

<p>
This selection is intended to include all important
and all user-visible changes.
For a complete record of all changes, please see the "source-changes"
mailing list, called "OpenBSD CVS"
in the <a href="https://marc.info/?l=openbsd-cvs">archives</a>,
or use <a href="anoncvs.html#CVS">CVS</a>.

<p>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>,
<a href="plus52.html">5.2</a>,
<a href="plus53.html">5.3</a>,
<br>
<a href="plus54.html">5.4</a>,
<a href="plus55.html">5.5</a>,
<a href="plus56.html">5.6</a>,
<a href="plus57.html">5.7</a>,
<a href="plus58.html">5.8</a>,
<a href="plus59.html">5.9</a>,
<a href="plus60.html">6.0</a>,
<a href="plus61.html">6.1</a>,
<a href="plus62.html">6.2</a>,
<a href="plus63.html">6.3</a>,
<a href="plus64.html">6.4</a>,
<a href="plus65.html">6.5</a>,
<a href="plus66.html">6.6</a>,
<a href="plus67.html">6.7</a>,
<a href="plus68.html">6.8</a>,
<a href="plus69.html">6.9</a>,
<a href="plus70.html">7.0</a>,
<br>
<a href="plus71.html">7.1</a>,
<a href="plus72.html">7.2</a>,
<a href="plus73.html">7.3</a>,
<a href="plus74.html">7.4</a>,
<a href="plus75.html">7.5</a>,
<a href="plus76.html">7.6</a>.
<a href="plus77.html">7.7</a>,
<br>

<p>
<h3>Changes made between OpenBSD 7.6 and -current</h3>
<p>

<ul>

<!-- 2024/10/31 -->
<!-- 2024/10/30 -->
<li>Implemented the AMD SEV <a href="https://man.openbsd.org/psp.4">psp(4)</a> download firmware command to load new firmware onto the chip and made the AMD SEV automatically load psp(4) firmware during <a href="https://man.openbsd.org/vmd.8">vmd(8)</a> startup.
<li>Made <a href="https://man.openbsd.org/installboot.8">installboot(8)</a> install a copy of the UEFI bootloader in /efi/openbsd on the EFI system partition, allowing creation of boot options for the firmware boot manager other OSes will leave alone.
<li>Made <a href="https://man.openbsd.org/tcpdump.8">tcpdump(8)</a> print pppoe tags as hex dumps.
<li>Prevented <a href="https://man.openbsd.org/newsyslog.8">newsyslog(8)</a> running through time checks when an entry is definitely oversized.
<!-- 2024/10/29 -->
<li>Moved hfsc to keep time using nanoseconds.
<li>Included cdXX.iso in MDEXT on arm64.
<li>Fixed xkb buffer overflow.
<!-- 2024/10/28 -->
<li>Added support for client certificates to <a href="https://man.openbsd.org/relayd.8">relayd(8)</a>.
<li>Set AP power state, fixing the SMC initialization on the M1 MacBook with the latest system firmware.
<li>Unlocked KERN_ALLOWKMEM.
<!-- 2024/10/27 -->
<!-- 2024/10/26 -->
<!-- 2024/10/25 -->
<li>Unlocked timeout_sysctl().
<li>Allowed control characters prefixed with C-v to be entered at the tmux.1 command prompt.
<!-- 2024/10/24 -->
<li>Added support for performing a sysupgrade.8 from a path.
<li>Promoted mlkem768x25519-sha256 to be the default key exchange.
<li>Mapped ucom unit number to cuaU number using the same scheme MAKEDEV uses, fixing problems with ucom units > 10.
<li>Stopped amd64 leak of kernel stack guard pages.
<!-- 2024/10/23 -->
<li>Made <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a> drop all keys when it receives SIGUSR1.
<li>Reduced kernel lock contention when tearing down file-backed regions.
<!-- 2024/10/22 -->
<!-- 2024/10/21 -->
<li>Corrected reporting of print screen key in raw mode.
<!-- 2024/10/20 -->
<!-- 2024/10/19 -->
<li>Changed sdhc bus power behavior to no longer perform a power-off voltage switch request when the card is already operating at the requested voltage.
<!-- 2024/10/18 -->
<li>Started enforcing that elliptic curve parameters correspond to a built-in curve.
<li>Moved to send only a single reset during attach for <a href="https://man.openbsd.org/ihidev.4">ihidev(4)</a> devices, preventing issues with some devices like the built-in keyboard on the Thinkpad T14s Gen 6.
<!-- 2024/10/17 -->
<li>Reworked cert signature security level so it handles RSA-PSS and EdDSA certificates correctly and the handshake with such can progress a bit further. Of note, we check that the certs are actually suitable for use in TLS per RFC 8446 contrary to what OpenSSL does.
<li>Added <a href="https://man.openbsd.org/pinctrl.4">pinctrl(4)</a> support.
<li>Required control-escape character sequences passed to <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> via the '-e ^x' commandline to be exactly two characters long to avoid a possible OOB read.
<li>Altered <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> _ssh_order_hostkeyalgs() to consider ECDSA curve type when arranging the hostkey algorithms. Code is unused in OpenSSH but others are using it.
<li>Allowed "-" as output file for <a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a> module screening.
<li>Updated libdrm to 2.4.123
<!-- 2024/10/16 -->
<li>Moved the a.out specific defines and macros, but the MID_xxx values, from
<sys/exec.h> to <a.out.h>.
<!-- 2024/10/15 -->
<li>Moved to indicating that a process has stopped by setting PS_STOPPED flag.
<!-- 2024/10/14 -->
<!-- 2024/10/13 -->
<li>Stopped using the <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> ObscureKeystrokeTiming mitigations if there has been traffic on a X11 forwarding channel recently. Should fix performance regressions with X11 Forwarding.
<li>Split the user authentication code from the sshd-session binary into a separate sshd-auth binary. This will be executed by sshd-session to complete the user authentication phase of the protocol only.  Splitting this code into a separate binary ensures that the crucial pre-authentication attack surface has an entirely disjoint address space from the code used for the rest of the connection.
<li>Added sshd-auth to the binaries that relink at boot.
<!-- 2024/10/12 -->
<li>Made <a href="https://man.openbsd.org/fw_update.8">fw_update(8)</a> -a mean all when downloading or installing, not just deleting.
<!-- 2024/10/11 -->
<li>Introduced a new build class to be used by the build user in <a href="https://man.openbsd.org/login.conf.5">login.conf(5)</a>.
<li>Added firmware keys to the signify key bundles. <a href="https://man.openbsd.org/sysupgrade.8">sysupgrade(8)</a> will now extract the firmware key also, allowing fw_update fetch the most up-to-date firmware before upgrading.
<!-- 2024/10/10 -->
<li>Allowed use of MSI with the QEMU default pc-i440fx machine.
<li>Neutered the tun/tap ioctls that try and modify interface flags.
<li>Made <a href="https://man.openbsd.org/acme-client.1">acme-client(1)</a> always print account URI on first creation of an account key.
<li>Changed <a href="https://man.openbsd.org/ps.1">ps(1)</a> print the session id (PID of the session leader) instead of a pointer.
<li>Added a <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> sixel_support format variable which is 1 if SIXEL is supported (always 0 on OpenBSD).
<!-- 2024/10/09 -->
<li>Made it possible to configure tcp md5 and ipsec on rtr in <a href="https://man.openbsd.org/bgpd.8">bgpd(8)</a>.
<!-- 2024/10/08 -->
<li>Added the ablity for <a href="https://man.openbsd.org/bus_dmamem_alloc.9">bus_dmamem_alloc(9)</a> to recognize the BUS_DMA_64BIT flag and allocate memory for DMA without any 4GB restrictions on amd64.
<!-- 2024/10/07 -->
<li>Made <a href="https://man.openbsd.org/acme-client.1">acme-client(1)</a> -v show the account URI from the Location header sent by the server in response to the newAccount API call.
<li>Updated unbound to 1.21.1.
<li>Provided a mechanism for getting required keys to <a href="https://man.openbsd.org/sysupgrade.8">sysupgrade(8)</a> older machines, providing a new set of keybundles signed by older keys to allow sysupgrade to securely and automatically download the required key.
<li>Added <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> prompt-cursor-colour and prompt-cursor-style to set the style of the cursor in the command prompt and remove the emulated cursor.
<li>Added <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> initial-repeat-time option to allow the first repeat time to be increased and later reduced.
<li>Added support for AX88772D to <a href="https://man.openbsd.org/axen.4">axen(4)</a>.
<!-- 2024/10/06 -->
<li>Fixed the <a href="https://man.openbsd.org/bnxt.4">bnxt(4)</a> rx refill timeout to only refill rings that are currently empty, preventing possible corruption and crashes.
<li>Turned off finite field (a.k.a modp) Diffie-Hellman key exchange in <a href="https://man.openbsd.org/sshd.8">sshd(8)</a> by default.
<!-- 2024/10/05 -->
<li>Made scaling available for normal wsmouse.4 mice, not just touchpads.
<!-- 2024/10/04 -->
<li>Allowed boot loader to run as AMD SEV guest on QEMU with EFI.
<li>Allowed kernel boot on QEMU with AMD SEV.
<li>Added copy-mode-position-format to configure the <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> position indicator.
<li>Added -y flag to disable <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> confirmation prompts in modes.
<li>Reworked <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> copy mode commands ("send-keys -X") to parse the arguments so that flags may be detected propertly rather than just looking for strings ("-O" and so on). Also added -C and -P flags to the copy commands. -C prevents the commands from sending the text to the clipboard and -P prevents them from adding the text as a paste buffer.
<li>Increased <a href="https://man.openbsd.org/psp.4">psp(4)</a> timeouts, allowing the EPYC 9124 time to attach.
<li>Added printing of number of queues and interrupt and ethernet address details to <a href="https://man.openbsd.org/mcx.4">mcx(4)</a>.
<!-- 2024/10/03 -->
<li>Increased rx mbuf size with lro in <a href="https://man.openbsd.org/vio.4">vio(4)</a>, helping tcp splice performance.
<!-- 2024/10/02 -->
<li>Improved the heuristic for detecting i2c devices (making type-A ports on the vivobook work in acpi mode).
<li>Added MSYSTEM to <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> default update-environment.
<li>Improved responsiveness in OOM situations and made free target checks coherent.
<!-- 2024/10/01 -->
<li>Adjusted the ptrace interface to properly support single-threaded continue.
<li>Added a way to make the preview larger in <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> tree mode.
<li>Fixed <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> problems with pasted text being interpreted as extended keys.
<!-- 2024/09/30 -->
<li>Made <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> only use default-shell for popups, returning to /bin/sh for run-shell, if-shell and #().
<!-- 2024/09/29 -->
<li>Fixed grey color in <a href="https://man.openbsd.org/tmux.1">tmux(1)</a>.
<!-- 2024/09/28 -->
<!-- 2024/09/27 -->
<!-- 2024/09/26 -->
<li>Added an ipi for executing INVEPT to flush EPT on remote cpus, a first step toward allowing guest memory not to be wired by UVM.
<!-- 2024/09/25 -->
<li>Corrected an indexing error that could leave stale data in the <a href="https://man.openbsd.org/wsconsctl.8">wsconsctl(8)</a>.
<!-- 2024/09/24 -->
<li>Added <a href="https://man.openbsd.org/sysupgrade.8">sysupgrade(8)</a> -R #.# to try to use a specific release version rather than the immediate +0.1.
<li>Reintroduced support for "Match criteria=argument" to <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> for those using the unintentional syntax.
</ul>
