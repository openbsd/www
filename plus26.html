<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD 2.6 changes</title>
<link rev=made href="mailto:www@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="the main OpenBSD page">
<meta name="keywords" content="openbsd,main">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238E">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">Changes made between OpenBSD 2.5 and OpenBSD 2.6</font></h2>
<hr>

<p>
This is a partial list of the major machine independent changes
(ie. these are the changes people ask about most often).  Port
specific changes have also been made, and are sometimes mentioned
in the pages for the specific <a href=plat.html>ports</a> if you
are interested in further port-specific details.  Many ports
have had architecture-specific enhancements relative to NetBSD,
but when they do not they certainly have plenty of platform-independent
changes, starting with those listed below..

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus.html">current</a>.
<br>
</h3>

<hr>

<p>
<h3><font color="#0000e0">OpenBSD 2.6 released (December 1, 1999).</font></h3><p>
<ul>
<li>2.6 source tree frozen.
<li>Merge in some critical ATAPI fixes.
<li>Force FDSCRIPTS.
<li><font color="#e00000"><strong>RELIABILITY ISSUE: Fix a bug in the brooktree driver which permitted any user to crash some OpenBSD/i386 machines. <a href="errata25.html#brooktree">A patch is available</a></strong></font>.
<li>Separate help(1) command, and a separate help(1) man page.
<li>Move wrapper handling to the child process, in sshd(8).
<li>Various fixes for the bignum and RSA handling code in sshd(8).
<li>ssh 1.5 protocol.
<li>isakmpd policy man page.
<li>Put gcc-lib in base, because the mac68k installer built-in tar command is stupid, and does not do a mkdir -p type operation internally.
<li>In the install script, if the user skips network config and later chooses an option which requires network config, ask for network config to be done then.
<li>Make i386 pcvt driver also support the traditional PC display, with 16 colours.
<li>In the install script, support separate international and USA versions of the ssl package.
<li>Fix another unmount/mfs race condition.
<li>If no sshd_config file, have sshd(8) abort.
<li>Fix for the i386 isadmaattach panic.
<li>PermitRootLogin in sshd(8).
<li>Document how we are dealing with SSL, crypto, and RSA issues in the ssl(8) man page even better.
<li>Stir ARC4 after key use in sshd(4).
<li>Fix mii tick tock stuff in the fxp(4) driver.
<li>Fix connect() race in ssh agent handling.
<li>Numerous fixes and improvements to the install scripts.
<li>Avoid mbuf corruption in recvmsg(2).
<li>Only attempt to read disklabels from CDs with a data track.
<li>Fix a bug in newsyslog(8), which caused it to rotate empty log files near first system boot. 
<li>Do not call VOP_SETATTR on a pipe.
<li>SilentDeny option for sshd(8).
<li>Avoid an infinite loop in ping(8).
<li>Add driver for i82553 phy, used by some fxp(4) cards. 
<li>Allow root logins in xmd, but provide a nice comment so people can disable it easily.
<li>Document -e support in config(8).
<li>Use setsid(2) on all connections to sshd(8), since our setlogin(2) is secure and needs that.
<li>sshd(8) Allow/Deny Users/Groups features.
<li>sshd(8) UseLogin feature.
<li>Use a separate perl-based vi.recover script because sh is a terrible language. 
<li>Check permissions of directories leading up to ssh authorized_keys file.
<li>For AF_UNIX sockets, do not follow symbolic links at creation time, since there is nothing equivalent to O_EXCL.
<li>Permit build of system with NFSSERVER but without NFSCLIENT.
<li>More keynote man pages.
<li>pmax support is back in the tree, various tweaks everywhere.
<li>Make eap(4) print it's interrupt at attach time.
<li>As well as numerous repairs, now also support "pkg_add *".
<li>Many many man page improvements.
<li>Support newer model of the fxp(4) card.
<li>Further improvements to ATA probing.
<li>Support skey in sshd.
<li>Use pkg_add -I for the ssl package install, in the install scripts.
<li>Repair fd(4) motor off code.
<li>Handle most xl(4) devices that lack a PHY.
<li>On machines lacking shared libraries, install the ssh utilities with mode 0, so that /etc/rc will run the ones in /usr/local/bin instead.
<li>Cluster fixes to ipsec code.
<li>implement client NumberOfPasswordPrompts in ssh(1).
<li>Support various effect modes on the ym(4) sound cards.
<li>Y2K related fixes for some buggy i386 clock chips.
<li>Fix various atapi sense detection bugs.
<li>Big endian fixes to tcpdump(8).
<li>Move sshd auth sockets to a private directory.
<li>Various make performance enhancements.
<li>Ensonic ES1371 support in the eap(4) driver.
<li>Fix a sshd xauth race.
<li>Lots of manpage improvements.
<li>ssh crc32 compensation attach detection fix from core-sdi.
<li>PCI Promise IDE controller support, not perfect yet.
<li>Nuke minfd stuff in ssh.
<li>config(8) gets -e and -u support.
<li>Put sbin and /usr/sbin in the default path.
<li>Fix garbled dmesg output on the console in the mvme68k port.
<li>DNS spoof checking code in the ssh.
<li>Double default shared memory for i386.
<li>Various quality of software repairs to sshd, like errno trashing in signal handlers, and other stupid things like that.
<li>Fix a missing memory initialization bug in the i386 bootblocks.
<li>Avoid use of shutdown(2) in sshd.
<li>For fts(3) and find(1), fix various off-by-one errors and some issues with -execdir for multiple relative directories.
<li>libwrap support in sshd.
<li>Nice setproctitle(3) changes to sshd, so that you can tell which process is which login.
<li>Add -q support to whois(1).
<li>Remove local blowfish code in ssh.
<li>Improve the scp(1) progress meter.
<li>Various games fixes.
<li>mod_ssl 2.4.5
<li>new isakmpd code.
<li>Support DSO's in httpd, and build them into the normal tree.
<li>sm(4) driver now supports SMC 8020 pcmcia cards.
<li>sk(4) driver for SysKonnect 984x gigabit ethernet adapters.
<li>add support for external storage to the mbuf layer, managed by external managers.
<li>libkeynote 2.0
<li>Support more ess(4) sound card models.
<li>Numerous other ssh changes...
<li>in ssh, use libc md5 code.
<li>remove rc4 code from ssh
<li>Remove ssh "-c none" code.
<li>Improve ftpd's documentation.
<li>Improve tcpdump's handling of ISAKMP packages.
<li>Make bootblock memory probing work the same as 2.5. 
<li>More man page repairs and improvements.  A day doesn't go by...
<li>Some fixes to the games.
<li>Many more ssh improvements.
<li>Critical ipsec reliability fix for the i386.
<li>Run ldconfig before any ssh stuff, because the ssl package now extracts into /usr/local/lib.
<li>Apache 1.3.9 + Mod_ssl 2.4.2
<li>ssleay(1) goes away, replaced by openssl(1).
<li>OpenSSL 0.9.4
<li>Fix tun(4) byte counters.
<li>To ssh, add X11DisplayOffset, user@host, kerberos4 support, GatewayPorts, ssh -g, etc.
<li>Fix rc scripts to start ssh nicely upon first and subsequent boots.
<li>Rip all licensed and patented code out of ssh.
<li>Support MVME188 and MVME197 models in the mvme88k port.
<li>Fixes to the pci wb(4) driver.
<li>pkg_add signing capability is being worked on.
<li>Put uuencoded install bits for amiga into the tree, so that they can end up in the distribution.
<li>Fix hp300 ramdisk.
<li>32-bit ie(4) driver for the mvme68k and mvme88k ports.
<li>More changes to pcvt scrollback code.
<li>More fixes to pci ax(4).
<li>In inetd.conf, disable telnet/ftp/login by default.
<li>Simplify ssh configuration.
<li>New mandoc pages for ssh(1) and friends..
<li>Add ssh to the source tree (based on an old version, but all the bugs are fixed, and we are playing RSA license games with libssl/libcrypto and adding all the modern ssh features).
<li>Add :L and :U modifiers to make(1).
<li>stdbool.h from C9X.
<li>Install script changes to support libssl package install.  Not nice, but it will be improved.
<li>Move towards 2.6-beta.
<li>Fix icmp byte-order changes so that ip_forward() aliased packet doesn't bite us.
<li>Many man page changes.
<li>Some ipsec changes to tcpdump(1).
<li>Add atactl(8).
<li>Add opendisk(3) API to libutil.
<li>Crank some i386 limits, now that kvm is larger.
<li>Repair some URL handlings in pkg_install(8).
<li>Significant changes to the install scripts.
<li>Change makewhatis to accept arguments.
<li>AC-97 CODEC support.
<li>Fix device existence check in hp300 tape support.
<li>Grow i386 kvm to 512MB.
<li>Merge to tcpdump 3.4.
<li>Use writev(3) in libc functions that talk to stderr.
<li>Add raw support in tcpdump.
<li>In xl(4), Support 3c980c.
<li>Fix a FIFO handling bug in xe(4) driver.
<li>Fix a caching bug in getpwent(3) seen with setuid binaries and YP.
<li>i386 support for "isa0 at pcib?".
<li>Upon bootup, permit i386 to modify the rootdev after looking at BIOS disk signatures.
<li>Change rc.conf so that sendmail is started with -q30m by default (not -bd).
<li>Various speed improvements by using round_page() instead of roundup(foo, NBPG).
<li>cvs 1.10.7
<li>Import uunencoded binary amiga things which need to be in a release.
<li>64bit repair in ls(1)
<li>ELF64 support.
<li>Some man page improvements.
<li>Detach code in the icsphy.
<li>Support tadpole sparc microcontroller.
<li>Ensure that adduser(8) sends the password to encrypt(1) via stdin, avoid ps(1) snooping.
<li>Improved m4(1) extensively.
<li>Improved fsck_msdos(8).
<li>On i386, expand aperture because XFree86 3.9.15 want to look at the card BIOS.
<li>p9100 console support for Tadpole sparc.
<li>Scroll-back support for the i386 pcvt driver.
<li>Use stathz to calculate CPU time, fixing CPU calculation when stathz is different from hz and profhz (affected i386).
<li>Preliminary ATAPI tape drive support.
<li>Support "short" mouse protocol for the Tadpole sparc.
<li>More queue.h macros.
<li>In /etc/rc during vi recovery, ensure vi recovery files are normal.
<li>Change /etc/rc.shutdown handling, so that /etc/rc.shutdown is completely admin-editable and does not run if in single-user mode.<br> <strong>NOTE: If you follow current, this means that people need to install a new /etc/rc file.</strong>
<li>On sparc, change pagetable pointers using atomic instructions.
<li>Change pmap_enter() API.
<li>Start doing an atoi(3) audit of the tree; most cases should use strtol() and strtoul().
<li>Cleanup handling of signed and unsigned numbers in sysctl(8).
<li>Many man page improvements.
<li>Print i386 interrupts nicer in vmstat -i.
<li>In bridge, do not flush static address when configuring down.
<li>Permit bridge control before it is configured up.
<li>Cleanup parsing of /etc/hostname.* files, and support new /etc/bridgename.* files.
<li>In tcp's input path, for SACK, update the window information correctly.
<li>If a patch contains zero patches, have patch(1) error out. 
<li>Start amd(8) in /etc/amd.
<li>Fix buf overflow in amd(8).
<li>Support AAA-131CF card in ahc(4) driver.
<li>Check SACK hole validity better, and do sequence space arithmetic better.
<li><font color="#e00000"><strong>SECURITY ISSUE: In cron(8), make sure argv[] is NULL terminated in the fake popen() and run sendmail as the user, not as root. <a href="errata25.html#cron">A patch is available</a></strong></font>.
<li>Some fixes to newsyslog(8).
<li>Disable SACK for now; some issues remain.
<li>Buffer overflow fixes in from(1).
<li>Make res_random and ip_random attacks harder by adding a little xor.
<li>Improved handling of BIOS memory maps, which should permit apm to work a bit better on some machines.
<li>XFree86 3.3.5
<li>Allow userland to figure out whether a scsi device is atapi or not; used by some things like tosha.
<li>Fix fgets(3) bug in paste(1).
<li>gcc 2.95.1
<li>ncurses-5.0-990821
<li>Disable -fstrict-aliasing by default: It causes gcc to generate very incorrect code when compiling code which isn't perfectly ANSI-conforming.
<li>Add MOUSEIOCSCOOKED and MOUSEIOCSRAW ioctl() calls to the lms and mms drivers, so that X can figure out what driver is running.
<li>Extend support in kbd(1) for the sparc.
<li>Change default group ownership for tty and cua devices, so that locking works better in tip(1) and cu(1).
<li>Crank kerberos default expiration date.
<li>Teach i386 architecture code about Rise cpu models.
<li>Build shared library called libperl.
<li>Use new <strong>arch -s</strong> option for building perl. 
<li>Fix a few possible sparc pmap races.
<li>Make ld.so work on mips again.
<li>Merge machine(1) and arch(1) commands.
<li>Fix a sun4m trap handling bug.
<li>Get ready for emulating linux clone(2).
<li>Make various forms of rup(1) produce the same formatted output.
<li>Many man pages updated.
<li>Various tiny fixes.
<li>In fortune(6), a fix for a use after free().
<li>hp300 CD booting.
<li>Fix buglet in fts(3) handling of FTS_NOCHDIR.
<li>Various dmesg and space-saving improvements to the pcmcia drivers.
<li>Allied Telesis LA-PCM pcmcia ethernet card support.
<li>ncurses-5.0-990814
<li>Various improvements to the install scripts.
<li>Correctly set the type and typename in the wd(4) driver generated label.
<li>Support AmbiCom NE2000 pcmcia ethernet.
<li>Fix the scheduler problems in the 2.5 release.
<li>Driver for ASIX88140A/88141 PCI ethernet, ax(4).
<li>In pcmcia ep(4) driver, support 3CXEM556B-INT.
<li>Remove useless if_ep shutdown hook. 
<li>Import USB code.
<li><font color="#e00000"><strong>SECURITY ISSUE: The procfs and fdescfs filesystems had an overrun in their handling of uio_offset in their readdir() routines. (These filesystems are not enabled by default.) <a href="errata25.html#miscfs">A patch is available</a></strong></font>.
<li>Repair: probe svr4 emulation before linux once again.
<li>Support -M and -N flags in uptime(1).
<li>Detect IDT WinChip models.
<li>If we fail to match an isapnp device, and it looks like it has the resources a com(4) device would have, try seeing if it in fact is.
<li>New i82365 pcmcia irq probing code that tries much harder to allocate a proper interrupt for the pcic.
<li>Add DIOCRLDINFO ioctl, used by fdisk(8) to indicate that the MBR has been re-written, and the disklabel should be re-read off disk.
<li>Support PChome-PCI LANCE (1Mbit phone wire "ethernet") using le(4).
<li>Document "Precedence: list" in vacation man page.
<li>In tar, fflush(stderr) at a critical point.
<li>Skip hostname.* files if the interface does not exist.
<li>Make mbuf panic messages unique.
<li>Repair interface walking in rarpd(8).
<li><font color="#e00000"><strong>SECURITY ISSUE: Stop profiling (see profil(2)) when we execve() a new process. <a href="errata25.html#profil">A patch is available</a></strong></font>.
<li>pcmcia device attach/dettachment code, supporting network and serial devices now.
<li>vdevgone() internal kernel API.
<li>If fread(3) returns EBADF, also set the error flag.
<li>Fix a number of uid_t, gid_t and %u changes still broken in the source tree.
<li>Split i386 ramdisks up a bit for the next release.
<li>Fix sparc interrupt handler to recognize &lt; 0 from an driver interrupt handler means "interrupt may have been for me, but I am not sure".
<li>isakmpd(8) updates.
<li>Add SADB_FLUSH logic to IPSEC PFKEYv2, and a <strong>ipsecadm flush</strong> subcommand.
<li>Update bktr driver.
<li>Shrink some device drivers; we're trying to make more fit onto the install floppy.
<li>config_defer support in the kernel.
<li>Some man page cleanups.
<li>Make IDE work again on the alpha.
<li>PCI ESS Solo-1 PCI audio card driver, see eso(4).
<li>Make poll(2) system call a tiny bit faster for trivial calls.
<li>Enable emacs tab completion by default in ksh(1).
<li>/tmp race repairs in yacc(1).
<li>Propagate TMPDIR better into locate.updatedb(8).
<li>Kill gzip sub-processes in pax(1) instead of letting them die from SIGPIPE.
<li><font color="#e00000"><strong>SECURITY ISSUE: In /etc/rc, use mktemp(1) for motd re-writing and change the find(1) to use -execdir. <a href="errata25.html#rc">A patch is available</a></strong></font>.
<li>Support for 3c515 isapnp 100mbit ethernet card, in ef(4).
<li>Chown/chmod all of the pty devices.
<li>If /etc/fstab is 0-length or not a regular file, have setfsent(3) fail.
<li>Import of mailwrapper(8) into the tree.
<li>Games updated.
<li><font color="#e00000"><strong>SECURITY ISSUE: Do not permit regular users to chflags(2) or fchflags(2) character or block devices. <a href="errata25.html#chflags">A patch is available</a></strong></font>.
<li>New raidframe code.
<li>Make sure install scripts remove async mount conditions before attempting to installboot(8).
<li>Have <strong>route flush</strong> skip PF_KEY flows. 
<li>tcpdump 3.4 merged.
<li>Have pkg_create(1) use tar -T.
<li>Add -T option to tar(1).
<li>Fix fgetln(3) issue in pax(1).
<li><font color="#e00000"><strong>SECURITY ISSUE: Make nroff(1) call groff(1) with the -S option. <a href="errata25.html#nroff">A patch is available</a></strong></font>.
<li>If src file does not exist, have <strong>mv -i</strong> complain immediately.
<li>Bug fix to pkg_add(8).
<li>More man page cleanups.
<li>Clean dmesg output from various drivers.
<li>Make rc.shutdown work from single-user mode too.
<li>PCI Tigon I and Tigon II driver, ti(4).
<li>Disable DMA on Acer Labs PCI IDE chipset, for now.
<li>Switch to new ATA/ATAPISCSI code for most architectures.
<li>Make the i386 dkcsum stuff be quieter for empty removeable media devices.
<li>Do installs faster by mounting the filesystems async.
<li>Fix various bugs in bridging support, especially SIOCBRDGRTS.
<li>Make tun(4) return EMSGSIZE for zero-length writes.
<li>Fix a field count bug in join(1).
<li>In ipnat(8), fix -n to work with -v. 
<li>Missing newline in id(1).
<li>New drivers for the force CPU-5V (vme, sys config, D/A board driver, flash).
<li>Handle _POSIX_VDISABLE better in telnet(1).
<li>Run i386 audio at higher IPL.
<li>Take greater care in head(1). 
<li>Less dmesg verbosity from media routines.
<li>Various atapi/scsi/ide changes being worked on (LS-120 works).
<li>powerpc ieeefp library routines.
<li>insque is no longer in libiberty.
<li>egcs-990718.
<li>Bring back TCP_SIGNATURE support.
<li>1000baseXX media support.
<li>For isapnp drivers, we can do more resource checking in the xxmatch() function, and less in the xxattach() function.
<li>Add fparseln(3).
<li>new swap16_multi() macro in sys/endian.h.
<li>More man pages.
<li>wdc(4) on isapnp(4).
<li>inetd(8)-started daemons should syslog(3) on startup failure.
<li>wdc(4) on pcmcia(4).
<li>More sparc keyboards in kbd(1).
<li>rc.shutdown(8) manpage.
<li>Add fpuparseln(3) to -lutil.
<li>First cut at isapnp mpu, and ym mpu.
<li>Document and complete skey(1) support in telnet(1).
<li>Correct os_mask handling in OLF execve code.
<li>Accommodations in the vm system for backward growing stack architectures.
<li>Do not cache page tables on microsparc1 either.
<li>Many more man page fixes.
<li>Support floating accent and compose in sparc kbd driver.
<li>libpcap 0.4 changes brought in.
<li>In pcap library, fix pcap_open_offline() to handle snaplengths of -1.
<li>Fix a memory mishandling in mixerctl(1). 
<li>Further fixes for some strange wss isapnp variants.
<li>Create /var/db/host.random at install time.
<li>Complete /etc/rc.shutdown support in reboot(8) and shutdown(8).
<li>Lock ARP entries to an interface, and provide more diagnostics.
<li>Import of PCI ATA/IDE stuff from NetBSD.
<li>Retire libm_i387.
<li>Remove some shared libraries that are better used in static form. 
<li>Support non-US sparc keyboards using kbd(8) command.
<li>At execve() time, clear the P_NOCLDWAIT flag.
<li>egcs 990629
<li>Finer timing interval and standard deviation additions to ping(8).
<li>Add pci_mapreg*() interfaces.
<li>Implement more linux compat ioctl's.
<li>Undo recent tcp_input changes which caused crashes.
<li>Fix panic bug in readdisklabel() on several architectures.
<li>Improve IPSEC SA hashing function.
<li>New mii code that does async negotiation.
<li>Default ksh(1) and sh(1) to emacs editing mode.
<li>Generalize bc wrapper program.
<li>Move /etc/host.random to /var/db.
<li>In ipsec, demand keying for PF_KEY.
<li>In disklabel(8), put in check for architectures that require partition a to start at sector 0.
<li>For sparc svr4 emulation, put sun4X cpu class into SVR4_SI_PLATFORM.
<li>pdksh-5.2.14
<li>Introduce fdremove() kernel API; makes fdalloc() faster by making sure fd_freefile is correct.
<li>Some small improvements to adduser(8) and rmuser(8).
<li>pcmcia wavelan driver, wi(4).
<li>Extend pcmcia IO space.
<li>ncurses-990710
<li>Fix a SIGSEGV in vi(1).
<li>Many man page improvements.
<li>Newer version of isakmpd(8).
<li>Support PAGER properly in pkg_install(8).
<li><font color="#e00000"><strong>SECURITY ISSUE: Fix an ipsec_in_use out-of-sync condition. <a href="errata25.html#ipsec_in_use">A patch is available</a></strong></font>.
<li>Add support for TCP MD5 (RFC 2385) option called TCP_SIGNATURE used for authenticating BGP sessions.
<li>Support SIGUSR1 in init(8), used by i386 keyboard halt code, and make init(8) smart enough to run /etc/rc.shutdown
<li>On i386 pcvt console, have CTRL-ALT-DEL sent a SIGUSR1 to init.
<li>Improve ipf.conf file parsing in ipf(8).
<li>New -q option for tar(1).
<li>ncurses-5.0-990703
<li>For identd(8) token support, constrain characters in the tokens more.
<li>Have the resolver ignore SIGs in the answer section for now.
<li>Many more man page tweaks.
<li>Use getprotobynumber(3) in fstat(8)
<li>SVR4 emulation fixes to systeminfo() system call.
<li>m_apply() function permits a function to be run on an mbuf.
<li>lmc(4) T1/T3 driver.
<li>tzcode 1999d.
<li>Support nullfs in fstat(1).
<li>More man page improvements.
<li>Fix a bug in savecore(8).
<li>Add joliet support to the iso9660 filesystem.
<li>Improve libm man pages.
<li>Split out more crypto algorithm knowledge from the actual IPSEC engine.
<li>Fix bpf attachment of bridges.
<li>Fix arc4random(3) to still work correctly inside a chroot space, by adding a sysctl somewhat equivalent to /dev/arandom.
<li>Permit tcpdump(8) of address-less interfaces.
<li>ncurses version of tput, finally.
<li>More man page improvements.
<li>Improvements to many pci ethernet drivers.
<li>ncurses-5.0-990626
<li>Add net_addrcmp(3) to libc.
<li>Add getaddrinfo(3), getnameinfo(3), if_indextoname(3), if_nameindex(3), and if_nametoindex(3) to libc.
<li>In ksh(1), avoid reusing fd 0-2 even moreso than before, since ksh caches
open files.
<li>Improved SYSV shared memory support.
<li>ESS audio driver.
<li>Move sparc bootblocks in memory, because possible kernel sizes have gone up.
<li>rangelan2 wireless network pcmcia driver.
<li>Split out ipsec crypto transform handling.
<li>egcs 990608
<li>Return to UDP NFS until TCP NFS is properly fixed.
<li>Fix breakpoint continues on the sparc.
<li>Constrain strlcat(3) from walking past the specified length.
<li>Fixed overflow issue in edquota(8).
<li>Fix PIC label handling code in i386 as(1).
<li>ncurses-5.0-990614
<li>Handle multicast packets in ipf, too.
<li>pdksh 5.2.13.7
<li>Improvements to units(1).
<li>In c++ mode, define NULL to be __null for better type checking.
<li>Remove TCPCOOKIE stuff, which never worked in differentially SYN-filtering environments.
<li>In various programs, handle PAGER environment variable according XPG.
<li>Some large partition fixes in scan_ffs(8).
<li>Bump maximum number of sockets in X server to 128.
<li>Return ICMP_UNREACH_PROTOCOL for unimplemented protocols.
<li>Fix an ipsec tdb_delete() bug.
<li>Replace pipe() in libc and kernel with new version which does the data copy in kernel, making EFAULT possible.
<li>Do not leak file descriptors in socketpair(2).
<li>Propagate more build variables in the gnu sub-tree.
<li>Add struct sockaddr_storage per RFC2553.
<li>Drop a volatile into the ncr(4) driver; who knows how it worked before.
<li>Crank sparc DFLDSIZ to 24MB.
<li>Make adjtime(2) return an EFAULT for a bad olddelta ptr.
<li>Permit non-broadcast replies in dhclient(8).
<li>ncurses-4.2-990605
<li>In sed(1), make 'G' create a newline if the hold buffer is empty.
<li>Add dot_quad_addr_new() API to libwrap, which uses inet_aton(3) instead of inet_addr(3), and hence can handle masks of 255.255.255.255.
<li>Sparc cs4231 audio support (SS5 audio).
<li>Use inet_aton(3) instead of inet_addr(3) in many programs.
<li>Use mkstemp(3) in httpd(8).
<li>In the resolver, permit '/' in CNAMES to PTRs, same as forward references permit. 
<li>Use __builtin_next_arg() for va_start(), on i386 and m68k, to handle unaligned stdarg processing.
<li>Support subject inclusion in vacation(1).
<li>In ipnat, decode interface aliases before hostnames.
<li>Handle misaligned file struct's coming out of the KERN_FILE sysctl(3) call.
<li>More isakmpd(8) improvements.
<li>Use auto mode by default in ukphy.
<li>Avoid gcc fixinc (We do not want to run it, and even 1 second of machine time skew would screw up the previous avoidance tactic).
<li>Another memory leak fix in the ipsec kernel code.
<li>Change struct statfs use in the kernel, so that mount(8) can print more info.
<li>For NFSv3, prefer TCP connections.
<li>Fix a few more mkstemp(3) checks.
<li>Make install(1) compare work for files &gt; 8G in size.
<li>Tons of man page improvements.
<li>For crontab(1) and vipw(8), check file size change as well as mtime to detect change.
<li>Better headphone/speaker handling in am7930 driver on sparc.
<li>Implement DLT_RAW, DLT_SLIP, and DLT_PPP in bpf
<li>egcs replaces gcc
<li>Some improvements to the libc_r threading code.
<li>Further keynote documentation improvements. 
<li>Move bsd.port.mk and friends into the ports tree.
<li>On hp300, handle hil configuration more robustly.
<li>Numerous -mandoc man page upgrades.
<li>Permit mixed PIC/pic relocations on the sparc.
<li>Change bridge code to use a NETISR.  Significant performance improvement.
<li>Set close-on-exec flag in vi, on files that are opened.
<li>*NULL dereference in wall(1).
<li>Permit threading using libutil/pty.c
<li>Fix exit code in sa(8).
<li>Dynamically allocate memory in sort(1), so that -k has no limit.
<li>Correct handling of out-of-window SYNs in our TCP code.
<li>Fix poll(2) return value.
<li>Add Keynote trust management system.
<li>Support mac68k Classic II video.
<li>swapctl(8) and the necessary kernel support.
<li>Longer delay in the i386 pms(4) probe routine, for Thinkpads.
<li>Correct some DTR handling in pccom(4).
<li>Add <strong>-p</strong> flag to encrypt(1).
<li>Newer version of bktr(4) driver.
<li>ncurses-4.2-990516
<li><font color="#e00000"><strong>Correct some realloc(3) misuses in the fts(3) routines. <a href="errata25.html#fts">A patch is available</a></strong></font>.
<li>Add xe(4) xircom ethernet driver.
<li>Add support for static arp entries that cannot be overwritten.
<li>Many man page fixes.
<li>Numerous performance and reliability fixes to isakmpd(8) and IPSEC.
<li>Some more pthreads fixes.
<li>Fix blowfish CBC mode.
<li>Fix some more ipsec and tcp interaction bugs.
<li>In vmstat(8), increase width of -i field.
<li>Final unicast check ethernet driver fixes for bridging.
<li>Fix bounds control in msgs(1).
<li>Fix 'X' check in gcc printf format checker.
<li>Fix divide by zero in libcurses.
<li><font color="#e00000"><strong>A reliability patch for TCP over IPSEC ESP tunnels. <a href="errata25.html#ipsec1">A patch is available</a></strong></font>.
<li>Improvements to the ss(4) driver.
<li>Fix various endian related problems in nm(1), ranlib(1), strip(1), and size(1).
<li>Do not rotate kerberos logs using newsyslog.conf
<li>Fix xxsize() routines so that they do not call xxopen() and xxclose().
<li>On i386, handle apm segments in low memory.
<li>Add libcurses++.
<li>ncurses-4.2-990424
<li>More improvements to isakmpd(8), and ppp(8).
<li>In sparc cgsix(4) driver, turn off sync so that monitors will go into standby.
<li>Various improvements to the xl(4) driver.
<li>Repair TIOCFLUSH use in telnet(1).
<li>Fix an unlink related bug in cp(1).
<li>For sparc, delay in cpu-forced power-down, so that serial port output does not get garbled. 
<li>Move perl lib files to /usr/libdata/perl5.
<li>For make(1), permit embedded : or ! in target names.
<li>Better range checking in inet_addr(3) functions.
<li>gzip 1.2.4a
<li>Support Vadem pcmcia controllers.
<li>Add 3p man page sub-tree for perl pages.
<li>In ls(1), defer conversion for non-printables till after symbolic link lookup.
<li>For msdosfs, do not require the boot signatures in a filesystem.
<li>Add support for new pipes to fstat(8).
<li>Newer version of AFS code.
<li>perl5.005_03
<li>Y2K improvement in shutdown(8).
<li>solve blocking daemon problem in ftpd(8).
<li>Check for failure of strdup(3) in pax(1).
<li>Greater care in tail(1), when going backwards.
<li>Add wdt(4) driver for Industrial Computer Source PCI-WDT50x watchdog timers.
<li>Implement <strong>-U username</strong> in ps(1).
<li>Add "verbose" command to boot_config(8).
<li>Check correct argument in sliplogin(8).
<li>New kernel hashinit().
<li>More ppp(8) improvements and bug fixes. 
<li>More isakmpd(8) improvements and bug fixes.
<li>In calendar(1), fix offset bug for yearly events.
<li><font color="#e00000"><strong>A reliability patch for ext2fs. <a href="errata25.html#bmap_trap">A patch is available</a></strong></font>.
<li>Repair a mis-handling of non-terminated utmp strings in w(1).
<li>m68k optimized asm version of strlcpy(3).
<li>Do not accept incoming packets on a down interface.
<li>More strict isapnp detection for the isa ep(8) cards.
<li>kcore handling for the m68k ports.
<li><font color="#e00000"><strong>A serious reliability patch for the powerpc port, regarding traps and signals. <a href="errata25.html#powerpc_trap">Patches are available</a></strong></font>.
<li>Support power-down mode in the mac68k port.
<li>Fix a retransmission problem in tcp_newreno.
<li>Fix a sequence wraparound bug in very large tcp transfers.
<li>Greater care with arguments in pwd_mkdb(8).
<li>Support the -susv2 macro in nroff tmac doc-syms.
<li>Save a copy of the dmesg(8) output in /var/run/dmesg.boot.
<li>Improve ddb ps output.
<li>Repair filesystem mounting failure message in mount_msdos(8).
<li>Merge IP-in-IP tunnel code so that both MROUTING and IPSEC versions work together, properly.
<li>Do not let calendar(1) assume that it is run as root.
<li>Fix /tmp cleanup code in lynx(1).
<li>Move ipfstat(8) output files to /var/run to avoid a race.
<li>Reenable TCP_SACK and TCP_FACK, so that development cycle can test them sufficiently.
<li>Various man page fixes.
<li>Various isakmpd(8) fixes and improvements.
<li>Fix probing of ISA ex(4) cards.
<li>More amiga keymaps.
<li>Add yyfix(1), from 4.4BSD.
<li>Merge mkfifo into mknod, so that mknod ends up having support for the <strong>-p</strong> option.
<li>Fix a output buffer overflow in msgrcv(2).
<li>Fix odbm support and permit opening a zero-length hash file.
<li>new true awk, April 16 release.
<li>Support sparc xbox sbus expansion box.
<li>Bug fixes to sparc spif(4), hme(4), be(4) drivers. 
<li>Updated distrib/notes which shipped with the 2.5 release.
</ul>
<p>

This list mentions mostly platform-independent changes.  For a list of changes
made in a particular platform, please check the page for that platform.  If you
find them not listed there, the changes are either (1) not being documented or
(2) are documented here.<br><br>

<hr>
<p>
<h3>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus.html">current</a>.
<br>
</h3>

<hr>
<a href="index.html"><img height=24 width=24 src=back.gif border=0 alt=OpenBSD></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>$OpenBSD: plus26.html,v 1.21 2004/03/28 09:44:05 deraadt Exp $</small>

</body>
</html>
